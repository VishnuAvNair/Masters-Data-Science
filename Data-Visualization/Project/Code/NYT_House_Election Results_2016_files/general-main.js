/**
 * @license almond 0.3.2 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*! Hammer.JS - v2.0.6 - 2015-12-23
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2015 Jorik Tangelder;
 * Licensed under the  license */

//! moment.js
//! version : 2.14.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

//! moment-timezone.js
//! version : 0.5.5
//! author : Tim Wood
//! license : MIT
//! github.com/moment/moment-timezone

/*!
 * Pusher JavaScript Library v3.0.0
 * http://pusher.com/
 *
 * Copyright 2014, Pusher
 * Released under the MIT licence.
 */

/*!
  Chosen, a Select Box Enhancer for jQuery and Prototype
  by Patrick Filler for Harvest, http://getharvest.com
  
  Version 1.2.0
  Full source at https://github.com/harvesthq/chosen
  Copyright (c) 2011-2014 Harvest http://getharvest.com
  
  MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
  This file is generated by `grunt build`, do not edit it by hand.
  */

/*
 * Copyright (c) 2012 Adobe Systems Incorporated. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License. *
 */

/*
 * Copyright (c) 2007-2009 unscriptable.com and John M. Hann
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the “Software”), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 * Except as contained in this notice, the name(s) of the above
 * copyright holders (unscriptable.com and John M. Hann) shall not be
 * used in advertising or otherwise to promote the sale, use or other
 * dealings in this Software without prior written authorization.
 *
 * http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/
 *
 */

function arrayToObject(e){return e.reduce(function(e,t,n){return e[n]=t,e},{})}function initializeHelpers(e,t,n){var r=-5;n.updateLocale("en",{monthsShort:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."]});var s={republican:1237,democrat:2383},o=t.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ"),u=["republican","democrat","green","libertarian","progressive","independent","other","nonpartisan","no-party-affiliation","no-party-designation","yes","no"],a={getSwatchClass:function(t,n){var r=[];return t.election_type=="general"&&(e.indexOf(u,n.party_id)>-1?r.push("eln-"+n.party_id):r.push("eln-other")),t.election_type!="general"&&r.push("eln-"+n.party_id+"-"+n.order),t.election_type!="general"&&t.race_type=="president"&&r.push(this.slugify(n.name_display)),r.join(" ")},delegates_to_win:function(e){if(!e||!s[e])return;return this.votesFormat(s[e])},slugify:function(e){var t=e;return t=t.replace(/^\s+|\s+$/g,""),t=t.toLowerCase(),t=t.replace(/[^a-z0-9 \n-]/g,"").replace(/[\s\n]+/g,"-").replace(/-+/g,"-"),t},slugifyName:function(e){var t=e.first_name?" ":"";return this.slugify([e.first_name,e.last_name].join(t))},spriteName:function(e,t,n){return n?this.slugify([t,e.last_name,e.first_name].join("-")):this.slugify(e.last_name)},dateFormat:function(e){return n(e).tz("America/New_York").utcOffset(r).format("MMM D, YYYY")},runoffDateFormat:function(e){return n(e).format("MMM D, YYYY")},dateFormatWithoutYear:function(e){return n(e).tz("America/New_York").utcOffset(r).format("MMM D")},utcDateFormat:function(e){return n(e).tz("Etc/GMT+0").format("MMM D")},getPubDate:function(){var e=new Date;return n(e).tz("America/New_York").utcOffset(r).format("YYYYMMDD")},getPubTime:function(){var e=new Date;return n(e).tz("America/New_York").utcOffset(r).format("YYYYMMDDHHmmss")},timeFormat:function(e){return n(e).tz("America/New_York").utcOffset(r).format("h:mm A")+" ET"},secondFormat:function(e){return n(e).tz("America/New_York").utcOffset(r).format("h:mm:ss A")+" ET"},timeFromNow:function(e){return n(e).fromNow().replace(" ago","").replace(/^an{0,1}/,"1").replace(/\sminutes{0,1}/,"m").replace(/\shours{0,1}/,"h").replace(" few seconds","m")},formatElectionDate:function(e){var t=o.parse(e+"T00:00:00.000Z");return this.utcDateFormat(t)},formatISOString:function(e){return n(e).tz("America/New_York").utcOffset(r).format()},getUpdateTime:function(t){return this.timeFormat(e.last(e.pluck(t,"updated").sort()))},getLoadId:function(t){return e.last(e.pluck(t,"load_id").sort())},votesFormat:function(e){return isNaN(e)?"":t.format(",")(e)},estVotesFormat:function(e){if(isNaN(e))return"";if(e==0)return"0";if(e<100)return"<100";var t=e>=1e3?1e3:100,n=Math.round(e/t)*t;return"~"+this.votesFormat(n)},pollFormat:t.format("0.1f"),partyTitle:function(e){return l[e]?l[e].race_title||l[e].nyt_display+" Party":e},partyPlural:function(e){return l[e]?l[e].plural:e},partyDisplay:function(e){return l[e]?l[e].nyt_display:e},partyAbbreviation:function(e){return l[e]?l[e].nyt_abbr:e},ballotMeasureTitle:function(e){var t=e.split(" — ");return t.length!=2?e:'<span class="eln-kicker">'+t[0]+"</span>"+'<span class="eln-title">'+t[1]+"</span>"},raceType:function(e){var t=raceExternal[e.office];return this.isPrimary(e)?"primary":this.isRace(e)?"race":t&&t.hidenonracetype&&!this.isRace(e)?null:this.raceOffice(e).toLowerCase()},isRace:function(e){var t=raceExternal[e.office];if(t){if(t.israce=="n")return!1;if(t.ismixedrace)return!/\bretain\b/i.test(e.race_name)}return!0},isPrimary:function(e){return e.election_type=="primary"||e.election_type=="caucus"},incumbentTitle:function(e){switch(e.race_type){case"senate":return"Senator";case"house":return"Representative";case"governor":return"Governor";case"lieutenant-governor":return"Lt. Gov.";case"district-judge":case"district-court":case"municipal-court-judge":case"appeals-court":case"circuit-court":return"Judge";case"supreme-court":return"Justice";case"state-senate":return"State Senator";case"state-house":if(/representatives/i.test(e.office))return"Representative";if(/assembly/i.test(e.office))return"Assemblymember";if(/delegates/i.test(e.office))return"Delegate";default:return"Incumbent"}},prefixState:function(e){var t=raceExternal[e.office];return t&&t.hidestate=="y"?!1:!0},combine:function(){return e.compact(e.toArray(arguments)).join(" ")},commify:function(t){var n=e.initial(t),r=e.last(t);return n.join(", ")+" and "+r},ordinalize:function(e,t){if(/^\d+$/.test(e)){var n=+e;return this.combine(this.ordinalNumber(n),t)}return this.combine(t,e)},ordinalNumber:function(e){var t=e%10,n=e%100;return t==1&&n!=11?e+"st":t==2&&n!=12?e+"nd":t==3&&n!=13?e+"rd":e+"th"},quote:function(e){return"&ldquo;"+e+"&rdquo;"},raceOffice:function(e,t){t||(t={});var n=raceExternal[e.office];return n&&n.longname&&n.shortname?t.long?n.longname:n.shortname:e.office},specificRace:function(e){var t=raceData[e.race_id];if(t&&t.specific)return t.specific;var n=e.race_name;if(e.race_type=="ballot-measure")return n;var r=null;if(r=n.match(/\bdistrict (\w+).*position (\w+)$/i))return this.ordinalize(r[1],"District")+" – Position "+r[2];if(r=n.match(/\bdistrict (\w+).*district attorney$/i))return this.ordinalize(r[1]);if(r=n.match(/\bcounty auditor (\w+).*county$/i))return this.ordinalize(r[1]);if(r=n.match(/\bdistrict (\w+)$/i))return this.ordinalize(r[1],"District");if(r=n.match(/\bposition (\w+)$/i))return"Position "+r[1];if(r=n.match(/\b(\d)(th|nd|rd|st) (Circuit+)$/))return this.combine(this.ordinalize(r[1]),r[3]);if(r=n.match(/\b(\d)(th|nd|rd|st) (\w+)$/))return this.combine(this.ordinalize(r[1],"District"),r[3]);var i=e.race_name.replace(e.office,"").trim();return e.office=="Water Commissioner"&&(i=i.replace("-","—").replace(" Year","-Year")),e.office=="York County Commissioner"&&(i=i.replace(" -","")),e.office=="Circuit Court"&&(i=i.replace(" Seat ",", Seat ")),e.office=="Los Angeles County Board of Supervisors"&&(i="District "+i.replace(" LA","")),i},simpleResultsTitle:function(e){var t=this.prefixState(e)?this.getStateFromPostal(e.state_id).name:null,n=this.raceOffice(e),r=this.specificRace(e),i="Results";return a.combine(t,n,r,i)},simpleRaceTitle:function(e){if(e.election_type=="general")return e.race_name;if(e.election_type=="special-primary")return"Special Primary";if(e.election_type=="special-general")return"Special Election";if(e.election_type=="open-primary")return"Open Primary";var t="Race",n=this.partyTitle(e.party_id);if(e.election_type=="caucus")t="Caucuses";else if(e.election_type=="primary")t="Primary";else if(e.election_type=="runoff")t=e.party_id?"Primary Runoff":"Runoff";else if(e.election_type=="ballot-issue")return e.race_name+": "+e.seat_name;return e.state_id=="DC"&&e.party_id=="republican"?t="Convention":e.state_id=="WY"&&e.party_id=="republican"&&(t="Conventions"),n+" "+t},getRaceTitle:function(t,n){var r=e.where(n,{state_slug:t.state_slug}).length!=n.length;return r||n.length==1?t.race_name:this.partyPlural(t.party_id)},candidateImage:function(t){return e.indexOf(p,this.slugify(t))>-1},getLeader:function(e){if(e.report&&e.result=="winner"&&e.candidates[0].winner)return e.candidates[0];if(e.votes==0||e.uncontested||!e.candidates.length)return null;if(e.candidates.length==1)return e.candidates[0];var t=e.candidates[0].votes>e.candidates[1].votes?e.candidates[0]:null;return t},getLeaderMargin:function(e){var t=this.getLeader(e);if(e.candidates.length>1){var n=t.percent-e.candidates[1].percent;return"+"+this.pollFormat(n)}return""},getRollup:function(e,n){var r=e.candidates.slice(n),i=t.sum(r,function(e){return e.votes}),s=i?this.pollFormat(i/e.votes*100):"0.0";return{candidate_id:"candidate-rollup",last_name:"Others",name_display:"Others",votes:i,percent:+s,percent_display:String(s)}},getMapLeaders:function(t){var n=this,r={candidate_id:"no-results",last_name:"No results",name_display:"No results",not_a_candidate:!0,votes:0},i={candidate_id:"tied",last_name:"Tied",name_display:"Tied",not_a_candidate:!0,votes:0},s={candidate_id:"no-election",last_name:"No election",name_display:"No election",not_a_candidate:!0,votes:0},o={party_id:"democrat",candidate_id:"democrat",last_name:"Democrat",name_display:"Democrat",not_a_candidate:!1,votes:0},u={party_id:"republican",candidate_id:"republican",last_name:"Republican",name_display:"Republican",not_a_candidate:!1,votes:0};if(t.type=="lead-win"&&t.party_id){var a=e.where(t.races,{party_id:t.party_id}),f=[],l=e.chain(a).map(function(e){var t=n.getLeader(e);return t==null&&(e.result&&e.candidates.length&&e.candidates[0].winner?t=e.candidates[0]:e.votes==0?t=r:e.candidates[0].votes==e.candidates[1].votes&&(t=i)),t}).sortBy(function(e){return e&&e.candidate_id=="tied"}).sortBy(function(e){return e&&e.candidate_id=="no-results"}).filter(function(t){if(!t)return;var n=e.indexOf(f,t.last_name)>-1;return n?!1:(f.push(t.last_name),!0)}).value();return l.push(s),e.groupBy(l,"not_a_candidate")}if(t.type=="results"){var c=t.races[0],h=c.townships&&c.townships.length>1?c.townships:c.counties;return c.state_house_districts&&c.state_house_districts.length>1&&(h=c.state_house_districts),c.congressional_districts&&c.congressional_districts.length>1&&(h=c.congressional_districts),c.convention_districts&&c.convention_districts.length>1&&(h=c.convention_districts),c.wards&&c.wards.length>1&&(h=c.wards),e.chain(h).pluck("results").map(function(t){var n=[],s=e.omit(t,"other-999999"),o=e.max(s);return o==0?r:(e.each(s,function(t,r){if(t==o){var i=e.findWhere(c.candidates,{candidate_key:r});n.push(i)}}),n.length>1?i:n[0])}).sortBy(function(e){return e?-e.votes:0}).sortBy(function(e){return e&&(e.candidate_id=="no-results"||e.candidate_id=="tied")}).uniq().value()}var a=e.where(t.races,{party_id:t.party_id}),f=[],l=e.chain(a).map(function(e){var t=n.getLeader(e);return t==null&&(e.votes==0?t=r:e.candidates[0].votes==e.candidates[1].votes&&(t=i)),t}).sortBy(function(e){return e&&e.candidate_id=="tied"}).sortBy(function(e){return e&&e.candidate_id=="no-results"}).value();return l.push(o),l.push(u),l.push(s),e.groupBy(l,"not_a_candidate")},getLeadersForMenu:function(t){var n=e.filter(t.candidates,function(e){return!e.rollup});if(n.length>2)return t.precincts_reporting&&n[1].percent-n[2].percent<3?n.slice(0,3):n.slice(0,2);if(n.length>1)return n},countyTableMaxCandidates:function(t){var n=t.townships&&t.townships.length>1?t.townships:t.counties,r=[],i=e.chain(n).pluck("results").map(function(t){var n=e.max(t);if(n==0)return null;var r;return e.each(t,function(e,t){e==n&&(r=t)}),r}).filter(function(e){return e}).uniq().value();return i.length>2?i.length:2},getGeoLeader:function(t,n){var r=e.chain(t.results).map(function(e,t){return e==n?t:null}).filter(function(e){return e}).value();if(r.length==1)return r[0];return},getPrecinctCountDisplay:function(e){var t=e.precincts_total==1?"precinct":"precincts";return this.votesFormat(e.precincts_reporting)+" of "+this.votesFormat(e.precincts_total)+" "+t},getPrecinctsRemainingDisplay:function(e){String(+e.precincts_total)===e.precincts_total&&(e.precincts_total=+e.precincts_total),String(+e.precincts_reporting)===e.precincts_reporting&&(e.precincts_reporting=+e.precincts_reporting);if(typeof e.precincts_total!="number")return"";if(typeof e.precincts_reporting!="number")return"";var t=+e.precincts_total- +e.precincts_reporting,n=t==1?"precinct":"precincts";return t+" "+n+" left"},getPollTime:function(e){return e.indexOf("midnight")>-1?"Midnight ET":e.indexOf("evening")>-1?"Evening":e.split(" ").slice(-3).join(" ").replace(".","").replace(":00","")},getReportingForDashboard:function(e){if(!e.report){var t=e.poll_display?this.getPollTime(e.poll_display):"";return t}return e.reporting_display.replace("% reporting","%")},getGeoReportingDisplay:function(e){if(e.precincts===0)return"0% reporting";var t=String(Math.round(e.reporting/e.precincts*100));return t==="0"&&e.votes>0?t="<1":t=="100"&&e.reporting!=e.precincts?t="99":+t>100&&(t="100"),t+'<span class="eln-percent-sign">%</span>'},getStateFromPostal:function(e){return v[e]},getStateFromSlug:function(t){return e.findWhere(d,{slug:t})},dashboardRaces:function(t,n){if(!t.length)return;var r=t[0].election_date,i=this,s=n.candidates.slice(0)||[];return racesByParty=e.chain(t).sortBy("state_slug").filter(function(e){return e.party_id==="republican"||e.party_id=="democrat"}).groupBy("party_id").map(function(t){var r=e.chain(t).sortBy(function(e){return n.pollsSort&&e.poll_display?+i.getPollTime(e.poll_display).split(" ")[0]:!1}).sortBy(function(e){return n.delegateSort?-e.delegates:!1}).map(function(t){var n=i.getStateFromPostal(t.state_id);return e.extend({state_name:n.name,state_abbrev:n.nyt_abbrev},t)}).value(),o=[],u=e.chain(r).pluck("candidates").flatten().map(function(t){if(e.indexOf(o,t.candidate_id)>-1)return;return o.push(t.candidate_id),t}).filter(e.isObject).value(),a=e.chain(u).where({rollup:!1}).filter(function(t){return!s.length||e.indexOf(s,t.last_name.toLowerCase())>-1}).sortBy(function(e){return e.last_name}).sortBy(function(t){return e.indexOf(s,t.last_name.toLowerCase())}).map(function(t){var n=e.reduce(r,function(n,r){var i=e.findWhere(r.candidates,{candidate_id:t.candidate_id});return i&&(n+=i.delegates),n},0),i=t.us_delegates||0,s=e.pick(t,["candidate_id","first_name","last_name","name_display","party_id"]);return e.extend({date_delegates:n,total_delegates:i},s)}).sortBy(function(e){return-e.total_delegates}).value(),f=e.reduce(e.pluck(a,"date_delegates"),function(e,t){return e+t},0);return r=n.max_races&&n.max_races<r.length?r.slice(0,n.max_races):r,{load_id:i.getLoadId(r),party_id:r[0].party_id,total_date_delegates:f,races:e.sortBy(r,function(e){return!e.report}),candidates:a}}).sortBy(function(e){return r=="2016-06-07"?e.party_id!="democrat":e.party_id!="republican"}).value()},dashboardRacesGeneral:function(t){if(!t.races)return{};var n=this,r=t.candidates.slice(0)||[],i=e.chain(t.races).sortBy(function(e){return t.pollsSort&&e.poll_display?+n.getPollTime(e.poll_display).split(" ")[0]:!1}).sortBy(function(e){return e.sort_order?e.sort_order:1e3}).map(function(t){var r=n.getStateFromPostal(t.state_id);return e.extend({state_name:r.name,state_abbrev:r.nyt_abbrev},t)}).value(),s=[],o=e.chain(i).pluck("candidates").flatten().map(function(t){if(e.indexOf(s,t.candidate_id)>-1)return;return s.push(t.candidate_id),t}).filter(e.isObject).value(),u=e.chain(o).filter(function(t){return!r.length||e.indexOf(r,t.last_name.toLowerCase())>-1}).sortBy(function(e){return e.last_name}).sortBy(function(t){return e.indexOf(r,t.last_name.toLowerCase())}).map(function(t){return e.pick(t,["candidate_id","first_name","last_name","name_display","party_id"])}).value();return i=t.max_races&&t.max_races<i.length?i.slice(0,t.max_races):i,{races:e.sortBy(i,function(e){return!e.report}),candidates:u}},racesTable:function(t,n){var r=e.chain(t).reject(function(e){return e.party_id==="oth"||e.party_id==="libertarian"||e.party_id==="cst"}).sortBy("state_slug").sortBy(function(e){return!e.report}).sortBy(function(e){return n.adminSort?+e.state_sort:!1}).sortBy(function(e){return e.party_id==="republican"?1:2}).groupBy("state_slug").value();return r=e.toArray(r),n&&n.max_races&&(r=r.slice(0,n.max_races)),r=e.sortBy(r,function(e){return!e[0].report}),r},getGroupCandidates:function(t){var n=t.race,r=t.options&&t.options.show_parties,i=["democrat","republican","other"],s=["yes","no"],o=[],u=this;return r?e.each(i,function(e){var t=u.getCandidate(n,e,r);o.push(t)}):n.race_type=="ballot-measure"||n.candidates&&(n.candidates[0].party_id=="yes"||n.candidates[0].party_id=="no")?e.each(s,function(e){var t=u.getCandidate(n,e);o.push(t)}):e.each(n.candidates.slice(0,2),function(e){o.push(e)}),o},getCandidate:function(t,n,r){if(n=="other"&&r){var i;return e.each(t.candidates,function(e){!i&&e.party_id!="republican"&&e.party_id!="democrat"&&(i=e)}),e.extend({},i,{party_id:"other"})||{party_id:"other"}}return e.findWhere(t.candidates,{party_id:n})||{}},getPartyTotals:function(t,n,r){if(!t||!t.length)return[];var i=this,s=["democrat","republican","other"],o=t[0].race_type,u=o=="president",a=e.map(s,function(e){var t=l[e],r=n&&n[e]?n[e]:0;return{party_id:e,name_display:e=="other"?"Ind.":t.plural,name_abbr:e=="other"?"Ind.":t.nyt_abbr,count:r,count_percent:0,votes:0,percent:0,change:0}}),a=e.object(s,a);return e.each(t,function(t,n){if(t.election_type.indexOf("special")>-1)return;e.each(t.candidates,function(e,s){var o=a[e.party_id]||a.other;o&&(o.votes+=e.votes,i.candidatePartyGetsWin(t,e,s,r)?(u&&e.electoral_votes?o.count+=e.electoral_votes:o.count++,t.race_type!="house"&&t.gain&&(o.change++,t.lost_seat&&a[t.lost_seat].change--)):u&&e.electoral_votes>0&&(o.count+=e.electoral_votes),n==0&&u&&a[e.party_id]&&(e.party_id=="republican"||e.party_id=="democrat")&&(o.name_display=e.name_display,o.name_abbr=e.last_name))})}),a},candidatePartyGetsWin:function(t,n,r,s){s=s||{};var o=e.where(t.candidates,{runoff:!0,party_id:n.party_id}),u=s[t.race_id]?!0:!1;return t.result=="winner"&&n.winner||t.result=="runoff"&&n.runoff&&o.length==2&&r===0||!t.result&&u&&i===0},getParty:function(t){if(!t)return{slug:"other"};var n=h[t.toUpperCase()];return n?e.extend({slug:this.slugify(n.name)},n):{slug:t}},officeAbbrev:function(e){return e.race_type=="president"?"Pres.":e.race_type=="senate"?"Sen.":e.race_type=="governor"?"Gov.":e.office},yesNoRace:function(e){return e.candidates.length==2&&(e.race_type=="ballot-measure"||e.candidates[0].party_id=="yes"||e.candidates[0].party_id=="no")},openElection:function(t){return e.where(t.candidates,{party_id:"democrat"}).length>1||e.where(t.candidates,{party_id:"republican"}).length>1},expectedVoteMargin:function(t,n){var r="vote_share_expected",i=t.current[r],s=e.chain(i).pairs().map(function(r){if(r[0]=="other")return!1;var i=n[t.state+"--"+r[0]]||n[r[0]]||{party_id:"independent"};return{id:r[0],party_id:i.party_id,vote:e.isArray(r[1])?r[1][2]:r[1]}}).filter(e.identity).sortBy("vote").value().reverse();return s.length?{id:s[0].id,party:s[0].party_id,party_2nd:s[1].party_id,state:t.state,margin:s[0].vote-s[1].vote}:{margin:Number.NaN}}},f=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan.","Feb.","March","April","May","June","July","Aug.","Sep.","Oct.","Nov.","Dec."]}),l=[{id:"DEM",race_title:"Democratic",name:"Democrat",nyt_display:"Democrat",plural:"Democrats",nyt_abbr:"Dem."},{id:"GOP",race_title:"Republican",name:"Republican",nyt_display:"Republican",plural:"Republicans",nyt_abbr:"Rep."},{id:"IND",name:"Independent",nyt_display:"Independent",plural:"Independents",nyt_abbr:"Ind.",third_party:!0},{id:"GRN",name:"Green",nyt_display:"Green",plural:"Green",nyt_abbr:"Green",third_party:!0},{id:"UNA",name:"Independent",nyt_display:"Independent",plural:"Independent",nyt_abbr:"Ind.",third_party:!0},{id:"WF",name:"Working Families",nyt_display:"Working Families",plural:"Working Families",nyt_abbr:"W.F.",third_party:!0},{id:"NPP",name:"No party preference",nyt_display:"Independent",plural:"Independent",nyt_abbr:"Ind.",third_party:!0},{id:"PFP",name:"Peace and Freedom",nyt_display:"Peace and Freedom",plural:"Peace and Freedom",nyt_abbr:"P.F.",third_party:!0},{id:"LIB",name:"Libertarian",nyt_display:"Libertarian",plural:"Libertarians",nyt_abbr:"Lib.",third_party:!0},{id:"CST",name:"Constitution",nyt_display:"Constitution",plural:"Constitution",nyt_abbr:"Const.",third_party:!0},{id:"CON",name:"Conservative",nyt_display:"Conservative",plural:"Conservative",nyt_abbr:"Con.",third_party:!0},{id:"PSL",name:"P.S.L.",nyt_display:"P.S.L.",plural:"Party for Socialism and Liberation",nyt_abbr:"P.S.L.",third_party:!0},{id:"INP",name:"Independence",nyt_display:"Independence",plural:"Independence",nyt_abbr:"Indep.",third_party:!0},{id:"RP",name:"Reform",nyt_display:"Reform",plural:"Reform",nyt_abbr:"Reform",third_party:!0},{id:"OTH",name:"Other",nyt_display:"Independent",plural:"Independents",nyt_abbr:"Ind.",third_party:!0},{id:"NPA",name:"No party affiliation",nyt_display:"Independent",plural:"Independent",nyt_abbr:"Ind.",third_party:!0},{id:"OPN",name:"Independent",nyt_display:"Independent",plural:"Independent",nyt_abbr:"Ind.",third_party:!0},{id:"AKI",name:"Alaskan Independence",nyt_display:"Alaskan Independence",plural:"Alaskan Independence",nyt_abbr:"Alaska Ind.",third_party:!0},{id:"BFA",name:"Independent",nyt_display:"Independent",plural:"Independents",nyt_abbr:"Ind.",third_party:!0},{id:"NP",name:"Nonpartisan",nyt_display:"Nonpartisan",plural:"Nonpartisan",nyt_abbr:"Nonpartisan",third_party:!0},{id:"NPP",name:"Independent",nyt_display:"Independent",plural:"Independents",nyt_abbr:"Ind.",third_party:!0},{id:"AMP",name:"America’s Party",nyt_display:"America’s Party",plural:"America’s Party",nyt_abbr:"A.P.",third_party:!0},{id:"PRO",name:"Prohibition",nyt_display:"Prohibition",plural:"Prohibition",nyt_abbr:"Prohibition",third_party:!0},{id:"ADP",name:"Independent",nyt_display:"Independent",plural:"Independents",nyt_abbr:"Ind.",third_party:!0},{id:"SPU",name:"Socialist U.S.A.",nyt_display:"Socialist U.S.A.",plural:"Socialist U.S.A.",nyt_abbr:"Soc. U.S.A.",third_party:!0},{id:"VET",name:"Veteran’s Party of America",nyt_display:"Veteran’s Party of America",plural:"Veteran’s Party of America",nyt_abbr:"Vet.",third_party:!0},{id:"IAP",name:"Independent American",nyt_display:"Independent American",plural:"Independent American",nyt_abbr:"Ind. Am.",third_party:!0},{id:"PCF",name:"Pacifist",nyt_display:"Pacifist",plural:"Pacifist",nyt_abbr:"Pacifist",third_party:!0},{id:"SWP",name:"Socialist Workers",nyt_display:"Socialist Workers",plural:"Socialist Workers",nyt_abbr:"S.W.",third_party:!0},{id:"UTY",name:"Unity",nyt_display:"Unity",plural:"Unity",nyt_abbr:"Unity",third_party:!0},{id:"PEC",name:"Petitioning Candidate",nyt_display:"Petitioning Candidate",plural:"Petitioning Candidate",nyt_abbr:"",third_party:!0},{id:"DCG",name:"D.C. Statehood Green",nyt_display:"D.C. Statehood Green",plural:"D.C. Statehood Green",nyt_abbr:"D.C. S.G.",third_party:!0},{id:"IPD",name:"Independent",nyt_display:"Independent",plural:"Independents",nyt_abbr:"Ind.",third_party:!0},{id:"SHP",name:"Independent",nyt_display:"Independent",plural:"Independents",nyt_abbr:"Ind.",third_party:!0},{id:"LMN",name:"Independent",nyt_display:"Independent",plural:"Independents",nyt_abbr:"Ind.",third_party:!0},{id:"UNR",name:"Unenrolled",nyt_display:"Unenrolled",plural:"Unenrolled",nyt_abbr:"U",third_party:!0},{id:"UNI",name:"United Independent",nyt_display:"United Independent",plural:"United Independent",nyt_abbr:"U.I.",third_party:!0},{id:"NPD",name:"No party designation",nyt_display:"Independent",plural:"Independent",nyt_abbr:"Ind.",third_party:!0},{id:"UST",name:"U.S. Taxpayers",nyt_display:"U.S. Taxpayers",plural:"U.S. Taxpayers",nyt_abbr:"U.S.T.",third_party:!0},{id:"NLP",name:"Natural Law",nyt_display:"Natural Law",plural:"Natural Law",nyt_abbr:"N.L.",third_party:!0},{id:"WCP",name:"Working Class",nyt_display:"Working Class",plural:"Working Class",nyt_abbr:"W.C.",third_party:!0},{id:"WW",name:"Workers World",nyt_display:"Workers World",plural:"Workers World",nyt_abbr:"W.W.",third_party:!0},{id:"WEQ",name:"Women’s Equality",nyt_display:"Women’s Equality",plural:"Women’s Equality",nyt_abbr:"W.E.",third_party:!0},{id:"PAG",name:"Pacific Green",nyt_display:"Pacific Green",plural:"Pacific Green",nyt_abbr:"P.G.",third_party:!0},{id:"PRG",name:"Progressive",nyt_display:"Progressive",plural:"Progressive",nyt_abbr:"Prog.",third_party:!0},{id:"AMR",name:"American Party",nyt_display:"American Party",plural:"American Party",nyt_abbr:"Oth.",third_party:!0},{id:"LUN",name:"Liberty Union",nyt_display:"Liberty Union",plural:"Liberty Union",nyt_abbr:"L.U.",third_party:!0},{id:"IP",name:"Independent Party",nyt_display:"Independent Party",plural:"Independent Party",nyt_abbr:"I.P.",third_party:!0},{id:"MNT",name:"Mountain Party",nyt_display:"Mountain Party",plural:"Mountain Party",nyt_abbr:"Mount.",third_party:!0}],c=e.map(l,function(e){return e.party_id=a.slugify(e.name),e.party_id}),h=e.indexBy(l,"id");l=e.object(c,l);var p=["fiorina","rubio","christie","huckabee","bush","kasich","gilmore","carson","trump","santorum","paul","cruz","clinton","omalley","sanders"],d=[{slug:"alabama",name:"Alabama",nyt_abbrev:"Ala.",postal:"AL",nyt_region:"S",fipscode:1e3},{slug:"alaska",name:"Alaska",nyt_abbrev:"Alaska",postal:"AK",nyt_region:"W",fipscode:2e3},{slug:"arizona",name:"Arizona",nyt_abbrev:"Ariz.",postal:"AZ",nyt_region:"W",fipscode:4e3},{slug:"arkansas",name:"Arkansas",nyt_abbrev:"Ark.",postal:"AR",nyt_region:"S",fipscode:5e3},{slug:"california",name:"California",nyt_abbrev:"Calif.",postal:"CA",nyt_region:"W",fipscode:6e3},{slug:"colorado",name:"Colorado",nyt_abbrev:"Colo.",postal:"CO",nyt_region:"W",fipscode:8e3},{slug:"connecticut",name:"Connecticut",nyt_abbrev:"Conn.",postal:"CT",nyt_region:"NE",fipscode:9e3},{slug:"delaware",name:"Delaware",nyt_abbrev:"Del.",postal:"DE",nyt_region:"NE",fipscode:1e4},{slug:"district-of-columbia",name:"District of Columbia",nyt_abbrev:"D.C.",postal:"DC",nyt_region:"NE",fipscode:11e3},{slug:"florida",name:"Florida",nyt_abbrev:"Fla.",postal:"FL",nyt_region:"S",fipscode:12e3},{slug:"georgia",name:"Georgia",nyt_abbrev:"Ga.",postal:"GA",nyt_region:"S",fipscode:13e3},{slug:"hawaii",name:"Hawaii",nyt_abbrev:"Hawaii",postal:"HI",nyt_region:"W",fipscode:15e3},{slug:"idaho",name:"Idaho",nyt_abbrev:"Idaho",postal:"ID",nyt_region:"W",fipscode:16e3},{slug:"illinois",name:"Illinois",nyt_abbrev:"Ill.",postal:"IL",nyt_region:"MW",fipscode:17e3},{slug:"indiana",name:"Indiana",nyt_abbrev:"Ind.",postal:"IN",nyt_region:"MW",fipscode:18e3},{slug:"iowa",name:"Iowa",nyt_abbrev:"Iowa",postal:"IA",nyt_region:"MW",fipscode:19e3},{slug:"kansas",name:"Kansas",nyt_abbrev:"Kan.",postal:"KS",nyt_region:"MW",fipscode:2e4},{slug:"kentucky",name:"Kentucky",nyt_abbrev:"Ky.",postal:"KY",nyt_region:"S",fipscode:21e3},{slug:"louisiana",name:"Louisiana",nyt_abbrev:"La.",postal:"LA",nyt_region:"S",fipscode:22e3},{slug:"maine",name:"Maine",nyt_abbrev:"Me.",postal:"ME",nyt_region:"NE",fipscode:23e3},{slug:"maryland",name:"Maryland",nyt_abbrev:"Md.",postal:"MD",nyt_region:"NE",fipscode:24e3},{slug:"massachusetts",name:"Massachusetts",nyt_abbrev:"Mass.",postal:"MA",nyt_region:"NE",fipscode:25e3},{slug:"michigan",name:"Michigan",nyt_abbrev:"Mich.",postal:"MI",nyt_region:"MW",fipscode:26e3},{slug:"minnesota",name:"Minnesota",nyt_abbrev:"Minn.",postal:"MN",nyt_region:"MW",fipscode:27e3},{slug:"mississippi",name:"Mississippi",nyt_abbrev:"Miss.",postal:"MS",nyt_region:"S",fipscode:28e3},{slug:"missouri",name:"Missouri",nyt_abbrev:"Mo.",postal:"MO",nyt_region:"MW",fipscode:29e3},{slug:"montana",name:"Montana",nyt_abbrev:"Mont.",postal:"MT",nyt_region:"W",fipscode:3e4},{slug:"nebraska",name:"Nebraska",nyt_abbrev:"Neb.",postal:"NE",nyt_region:"MW",fipscode:31e3},{slug:"nevada",name:"Nevada",nyt_abbrev:"Nev.",postal:"NV",nyt_region:"W",fipscode:32e3},{slug:"new-hampshire",name:"New Hampshire",nyt_abbrev:"N.H.",postal:"NH",nyt_region:"NE",fipscode:33e3},{slug:"new-jersey",name:"New Jersey",nyt_abbrev:"N.J.",postal:"NJ",nyt_region:"NE",fipscode:34e3},{slug:"new-mexico",name:"New Mexico",nyt_abbrev:"N.M.",postal:"NM",nyt_region:"W",fipscode:35e3},{slug:"new-york",name:"New York",nyt_abbrev:"N.Y.",postal:"NY",nyt_region:"NE",fipscode:36e3},{slug:"north-carolina",name:"North Carolina",nyt_abbrev:"N.C.",postal:"NC",nyt_region:"S",fipscode:37e3},{slug:"north-dakota",name:"North Dakota",nyt_abbrev:"N.D.",postal:"ND",nyt_region:"MW",fipscode:38e3},{slug:"ohio",name:"Ohio",nyt_abbrev:"Ohio",postal:"OH",nyt_region:"MW",fipscode:39e3},{slug:"oklahoma",name:"Oklahoma",nyt_abbrev:"Okla.",postal:"OK",nyt_region:"S",fipscode:4e4},{slug:"oregon",name:"Oregon",nyt_abbrev:"Ore.",postal:"OR",nyt_region:"W",fipscode:41e3},{slug:"pennsylvania",name:"Pennsylvania",nyt_abbrev:"Pa.",postal:"PA",nyt_region:"NE",fipscode:42e3},{slug:"rhode-island",name:"Rhode Island",nyt_abbrev:"R.I.",postal:"RI",nyt_region:"NE",fipscode:44e3},{slug:"south-carolina",name:"South Carolina",nyt_abbrev:"S.C.",postal:"SC",nyt_region:"S",fipscode:45e3},{slug:"south-dakota",name:"South Dakota",nyt_abbrev:"S.D.",postal:"SD",nyt_region:"MW",fipscode:46e3},{slug:"tennessee",name:"Tennessee",nyt_abbrev:"Tenn.",postal:"TN",nyt_region:"S",fipscode:47e3},{slug:"texas",name:"Texas",nyt_abbrev:"Tex.",postal:"TX",nyt_region:"S",fipscode:48e3},{slug:"utah",name:"Utah",nyt_abbrev:"Utah",postal:"UT",nyt_region:"W",fipscode:49e3},{slug:"vermont",name:"Vermont",nyt_abbrev:"Vt.",postal:"VT",nyt_region:"NE",fipscode:5e4},{slug:"virginia",name:"Virginia",nyt_abbrev:"Va.",postal:"VA",nyt_region:"S",fipscode:51e3},{slug:"washington",name:"Washington",nyt_abbrev:"Wash.",postal:"WA",nyt_region:"W",fipscode:53e3},{slug:"west-virginia",name:"West Virginia",nyt_abbrev:"W.Va.",postal:"WV",nyt_region:"NE",fipscode:54e3},{slug:"wisconsin",name:"Wisconsin",nyt_abbrev:"Wis.",postal:"WI",nyt_region:"MW",fipscode:55e3},{slug:"wyoming",name:"Wyoming",nyt_abbrev:"Wyo.",postal:"WY",nyt_region:"W",fipscode:56e3},{slug:"american-samoa",name:"American Samoa",nyt_abbrev:"A.S.",postal:"AS",nyt_region:"",fipscode:null},{slug:"guam",name:"Guam",nyt_abbrev:"Guam",postal:"GU",nyt_region:"",fipscode:null},{slug:"northern-mariana-islands",name:"Northern Mariana Islands",nyt_abbrev:"M.P.",postal:"NI",nyt_region:"",fipscode:null},{slug:"puerto-rico",name:"Puerto Rico",nyt_abbrev:"P.R.",postal:"PR",nyt_region:"",fipscode:null},{slug:"virgin-islands",name:"Virgin Islands",nyt_abbrev:"V.I.",postal:"VI",nyt_region:"",fipscode:null},{slug:"united-states",name:"United States",nyt_abbrev:"U.S.",postal:"US",nyt_region:"",fipscode:null}],v=e.indexBy(d,"postal");return a}var googletag=googletag||{};googletag.cmd=googletag.cmd||[],function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript";var t="https:"==document.location.protocol;e.src=(t?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}(),window.magnum=function(){var e,t,n,r,i={},s=[],o=document.getElementsByTagName("html")[0],u="viewport",a="(\\b|\\s)"+u+"\\-(small|medium|large)(\\-([0-9]|[1-9][0-9]|1[0-9][0-9]))?\\b",f=new RegExp(a,"g"),l=[{key:"small",val:315},{key:"small-10",val:450},{key:"small-20",val:600},{key:"medium",val:720},{key:"medium-10",val:765},{key:"medium-20",val:855},{key:"medium-30",val:960},{key:"medium-31",val:975},{key:"medium-40",val:1005},{key:"medium-50",val:1020},{key:"medium-60",val:1050},{key:"large",val:1080},{key:"large-10",val:1125},{key:"large-11",val:1155},{key:"large-20",val:1200},{key:"large-21",val:1215},{key:"large-30",val:1245},{key:"large-40",val:1280},{key:"large-41",val:1335},{key:"large-50",val:1375},{key:"large-51",val:1410},{key:"large-60",val:1607},{key:"large-70",val:1650},{key:"large-80",val:2030}],c=function(e,t){var n,r;if(!e)return!1;if(typeof Array.prototype.indexOf=="function")return e.indexOf(t)!==-1;for(n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1},h=function(){var e;if(document.documentElement&&document.documentElement.clientWidth)e=function(){return document.documentElement.clientWidth};else if(window.self&&window.self.innerWidth)e=function(){return window.self.innerWidth};else{if(!document.body)return function(){return 0};e=function(){return document.body.clientWidth}}return e}(),p=function(){var e;if(document.documentElement&&document.documentElement.clientHeight)e=function(){return document.documentElement.clientHeight};else if(window.self&&window.self.innerHeight)e=function(){return window.self.innerHeight};else{if(!document.body)return function(){return 0};e=function(){return document.body.clientHeight}}return e}(),d=function(e){return function(){var t,n=i[e].callbacks;for(t=0;t<n.length;t+=1)n[t].apply({},arguments)}},v=function(e,t){i.hasOwnProperty(e)?i[e].callbacks.push(t):i[e]={callbacks:[t],trigger:d(e)}},m=function(){return r},g=function(){var e=r.match(/\d+/),t=e?e[0]:"00",n=r.match(/small|medium|large/)[0],i={small:1,medium:10,large:100};return parseInt(i[n]+""+t,10)},y=function(e){o.className=e},b=function(){return o.className},w=function(e){y(e+" "+b())},E=function(e,t){var n,r=b();n=r.replace(t,""),n+=" "+e.join(" "),y(n)},S=function(){var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i,n=e.test(navigator.userAgent);t=n?"mobile":"desktop",w(t)},x=function(){var e=navigator.userAgent.match(/Firefox/i);e&&w("moz")},T=function(){var e=document.location.search.match(/embedPosition=(\w+)/);e&&w("page-embedded-"+e[1])},N=function(){return n},C=function(){var e=new RegExp("(\\b|\\s)"+u+"\\-(portrait|landscape)\\b","g");n=u,window.orientation===90||window.orientation===-90?n+="-landscape":n+="-portrait",E([n],e),i.orientationChange&&i.orientationChange.trigger(n,r)},k=function(){var t,n,s,o,a=h(),c=[];for(t=0,n=l.length;t<n;++t){s=l[t];if(!(a>=s.val||s.key===l[0].key))break;c.push(u+"-"+s.key)}c.length!==e&&(E(c,f),e=c.length,r=c[e-1],o=g(),i.breakPoint&&i.breakPoint.trigger(o,r))},L=function(e){var t,n,r="";s=e||[];for(t=0,n=s.length;t<n;t+=1)r+=" flag-"+s[t]+"-on";w(r)},A=function(){return s},O=function(e,n,r,i,o,u){var a,f,l,h,p,d,v,m=document.getElementById(u||""),y=g()<110,b=document.cookie.indexOf("NYT-Edition=edition|GLOBAL")>=0;i=i||"",d=i.indexOf("masthead-theme-transparent")>-1||i.indexOf("masthead-theme-transparent-ffffff")>-1,v=i.indexOf("masthead-theme-transparent-ffffff")>-1||o==="black"?"white-":"",e==="large"?(f=b?"450":"370",l=b?"44":"50"):r==="magazine"?(f=y?"184":"260",l=y?"22":"23"):r==="t-magazine"?c(s,"TMagSubnav")?(f=d?"163":"185",l=d?"30":"26"):(f=y?"184":"250",l=y?"22":"30"):b?(f=d?"240":"236",l=d?"30":"22"):(f=d?"163":"185",l=d?"30":"26"),h=n+(b?"international-logo-":"nyt-logo-")+v+f+"x"+l,p=n+(b?"international-logo-":"nyt-logo-")+f+"x"+l,r==="magazine"&&(h=n+"magazine-logo-"+v+f+"x"+l,p=n+"magazine-logo-"+f+"x"+l),c(s,"TMagSubnav")||r==="t-magazine"&&(h=n+"t-magazine-logo-"+v+f+"x"+l,p=n+"t-magazine-logo-"+f+"x"+l),b&&t==="mobile"&&(f="184",l="26"),c(s,"printMasthead")?a='<svg class="nyt-logo" width="'+f+'" height="'+l+'" role="img" aria-label="The New York Times">'+'<image width="'+f+'" height="'+l+'" xlink:href="'+h+'.svg" src="'+h+'.png" alt="The New York Times" border="0" />'+"</svg>"+'<img src="'+p+'.png" class="nyt-logo-print" alt="The New York Times" />':a='<svg class="nyt-logo" width="'+f+'" height="'+l+'" role="img" aria-label="The New York Times">'+'<image width="'+f+'" height="'+l+'" xlink:href="'+h+'.svg" src="'+h+'.png" alt="The New York Times" border="0" />'+"</svg>"+'<img src="'+h+'.png" class="nyt-logo-print" alt="The New York Times" />',m?m.innerHTML+=a:document.write(a)},M=function(){},_=function(e){var t,n;window.outerWidth?t=window.outerWidth:t=h(),t>e&&(e=t),n=document.createElement("meta"),n.setAttribute("name","viewport"),n.setAttribute("content","width="+e+", user-scalable=yes"),document.getElementsByTagName("head")[0].appendChild(n),k()},D=function(){var e,t,n=document.location.search.match(/viewportWidth=(\d+)/);n&&n[1]&&(e=+n[1]),e<=1050&&(t=document.createElement("meta"),t.setAttribute("name","viewport"),t.setAttribute("content","width="+e+", initial-scale=1, maximum-scale=1"),document.getElementsByTagName("head")[0].appendChild(t),k())},P=function(e){var t=e==="global"?"edition-international":"edition-domestic";E([t],new RegExp("edition-[w]*","g"))},H=function(){return b().length===0&&y(""),S(),x(),T(),k(),L(),M(),window.onresize=k,t==="mobile"&&(C(),window.onorientationchange=C),{on:v,device:t,getWidth:h,getHeight:p,breakpoints:l,getViewport:m,getOrientation:N,getViewportInteger:g,getFlags:A,processFlags:L,writeLogo:O,addNonResponsiveViewportMeta:_,addViewportMetaFromUrlParam:D,addAbTestClass:M,addEditionClass:P}};return H()}(),window.Modernizr=function(e,t,n){function r(e){g.cssText=e}function i(e,t){return r(E.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&g[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+x.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+T.join(r+" ")+r).split(" "),a(i,t,n))}function l(){h.input=function(n){for(var r=0,i=n.length;r<i;r++)L[n[r]]=n[r]in y;return L.list&&(L.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),L}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),h.inputtypes=function(e){for(var r=0,i,s,o,u=e.length;r<u;r++)y.setAttribute("type",s=e[r]),i=y.type!=="text",i&&(y.value=b,y.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&y.style.WebkitAppearance!==n?(d.appendChild(y),o=t.defaultView,i=o.getComputedStyle&&o.getComputedStyle(y,null).WebkitAppearance!=="textfield"&&y.offsetHeight!==0,d.removeChild(y)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=y.checkValidity&&y.checkValidity()===!1:i=y.value!=b)),k[e[r]]=!!i;return k}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var c="2.8.3",h={},p=!0,d=t.documentElement,v="modernizr",m=t.createElement(v),g=m.style,y=t.createElement("input"),b=":)",w={}.toString,E=" -webkit- -moz- -o- -ms- ".split(" "),S="Webkit Moz O ms",x=S.split(" "),T=S.toLowerCase().split(" "),N={svg:"http://www.w3.org/2000/svg"},C={},k={},L={},A=[],O=A.slice,M,_=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,c=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:v+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),f.id=v,(l?f:c).innerHTML+=s,c.appendChild(f),l||(c.style.background="",c.style.overflow="hidden",a=d.style.overflow,d.style.overflow="hidden",d.appendChild(c)),o=n(f,e),l?f.parentNode.removeChild(f):(c.parentNode.removeChild(c),d.style.overflow=a),!!o},D=function(){function e(e,i){i=i||t.createElement(r[e]||"div"),e="on"+e;var o=e in i;return o||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),o=s(i[e],"function"),s(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,o}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),P={}.hasOwnProperty,H;!s(P,"undefined")&&!s(P.call,"undefined")?H=function(e,t){return P.call(e,t)}:H=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=O.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(O.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(O.call(arguments)))};return r}),C.flexbox=function(){return f("flexWrap")},C.flexboxlegacy=function(){return f("boxDirection")},C.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},C.canvastext=function(){return!!h.canvas&&!!s(t.createElement("canvas").getContext("2d").fillText,"function")},C.webgl=function(){return!!e.WebGLRenderingContext},C.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:_(["@media (",E.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},C.geolocation=function(){return"geolocation"in navigator},C.postmessage=function(){return!!e.postMessage},C.websqldatabase=function(){return!!e.openDatabase},C.indexedDB=function(){return!!f("indexedDB",e)},C.hashchange=function(){return D("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},C.history=function(){return!!e.history&&!!history.pushState},C.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},C.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},C.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),o(g.backgroundColor,"rgba")},C.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),o(g.backgroundColor,"rgba")||o(g.backgroundColor,"hsla")},C.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(g.background)},C.backgroundsize=function(){return f("backgroundSize")},C.borderimage=function(){return f("borderImage")},C.borderradius=function(){return f("borderRadius")},C.boxshadow=function(){return f("boxShadow")},C.textshadow=function(){return t.createElement("div").style.textShadow===""},C.opacity=function(){return i("opacity:.55"),/^0.55$/.test(g.opacity)},C.cssanimations=function(){return f("animationName")},C.csscolumns=function(){return f("columnCount")},C.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+E.join(n+e)).slice(0,-e.length)),o(g.backgroundImage,"gradient")},C.cssreflections=function(){return f("boxReflect")},C.csstransforms=function(){return!!f("transform")},C.csstransforms3d=function(){var e=!!f("perspective");return e&&"webkitPerspective"in d.style&&_("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},C.csstransitions=function(){return f("transition")},C.fontface=function(){var e;return _('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},C.generatedcontent=function(){var e;return _(["#",v,"{font:0/0 a}#",v,':after{content:"',b,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},C.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},C.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},C.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},C.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},C.webworkers=function(){return!!e.Worker},C.applicationcache=function(){return!!e.applicationCache},C.svg=function(){return!!t.createElementNS&&!!t.createElementNS(N.svg,"svg").createSVGRect},C.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==N.svg},C.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(w.call(t.createElementNS(N.svg,"animate")))},C.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(w.call(t.createElementNS(N.svg,"clipPath")))};for(var B in C)H(C,B)&&(M=B.toLowerCase(),h[M]=C[B](),A.push((h[M]?"":"no-")+M));return h.input||l(),h.addTest=function(e,t){if(typeof e=="object")for(var r in e)H(e,r)&&h.addTest(r,e[r]);else{e=e.toLowerCase();if(h[e]!==n)return h;t=typeof t=="function"?t():t,typeof p!="undefined"&&p&&(d.className+=" has-"+(t?"":"no-")+e),h[e]=t}return h},r(""),m=y=null,h._version=c,h._prefixes=E,h._domPrefixes=T,h._cssomPrefixes=x,h.hasEvent=D,h.testProp=function(e){return u([e])},h.testAllProps=f,h.testStyles=_,d.className=d.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" has-js has-"+A.join(" has-"):""),h}(this,this.document),function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=x.elements;return typeof e=="string"?e.split(" "):e}function i(e){var t=E[e[b]];return t||(t={},w++,e[b]=w,E[w]=t),t}function s(e,n,r){n||(n=t);if(S)return n.createElement(e);r||(r=i(n));var s;return r.cache[e]?s=r.cache[e].cloneNode():g.test(e)?s=(r.cache[e]=r.createElem(e)).cloneNode():s=r.createElem(e),s.canHaveChildren&&!m.test(e)&&!s.tagUrn?r.frag.appendChild(s):s}function o(e,n){e||(e=t);if(S)return e.createDocumentFragment();n=n||i(e);var s=n.frag.cloneNode(),o=0,u=r(),a=u.length;for(;o<a;o++)s.createElement(u[o]);return s}function u(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return x.shivMethods?s(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(x,t.frag)}function a(e){e||(e=t);var r=i(e);return x.shivCSS&&!y&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),S||u(e,r),e}function f(e){var t,n=e.getElementsByTagName("*"),i=n.length,s=RegExp("^(?:"+r().join("|")+")$","i"),o=[];while(i--)t=n[i],s.test(t.nodeName)&&o.push(t.applyElement(l(t)));return o}function l(e){var t,n=e.attributes,r=n.length,i=e.ownerDocument.createElement(N+":"+e.nodeName);while(r--)t=n[r],t.specified&&i.setAttribute(t.nodeName,t.nodeValue);return i.style.cssText=e.style.cssText,i}function c(e){var t,n=e.split("{"),i=n.length,s=RegExp("(^|[\\s,>+~])("+r().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),o="$1"+N+"\\:$2";while(i--)t=n[i]=n[i].split("}"),t[t.length-1]=t[t.length-1].replace(s,o),n[i]=t.join("}");return n.join("{")}function h(e){var t=e.length;while(t--)e[t].removeNode()}function p(e){function t(){clearTimeout(o._removeSheetTimer),r&&r.removeNode(!0),r=null}var r,s,o=i(e),u=e.namespaces,a=e.parentWindow;return!C||e.printShived?e:(typeof u[N]=="undefined"&&u.add(N),a.attachEvent("onbeforeprint",function(){t();var i,o,u,a=e.styleSheets,l=[],h=a.length,p=Array(h);while(h--)p[h]=a[h];while(u=p.pop())if(!u.disabled&&T.test(u.media)){try{i=u.imports,o=i.length}catch(d){o=0}for(h=0;h<o;h++)p.push(i[h]);try{l.push(u.cssText)}catch(d){}}l=c(l.reverse().join("")),s=f(e),r=n(e,l)}),a.attachEvent("onafterprint",function(){h(s),clearTimeout(o._removeSheetTimer),o._removeSheetTimer=setTimeout(t,500)}),e.printShived=!0,e)}var d="3.7.0",v=e.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,g=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,y,b="_html5shiv",w=0,E={},S;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",y="hidden"in e,S=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){y=!0,S=!0}})();var x={elements:v.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:v.shivCSS!==!1,supportsUnknownElements:S,shivMethods:v.shivMethods!==!1,type:"default",shivDocument:a,createElement:s,createDocumentFragment:o};e.html5=x,a(t);var T=/^$|\b(?:all|print)\b/,N="html5shiv",C=!S&&function(){var n=t.documentElement;return typeof t.namespaces!="undefined"&&typeof t.parentWindow!="undefined"&&typeof n.applyElement!="undefined"&&typeof n.removeNode!="undefined"&&typeof e.attachEvent!="undefined"}();x.type+=" print",x.shivPrint=p,p(t)}(this,document),Modernizr.addTest("cors",!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest));var requirejs,require,define;(function(e){function t(e,t){return g.call(e,t)}function n(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d=t&&t.split("/"),m=v.map,g=m&&m["*"]||{};if(e){e=e.split("/"),o=e.length-1,v.nodeIdCompat&&b.test(e[o])&&(e[o]=e[o].replace(b,"")),e[0].charAt(0)==="."&&d&&(p=d.slice(0,d.length-1),e=p.concat(e));for(l=0;l<e.length;l++){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===0||l===1&&e[2]===".."||e[l-1]==="..")continue;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}if((d||g)&&m){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(d)for(c=d.length;c>0;c-=1){i=m[d.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,u=l;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=l)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function r(t,n){return function(){var r=y.call(arguments,0);return typeof r[0]!="string"&&r.length===1&&r.push(null),l.apply(e,r.concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function s(e){return function(t){p[e]=t}}function o(n){if(t(d,n)){var r=d[n];delete d[n],m[n]=!0,f.apply(e,r)}if(!t(p,n)&&!t(m,n))throw new Error("No "+n);return p[n]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e){return function(){return v&&v.config&&v.config[e]||{}}}var f,l,c,h,p={},d={},v={},m={},g=Object.prototype.hasOwnProperty,y=[].slice,b=/\.js$/;c=function(e,t){var r,s=u(e),a=s[0];return e=s[1],a&&(a=n(a,t),r=o(a)),a?r&&r.normalize?e=r.normalize(e,i(t)):e=n(e,t):(e=n(e,t),s=u(e),a=s[0],e=s[1],a&&(r=o(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:r}},h={require:function(e){return r(e)},exports:function(e){var t=p[e];return typeof t!="undefined"?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:a(e)}}},f=function(n,i,u,a){var f,l,v,g,y,b=[],w=typeof u,E;a=a||n;if(w==="undefined"||w==="function"){i=!i.length&&u.length?["require","exports","module"]:i;for(y=0;y<i.length;y+=1){g=c(i[y],a),l=g.f;if(l==="require")b[y]=h.require(n);else if(l==="exports")b[y]=h.exports(n),E=!0;else if(l==="module")f=b[y]=h.module(n);else if(t(p,l)||t(d,l)||t(m,l))b[y]=o(l);else{if(!g.p)throw new Error(n+" missing "+l);g.p.load(g.n,r(a,!0),s(l),{}),b[y]=p[l]}}v=u?u.apply(p[n],b):undefined;if(n)if(f&&f.exports!==e&&f.exports!==p[n])p[n]=f.exports;else if(v!==e||!E)p[n]=v}else n&&(p[n]=u)},requirejs=require=l=function(t,n,r,i,s){if(typeof t=="string")return h[t]?h[t](n):o(c(t,n).f);if(!t.splice){v=t,v.deps&&l(v.deps,v.callback);if(!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},typeof r=="function"&&(r=i,i=s),i?f(e,t,n,r):setTimeout(function(){f(e,t,n,r)},4),l},l.config=function(e){return l(e)},requirejs._defined=p,define=function(e,n,r){typeof e=="object"&&(e=e[0]);if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");n.splice||(r=n,n=[]),!t(p,e)&&!t(d,e)&&(d[e]=[e,n,r])},define.amd={jQuery:!0}})(),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function jb(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function kb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function lb(e){var t=gb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function mb(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function nb(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function ob(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sb(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function tb(e){var t=l,r=rb[e];return r||(r=sb(e,t),"none"!==r&&r||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qb[0].contentDocument,t.write(),t.close(),r=sb(e,t),qb.detach()),rb[e]=r),r}function xb(e,t,r){var i,s,o,u,a=e.style;return r=r||wb(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),vb.test(u)&&ub.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function yb(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fb(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Eb.length;while(i--)if(t=Eb[i]+n,t in e)return t;return r}function Gb(e,t,n){var r=Ab.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Hb(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ib(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wb(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xb(e,t,o),(0>s||null==s)&&(s=e.style[t]),vb.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Hb(e,t,r||(u?"border":"content"),i,o)+"px"}function Jb(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",tb(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Kb(e,t,n,r,i){return new Kb.prototype.init(e,t,n,r,i)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ub(e,t,n){for(var r,i=(Rb[t]||[]).concat(Rb["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Vb(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||tb(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Nb.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?tb(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ub(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wb(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xb(e,t,r){var i,s,o=0,u=Qb.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=Lb||Sb(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Lb||Sb(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wb(c,l.opts.specialEasing);u>o;o++)if(i=Qb[o].call(l,e,c,l.opts))return i;return n.map(c,Ub,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function rc(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function sc(e,t,r,i){function s(a){var f;return o[a]=!0,n.each(e[a]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||u||o[a]?u?!(f=a):void 0:(t.dataTypes.unshift(a),s(a),!1)}),f}var o={},u=e===oc;return s(t.dataTypes[0])||!o["*"]&&s("*")}function tc(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function uc(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function vc(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Bc(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||xc.test(e)?i(e,n):Bc(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Bc(e+"["+s+"]",t[s],r,i)}function Kc(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function t(e,t,n,r){var i,s,o,u,a,f,c,p,d,v;if((t?t.ownerDocument||t:q)!==_&&M(t),t=t||_,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(P&&!r){if(i=yt.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&F(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&E.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(o)),n}if(E.qsa&&(!H||!H.test(e))){if(p=c=I,d=t,v=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=N(e),(c=t.getAttribute("id"))?p=c.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",a=f.length;while(a--)f[a]=p+h(f[a]);d=bt.test(e)&&l(t.parentNode)||t,v=f.join(",")}if(v)try{return Z.apply(n,d.querySelectorAll(v)),n}catch(m){}finally{c||t.removeAttribute("id")}}}return k(e.replace(at,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[I]=!0,e}function i(e){var t=_.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){var n=e.split("|"),r=e.length;while(r--)S.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function u(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function a(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function f(e){return r(function(t){return t=+t,r(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function l(e){return e&&typeof e.getElementsByTagName!==$&&e}function c(){}function h(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=U++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[R,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[I]||(t[I]={}),(u=a[r])&&u[0]===R&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function d(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function v(e,n,r){for(var i=0,s=n.length;s>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function g(e,t,n,i,s,o){return i&&!i[I]&&(i=g(i)),s&&!s[I]&&(s=g(s,o)),r(function(r,o,u,a){var f,l,c,h=[],p=[],d=o.length,g=r||v(t||"*",u.nodeType?[u]:u,[]),y=!e||!r&&t?g:m(g,h,e,u,a),b=n?s||(r?e:d||i)?[]:o:y;if(n&&n(y,b,u,a),i){f=m(b,p),i(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(b[p[l]]=!(y[p[l]]=c))}if(r){if(s||e){if(s){f=[],l=b.length;while(l--)(c=b[l])&&f.push(y[l]=c);s(null,b=[],f,a)}l=b.length;while(l--)(c=b[l])&&(f=s?tt.call(r,c):h[l])>-1&&(r[f]=!(o[f]=c))}}else b=m(b===o?b.splice(d,b.length):b),s?s(null,o,b,a):Z.apply(o,b)})}function y(e){for(var t,n,r,i=e.length,s=S.relative[e[0].type],o=s||S.relative[" "],u=s?1:0,a=p(function(e){return e===t},o,!0),f=p(function(e){return tt.call(t,e)>-1},o,!0),l=[function(e,n,r){return!s&&(r||n!==L)||((t=n).nodeType?a(e,n,r):f(e,n,r))}];i>u;u++)if(n=S.relative[e[u].type])l=[p(d(l),n)];else{if(n=S.filter[e[u].type].apply(null,e[u].matches),n[I]){for(r=++u;i>r;r++)if(S.relative[e[r].type])break;return g(u>1&&d(l),u>1&&h(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(at,"$1"),n,r>u&&y(e.slice(u,r)),i>r&&y(e=e.slice(r)),i>r&&h(e))}l.push(n)}return d(l)}function b(e,n){var i=n.length>0,s=e.length>0,o=function(r,o,u,a,f){var l,c,h,p=0,d="0",v=r&&[],g=[],y=L,b=r||s&&S.find.TAG("*",f),w=R+=null==y?1:Math.random()||.1,E=b.length;for(f&&(L=o!==_&&o);d!==E&&null!=(l=b[d]);d++){if(s&&l){c=0;while(h=e[c++])if(h(l,o,u)){a.push(l);break}f&&(R=w)}i&&((l=!h&&l)&&p--,r&&v.push(l))}if(p+=d,i&&d!==p){c=0;while(h=n[c++])h(v,g,o,u);if(r){if(p>0)while(d--)v[d]||g[d]||(g[d]=G.call(a));g=m(g)}Z.apply(a,g),f&&!r&&g.length>0&&p+n.length>1&&t.uniqueSort(a)}return f&&(R=w,L=y),v};return i?r(o):o}var w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I="sizzle"+ -(new Date),q=e.document,R=0,U=0,z=n(),W=n(),X=n(),V=function(e,t){return e===t&&(O=!0),0},$="undefined",J=1<<31,K={}.hasOwnProperty,Q=[],G=Q.pop,Y=Q.push,Z=Q.push,et=Q.slice,tt=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=it.replace("w","w#"),ot="\\["+rt+"*("+it+")(?:"+rt+"*([*^$|!~]?=)"+rt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+rt+"*\\]",ut=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",at=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ft=new RegExp("^"+rt+"*,"+rt+"*"),lt=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),ct=new RegExp("="+rt+"*([^\\]'\"]*?)"+rt+"*\\]","g"),ht=new RegExp(ut),pt=new RegExp("^"+st+"$"),dt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+ut),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},vt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,gt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,Et=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),St=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Z.apply(Q=et.call(q.childNodes),q.childNodes),Q[q.childNodes.length].nodeType}catch(xt){Z={apply:Q.length?function(e,t){Y.apply(e,et.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}E=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:q,r=n.defaultView;return n!==_&&9===n.nodeType&&n.documentElement?(_=n,D=n.documentElement,P=!T(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){M()},!1):r.attachEvent&&r.attachEvent("onunload",function(){M()})),E.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=gt.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),E.getById=i(function(e){return D.appendChild(e).id=I,!n.getElementsByName||!n.getElementsByName(I).length}),E.getById?(S.find.ID=function(e,t){if(typeof t.getElementById!==$&&P){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(e){var t=e.replace(Et,St);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(Et,St);return function(e){var n=typeof e.getAttributeNode!==$&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=E.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==$?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},S.find.CLASS=E.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==$&&P?t.getElementsByClassName(e):void 0},B=[],H=[],(E.qsa=gt.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&H.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||H.push("\\["+rt+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||H.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&H.push("name"+rt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(E.matchesSelector=gt.test(j=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&i(function(e){E.disconnectedMatch=j.call(e,"div"),j.call(e,"[s!='']:x"),B.push("!=",ut)}),H=H.length&&new RegExp(H.join("|")),B=B.length&&new RegExp(B.join("|")),t=gt.test(D.compareDocumentPosition),F=t||gt.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return O=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!E.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===q&&F(q,e)?-1:t===n||t.ownerDocument===q&&F(q,t)?1:A?tt.call(A,e)-tt.call(A,t):0:4&r?-1:1)}:function(e,t){if(e===t)return O=!0,0;var r,i=0,s=e.parentNode,u=t.parentNode,a=[e],f=[t];if(!s||!u)return e===n?-1:t===n?1:s?-1:u?1:A?tt.call(A,e)-tt.call(A,t):0;if(s===u)return o(e,t);r=e;while(r=r.parentNode)a.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(a[i]===f[i])i++;return i?o(a[i],f[i]):a[i]===q?-1:f[i]===q?1:0},n):_},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==_&&M(e),n=n.replace(ct,"='$1']"),!(!E.matchesSelector||!P||B&&B.test(n)||H&&H.test(n)))try{var r=j.call(e,n);if(r||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,_,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==_&&M(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==_&&M(e);var n=S.attrHandle[t.toLowerCase()],r=n&&K.call(S.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==r?r:E.attributes||!P?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(O=!E.detectDuplicates,A=!E.sortStable&&e.slice(0),e.sort(V),O){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return A=null,e},x=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=x(t);return n},S=t.selectors={cacheLength:50,createPseudo:r,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Et,St),e[3]=(e[3]||e[4]||e[5]||"").replace(Et,St),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return dt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ht.test(n)&&(t=N(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Et,St).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==$&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var s=t.attr(i,e);return null==s?"!="===n:n?(s+="","="===n?s===r:"!="===n?s!==r:"^="===n?r&&0===s.indexOf(r):"*="===n?r&&s.indexOf(r)>-1:"$="===n?r&&s.slice(-r.length)===r:"~="===n?(" "+s+" ").indexOf(r)>-1:"|="===n?s===r||s.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[I]||(m[I]={}),f=l[e]||[],p=f[0]===R&&f[1],h=f[0]===R&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[R,p,h];break}}else if(y&&(f=(t[I]||(t[I]={}))[e])&&f[0]===R)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[I]||(c[I]={}))[e]=[R,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,n){var i,s=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[I]?s(n):s.length>1?(i=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){var r,i=s(e,n),o=i.length;while(o--)r=tt.call(e,i[o]),e[r]=!(t[r]=i[o])}):function(e){return s(e,0,i)}):s}},pseudos:{not:r(function(e){var t=[],n=[],i=C(e.replace(at,"$1"));return i[I]?r(function(e,t,n,r){var s,o=i(e,null,r,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,r,s){return t[0]=e,i(t,null,s,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:r(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Et,St).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return mt.test(e.nodeName)},input:function(e){return vt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:f(function(){return[0]}),last:f(function(e,t){return[t-1]}),eq:f(function(e,t,n){return[0>n?n+t:n]}),even:f(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:f(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:f(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:f(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[w]=u(w);for(w in{submit:!0,reset:!0})S.pseudos[w]=a(w);return c.prototype=S.filters=S.pseudos,S.setFilters=new c,N=t.tokenize=function(e,n){var r,i,s,o,u,a,f,l=W[e+" "];if(l)return n?0:l.slice(0);u=e,a=[],f=S.preFilter;while(u){(!r||(i=ft.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),r=!1,(i=lt.exec(u))&&(r=i.shift(),s.push({value:r,type:i[0].replace(at," ")}),u=u.slice(r.length));for(o in S.filter)!(i=dt[o].exec(u))||f[o]&&!(i=f[o](i))||(r=i.shift(),s.push({value:r,type:o,matches:i}),u=u.slice(r.length));if(!r)break}return n?u.length:u?t.error(e):W(e,a).slice(0)},C=t.compile=function(e,t){var n,r=[],i=[],s=X[e+" "];if(!s){t||(t=N(e)),n=t.length;while(n--)s=y(t[n]),s[I]?r.push(s):i.push(s);s=X(e,b(i,r)),s.selector=e}return s},k=t.select=function(e,t,n,r){var i,s,o,u,a,f="function"==typeof e&&e,c=!r&&N(e=f.selector||e);if(n=n||[],1===c.length){if(s=c[0]=c[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&E.getById&&9===t.nodeType&&P&&S.relative[s[1].type]){if(t=(S.find.ID(o.matches[0].replace(Et,St),t)||[])[0],!t)return n;f&&(t=t.parentNode),e=e.slice(s.shift().value.length)}i=dt.needsContext.test(e)?0:s.length;while(i--){if(o=s[i],S.relative[u=o.type])break;if((a=S.find[u])&&(r=a(o.matches[0].replace(Et,St),bt.test(s[0].type)&&l(t.parentNode)||t))){if(s.splice(i,1),e=r.length&&h(s),!e)return Z.apply(n,r),n;break}}}return(f||C(e,c))(r,t,!P,n,bt.test(e)&&l(t.parentNode)||t),n},E.sortStable=I.split("").sort(V).join("")===I,E.detectDuplicates=!!O,M(),E.sortDetached=i(function(e){return 1&e.compareDocumentPosition(_.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||s(nt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=ob(a),o=ob(e),i=0,s=o.length;s>i;i++)pb(o[i],u[i]);if(t)if(r)for(o=o||ob(e),u=u||ob(a),i=0,s=o.length;s>i;i++)nb(o[i],u[i]);else nb(e,a);return u=ob(a,"script"),u.length>0&&mb(u,!f&&ob(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(cb.test(s)){o=o||c.appendChild(t.createElement("div")),u=(bb.exec(s)||["",""])[1].toLowerCase(),a=ib[u]||ib._default,o.innerHTML=a[1]+s.replace(ab,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=ob(c.appendChild(s),"script"),f&&mb(o),r)){l=0;while(s=o[l++])fb.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(ob(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&mb(ob(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(ob(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!db.test(e)&&!ib[(bb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ab,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(ob(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(ob(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&eb.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(ob(i,"script"),kb),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,ob(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,lb),l=0;u>l;l++)a=o[l],fb.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xb(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fb(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Bb.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fb(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xb(e,t,i)),"normal"===s&&t in Db&&(s=Db[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?zb.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Cb,function(){return Ib(e,t,i)}):Ib(e,t,i):void 0},set:function(e,r,i){var s=i&&wb(e);return Gb(e,r,i?Hb(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xb,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ub.test(e)||(n.cssHooks[e+t].set=Gb)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wb(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Kb.propHooks[this.prop];return e&&e.get?e.get(this):Kb.propHooks._default.get(this)},run:function(e){var t,r=Kb.propHooks[this.prop];return this.pos=t=this.options.duration?n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Ob.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Ob.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xb,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Rb[r]=Rb[r]||[],Rb[r].unshift(t)},prefilter:function(e,t){t?Qb.unshift(e):Qb.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xb(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pb.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Tb(t,!0),e,n,i)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(Lb=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Zb:Yb)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Zb={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$b[t]||n.find.attr;$b[t]=function(e,t,n){var i,s;return n||(s=$b[t],$b[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$b[t]=s),i}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_b.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ac," ").indexOf(t)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bc,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[],n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?tc(tc(e,n.ajaxSettings),t):tc(n.ajaxSettings,e)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(e,t){function r(e,t,r,u){var f,c,y,b,E,S=t;2!==w&&(w=2,a&&clearTimeout(a),i=void 0,o=u||"",x.readyState=e>0?4:0,f=e>=200&&300>e||304===e,r&&(b=uc(h,x,r)),b=vc(h,b,x,f),f?(h.ifModified&&(E=x.getResponseHeader("Last-Modified"),E&&(n.lastModified[s]=E),E=x.getResponseHeader("etag"),E&&(n.etag[s]=E)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=b.state,c=b.data,y=b.error,f=!y)):(y=S,(e||!S)&&(S="error",0>e&&(e=0))),x.status=e,x.statusText=(t||S)+"",f?v.resolveWith(p,[c,S,x]):v.rejectWith(p,[x,S,y]),x.statusCode(g),g=void 0,l&&d.trigger(f?"ajaxSuccess":"ajaxError",[x,h,f?c:y]),m.fireWith(p,[x,S]),l&&(d.trigger("ajaxComplete",[x,h]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,s,o,u,a,f,l,c,h=n.ajaxSetup({},t),p=h.context||h,d=h.context&&(p.nodeType||p.jquery)?n(p):n.event,v=n.Deferred(),m=n.Callbacks("once memory"),g=h.statusCode||{},y={},b={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!u){u={};while(t=ic.exec(o))u[t[1].toLowerCase()]=t[2]}t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return i&&i.abort(t),r(0,t),this}};if(v.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=n.trim(h.dataType||"*").toLowerCase().match(E)||[""],null==h.crossDomain&&(f=mc.exec(h.url.toLowerCase()),h.crossDomain=!(!f||f[1]===ec[1]&&f[2]===ec[2]&&(f[3]||("http:"===f[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=n.param(h.data,h.traditional)),sc(nc,h,t,x),2===w)return x;l=h.global,l&&0===n.active++&&n.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!kc.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(dc.test(s)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=hc.test(s)?s.replace(hc,"$1_="+cc++):s+(dc.test(s)?"&":"?")+"_="+cc++)),h.ifModified&&(n.lastModified[s]&&x.setRequestHeader("If-Modified-Since",n.lastModified[s]),n.etag[s]&&x.setRequestHeader("If-None-Match",n.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+pc+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)x.setRequestHeader(c,h.headers[c]);if(!h.beforeSend||h.beforeSend.call(p,x,h)!==!1&&2!==w){S="abort";for(c in{success:1,error:1,complete:1})x[c](h[c]);if(i=sc(oc,h,t,x)){x.readyState=1,l&&d.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},h.timeout));try{w=1,i.send(y,r)}catch(T){if(!(2>w))throw T;r(-1,T)}}else r(-1,"No Transport");return x}return x.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Bc(r,e[r],t,s);return i.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(yc,"\r\n")}}):{name:t.name,value:r.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var e in Dc)Dc[e]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(e){var t;return k.cors||Fc&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Cc;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Dc[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Ec[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Dc[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gc.pop()||n.expando+"_"+cc++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Hc.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Hc,"$1"+i):e.jsonp!==!1&&(e.url+=(dc.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Gc.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Ic=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Ic)return Ic.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Jc=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Kc(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Jc;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Kc(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=yb(k.pixelPosition,function(e,r){return r?(r=xb(e,t),vb.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery/nyt",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Mc),e&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?void (this._wrapped=e):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(null==e)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o=x.keys(e),i=0,s=o.length;s>i;i++)if(t.call(r,e[o[i]],o[i],e)===n)return;return e};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,i=-1/0;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,i=1/0;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;i>u&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return null==e?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t){var n=[],r=[];return T(e,function(e){(t(e)?n:r).push(e)}),[n,r]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,s=r.length;s>i;i++)r[i]===x&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):o||n.trailing===!1||(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;t>f?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},x.pairs=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){for(var t={},n=x.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if("[object Array]"==i){if(a=e.length,l=a==t.length)for(;a--&&(l=M(e[a],t[a],n,r)););}else{for(var c in e)if(x.has(e,c)&&(a++,!(l=x.has(t,c)&&M(e[c],t[c],n,r))))break;if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore/nyt",[],function(){return x})}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define("backbone/nyt",["underscore/nyt","jquery/nyt","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("foundation/cookies",["jquery/nyt"],function(e){var t={expires:365,domain:".nytimes.com",path:"/",secure:!1},n=function(e){var t,n,r,i,s=document.cookie.split("; ");for(t=0,n=s.length;t<n;++t){r=s[t].split("="),i=r.shift();if(i===e)return r.join("=")}return null},r=function(n,r,i){var s,o;i=e.extend({},t,i),r===null&&(i.expires=-1),e.isNumeric(i.expires)&&(s=i.expires,o=new Date,o.setDate(o.getDate()+s),i.expires=o),document.cookie=[n,"=",r,"; expires="+i.expires.toUTCString(),"; path="+i.path,"; domain="+i.domain,i.secure?"; secure":""].join("")},i=function(e,t){var i=n(e);i!==null&&r(e,null,t)},s=function(){var e="NYTCookiesEnabled",t=new Date,n=!1;return t.setTime(t.getTime()+1e4),document.cookie=e+"=test; expires="+t.toGMTString(),n=document.cookie.indexOf(e)!==-1,n&&(t=new Date,t.setTime(t.getTime()-1e4),document.cookie=e+"=test; expires="+t.toGMTString()),n};return{readCookie:n,writeCookie:r,deleteCookie:i,cookiesEnabled:s}}),define("foundation/views/page-manager",["jquery/nyt","underscore/nyt","backbone/nyt","foundation/cookies"],function(e,t,n,r){var i=n.View.extend({el:e(window),$document:e(document),$window:e(window),$html:e("html"),$body:e("body"),$shell:e("#shell"),$dom:{},disabledComponents:[],cachedViewport:{},metaTagStore:{},urlParamStore:{},edition:"us",furniture:{mediaViewerOpen:!1},pageReferrer:document.referrer,KEYS:{ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,TAB:9},trackingEventQueue:[],trackingQueueEmptied:!1,navigationKeysEnabled:!0,a11yEnabled:!1,router:new n.Router,initialize:function(){t.bindAll(this,"handleBreakpoint","handleKeyDown","handleOrientation","handlePageReady","handleResizeDebounce","handleResizeThrottle","handleScrollDebounce","handleScrollThrottle","handleScrollUnthrottled","handleHashChange","handleSkipTo","handleContentFocus","handleUserActivity","handleOnFocus","handleBlur"),e.ajaxSetup({cache:!0}),this.isReady=!1,this.initEdition(),this.initMetaTags(),this.initComponentToggle(),this.initUrlParams(window.location.search),this.$document.ready(this.handlePageReady),this.initCanonical(),this.currentlyHasFocus=document.hasFocus()},handlePageReady:function(){this.isReady=!0,this.$body=e("body"),this.$shell=e("#shell"),this.$masthead=e("#masthead"),this.trigger("nyt:page-ready"),this.listenTo(this,"nyt:page-viewportchange",this.setViewport),this.listenTo(this,"nyt:app-swipe",this.handleSwipe),this.listenTo(this,"nyt:app-drag",this.handleDrag),this.$el.on("scroll",this.handleScrollThrottle),this.$el.on("scroll",this.handleScrollDebounce),this.$el.on("scroll",this.handleScrollUnthrottled),this.$el.on("resize",this.handleResizeThrottle),this.$el.on("resize",this.handleResizeDebounce),this.$el.on("hashchange",this.handleHashChange),this.$body.on("click",".skip-button",this.handleSkipTo),this.$window.on("scroll",this.handleUserActivity),this.$window.on("focus",this.handleOnFocus),this.$window.on("focusout",this.handleBlur),this.$document.on("keydown mousedown mouseenter",this.handleUserActivity),this.$document.on("keydown",this.handleKeyDown),window.magnum.on("breakPoint",this.handleBreakpoint),window.magnum.on("orientationChange",this.handleOrientation),this.listenTo(this.router,"route",function(e,t){this.trigger("nyt:route:"+e,t)}),n.history.start()},handleBreakpoint:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("nyt:page-breakpoint"),this.trigger.apply(this,e)},handleOrientation:function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("nyt:page-orientation"),this.trigger.apply(this,e)},handleScroll:function(){this.trigger("nyt:page-scroll"),this.trigger("nyt:page-viewportchange")},handleScrollThrottle:t.throttle(function(){this.handleScroll()},100),handleScrollUnthrottled:t.throttle(function(){this.trigger("nyt:page-scroll-unthrottled")},17),handleScrollDebounce:t.debounce(function(){this.handleScroll(),this.trigger("nyt:page-scroll-after")},100),handleResize:function(){this.trigger("nyt:page-resize"),this.trigger("nyt:page-viewportchange")},handleResizeThrottle:t.throttle(function(){this.handleResize()},100),handleResizeDebounce:t.debounce(function(){this.handleResize(),this.trigger("nyt:page-resize-after")},100),handleSwipe:function(e){this.trigger("nyt:page-swipe",e)},handleDrag:function(e,t){this.trigger("nyt:page-drag",e,t)},enableNavigationKeys:function(){this.navigationKeysEnabled=!0},disableNavigationKeys:function(){this.navigationKeysEnabled=!1},handleKeyDown:function(t){var n=t.keyCode,r=e(t.target),i=r.is("input, textarea"),s=t.shiftKey||t.altKey||t.ctrlKey||t.metaKey,o=this.getMeta("mediaviewer_isVisible")||!1,u=this.getMeta("commentspanel_isOpen")||!1,a=this.getMeta("applicationName");!this.a11yEnabled&&r.is(".enable-a11y")&&this.toggleA11y(!0);switch(n){case this.KEYS.UP:this.a11yEnabled&&this.trigger("nyt:page-key-up-a11y",t);break;case this.KEYS.DOWN:this.a11yEnabled&&this.trigger("nyt:page-key-down-a11y",t);break;case this.KEYS.LEFT:if(this.a11yEnabled){this.trigger("nyt:page-key-left-a11y",t);break}if(!this.navigationKeysEnabled||u)break;a==="slideshow"&&this.trigger("nyt:slideshow-left",t),o&&!s?this.trigger("nyt:mediaviewer-left"):!i&&!s&&this.trigger("nyt:ribbon-left");break;case this.KEYS.RIGHT:if(this.a11yEnabled){this.trigger("nyt:page-key-right-a11y",t);break}if(!this.navigationKeysEnabled||u)break;a==="slideshow"&&this.trigger("nyt:slideshow-right",t),o&&!s?this.trigger("nyt:mediaviewer-right"):!i&&!s&&this.trigger("nyt:ribbon-right");break;case this.KEYS.ESC:this.a11yEnabled?this.trigger("nyt:page-key-esc-a11y",t):this.trigger("nyt:page-key-esc",t);break;case this.KEYS.TAB:this.trigger("nyt:page-key-tab",t);break;case this.KEYS.ENTER:this.trigger("nyt:page-key-enter",t);break;case this.KEYS.PAGE_UP:case this.KEYS.PAGE_DOWN:if(s)break;case this.KEYS.SPACE:r.is("body")&&!this.$body.attr("contenteditable")&&(t.preventDefault(),this.adjustScrollDepth(n,t.shiftKey))}},handleHashChange:function(){this.trigger("nyt:page-hashchange",this.getUrlHash())},handleSkipTo:function(e){this.trigger("nyt:page-skipto",e),e.target.blur(),t.defer(this.handleContentFocus)},handleContentFocus:function(){var e=document.getElementById(this.getUrlHash());e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},handleOnFocus:function(){this.currentlyHasFocus=!0,this.trigger("nyt:on-focus")},handleBlur:function(){this.currentlyHasFocus=!1,this.trigger("nyt:blur")},handleUserActivity:function(){this.currentlyHasFocus=!0,this.trigger("nyt:user-activity")},adjustScrollDepth:function(t,n){var r,i=this,s=this.getViewport(),o=this.$masthead.outerHeight()||0,u=1;if(this.isScrolling!==!0){if(t===this.KEYS.PAGE_UP||t===this.KEYS.SPACE&&n)u=-1;r=s.top+u*(s.height-o-40),r<0&&(r=0),this.isScrolling=!0,e("html, body").animate({scrollTop:r},this.scrollAnimateTime,function(){i.isScrolling=!1})}this.scrollAnimateTime=0,this.resetScrollAnimateTime()},resetScrollAnimateTime:t.debounce(function(){this.scrollAnimateTime=200},300),isDomReady:function(){return this.isReady},setViewport:function(){var e=this.$el.width(),t=this.$el.height(),n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=t+n;this.cachedViewport={width:e,height:t,top:n,bottom:r}},getApplicationName:function(){return e("#applicationName").attr("content")},getViewport:function(){return typeof this.cachedViewport.width=="undefined"&&this.setViewport(),this.cachedViewport},getCurrentBreakpoint:function(){return window.magnum.getViewportInteger()},getDevice:function(){return window.magnum.device},isDesktop:function(){return this.getDevice()==="desktop"},isMobile:function(){return this.getDevice()==="mobile"},initCanonical:function(){this.canonical=this.$html.find("head link[rel=canonical]").attr("href")},initMetaTags:function(){var t=this;e("meta").each(function(){var n=e(this),r=n.attr("name")||n.attr("property"),i=n.attr("content")||n.attr("value");r&&t.setMeta(r,i,!1)})},getMeta:function(e){return this.metaTagStore[e]},setMeta:function(e,t,n){!this.metaTagStore[e]||n!==!1?this.metaTagStore[e]=t:typeof this.metaTagStore[e]=="string"?(this.metaTagStore[e]=[this.metaTagStore[e]],this.metaTagStore[e].push(t)):this.metaTagStore[e]&&this.metaTagStore[e].push(t)},initUrlParams:function(e){var t,n,r,i,s={};if(!e||e.length===0)return!1;i=e.substring(1).split("&");for(t=0,r=i.length;t<r;t+=1)n=i[t].split("="),n[1]&&n[1].indexOf(",")>=0?s[n[0]]=n[1].split(","):s[n[0]]=n[1]||"";this.urlParamStore=s},getUrlParam:function(e){return this.urlParamStore[e]},getUrlHash:function(){var e=window.location.hash||"";return e.replace("#","")},setUrlHash:function(e){if(typeof e=="string"||typeof e=="number")window.location.hash=e},initComponentToggle:function(){var t,n,r,i="HIDE_",s=e("#display_overrides")[0];if(!s)return;try{r=JSON.parse(s.innerHTML)}catch(o){return}for(t=0;t<r.length;t+=1)n=r[t],n=n.replace(i,"").toLowerCase(),this.disabledComponents.push(n)},isDisabled:function(e){return t.indexOf(this.disabledComponents,e)>-1},flag:function(e){return t.indexOf(window.magnum.getFlags(),e)>-1},initEdition:function(){var e=r.readCookie("NYT-Edition")||"edition|US";e=e.match(/\w+$/)[0].toLowerCase(),e!=="us"&&e!=="global"&&(r.deleteCookie("NYT-Edition"),e="us"),window.location.host.indexOf("international")>-1&&(e="global",this.setEdition(e)),this.edition=e,window.magnum.addEditionClass(e)},setEdition:function(e){var t="NYT-Edition";e==="us"?(r.writeCookie(t,"edition|US"),this.edition=e):e==="global"&&(r.writeCookie(t,"edition|GLOBAL"),this.edition=e)},getEdition:function(){return this.edition},isDomesticEdition:function(){return this.edition==="us"},isInternationalEdition:function(){return this.edition==="global"},isComponentVisible:function(e){var t;return!e||e&&e.length===0||!e.is(":visible")?!1:(t=e.get(0).getBoundingClientRect(),t.top+e.height()>=0&&t.left+e.width()>=0&&t.bottom-e.height()<=this.$el.height()&&t.right-e.width()<=this.$el.width())},getCanonical:function(){return this.canonical},isInteractive:function(){return e(".page-interactive").length>0},hasEmbeddedInteractive:function(){return e(".interactive-embedded").length>0},isReferrerArticle:function(e){var t=/nytimes\.com\/(aponline|reuters)?\/?[0-9]{4}\/[0-9]{2}\/[0-9]{2}/,n=e||this.pageReferrer;return t.test(n)},isReferrerHomepage:function(e){var t=/nytimes\.com\/(\?.*)?$/,n=e||this.pageReferrer;return t.test(n)},isReferrerSlideshow:function(e){var t=/nytimes\.com\/slideshow\/?[0-9]{4}\/[0-9]{2}\/[0-9]{2}/,n=e||this.pageReferrer;return t.test(n)},isReferrerInteractive:function(e){var t=/nytimes\.com\/interactive\/?[0-9]{4}\/[0-9]{2}\/[0-9]{2}/,n=e||this.pageReferrer;return t.test(n)},isReferrerNytimes:function(e){var t,n,r,i=e||this.pageReferrer;return t=i.split(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/),n=t[4],r=/nytimes\.com/,r.test(n)},toggleA11y:function(e){this.a11yEnabled=typeof e=="boolean"?e:!1,this.trigger("nyt:a11y-"+(this.a11yEnabled?"en":"dis")+"abled")},trackingAddToEventQueue:function(e){this.trackingQueueEmptied||this.trackingEventQueue.push(e)},trackingFireEventQueue:function(){var e,t,n;for(e=0,t=this.trackingEventQueue.length;e<t;++e)n=this.trackingEventQueue[e],this.trackingTriggerEvent(n.action,n.data,n.type);this.trackingQueueEmptied=!0},trackingTriggerEvent:function(e,t,n){if(window.TAGX&&window.TAGX.EventProxy&&window.TAGX.EventProxy.trigger){try{window.TAGX.EventProxy.trigger(e,t,n)}catch(r){}return!0}return!1},addRoute:function(t,n){this.router.route(t,n,e.noop)},checkRoute:t.once(function(){n.History.started&&n.history.loadUrl()}),navigateRoute:function(e,t){this.router.navigate(e,t||{})},clearRoute:function(){var t=e(document).scrollTop();this.router.navigate("",{trigger:!1,replace:!0}),window.scrollTo(0,t)}});return new i}),!function(e,t,n,r){function i(e,t,n){return setTimeout(f(e,n),t)}function s(e,t,n){return Array.isArray(e)?(o(e,n[t],n),!0):!1}function o(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function u(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,i,r),t.apply(this,arguments)}}function a(e,t,n){var r,i=t.prototype;r=e.prototype=Object.create(i),r.constructor=e,r._super=i,n&&ut(r,n)}function f(e,t){return function(){return e.apply(t,arguments)}}function l(e,t){return typeof e==lt?e.apply(t?t[0]||r:r,t):e}function c(e,t){return e===r?t:e}function h(e,t,n){o(m(t),function(t){e.addEventListener(t,n,!1)})}function p(e,t,n){o(m(t),function(t){e.removeEventListener(t,n,!1)})}function d(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function v(e,t){return e.indexOf(t)>-1}function m(e){return e.trim().split(/\s+/g)}function g(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function b(e,t,n){for(var r=[],i=[],s=0;s<e.length;){var o=t?e[s][t]:e[s];g(i,o)<0&&r.push(e[s]),i[s]=o,s++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function w(e,t){for(var n,i,s=t[0].toUpperCase()+t.slice(1),o=0;o<at.length;){if(n=at[o],i=n?n+s:t,i in e)return i;o++}return r}function E(){return mt++}function S(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function x(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){l(e.options.enable,[e])&&n.handler(t)},this.init()}function T(e){var t,n=e.options.inputClass;return new(t=n?n:bt?F:wt?R:yt?z:j)(e,N)}function N(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=t&Ct&&r-i===0,o=t&(Lt|At)&&r-i===0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,C(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function C(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=A(t)),i>1&&!n.firstMultiple?n.firstMultiple=A(t):1===i&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,u=o?o.center:s.center,a=t.center=O(r);t.timeStamp=pt(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=P(u,a),t.distance=D(u,a),k(n,t),t.offsetDirection=_(t.deltaX,t.deltaY);var f=M(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=f.x,t.overallVelocityY=f.y,t.overallVelocity=ht(f.x)>ht(f.y)?f.x:f.y,t.scale=o?B(o.pointers,r):1,t.rotation=o?H(o.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,L(n,t);var l=e.element;d(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function k(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};(t.eventType===Ct||s.eventType===Lt)&&(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function L(e,t){var n,i,s,o,u=e.lastInterval||t,a=t.timeStamp-u.timeStamp;if(t.eventType!=At&&(a>Nt||u.velocity===r)){var f=t.deltaX-u.deltaX,l=t.deltaY-u.deltaY,c=M(a,f,l);i=c.x,s=c.y,n=ht(c.x)>ht(c.y)?c.x:c.y,o=_(f,l),e.lastInterval=t}else n=u.velocity,i=u.velocityX,s=u.velocityY,o=u.direction;t.velocity=n,t.velocityX=i,t.velocityY=s,t.direction=o}function A(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ct(e.pointers[n].clientX),clientY:ct(e.pointers[n].clientY)},n++;return{timeStamp:pt(),pointers:t,center:O(t),deltaX:e.deltaX,deltaY:e.deltaY}}function O(e){var t=e.length;if(1===t)return{x:ct(e[0].clientX),y:ct(e[0].clientY)};for(var n=0,r=0,i=0;t>i;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:ct(n/t),y:ct(r/t)}}function M(e,t,n){return{x:t/e||0,y:n/e||0}}function _(e,t){return e===t?Ot:ht(e)>=ht(t)?0>e?Mt:_t:0>t?Dt:Pt}function D(e,t,n){n||(n=Ft);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function P(e,t,n){n||(n=Ft);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}function H(e,t){return P(t[1],t[0],It)+P(e[1],e[0],It)}function B(e,t){return D(t[0],t[1],It)/D(e[0],e[1],It)}function j(){this.evEl=Rt,this.evWin=Ut,this.allow=!0,this.pressed=!1,x.apply(this,arguments)}function F(){this.evEl=Xt,this.evWin=Vt,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function I(){this.evTarget=Jt,this.evWin=Kt,this.started=!1,x.apply(this,arguments)}function q(e,t){var n=y(e.touches),r=y(e.changedTouches);return t&(Lt|At)&&(n=b(n.concat(r),"identifier",!0)),[n,r]}function R(){this.evTarget=Gt,this.targetIds={},x.apply(this,arguments)}function U(e,t){var n=y(e.touches),r=this.targetIds;if(t&(Ct|kt)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,s,o=y(e.changedTouches),u=[],a=this.target;if(s=n.filter(function(e){return d(e.target,a)}),t===Ct)for(i=0;i<s.length;)r[s[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&u.push(o[i]),t&(Lt|At)&&delete r[o[i].identifier],i++;return u.length?[b(s.concat(u),"identifier",!0),u]:void 0}function z(){x.apply(this,arguments);var e=f(this.handler,this);this.touch=new R(this.manager,e),this.mouse=new j(this.manager,e)}function W(e,t){this.manager=e,this.set(t)}function X(e){if(v(e,rn))return rn;var t=v(e,sn),n=v(e,on);return t&&n?rn:t||n?t?sn:on:v(e,nn)?nn:tn}function V(e){this.options=ut({},this.defaults,e||{}),this.id=E(),this.manager=null,this.options.enable=c(this.options.enable,!0),this.state=un,this.simultaneous={},this.requireFail=[]}function $(e){return e&hn?"cancel":e&ln?"end":e&fn?"move":e&an?"start":""}function J(e){return e==Pt?"down":e==Dt?"up":e==Mt?"left":e==_t?"right":""}function K(e,t){var n=t.manager;return n?n.get(e):e}function Q(){V.apply(this,arguments)}function G(){Q.apply(this,arguments),this.pX=null,this.pY=null}function Y(){Q.apply(this,arguments)}function Z(){V.apply(this,arguments),this._timer=null,this._input=null}function et(){Q.apply(this,arguments)}function tt(){Q.apply(this,arguments)}function nt(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function rt(e,t){return t=t||{},t.recognizers=c(t.recognizers,rt.defaults.preset),new it(e,t)}function it(e,t){this.options=ut({},rt.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=T(this),this.touchAction=new W(this,this.options.touchAction),st(this,!0),o(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function st(e,t){var n=e.element;n.style&&o(e.options.cssProps,function(e,r){n.style[w(n.style,r)]=t?e:""})}function ot(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var ut,at=["","webkit","Moz","MS","ms","o"],ft=t.createElement("div"),lt="function",ct=Math.round,ht=Math.abs,pt=Date.now;ut="function"!=typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==r&&null!==i)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t}:Object.assign;var dt=u(function(e,t,n){for(var i=Object.keys(t),s=0;s<i.length;)(!n||n&&e[i[s]]===r)&&(e[i[s]]=t[i[s]]),s++;return e},"extend","Use `assign`."),vt=u(function(e,t){return dt(e,t,!0)},"merge","Use `assign`."),mt=1,gt=/mobile|tablet|ip(ad|hone|od)|android/i,yt="ontouchstart"in e,bt=w(e,"PointerEvent")!==r,wt=yt&&gt.test(navigator.userAgent),Et="touch",St="pen",xt="mouse",Tt="kinect",Nt=25,Ct=1,kt=2,Lt=4,At=8,Ot=1,Mt=2,_t=4,Dt=8,Pt=16,Ht=Mt|_t,Bt=Dt|Pt,jt=Ht|Bt,Ft=["x","y"],It=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(S(this.element),this.evWin,this.domHandler)}};var qt={mousedown:Ct,mousemove:kt,mouseup:Lt},Rt="mousedown",Ut="mousemove mouseup";a(j,x,{handler:function(e){var t=qt[e.type];t&Ct&&0===e.button&&(this.pressed=!0),t&kt&&1!==e.which&&(t=Lt),this.pressed&&this.allow&&(t&Lt&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:xt,srcEvent:e}))}});var zt={pointerdown:Ct,pointermove:kt,pointerup:Lt,pointercancel:At,pointerout:At},Wt={2:Et,3:St,4:xt,5:Tt},Xt="pointerdown",Vt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Xt="MSPointerDown",Vt="MSPointerMove MSPointerUp MSPointerCancel"),a(F,x,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=zt[r],s=Wt[e.pointerType]||e.pointerType,o=s==Et,u=g(t,e.pointerId,"pointerId");i&Ct&&(0===e.button||o)?0>u&&(t.push(e),u=t.length-1):i&(Lt|At)&&(n=!0),0>u||(t[u]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:s,srcEvent:e}),n&&t.splice(u,1))}});var $t={touchstart:Ct,touchmove:kt,touchend:Lt,touchcancel:At},Jt="touchstart",Kt="touchstart touchmove touchend touchcancel";a(I,x,{handler:function(e){var t=$t[e.type];if(t===Ct&&(this.started=!0),this.started){var n=q.call(this,e,t);t&(Lt|At)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Et,srcEvent:e})}}});var Qt={touchstart:Ct,touchmove:kt,touchend:Lt,touchcancel:At},Gt="touchstart touchmove touchend touchcancel";a(R,x,{handler:function(e){var t=Qt[e.type],n=U.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Et,srcEvent:e})}}),a(z,x,{handler:function(e,t,n){var r=n.pointerType==Et,i=n.pointerType==xt;if(r)this.mouse.allow=!1;else if(i&&!this.mouse.allow)return;t&(Lt|At)&&(this.mouse.allow=!0),this.callback(e,t,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Yt=w(ft.style,"touchAction"),Zt=Yt!==r,en="compute",tn="auto",nn="manipulation",rn="none",sn="pan-x",on="pan-y";W.prototype={set:function(e){e==en&&(e=this.compute()),Zt&&this.manager.element.style&&(this.manager.element.style[Yt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return o(this.manager.recognizers,function(t){l(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),X(e.join(" "))},preventDefaults:function(e){if(!Zt){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,i=v(r,rn),s=v(r,on),o=v(r,sn);if(i){var u=1===e.pointers.length,a=e.distance<2,f=e.deltaTime<250;if(u&&a&&f)return}if(!o||!s)return i||s&&n&Ht||o&&n&Bt?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var un=1,an=2,fn=4,ln=8,cn=ln,hn=16,pn=32;V.prototype={defaults:{},set:function(e){return ut(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(s(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=K(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return s(e,"dropRecognizeWith",this)?this:(e=K(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(s(e,"requireFailure",this))return this;var t=this.requireFail;return e=K(e,this),-1===g(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(s(e,"dropRequireFailure",this))return this;e=K(e,this);var t=g(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;ln>r&&t(n.options.event+$(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=ln&&t(n.options.event+$(r))},tryEmit:function(e){return this.canEmit()?this.emit(e):void (this.state=pn)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(pn|un)))return!1;e++}return!0},recognize:function(e){var t=ut({},e);return l(this.options.enable,[this,t])?(this.state&(cn|hn|pn)&&(this.state=un),this.state=this.process(t),void (this.state&(an|fn|ln|hn)&&this.tryEmit(t))):(this.reset(),void (this.state=pn))},process:function(){},getTouchAction:function(){},reset:function(){}},a(Q,V,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(an|fn),i=this.attrTest(e);return r&&(n&At||!i)?t|hn:r||i?n&Lt?t|ln:t&an?t|fn:an:pn}}),a(G,Q,{defaults:{event:"pan",threshold:10,pointers:1,direction:jt},getTouchAction:function(){var e=this.options.direction,t=[];return e&Ht&&t.push(on),e&Bt&&t.push(sn),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&Ht?(i=0===s?Ot:0>s?Mt:_t,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=0===o?Ot:0>o?Dt:Pt,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Q.prototype.attrTest.call(this,e)&&(this.state&an||!(this.state&an)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=J(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),a(Y,Q,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[rn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&an)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),a(Z,V,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[tn]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,s=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(Lt|At)&&!s)this.reset();else if(e.eventType&Ct)this.reset(),this._timer=i(function(){this.state=cn,this.tryEmit()},t.time,this);else if(e.eventType&Lt)return cn;return pn},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===cn&&(e&&e.eventType&Lt?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=pt(),this.manager.emit(this.options.event,this._input)))}}),a(et,Q,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[rn]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&an)}}),a(tt,Q,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ht|Bt,pointers:1},getTouchAction:function(){return G.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Ht|Bt)?t=e.overallVelocity:n&Ht?t=e.overallVelocityX:n&Bt&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ht(t)>this.options.velocity&&e.eventType&Lt},emit:function(e){var t=J(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),a(nt,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[nn]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,s=e.deltaTime<t.time;if(this.reset(),e.eventType&Ct&&0===this.count)return this.failTimeout();if(r&&s&&n){if(e.eventType!=Lt)return this.failTimeout();var o=this.pTime?e.timeStamp-this.pTime<t.interval:!0,u=!this.pCenter||D(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,u&&o?this.count+=1:this.count=1,this._input=e;var a=this.count%t.taps;if(0===a)return this.hasRequireFailures()?(this._timer=i(function(){this.state=cn,this.tryEmit()},t.interval,this),an):cn}return pn},failTimeout:function(){return this._timer=i(function(){this.state=pn},this.options.interval,this),pn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==cn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),rt.VERSION="2.0.6",rt.defaults={domEvents:!1,touchAction:en,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[Y,{enable:!1},["rotate"]],[tt,{direction:Ht}],[G,{direction:Ht},["swipe"]],[nt],[nt,{event:"doubletap",taps:2},["tap"]],[Z]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var dn=1,vn=2;it.prototype={set:function(e){return ut(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?vn:dn},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&cn)&&(i=t.curRecognizer=null);for(var s=0;s<r.length;)n=r[s],t.stopped===vn||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(an|fn|ln)&&(i=t.curRecognizer=n),s++}},get:function(e){if(e instanceof V)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(s(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(s(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=g(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){var n=this.handlers;return o(m(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return o(m(e),function(e){t?n[e]&&n[e].splice(g(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&ot(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&st(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ut(rt,{INPUT_START:Ct,INPUT_MOVE:kt,INPUT_END:Lt,INPUT_CANCEL:At,STATE_POSSIBLE:un,STATE_BEGAN:an,STATE_CHANGED:fn,STATE_ENDED:ln,STATE_RECOGNIZED:cn,STATE_CANCELLED:hn,STATE_FAILED:pn,DIRECTION_NONE:Ot,DIRECTION_LEFT:Mt,DIRECTION_RIGHT:_t,DIRECTION_UP:Dt,DIRECTION_DOWN:Pt,DIRECTION_HORIZONTAL:Ht,DIRECTION_VERTICAL:Bt,DIRECTION_ALL:jt,Manager:it,Input:x,TouchAction:W,TouchInput:R,MouseInput:j,PointerEventInput:F,TouchMouseInput:z,SingleTouchInput:I,Recognizer:V,AttrRecognizer:Q,Tap:nt,Pan:G,Swipe:tt,Pinch:Y,Rotate:et,Press:Z,on:h,off:p,each:o,merge:vt,extend:dt,assign:ut,inherit:a,bindFn:f,prefixed:w});var mn="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};mn.Hammer=rt,"function"==typeof define&&define.amd?define("hammer/nyt",[],function(){return rt}):"undefined"!=typeof module&&module.exports?module.exports=rt:e[n]=rt}(window,document,"Hammer"),define("foundation/lib/ga/ga-nyt5",[],function(){var e,t="UA-49012624-2",n="nytimes.com",r=window.NYTABTEST.engine.toObject(),i={1234:"M-eAuYLCRbyJpo8NdGeqlg"};/sbx|dev|stg/.test(window.location.host)&&(t="UA-49012624-1",i={1234:"F-RwgkDVRI-Xs8uKFZ5jPQ"},n=window.location.host.replace(/\/$/,"")),function(e,t,n,r,i,s,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,s=t.createElement(n),o=t.getElementsByTagName(n)[0],s.async=1,s.src=r,o.parentNode.insertBefore(s,o)}(window,document,"script","//www.google-analytics.com/analytics.js","gaNyt5"),window.gaNyt5("create",t,n);for(e in i)i.hasOwnProperty(e)&&window.gaNyt5("set",{expId:i[e],expVar:r[e]});return window.gaNyt5("send","pageview"),window.gaNyt5}),define("foundation/base-mixin",["jquery/nyt","underscore/nyt","foundation/views/page-manager"],function(e,t,n){var r={pageManager:n,dateHelper:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],getDayName:function(e){return this.days[e]},getMonthName:function(e){return this.months[e]}},flag:function(e){return n.flag(e)},broadcast:function(){n.trigger.apply(n,arguments)},local:function(e){var t=Array.prototype.slice.call(arguments,0);t.shift(),e.trigger.apply(e,t)},subscribe:function(){this.subscribeHelper("listenTo",arguments)},subscribeOnce:function(){this.subscribeHelper("listenToOnce",arguments)},stopSubscribing:function(){this.subscribeHelper("stopListening",arguments)},subscribeHelper:function(e,r){t.isString(r[0])?this[e](n,r[0],r[1]):this[e](r[0],r[1],r[2])},createAnchor:function(e){var t=document.createElement("a");return t.href=e,t},isUserVariant:function(e){return window.NYTABTEST.engine.isUserVariant(e)},isUserControl:function(e){return window.NYTABTEST.engine.isUserControl(e)},isUserInAnyVariant:function(e){return window.NYTABTEST.engine.isUserInAnyVariant(e)},loadGoogleAnalytics:function(){var t=new e.Deferred;return window.NYTABTEST.engine.isUserThrottle()&&require(["foundation/lib/ga/ga-nyt5"],function(e){t.resolve(e)}),t.promise()}};return r}),define("foundation/hosts",[],function(){var e=window.location.protocol.indexOf("https")===0,t="http://static01.nyt.com",n="http://static01.nyt.com",r="http://static01.nyt.com",i="http://json8.nytimes.com",s="https://static.nytimes.com",o="https://static.nytimes.com",u="https://static.nytimes.com",a="https://static.nytimes.com",f="//www.nytimes.com",l="//international.nytimes.com",c="//www.nytimes.com",h="https://myaccount.nytimes.com",p="//meter-svc.nytimes.com",d="//s3.amazonaws.com/pimage.timespeople.nytimes.com",v="//tagx.nytimes.com",m="http://www.nytimes.com",g="http://core.fabrik.nytimes.com",y="//www.nytimes.com",b="http://www.nytimes.com",w="//www.nytimes.com",E="//s1.nyt.com",S="//mobile.nytimes.com",x="//query.nytimes.com",T="http://www.nytimes.com",N="http://www.nytimes.com/svc/collections/v1/publish/www.nytimes.com/",C="http://service-nytimes.gabriels.net",k="http://realestate.nytimes.com/JSONSuggestService.aspx",L="http://service-nytimes.gabriels.net/v1.1/SmartSearchResults.aspx",A="http://realestate.nytimes.com",O="//realestateads.nytimes.com/",M="http://nyt-services.gabriels.net",_="http://nyt-services.gabriels.net/Listings/v1.0/NYT.Listings.svc/getSimilarListings",D="http://www.nytimes.com/svc/pushmobile/follow/v0",P="http://s1.nyt.com/messaging/follow",H="/29390238/NYT/",B="https://cms.em.nytimes.com",j="http://www.nytimes.com",F="http://search-add-api.prd.use1.nytimes.com",I="http://reading-list.api.nytimes.com";return{image:e?s:t,js:e?o:n,css:e?u:r,json:e?a:i,www:f,international:l,adx:c,myaccount:h,meterSvc:p,profileImage:d,tagx:v,msg:m,msgSocket:g,community:y,du:b,comscorePvc:w,s1:E,mobileWeb:S,search:x,add:T,addNew:N,realestate:C,realestateBasicSearch:k,realestateSmartSearch:L,realestateResults:A,realestatePostAdLink:O,realestateJsonHost:M,realestateSimilarListings:_,followApi:D,followableList:P,dfpHost:H,scoopTool:B,personalization:j,addSearchHost:F,readingListHost:I}}),define("foundation/browser",[],function(){var e={getDocument:function(){return document},getWindow:function(){return window}};return e}),define("foundation/helpers/utils",["foundation/views/page-manager","foundation/hosts","foundation/browser"],function(e,t,n){var r={appendQueryParams:function(e,t){var n,r,i,s,o=[],u=document.createElement("a");t=t||{},u.href=e,i=u.search;for(n in t)s=encodeURIComponent(n),s+=t[n]!==""?"=":"",o.push(s+encodeURIComponent(t[n])),i.indexOf(s)!==-1&&(i=i.replace(new RegExp("&?"+s+"[^&]*"),""));return i=i.length===1&&i.indexOf("?")===0?"":i,r=i.length>0&&i.indexOf("?")===0?"&":"?",e=[u.protocol!==":"?u.protocol+"//":"http://",u.hostname!==""?u.hostname:"","/",u.pathname.replace(/^\//,""),i,r,o.join("&"),u.hash].join(""),e},getHostBasedOnEdition:function(){return e.isInternationalEdition()&&n.getWindow().location.host.indexOf("international")>=0?t.international:t.www}};return r}),define("foundation/tracking/tracking-mixin",["jquery/nyt","underscore/nyt","foundation/helpers/utils","foundation/views/page-manager","foundation/hosts","foundation/cookies"],function(e,t,n,r,i,s){var o={trackingBaseData:{},trackingCombineData:function(e){e=e||{};try{return t.extend({},this.trackingBaseData,e,{pgtype:this.pageManager.getMeta("PT")})}catch(n){}},trackingTrigger:function(e,t){t=this.trackingCombineData(t),this.trackingTriggerRaw(e,t,"interaction")},trackingTriggerImpression:function(e,t){t=this.trackingCombineData(t),this.trackingTriggerRaw(e,t,"impression")},trackingTriggerRaw:function(e,t,n){var i=r.trackingTriggerEvent(e,t,n);i||r.trackingAddToEventQueue({action:e,data:t,type:n})},trackingAppendParams:function(e,t){var r;return r=n.appendQueryParams(e,this.trackingCombineData(t)),r},writeTrackingParamsCookie:function(e){var t=new Date,n="qry"+Math.ceil(Math.random()*1e3);return t.setMinutes(t.getMinutes()+2),s.writeCookie(n,e,{expires:t}),s.readCookie(n)===null&&(e="alxcookie=0&"+e),e},trackingComscorePVC:function(e){(new Image).src=i.comscorePvc+"/svc/comscore/pvc.html",e&&this.trackingTriggerRaw("comscore-pageview-candidate",e,"other")}};return o}),define("foundation/models/base-model",["jquery/nyt","underscore/nyt","backbone/nyt","foundation/base-mixin"],function(e,t,n,r){var i=n.Model.extend(t.extend({},r));return i}),define("foundation/helpers/model-mixin",[],function(){var e={hasSynced:!1,ready:function(e){e&&this.hasSynced?e():e&&this.subscribeOnce(this.eventName,e)},isReady:function(){return this.hasSynced}};return e}),define("foundation/models/user-data",["jquery/nyt","underscore/nyt","backbone/nyt","foundation/models/base-model","foundation/helpers/model-mixin","foundation/cookies","foundation/hosts"],function(e,t,n,r,i,s,o){var u=r.extend(i).extend({defaults:{id:"",name:"",profileImage:"",subscription:[],demographics:{}},eventName:"nyt:user-ready",initialize:function(){var e=this;this.subscribeOnce(this,"sync error",this.loadProfileImage),this.subscribeOnce(this,"sync error",function(){e.hasSynced=!0,e.broadcast(this.eventName)}),this.loadData()},loadData:function(){var t=e("#user-info-data").text();t?(this.set(e.parseJSON(t).data),this.trigger("sync")):this.fetch()},sync:function(e,t,r){var i;return i=o.www+"/svc/web-products/userinfo-v3.json",r.url=i,r.cache=!1,o.www!=="//"+window.location.host&&(r.dataType="jsonp",r.jsonpCallback="userInfoCallback",r.url+="p",r.data={cookie:s.readCookie("NYT-S")||""}),n.sync(e,t,r)},parse:function(e){return e.data},hasEntitlement:function(e){return t.indexOf(this.get("subscription"),e)>-1},isLoggedIn:function(){var e=this.get("id");return e.length>0&&e!=="0"},getUserId:function(){return this.get("id")},getUserName:function(){return this.get("name")},getTruncatedUserName:function(e){var n=this.get("name");return t.isNumber(e)&&n.length>e&&(n=n.substring(0,e-1)+"..."),n},getImageUrl:function(){return this.get("profileImage")},isWebSubscriber:function(){return this.hasEntitlement("MM")},isMobileSubscriber:function(){return this.hasEntitlement("MTD")&&this.hasEntitlement("MSD")},isTabletSubscriber:function(){return this.hasEntitlement("MTD")},isSmartphoneSubscriber:function(){return this.hasEntitlement("MSD")},isCrosswordsSubscriber:function(){return this.hasEntitlement("XWD")},isHomeDeliverySubscriber:function(){return this.hasEntitlement("HD")},isCookingSubscriber:function(){return this.hasEntitlement("COO")},isOpinionSubscriber:function(){return this.hasEntitlement("OPI")},isPremierSubscriber:function(){return this.hasEntitlement("TPR")},getImageSource:function(e){var t=o.profileImage+"/"+e.substring(4,0)+"/"+e.substring(4)+"/cropped-"+e+".jpg";return t},loadProfileImage:function(){var e,t,n,r;if(!this.isLoggedIn())return;e=this,t=new Image,n=e.getUserId(),r=e.getImageSource(n),n.length>0&&(t.onload=function(){e.set("profileImage",r),e.local(e,"nyt:user-image-loaded")},t.src=r)},getPostalCode:function(){return this.get("demographics").postal_code},getIncomeRange:function(){return this.get("demographics").income_range},getJobTitle:function(){return this.get("demographics").job_title},getJobIndustry:function(){return this.get("demographics").job_industry},getGender:function(){return this.get("demographics").gender},getCountryCode:function(){return this.get("demographics").country_code},getWat:function(){return this.get("demographics").wat},getCompanySize:function(){return this.get("demographics").company_size},getEmailSubscriptions:function(){return this.get("demographics").email_subscriptions},getBundleSubscriptions:function(){return this.get("demographics").bundle_subscriptions}});return new u}),define("foundation/models/page-storage",["jquery/nyt","underscore/nyt","backbone/nyt","foundation/models/base-model","foundation/helpers/model-mixin","foundation/hosts"],function(e,t,n,r,i,s){var o=r.extend(i).extend({storageKey:"nyt:site-storage",serviceUrl:s.www+"/svc/web/localstorage.html",eventName:"nyt:storage-ready",initialize:function(){t.bindAll(this,"handleFrameLoad","handleMessage"),this.isXDomain()?this.setupXDomain():this.syncData(window.localStorage.getItem(this.storageKey)||"{}")},syncData:function(e){try{this.clear().set(JSON.parse(e))}catch(t){}this.hasSynced=!0,this.broadcast(this.eventName),this.listenTo(this,"change",this.handleDataChange)},handleDataChange:function(){var e=JSON.stringify(this.toJSON());this.isXDomain()?this.sendMessage(e):window.localStorage.setItem(this.storageKey,e)},isXDomain:function(){return window.location.host.indexOf("www")<0},setupXDomain:function(){this.iframe=document.createElement("iframe"),this.iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;",document.body.appendChild(this.iframe),window.addEventListener?(this.iframe.addEventListener("load",this.handleFrameLoad,!1),window.addEventListener("message",this.handleMessage,!1)):this.iframe.attachEvent&&(this.iframe.attachEvent("onload",this.handleFrameLoad,!1),window.attachEvent("onmessage",this.handleMessage)),this.iframe.src=this.serviceUrl},sendMessage:function(e){var t={key:this.storageKey};e&&(t.value=e),this.iframe.contentWindow.postMessage(JSON.stringify(t),window.location.protocol+s.www)},handleFrameLoad:function(){this.sendMessage()},handleMessage:function(e){var t="",n=e.origin||"";e&&typeof e.data=="string"&&(t=e.data),/\.nytimes\.com$/.test(n)&&t.indexOf("localstorage:")===0&&this.syncData(t.replace("localstorage:",""))}});if(!window.Modernizr.localstorage||!window.Modernizr.postmessage)o=n.Model.extend({ready:e.noop});return new o}),define("foundation/views/base-view",["jquery/nyt","underscore/nyt","backbone/nyt","hammer/nyt","foundation/views/page-manager","foundation/base-mixin","foundation/tracking/tracking-mixin","foundation/models/user-data","foundation/models/page-storage"],function(e,t,n,r,i,s,o,u,a){var f=n.View.prototype.delegateEvents,l=n.View.prototype.undelegateEvents,c=n.View.extend(t.extend({},s,o,{magnum:window.magnum,hammer:r,$window:i.$window,$document:i.$document,$html:i.$html,$body:i.$body,$shell:i.$shell,hammerEvents:["hold","tap","doubletap","drag","dragstart","dragend","dragup","dragdown","dragleft","dragright","swipe","swipeup","swipedown","swipeleft","swiperight","transform","transformstart","transformend","rotate","pinch","pinchin","pinchout","touch","release"],truncateText:function(e,t,n){var r,i,s=[],o=[],u=n?'<span class="ellipsis">…</span>':"...",a=e.html().replace(/<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>/gi,function(e){return" "+e.replace(/ /g,"%%%")+" "});a=a.replace(/ {2}/g," ").split(" ");if(t<0)return;while(e.height()>t){a[a.length-1].indexOf("<img")===0?a.pop():a[a.length-1].indexOf("<")===0?o.push(a.pop()):s.push(a.pop()),r=a.join(" "),n||(r=r.replace(/[\,:,;]$/,"")),r=r+u+o.join(""),e.html(r.replace(/\%\%\%/g," "));if(a.length===0)break}n&&s.length&&(s.reverse(),i=s.join(" "),e.after('<span class="visually-hidden">'+i+"</span>"),e.find(".ellipsis").attr("title",i))},prettyDate:function(e,t,n,r){var i=r||(new Date).getTime(),s=typeof e=="number"?new Date(e):new Date((e||"").replace(/-/g,"/").replace(/[TZ]/g," ")),o=(i-s.getTime())/1e3,u=s.getDate(),a=Math.floor(o/86400),f=["January","February","March","April","May","June","July","August","September","October","November","December"],l=f[s.getMonth()],c=s.getFullYear(),h=t?"m":" minutes",p=t?"m":" minute",d=t?"h":" hours",v=t?"h":" hour",m=t?"d":" day",g=t?"d":" days";if(isNaN(a)||a<0)return!1;if(typeof n=="function"&&n(o))return!1;if(a===0){if(o<60)return"Just now";if(o<120)return"1"+p+" ago";if(o<3600)return Math.floor(o/60)+h+" ago";if(o<7200)return"1"+v+" ago";if(o<86400)return Math.floor(o/3600)+d+" ago"}else{if(a===1)return a+m+" ago";if(a<3)return a+g+" ago";if(a>=3)return l+" "+u+", "+c}return!1},isElementInViewport:function(t){var n;return!t||t&&t.length===0?!1:(n=t.get(0).getBoundingClientRect(),n.top+t.height()>=0&&n.left+t.width()>=0&&n.bottom-t.height()<=e(window).height()&&n.right-t.width()<=e(window).width())},durationFromMilliseconds:function(e){var t,n,r;return typeof e!="number"||isNaN(e)?"0:00":(t=e/1e3,n=Math.floor(t/60),r=Math.floor(t%60),r<10&&(r="0"+r),n+":"+r)},toggleNytEvents:function(e){var t;if(this.nytEvents)for(t in this.nytEvents)this[e](i,t,this[this.nytEvents[t]])},proxyHammer:function(e){var n,i,s,o=t.extend({},e),u=this,a=this.hammerEvents,f=this.hammerSettings||{};return t.each(o,function(e,l){n=l.match(/^(\S+)\s*(.*)$/),i=n[1],s=n[2],t.isFunction(e)||(e=u[o[l]]),e=t.bind(e,u),t.indexOf(a,i)>-1&&(delete o[l],s===""?u.$el[0]&&r(u.$el[0],f).on(i,e):u.$(s).each(function(){r(this,f).on(i,e)}))}),o},hasDomDelegated:!1,hasLocalStorageDelegated:!1,hasUserDelegated:!1,delegateEvents:function(){var e=t.result(this,"events"),n=Modernizr.touch?this.proxyHammer(e):e;return f.call(this,n),this.toggleNytEvents("listenTo"),this.handleDomReady&&!this.hasDomDelegated&&(this.hasDomDelegated=!0,i.isDomReady()?(t.bindAll(this,"handleDomReady"),t.defer(this.handleDomReady)):this.listenToOnce(i,"nyt:page-ready",this.handleDomReady)),this.handleLocalStorageReady&&!this.hasLocalStorageDelegated&&(this.hasLocalStorageDelegated=!0,typeof a.isReady=="function"&&(a.isReady()?(t.bindAll(this,"handleLocalStorageReady"),t.defer(this.handleLocalStorageReady)):this.listenToOnce(i,"nyt:storage-ready",this.handleLocalStorageReady))),this.handleUserReady&&!this.hasUserDelegated&&(this.hasUserDelegated=!0,u.isReady()?(t.bindAll(this,"handleUserReady"),t.defer(this.handleUserReady)):this.listenToOnce(i,"nyt:user-ready",this.handleUserReady)),this},undelegateEvents:function(){return l.apply(this,arguments),this.toggleNytEvents("stopListening"),this}}));return c.registerView=function(e){var t=function(){return t};return t.extend=t,e&&i.isDisabled(e)?t:c},c}),define("shared/adlibrary/helpers/filter-placements-mixin",["underscore/nyt"],function(e){var t={map:{forcexxl:{placement:"lede-ad",size:[468,648]},force970x250:{placement:"TopAd",size:[970,250]},force970x90:{placement:"TopAd",size:[970,90]},forcemega:{placement:"MegaAd",size:[1600,512]},force300x600:{placement:["lede-ad","MiddleRight"],size:[300,600]},force300x250:{placement:"lede-ad",size:[300,250]},force970x418:{placement:"MegaAd",size:[970,418]}},run:function(t,n){var r;!e.isUndefined(t)&&this.map[t]&&(r=this.map[t],e.isArray(r.placement)?e.each(r.placement,function(e){n[e]&&(n[e]=r.size)}):n[r.placement]&&(n[r.placement]=r.size))}};return t}),define("shared/adlibrary/views/base-ad",["underscore/nyt","foundation/views/base-view","shared/adlibrary/helpers/filter-placements-mixin"],function(e,t,n){var r=t.extend({isReady:!1,constructor:function(e){if(this.isDisabled())return;this.setUpOptions(e),n.run(this.pageManager.getUrlParam("ad-keywords"),this.placements),t.apply(this,arguments),this.sitewide.initialize(this),this.sitewide.async||(this.sitewide.isReady=!0,this.signalReady()),this.requirements.initialize(this),this.requirements.async||(this.requirements.isReady=!0,this.signalReady())},requirements:{async:!1,initialize:function(e){this[e.viewName]=e}},sitewide:{async:!1,initialize:function(e){this[e.viewName]=e}},placements:{TopAd:[[728,90],[970,90],[970,66],[970,250]]},broadcastAdEvent:function(){var e,t,n=Array.prototype.slice.call(arguments);if(n.length===0)throw"Please provide event name as the first argument to notify()";e=n.slice(0,1)[0],n=n.slice(1),t=e.indexOf("nyt:")===-1?"nyt:ad-library:"+this.viewName+":"+e:e,this.broadcast.apply(this,[t].concat(n))},listenToAdEvent:function(e,t){var n=Array.prototype.slice.call(arguments,2),r=typeof n[0]=="boolean"?n[0]:!1,i=typeof n[0]=="object"?n[0]:n[1],s=r?"listenToOnce":"listenTo",o=e.indexOf("nyt:")===-1?"nyt:ad-library:"+this.viewName+":"+e:e;if(arguments.length<2)throw"Please provide event name and callback to watch()";this[s].call(i||this,this.pageManager,o,t)},ignoreAdEvent:function(e,t){var n=e.indexOf("nyt:")===-1?"nyt:ad-library:"+this.viewName+":"+e:e;this.stopSubscribing(n,t)},signalReady:function(){this.sitewide.isReady&&this.requirements.isReady&&this.broadcastAdEvent("ready")},triggerTagX:function(){var e=this.$html,t={module:"Page",viewportWidth:this.$window.width(),ledeMediaSize:e.attr("data-lede-media-size"),pageLayout:e.attr("data-page-layout")};this.trackingTriggerRaw("ad-tracking",t,"interaction")},setUpOptions:function(t){t&&(this.placements=t.placements?e.extend({},this.placements,t.placements):this.placements,this.requirements=t.requirements||this.requirements)},getAdPlacements:function(){return this.placements},getAdKeywords:function(){return this.pageManager.getUrlParam("ad-keywords")},getAdSensitivity:function(){return this.pageManager.getMeta("ad_sensitivity")},isDisabled:function(){return typeof this.pageManager.getUrlParam("nojoy")!="undefined"||this.pageManager.getUrlParam("adx_campaign")==="noads"||this.pageManager.getUrlParam("gwt")==="pay"},isAmazonDisabled:function(){return this.pageManager.getMeta("dfp-amazon-enabled")==="false"||this.pageManager.getMeta("dfp-amazon-enabled")===!1}});return r}),define("shared/adlibrary/helpers/dfp-ordered-custom-criteria-mixin",["underscore/nyt","foundation/views/page-manager"],function(e,t){function n(t){var n="";return e.isArray(t)?(t=e.each(t,function(e,t){n+=t>0?",":"",n+=e.toLowerCase().replace(/[^a-z]+/ig,"").substring(0,30)}),n):e.isString(t)?t.toLowerCase().replace(/[^a-z]+/ig,"").substring(0,30):""}function r(){return t.getUrlParam("src")==="rec"?"recpg":t.getUrlParam("module")==="Recommendation"?"recmod":t.getUrlParam("pgtype")?t.getUrlParam("pgtype"):""}function i(){if(t.getUrlParam("smid")){if(t.getUrlParam("smid")==="fb-nytimes"||t.getUrlParam("smid")==="fb-share")return"facebook";if(t.getUrlParam("smid")==="tw-nytimes"||t.getUrlParam("smid")==="tw-share")return"twitter"}return""}var s;return s=[{key:"adv",value:t.getUrlParam("ad-keywords")},{key:"plat",value:"web"},{key:"prop",value:"nyt"},{key:"ver",value:"nyt5"},{key:"sub",value:""},{key:"typ",value:""},{key:"pos",value:""},{key:"spon",value:n(t.getMeta("ad-sponsor"))},{key:"des",value:n(t.getMeta("des"))},{key:"per",value:n(t.getMeta("per"))},{key:"org",value:n(t.getMeta("org"))},{key:"geo",value:n(t.getMeta("geo"))},{key:"ttl",value:n(t.getMeta("ttl"))},{key:"col",value:n(t.getMeta("col"))},{key:"ser",value:n(t.getMeta("ser"))},{key:"id",value:t.getMeta("articleid")},{key:"auth",value:n(t.getMeta("author"))},{key:"amznslots",value:""},{key:"ref",value:r()},{key:"srch",value:""},{key:"edn",value:t.isInternationalEdition()?"intl":"us"},{key:"lan",value:""},{key:"etua",value:""},{key:"subsrc",value:""},{key:"env",value:""},{key:"cs",value:""},{key:"jt",value:""},{key:"ind",value:""},{key:"g",value:""},{key:"em",value:""},{key:"inc",value:""},{key:"wat",value:""},{key:"refdom",value:i()},{key:"sov",value:(Math.floor(Math.random()*4)+1).toString()}],s}),define("shared/adlibrary/helpers/dfp-placements-mixin",[],function(){var e={TopAd:[[728,90],[970,90],[970,66],[970,250]],TopAd1:[728,90],TopAd2:[728,90],TopAd3:[728,90],TopAd4:[728,90],TopAd5:[728,90],"lede-ad":[[468,648],[300,600],[300,250]],"marketing-ad":[301,250],MiddleRight1:[300,250],MiddleRight2:[300,250],MiddleRight3:[300,250],MiddleRight4:[300,250],MiddleRight5:[300,250],MiddleRight6:[300,250],MiddleRight7:[300,250],MiddleRight8:[300,250],MiddleRight9:[300,250],MiddleRight10:[300,250],MiddleRight11:[300,250],MiddleRight12:[300,250],MiddleRight13:[300,250],MiddleRight14:[300,250],MiddleRight15:[300,250],Middle1C:[88,31],MostEm:[88,31],TopNavAd:[88,31],MegaAd:[1600,512],Moses:[[970,418],[970,40]],Frame4A:[96,60],Frame6A:[336,90],Position1:[96,60],Spon2:[88,31],MiddleRightN:[300,250],TopAdN:[728,90],BigAd3:[300,250],MobileBanner:[320,50],MobileBanner2:[[320,50],[300,250]],Ribbon:[240,75],RibbonInterstitial:[900,500],Interstitial:[[1,1],[640,480]],WelcomeBack:[300,250],sponsortile:[150,50]};return e}),define("shared/adlibrary/helpers/dfp-sitewide-requirements-mixin",["jquery/nyt","underscore/nyt","foundation/models/user-data"],function(e,t,n){var r={aax:"3030",async:!0,dfp:null,isReady:!1,amazonKeywords:[],tabletPortraitSize:1020,hasSentComscore:!1,initialize:function(e){var t=this;this.dfp=e,this.dfp.isAmazonDisabled()?this.async=!1:this.setUpAmazonGlobal(),this.addCookieData(),this.integrateKrux(),this.determineAdSizes(),this.modifyChamber(),this.handleSupportedBy(),this.dfp.pageManager.flag("trendingPageLinks")&&this.addTrendingKeywords(),e.listenToAdEvent("ad-rendered",t.handleAdRendered,t),e.listenToAdEvent("ad-slot-defined",this.handleSlotDefined,t),e.listenToAdEvent("nyt:masthead-search-toggle",t.handleSearchSponsor,t),e.listenToAdEvent("nyt:page-breakpoint",t.handleBreakpoint,t),e.listenToAdEvent("refresh",t.handleRefresh,t)},modifyChamber:function(){var e=this.dfp;e.clearChamber()},signalReady:function(){this.isReady=!0,this.dfp.signalReady()},handleAdRendered:function(e,t,n,r,i){var s=this,o=this.dfp.getAdElement(e);this.determineVisibility(o,n),t=t||[0,0];switch(t[0]){case 728:s.checkPoliticalStatus(o,n);break;case 300:s.checkPoliticalStatus(o,n),s.triggerComScore(e,r,i);break;case 301:s.checkPoliticalStatus(o,n),s.triggerComScore(e,r,i);break;case 468:s.triggerComScore(e,r,i)}switch(e){case"TopAd":s.handleTopAd(o,n);break;case"lede-ad":s.handleBigAdRendered(o,t,n);break;case"SupportedBy":s.handleSupportedByAd(o,n)}},handleTopAd:function(e,t){var n=e.find("iframe"),r=n.prev("div"),i=this.dfp.$adsOnPage.TopAd;t?this.dfp.$html.removeClass("has-top-ad"):(this.dfp.$html.addClass("has-top-ad"),e.attr("display","block")),this.has970TopAd=this.dfp.$html.hasClass("has-top-ad")&&(e.find("iframe").width()>728||r.width()>728),this.has970TopAd&&i.css("min-height","26px")},handleBigAdRendered:function(e,t,n){n?this.dfp.$html.removeClass("has-big-ad"):t[0]>=468&&(this.dfp.$html.addClass("has-xxl"),this.hasXXLAd=!0)},handleSupportedBy:function(){var t=e("html").hasClass("viewport-medium-10");this.dfp.pageManager.flag("supportedBy")&&(t?this.dfp.addPlacementSize("SupportedBy",[150,50]):this.dfp.addPlacementSize("SupportedBy",[320,25]))},handleSupportedByAd:function(t,n){n||(e(".supported-by").removeClass("hidden"),this.dfp.$html.addClass("has-supported-by-ad"))},checkPoliticalStatus:function(t,n){var r;if(!n)try{t.find("iframe").contents().find("html #politicalAd").length>0&&(r=e("<div>").addClass("ad-header").attr("aria-hidden","true").append(e("<p>")).find("p").text("Advertisement").end(),t.prepend(r))}catch(i){}},integrateKrux:function(){this.setUpKruxGlobal(),this.addKruxKeywords()},setUpKruxGlobal:function(){window.Krux=window.Krux||((window.Krux=function(){window.Krux.q.push(arguments)}).q=[])},addKruxKeywords:function(){var e={},t=this.retrieveKruxData("segs"),n=this.retrieveKruxData("user");t&&(e.ksg=t,window.Krux.segments=t.split(",")||[]),n&&(e.kuid=n,window.Krux.user=n),this.dfp.setCustomCriteria(e)},retrieveKruxData:function(e){var t,n="kx"+e;return window.localStorage?window.localStorage[n]||"":navigator.cookieEnabled?(t=document.cookie.match(n+"=([^;]*)"),t&&window.unescape(t[1])||""):""},setUpAmazonGlobal:function(){var t=this;window.amznads={updateAds:e.noop,renderAd:e.noop},e.ajax({url:"//c.amazon-adsystem.com/aax2/amzn_ads.js",dataType:"script",timeout:1e3}).always(function(){t.getAmazonKeywords()})},getAmazonKeywords:function(){var t=this,n=encodeURIComponent(document.location);try{n=encodeURIComponent(""+window.top.location)}catch(r){}e.ajax({url:"//aax.amazon-adsystem.com/e/dtb/bid?src="+t.aax+"&u="+n+"&cb="+Math.round(Math.random()*1e7),dataType:"script",timeout:1e3}).done(function(){t.addAmazonKeywords()}).always(function(){t.signalReady()})},handleRefresh:function(){var e=this.dfp,n=t.toArray(arguments),r=function(){e.refreshSlots.apply(e,n)};this.dfp.isAmazonDisabled()?r():this.refreshAmazonKeywords(r)},refreshAmazonKeywords:function(e){var n=this;window.amznads.getAdsCallback&&(window.amznads.getAdsCallback(this.aax,function(){n.addAmazonKeywords(),t.isFunction(e)&&e()}),this.dfp.googletag.cmd.push(function(){n.dfp.googletag.pubads().clearTargeting("amznslots")}))},addAmazonKeywords:function(){window.amznads.ads&&this.dfp.setCustomCriteria({amznslots:t.keys(window.amznads.ads)})},addTrendingKeywords:function(){var t,n,r=e("#trending-link-json").get(0).innerHTML;try{n=JSON.parse(r)}catch(i){n={}}if(n!==null){switch(n.trending_type){case"trending_page":n.dfpTrendingType="trending";break;case"most_emailed_1":n.dfpTrendingType="email";break;case"most_viewed_7":n.dfpTrendingType="icymi";break;case"most_shared_facebook_1":n.dfpTrendingType="fb"}t={trend:n.dfpTrendingType},this.dfp.setCustomCriteria(t)}},addCookieData:function(){var e=n.attributes;this.addEventTrackerId(e),this.parseSubscriberStatus(e),this.parseDemographicData(e.demographics)},addEventTrackerId:function(e){var t={};e.id!=="0"&&(t.etua=e.id,this.dfp.setCustomCriteria(t))},parseSubscriberStatus:function(e){var t,n={};e.id==="0"?t="anon":e.subscription.length<=4?t="reg":t="sub",n.sub=t,this.dfp.setCustomCriteria(n)},parseDemographicData:function(e){var r,i={};t.isObject(e)&&(i.cs=n.getCompanySize(),i.jt=n.getJobTitle(),i.ind=n.getJobIndustry(),i.g=n.getGender(),i.em=n.getEmailSubscriptions(),i.inc=n.getIncomeRange(),i.wat=n.getWat(),n.getBundleSubscriptions()&&n.getBundleSubscriptions().length>0&&(r=n.getBundleSubscriptions()[0],i.subprm=r.promotion,i.grace=r.in_grace?"t":"f",t.isString(r.bundle)&&(i.sub=r.bundle.toLowerCase()),t.isString(r.source)&&(i.subsrc=r.source)),this.dfp.setCustomCriteria(i))},determineAdSizes:function(){var e=this.dfp.pageManager.getViewport().width,t;e<975&&(this.dfp.removePlacementSize("TopAd",[970,90]),this.dfp.removePlacementSize("TopAd",[970,66]),this.dfp.removePlacementSize("TopAd",[970,250]),this.dfp.removePlacementSize("lede-ad",[468,648])),e<765&&(this.dfp.editPlacementSize("TopAd",[320,50]),this.dfp.editPlacementSize("TopAd1",[320,50]),this.dfp.editPlacementSize("TopAd2",[320,50]),this.dfp.editPlacementSize("TopAd3",[320,50]),this.dfp.editPlacementSize("TopAd4",[320,50]),this.dfp.editPlacementSize("TopAd5",[320,50]),this.dfp.removePlacement("SponLink"),t={plat:"mweb",prop:"mnyt"},this.dfp.setCustomCriteria(t))},handleSlotDefined:function(e,t){var n;switch(t){case"lede-ad":n="mid1";break;case"MiddleRight2":n="mid2";break;case"Frame6A":n="artexp";break;case"MostEm":n="emmod";break;case"TopAd":n="top";break;case"TopAd1":n="bottom";break;case"TopNavAd":case"SponsorAd":n="ssearch";break;case"Middle1C":case"Spon2":n=t}n&&e.setTargeting("pos",n)},determineVisibility:function(e,t){if(t)e.addClass("hidden");else try{e.find("iframe").contents().find("html #exclusivity").length>0?e.addClass("hidden ad-exclusivity"):e.removeClass("hidden")}catch(n){e.removeClass("hidden")}},handleSearchSponsor:function(){var e=this.dfp.$shell.find("#SponsorAd");if(e.find("iframe").length>0)return;this.dfp.requestDynamicAd("SponsorAd",[88,31])},handleBreakpoint:function(e){this.has970TopAd&&this.hideTopAdForSmallViewport(e),this.hasXXLAd&&this.hideXxlForSmallViewport(e)},hideTopAdForSmallViewport:function(e){var t=this.dfp.getAdElement("TopAd");e<=this.tabletPortraitSize?(t.addClass("hidden"),this.dfp.$html.removeClass("has-top-ad")):(t.removeClass("hidden"),this.dfp.$html.addClass("has-top-ad"))},hideXxlForSmallViewport:function(e){var t=this.dfp.getAdElement("lede-ad");e<=this.tabletPortraitSize?(t.addClass("hidden"),this.dfp.$html.removeClass("has-xxl")):(t.removeClass("hidden"),this.dfp.$html.addClass("has-xxl"))},triggerComScore:function(e,t,n){!this.dfp.getAdElement(e).data("isInitial")&&!this.hasSentComscore&&(this.dfp.trackingComscorePVC({module:"Ad",version:e,action:"Impression",contentCollection:n,contentID:t,region:this.dfp.adPath,eventName:"AdImpression"}),this.hasSentComscore=!0)}};return r}),define("shared/adlibrary/views/dfp",["jquery/nyt","underscore/nyt","shared/adlibrary/views/base-ad","foundation/hosts","shared/adlibrary/helpers/dfp-ordered-custom-criteria-mixin","shared/adlibrary/helpers/dfp-placements-mixin","shared/adlibrary/helpers/dfp-sitewide-requirements-mixin"],function(e,t,n,r,i,s,o){var u=n.extend({alreadyRequested:{},notYetRequested:{},readyForDisplay:{},adPath:"",viewName:"dfp",chamber:[],slots:{},googletag:null,customCriteria:[],placements:s,isScanning:!1,initialize:function(e){e=e||{},this.listenToAdEvent("ready",this.handleReady),this.adPath=this.getAdUnitPath(),this.sitewide=o,this.customCriteria=t.each(i,function(e){return t.clone(e)}),this.setCustomCriteria(e.customCriteria),this.discoverAdsOnPage(),this.addToChamber(this.adsOnPage),this.listenToAdEvent("ad-slot-defined",this.handleSlotDefined),this.listenToAdEvent("ad-rendered",this.triggerTagX,!0),this.listenToAdEvent("request-placement",this.requestDynamicAd),this.listenToAdEvent("queue-placement",this.queueDynamicAd),this.listenToAdEvent("scan",this.scan),this.broadcastAdEvent("waiting",this)},getAdUnitPath:function(){var e,n,i=this.getAdSensitivity(),s=i!=="tragedy"&&i!=="noads"?this.pageManager.getMeta("dfp-ad-unit-path"):i;return t.isUndefined(s)&&(e=this.pageManager.getMeta("CG"),n=this.pageManager.getMeta("SCG")?"/"+this.pageManager.getMeta("SCG"):"",s=e+n),r.dfpHost+s},handleReady:function(){var e=this;this.googletag=window.googletag;if(!this.googletag)return setTimeout(function(){e.handleReady()},500);if(this.isReady)throw new Error("DFP already in ready state.  Do not signal ready more than once.");this.isReady=!0,this.addPageLevelParameters(),this.initialAdRequest(),this.enableServices(),this.scan(),this.listenToAdEvent("placement-added",this.scan)},handleSlotDefined:function(e,t){this.trackRequested(e,t)},requestAdsInViewport:function(){this.requestMultipleAds(this.getAdsInViewport())},trackRequested:function(e,n){this.readyForDisplay[n]=this.notYetRequested[n],delete this.notYetRequested[n],t.keys(this.notYetRequested).length===0&&(this.isScanning=!1,this.stopSubscribing("nyt:page-scroll",this.requestAdsInViewport))},getAdsInViewport:function(){var e=this,n={};return t.each(this.$adsOnPage,function(t,r){!e.alreadyRequested[r]&&e.isElementInViewport(t)&&(n[r]={$el:t,size:e.adsOnPage[r]})}),n},enableServices:function(){var e=this.googletag,t=this;e.cmd.push(function(){e.pubads().addEventListener&&e.pubads().addEventListener("slotRenderEnded",function(e){t.broadcastAdEvent("ad-rendered",e.slot.getSlotId().getDomId(),e.size,e.isEmpty,e.lineItemId,e.serviceName)}),e.pubads().enableSingleRequest(),e.enableServices()})},addPageLevelParameters:function(){var e=this.googletag;t.each(this.customCriteria,function(n){t.isEmpty(n.value)||e.cmd.push(function(){e.pubads().setTargeting(n.key,n.value)})})},setCustomCriteria:function(e){if(!t.isObject(e))return;t.each(e,function(e,n){var r=t.findWhere(this.customCriteria,{key:n});if(typeof e=="undefined")return;!t.isString(e)&&!t.isArray(e)&&(e=e.toString()),r?r.value=e:this.customCriteria.push({key:n,value:e})},this)},defineAdSlots:function(e){var n=this,r=e.isInitial,i=n.googletag;e=t.omit(e,t.keys(n.slots));if(t.isEmpty(e))return;i.cmd.push(function(){t.each(e,function(e,s){var o,u,a;!t.isArray(e)||!t.isArray(e[0])||!t.isArray(e[0][0])?o=e:(o=[],u=e),a=i.defineSlot(n.adPath,o,s),u&&a.defineSizeMapping(u),a.addService(i.pubads()).setCollapseEmptyDiv(!0),n.slots[s]=a,n.$adsOnPage[s].data("isInitial",r),n.broadcastAdEvent("ad-slot-defined",a,s,e)})})},requestMultipleAds:function(e){t.each(e,function(e,t){typeof this.slots[t]=="undefined"?this.requestDynamicAd(t,e.size):this.requestSingleAd(t)},this)},requestSingleAd:function(e){var n=this.googletag,r=this;if(!r.isReady)return r.listenToAdEvent("ready",function(){r.requestSingleAd(e)},!0);n.cmd.push(function(){n.display(e),t.extend(r.alreadyRequested,r.readyForDisplay),delete r.readyForDisplay[e]})},discoverAdsOnPage:function(){var t=this,n=e(".ad, .text-ad, .sponsor-ad");this.adsOnPage={},this.$adsOnPage={},this.chamber=[],n.each(function(e,n){n.id in t.placements&&t.addPlacement(n.id)})},addToChamber:function(){this.chamber.push.apply(this.chamber,t.toArray(arguments))},clearChamber:function(){var e=this.chamber;return this.chamber=[],e},initialAdRequest:function(){t.each(this.chamber,function(e){e.isInitial=!0,this.defineAdSlots(e)},this)},requestDynamicAd:function(t,n){var r=this;if(!r.isReady)return r.listenToAdEvent("ready",function(){r.requestDynamicAd(t,n)},!0);if(this.alreadyRequested[t])return this.$adsOnPage[t]=e("#"+t),!1;this.addPlacement(t,n),this.defineAdSlots(this.getPlacement(t)),this.requestSingleAd(t)},queueDynamicAd:function(e,t){this.addPlacement(e,t),this.scan()},getAdElement:function(t){return this.$adsOnPage[t]||e()},addPlacement:function(n,r){var i;if(t.isObject(n))return t.each(n,function(e,t){this.addPlacement(t,e)},this);i=e("#"+n);if(i.length===0)return!1;this.placements[n]=r||this.placements[n],this.adsOnPage[n]=this.placements[n],this.$adsOnPage[n]=e("#"+n),this.notYetRequested[n]=this.$adsOnPage[n],this.broadcastAdEvent("placement-added",n,r)},getPlacement:function(){var e={};return t.each(t.toArray(arguments),function(t){this.adsOnPage[t]&&(e[t]=this.adsOnPage[t])},this),e},removePlacement:function(e){delete this.placements[e],delete this.adsOnPage[e],delete this.$adsOnPage[e],delete this.notYetRequested[e]},removePlacementSize:function(e,n){var r,i,s;this.adsOnPage&&this.adsOnPage[e]&&(r=this.adsOnPage[e]);if(this.adsOnPage&&this.adsOnPage[e]&&t.isArray(this.adsOnPage[e][0]))for(s=0;s<r.length;s+=1)i=r[s],i[0]===n[0]&&i[1]===n[1]&&r.splice(s,1);else r&&r[0]===n[0]&&r[1]===n[1]&&this.removePlacement(e)},editPlacementSize:function(e,t){this.adsOnPage&&this.adsOnPage[e]&&(this.adsOnPage[e].length=0,this.adsOnPage[e].push.apply(this.adsOnPage[e],t))},addPlacementSize:function(e,n){var r,i,s=!1,o=0;if(t.isUndefined(this.adsOnPage[e]))return this.addPlacement(e,n);if(t.isArray(this.adsOnPage[e][0])){for(o;o<this.adsOnPage[e].length;o+=1){r=this.adsOnPage[e][o][0],i=this.adsOnPage[e][o][1];if(r===n[0]&&i===n[1]){s=!0;break}}s||this.adsOnPage[e].push(n)}else{r=this.adsOnPage[e][0],i=this.adsOnPage[e][1];if(r!==n[0]||i!==n[1])this.adsOnPage[e].length=0,this.adsOnPage[e].push([r,i]),this.adsOnPage[e].push(n)}},refreshSlots:function(n,r){var i,s=this;r=r||!1,n&&(i=[],n=t.isArray(n)?n:[n],t.each(n,function(e){this.slots[e]&&i.push(this.slots[e])},this)),t.each(this.$adsOnPage,function(t,n){s.$adsOnPage[n]=e("#"+n)}),this.googletag.cmd.push(function(){s.googletag.pubads().refresh(i,{changeCorrelator:r})})},scan:function(){this.isScanning||(this.isScanning=!0,this.requestAdsInViewport(),this.subscribe("nyt:page-scroll",this.requestAdsInViewport))}});return u}),define("interactive/views/adlibrary/placements/dfp-placements-mixin",[],function(){var e={TopAd:["fluid",[728,90],[970,90],[970,66],[970,250]],TopAd1:[728,90],TopAd2:[728,90],TopAd3:[728,90],TopAd4:[728,90],TopAd5:[728,90],"lede-ad":[[468,648],[300,600],[300,250]],"marketing-ad":[301,250],MiddleRight1:[300,250],MiddleRight2:[300,250],MiddleRight3:[300,250],MiddleRight4:[300,250],MiddleRight5:[300,250],MiddleRight6:[300,250],MiddleRight7:[300,250],MiddleRight8:[300,250],MiddleRight9:[300,250],MiddleRight10:[300,250],MiddleRight11:[300,250],MiddleRight12:[300,250],MiddleRight13:[300,250],MiddleRight14:[300,250],MiddleRight15:[300,250],Middle1C:[88,31],MostEm:[88,31],TopNavAd:[88,31],MegaAd:[1600,512],Moses:[[970,418],[970,40]],Frame4A:[96,60],Frame6A:[336,90],Position1:[96,60],Spon2:[88,31],MiddleRightN:[300,250],TopAdN:[728,90],BigAd3:[300,250],MobileBanner:[320,50],MobileBanner2:[[320,50],[300,250]],Ribbon:[240,75],RibbonInterstitial:[900,500],Interstitial:[[1,1],[640,480]],WelcomeBack:[300,250],sponsortile:[150,50]};return e}),define("shared/adlibrary/templates",[],function(){var e={};return e.iFrameStyleSheet=function(e){return'<style type="text/css">body {margin: 0;overflow: hidden;}a img {border: none;}</style>'},e}),define("foundation/collections/base-collection",["jquery/nyt","underscore/nyt","backbone/nyt","foundation/views/page-manager","foundation/base-mixin"],function(e,t,n,r,i){var s=n.Collection.extend(t.extend({},i));return s}),define("shared/ad/models/ad",["backbone/nyt"],function(e){var t=e.Model.extend({});return t}),define("shared/adlibrary/collections/adx-collection",["backbone/nyt","underscore/nyt","foundation/collections/base-collection","foundation/hosts","shared/ad/models/ad"],function(e,t,n,r,i){var s=n.extend({url:r.adx+"/adx/bin/adxrun.html",model:i,initialize:function(e){this.options=e||{},this.placements=this.options.placements;if(!this.options.placements)throw new Error("No ad placements found in ADX collection");t.isUndefined(this.pageManager.getMeta("adxPage"))?this.host=this.pageManager.getUrlParam("adx_campaign")||this.options.adx_campaign||"www.nytimes.com":(this.host="",this.options.page=this.pageManager.getMeta("adxPage")),this.interstitial=this.options.interstitial?1:0,this.setPageParameter()},setPageParameter:function(){var e;if(this.options.page)return;e=location.pathname,e=e.replace(/\d{4}/,"yr").replace(/\d{2}/,"mo").replace(/\d{2}/,"day"),this.options.page=this.host+e},sync:function(n,r,i){var s=this;return i.dataType="jsonp",i.jsonp="jsonp",i.data={page:s.options.page,positions:t.keys(this.placements).join(","),autoconfirm:0,v:3,cpp:0,attributes:"nyt5",keywords:this.getAdxKeywords()},e.sync(n,r,i)},getAdxKeywords:function(){var e=this.pageManager.getMeta("keywords")||"",t=this.pageManager.getUrlParam("ad-keywords");return t&&(e=e+","+t),e},parse:function(e){var t,n=[];for(t in e.ads)e.ads.hasOwnProperty(t)&&this.placements.hasOwnProperty(t)&&(e.ads[t].adId=t,n.push(e.ads[t]));return n}});return s}),define("shared/adlibrary/helpers/adx-placements-mixin",[],function(){var e={Inv1:[],Inv2:[],Inv3:[],ab1:[],ab2:[],ab3:[],prop1:[],prop2:[],Anchor:[],Bar1:[],ADX_CLIENTSIDE:[]};return e}),define("shared/adlibrary/views/adx",["jquery/nyt","underscore/nyt","shared/adlibrary/views/base-ad","foundation/hosts","shared/adlibrary/templates","shared/adlibrary/collections/adx-collection","shared/adlibrary/helpers/adx-placements-mixin"],function(e,t,n,r,i,s,o){var u=n.extend({viewName:"adx",placements:o,iframeClass:"ad-frame",initialize:function(){this.ads=new s({placements:this.placements}),this.subscribe(this.ads,"sync",this.receiveAds),this.requestAds(),this.listenToAdEvent("request-placement",function(e){this.renderAdFromData({id:e})})},requestAds:function(){this.ads.fetch()},renderAdFromData:function(t){var n,r;if(!t.model&&!t.id)return;n=t.model||this.ads.findWhere({adId:t.id}),r=t.id||(n?n.get("adId"):null);if(!n||!r)return;this.renderInIframe({el:e("#"+r),model:n,frameStyle:i.iFrameStyleSheet(),secondaryIframeClass:"frame-for-article"})},receiveAds:function(e){var t=this;e.each(function(e){t.renderAdFromData({model:e,id:e.get("adId")})})},renderInIframe:function(n){var r,i,s,o,u,a,f,l=document.createElement("iframe");n=n||{},i=n.model;if(!i||typeof i.get=="undefined"||!n.el||i.get("hasPainted"))return;n.el=e(n.el),o=i.get("confirmation-url"),u=i.get("creative"),f=i.get("isInlineSafe"),typeof f=="string"&&f.toLowerCase()==="n"&&(f=!1),f?n.el.append(n.el.html()+u):n.el.find("iframe").length===0&&i.get("name")!=="ADX_CLIENTSIDE"&&(s=n.frameStyle?n.frameStyle+u:u,e(l).attr("frameBorder",0).addClass(this.iframeClass).css(this.calculateIFrameCss(i.get("width"),i.get("height"))),n.secondaryIframeClass&&(l.className+=" "+n.secondaryIframeClass),n.el.append(l),l.contentDocument?r=l.contentDocument:l.contentWindow&&(r=l.contentWindow.document),r&&(r.open(),r.write(s),t.defer(function(){r.close()}))),e(n.el.selector+"-alternate-content").addClass("hidden"),o&&o!==""&&(a=new Image,a.src=o),this.trackingTriggerImpression("ad-render",{module:"Ad",version:i.get("name"),action:"Impression",contentCollection:i.get("campaign"),contentID:i.get("classification"),region:n.page||"",eventName:"AdImpression"}),this.broadcastAdEvent("ad-rendered",i.get("adId")),n.callback&&n.callback()},calculateIFrameCss:function(e,t){var n={};return n.width=e||0,n.height=t||0,n}});return u}),define("interactive/views/adlibrary/placements/adx-placements-mixin",[],function(){var e={Inv1:[],ab1:[],ab2:[],ab3:[],prop1:[],prop2:[],Anchor:[],Bar1:[]};return e}),define("interactive/views/adlibrary/requirements/dfp-interactive-requirements-mixin",[],function(){var e={view:null,initialize:function(e){var t=this;this.dfp=e,e.listenToAdEvent("ad-slot-defined",t.handleAdSlotDefined,t),this.setInteractiveCustomCriteria()},setInteractiveCustomCriteria:function(){var e={typ:"int"};this.dfp.setCustomCriteria(e)},handleAdSlotDefined:function(e,t){switch(t){case"Middle1C":e.setTargeting("pos","ssearch");break;case"Spon2":e.setTargeting("pos","arttools")}}};return e}),define("interactive/instances/ad-manager",["foundation/views/page-manager","shared/adlibrary/views/dfp","interactive/views/adlibrary/placements/dfp-placements-mixin","shared/adlibrary/views/adx","interactive/views/adlibrary/placements/adx-placements-mixin","interactive/views/adlibrary/requirements/dfp-interactive-requirements-mixin"],function(e,t,n,r,i,s){var o;return new r({placements:i}),o=new t({placements:n,requirements:s}),o}),define("shared/sharetools/models/share-data",["foundation/models/base-model"],function(e){var t=e.extend({dataAttributes:{URL:"data-url",TITLE:"data-title",MEDIA:"data-media",DESCRIPTION:"data-description",PUBLICATION_DATE:"data-publish-date",CONTENT_TYPE:"data-content-type",AUTHOR:"data-author",VIA:"data-via"},initialize:function(e){this.$container=e},getUrl:function(){var e=this.$container.attr(this.dataAttributes.URL);return e?e:this.pageManager.getCanonical()},setUrl:function(e){this.$container.attr(this.dataAttributes.URL,e)},getTitle:function(){var e=this.$container.attr(this.dataAttributes.TITLE);return e?e:this.pageManager.getMeta("og:title")},setTitle:function(e){this.$container.attr(this.dataAttributes.TITLE,e)},getAuthor:function(){var e=this.$container.attr(this.dataAttributes.AUTHOR);return e?e:this.pageManager.getMeta("byl")},setAuthor:function(e){this.$container.attr(this.dataAttributes.AUTHOR,e)},getMedia:function(){var e=this.$container.attr(this.dataAttributes.MEDIA);return e?e:this.pageManager.getMeta("og:image")},setMedia:function(e){this.$container.attr(this.dataAttributes.MEDIA,e)},getDescription:function(){var e=this.$container.attr(this.dataAttributes.DESCRIPTION);return e?e:this.pageManager.getMeta("description")},setDescription:function(e){this.$container.attr(this.dataAttributes.DESCRIPTION,e)},getPublicationDate:function(){var e=this.$container.attr(this.dataAttributes.PUBLICATION_DATE);return e?e:this.pageManager.getMeta("DISPLAYDATE")},setPublicationDate:function(e){this.$container.attr(this.dataAttributes.PUBLICATION_DATE,e)},getVia:function(){var e=this.$container.attr(this.dataAttributes.VIA),t=this.pageManager.getMeta("twitter:site");return e?e:this.pageManager.getMeta("CG")==="upshot"?"UpshotNYT":t&&t!=="@nytimes"?t.replace("@",""):""},setVia:function(e){this.$container.attr(this.dataAttributes.VIA,e)},getContentType:function(){var e=this.$container.attr(this.dataAttributes.CONTENT_TYPE);return e?e:"Content"},setContentType:function(e){this.$container.attr(this.dataAttributes.CONTENT_TYPE,e)}});return t}),define("shared/modal/templates",["underscore/nyt"],function(_){var templates={};return templates.modal=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="overlay"></div>\n<div class="modal '+((__t=id)==null?"":__t)+" "+((__t=addlClasses)==null?"":__t)+'" style="'+((__t=modalStyles)==null?"":__t)+'" role="dialog" aria-labelledby="'+((__t=id)==null?"":__t)+'-modal-heading" tabindex="-1">\n<div class="modal-header">\n<h3 class="modal-heading" id="'+((__t=id)==null?"":__t)+'-modal-heading">'+((__t=modalTitle)==null?"":__t)+"</h3>\n"+((__t=headerContent)==null?"":__t)+'\n</div>\n<div class="modal-content">\n'+((__t=modalContent)==null?"":__t)+'\n</div>\n<div class="modal-footer">\n'+((__t=modalFooter)==null?"":__t)+'\n</div>\n<button type="button" class="modal-close '+((__t=closeClass)==null?"":__t)+'" aria-disabled="false"><i class="icon"></i><span class="visually-hidden">Close this modal window</span></button>\n<div class="modal-pointer '+((__t="modal-pointer-"+tailDirection)==null?"":__t)+'"><div class="modal-pointer-conceal"></div></div>\n</div>';return __p},templates}),define("shared/modal/views/modal",["jquery/nyt","underscore/nyt","foundation/views/base-view","shared/modal/templates"],function(e,t,n,r){var i=n.registerView("modal").extend({template:r.modal,className:"modal-container",events:{"click .modal-close, .modal-pointer, .dismiss-button":"close","mouseenter .modal":"handleMouseOutClose"},defaultSettings:{id:"default-modal",modalTitle:"",headerContent:"",modalContent:"",modalFooter:"",addlClasses:"",binding:"",disableBindings:!1,tailDirection:"down",tailTopOffset:0,tailLeftOffset:0,fixedOverride:!1,hasOverlay:!1,hasCloseButton:!1,canOpenOnHover:!1,closeOnMouseOut:!1,mouseOutDelay:0,mouseEnterDelay:0,closeOnClick:!0,autoPosition:!1,positionTailSide:!1,toggleSpeed:300,focusOnShow:!0},initialize:function(e){t.bindAll(this,"close","open","mouseEnterOpen","mouseOutClose","handleClickClose","removeFromPage"),this.settings=t.extend({},this.defaultSettings,e),this.settings.modalStyles="width: "+e.width+";",this.render()},render:function(){var e=this.settings.id+"-container";return this.settings.closeClass=this.settings.hasCloseButton?"":"hidden",this.$el.hide().addClass(e).html(this.template(this.settings)),this.$modal=this.$el.find(".modal"),this.$el.find(".overlay").toggle(this.settings.hasOverlay),this},addToPage:function(e,t){var n=typeof e=="string"?this.$body.find(e):this.$body;return t=typeof n[t]=="function"?t:"append",n[t](this.$el),this.settings.binding!==""&&!this.settings.disableBindings&&(this.$body.on("click",this.settings.binding,this.open),this.settings.canOpenOnHover&&(this.$body.on("mouseenter",this.settings.binding,this.mouseEnterOpen),this.$body.on("mouseleave",this.settings.binding,this.mouseOutClose))),this},removeFromPage:function(){return this.close(),this.$el.remove(),this.settings.binding!==""&&!this.settings.disableBindings&&(this.$body.off("click",this.settings.binding,this.open),this.settings.canOpenOnHover&&(this.$body.off("mouseenter",this.settings.binding,this.mouseEnterOpen),this.$body.off("mouseleave",this.settings.binding,this.mouseOutClose))),this.remove()},updateTemplate:function(e){return this.$modal.find(".modal-content").html(e),this.positionDialog(!1),this},open:function(t){var n=this;return t?(t.returnValue=!1,t.preventDefault(),this.$target=e(t.currentTarget)):this.$target=e(this.settings.binding).eq(0),this.$el.fadeIn(this.settings.toggleSpeed,function(){n.broadcast("nyt:modal-show"),n.broadcast("nyt:modal-show-"+n.settings.id)}),this.settings.autoPosition?this.autoPosition():this.positionDialog(!0),(this.settings.openCallback||e.noop).call(this),this.subscribe("nyt:page-resize",this.positionDialog),this.subscribeOnce("nyt:page-key-esc",this.close),this.$body.on("click",this.handleClickClose),this.pageManager.isMobile()&&this.$body.css("cursor","pointer"),this.settings.focusOnShow&&this.$modal.focus(),this},mouseEnterOpen:function(e){window.clearTimeout(this.mouseLeaveTimeout),this.mouseEnterTimeout=t.delay(this.open,this.settings.mouseEnterDelay,e)},close:function(t){var n=this;return t&&t.currentTarget&&this.settings.disableBindings&&e(t.currentTarget).hasClass("modal-pointer")?this:(this.$el.fadeOut(this.settings.toggleSpeed,function(){(n.settings.closeCallback||e.noop).call(n),n.broadcast("nyt:modal-hide"),n.broadcast("nyt:modal-hide-"+n.settings.id)}),this.stopSubscribing("nyt:page-resize",this.positionDialog),this.$body.off("click",this.handleClickClose),window.clearTimeout(this.mouseEnterTimeout),this.pageManager.isMobile()&&this.$body.css("cursor",""),this)},mouseOutClose:function(t){var n=e(t.relatedTarget);if(n.is(this.$.target)||this.$modal.has(n).length>0)return;window.clearTimeout(this.mouseEnterTimeout),this.$modal.is(":visible")&&(this.mouseLeaveTimeout=window.setTimeout(this.close,this.settings.mouseOutDelay))},handleMouseOutClose:function(){this.settings.closeOnMouseOut&&this.$modal.on("mouseleave",this.close)},handleClickClose:function(e){this.settings.closeOnClick&&this.$modal.has(e.target).length===0&&this.$modal[0]!==e.target&&this.close()},positionDialog:function(t){var n,r,i,s,o,u=this.pageManager.getViewport(),a=this.$target,f=this.$modal,l="absolute",c=f.outerHeight(),h=f.outerWidth(),p={marginLeft:"0",marginTop:"0",top:"",left:""};a&&a.length>0&&(s=a.outerHeight(),o=a.outerWidth(),r=a.offset().top+this.settings.tailTopOffset,i=a.offset().left+this.settings.tailLeftOffset);switch(this.settings.tailDirection){case"up":p.top=r+s+14,p.left=i+Math.floor(o*.5)-Math.floor(h*.5)-9;break;case"up-right":p.top=r+s+14,p.left=i+Math.floor(o*.5)-(h-25);break;case"up-left":p.top=r+s+14,p.left=i+Math.floor(o*.5)-25;break;case"down":p.top=r-c-15,p.left=i+Math.floor(o*.5)-Math.floor(h*.5)-8;break;case"down-right":p.top=r-c-15,p.left=i+Math.floor(o*.5)-(h-25);break;case"down-left":p.top=r-c-15,p.left=i+Math.floor(o*.5)-25;break;case"left":p.top=r+Math.floor(s*.5)-Math.floor(c*.5)+5,this.pageManager.isMobile()&&this.$html.hasClass("navigation-active")?p.left=i+o:p.left=i+o+15;break;case"left-bottom":p.top=r+Math.floor(s*.5)-(c-25),p.left=i+o+15;break;case"left-top":p.top=r+Math.floor(s*.5)-25,p.left=i+o+15;break;case"right":p.top=r+Math.floor(s*.5)-Math.floor(c*.5)+5,p.left=i-h-16;break;case"right-bottom":p.top=r+Math.floor(s*.5)-(c-25),p.left=i-h-16;break;case"right-top":p.top=r+Math.floor(s*.5)-25,p.left=i-h-16;break;case"centered":n=u.height,p.top=c>n?u.top+5:Math.floor((n-c)*.5)+u.top,p.left=Math.floor(u.width*.5-h*.5);break;case"fixed":default:l="fixed",h=this.settings.width||f.width(),c=this.settings.height||f.height(),p.top="50%",p.left="50%",p.marginLeft=-Math.floor(h*.5)+this.settings.tailLeftOffset+"px",p.marginTop=-Math.floor(c*.5)+this.settings.tailTopOffset+"px"}return a&&a.css("position")==="fixed"||this.settings.fixedOverride?(l="fixed",p.top-=u.top,this.$el.css("position","fixed")):this.$el.css("position",""),p.top+=e.isNumeric(p.top)?"px":"",p.left+=e.isNumeric(p.left)?"px":"",f.css("position",l),t===!0?f.css(p):f.stop().animate(p,"fast"),this},autoPosition:function(){var e,t,n,r=this.pageManager.getViewport(),i=this.$modal.outerHeight(),s=this.$modal.outerWidth();return this.settings.positionTailSide&&(n=this.$target.offset().left>r.width/2,this.settings.tailDirection=n?"right":"left"),this.positionDialog(!0),e=this.$target.offset(),this.settings.positionTailSide?(t=this.settings.tailDirection,e.top-r.top-i*.5<0?t+="-top":e.top-r.top+i*.5>r.height&&i-42<e.top-r.top&&(t+="-bottom")):(t=e.top-i<0?"up":"down",e.left+s>r.width?t+="-right":e.left<0&&(t+="-left")),this.$modal.find(".modal-pointer").attr("class","modal-pointer modal-pointer-"+t),this.settings.tailDirection=t,this.positionDialog(!0),this}});return i}),define("shared/sharetools/templates",["underscore/nyt"],function(_){var templates={};return templates.emailModal=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<iframe src="'+((__t=emailThisUrl)==null?"":__t)+""+((__t=dataUrl)==null?"":__t)+'" title="Email This" id="emailthis" scrolling="'+((__t=scrolling)==null?"":__t)+'" marginheight="0" marginwidth="0" frameborder="0"></iframe>';return __p},templates.savemodal=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="instructions">\n<li>This item has been saved to read later from any device. </li>\n<li>Access saved items through your user name at the top of the page.</li>\n</ul>\n<p><a href="'+((__t=link)==null?"":__t)+'">View Saved Items</a><p>\n<button class="button dismiss-button">OK</button>';return __p},templates.shareTool=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="javascript:;" data-share="'+((__t=id)==null?"":__t)+'" data-modal-title="'+((__t=loginModalTitle)==null?"":__t)+'"><i class="icon sprite-icon"></i><span class="sharetool-text '+((__t=isLabelHidden===true?"visually-hidden":"")==null?"":__t)+'">'+((__t=label)==null?"":__t)+"</span></a>";return __p},templates.shareTools=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="<ul>\n",_.each(shares,function(e){__p+='\n<li class="sharetool '+((__t=e.type)==null?"":__t)+"-sharetool "+((__t=config[e.type].loginRequired?"login-modal-trigger":"")==null?"":__t)+'" data-modal-title="'+((__t=config[e.type].loginModalText||"")==null?"":__t)+'">\n<a href="javascript:;" data-share="'+((__t=e.type)==null?"":__t)+'"><i class="icon sprite-icon"></i><span class="sharetool-text">'+((__t=e.label)==null?"":__t)+"</span></a>\n</li>\n"}),__p+="\n</ul>";return __p},templates.shareToolsModal=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="section share ',isCompact&&(__p+="compact-share-tools"),__p+='">\n<ul class="sharetools-menu">\n'+((__t=standardToolsList)==null?"":__t)+'\n</ul>\n<form class="short-url-form">\n<div class="control">\n<div class="label-container"><label for="short-url-input">Permalink</label></div>\n<div class="field-container">\n<input id="short-url-input" class="short-url-input text" type="text" name="short-url-input" value="'+((__t=shortUrl)==null?"":__t)+'" readonly="readonly" />\n</div>\n</div>\n</form>\n',isCompact&&showTools&&(__p+='\n<form class="embed-url-form">\n<div class="control">\n<div class="label-container"><label for="embed-input">Embed</label></div>\n<div class="field-container">\n<input id="embed-input" class="embed-input text" type="text" name="embed-input" readonly="readonly" />\n</div>\n</div>\n</form>\n'),__p+="\n</div><!--close section -->\n",!isCompact&&showTools&&(__p+='\n<div class="section tools">\n<h4 class="modal-heading">Tools</h4>\n<ul class="sharetools-menu">\n'+((__t=articleToolsList)==null?"":__t)+"\n</ul>\n</div><!--close section -->\n"),__p+="";return __p},templates.shareToolsModalFooter=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="ad show-all-sharetool-modal-ad hidden">\n<small class="ad-sponsor">'+((__t=toolTypeSponsor)==null?"":__t)+" Tools Sponsored By</small>\n</div>";return __p},templates.showAllSharetoolCompactModal=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="section share">\n<ul class="sharetools-menu">\n'+((__t=showAllLinkList)==null?"":__t)+'\n</ul>\n</div> <!--close section -->\n<div class="section tools">\n<ul class="sharetools-menu">\n'+((__t=showAllToolList)==null?"":__t)+'\n</ul>\n<div class="control permalink-control">\n<div class="label-container">\n<label for="permalink-input" class="sharetools-label">Permalink</label>\n</div>\n<div class="field-container">\n<input id="permalink-input" type="text" class="text short-url-input" placeholder="" readonly="readonly" />\n<span class="textbox-fade"></span>\n</div>\n</div><!-- close control -->\n<div class="control embed-control">\n<div class="label-container">\n<label for="embed-input" class="sharetools-label">Embed</label>\n</div>\n<div class="field-container">\n<input id="embed-input" type="text" class="text embed-input" placeholder="" readonly="readonly" />\n<span class="textbox-fade"></span>\n</div>\n</div><!-- close control -->\n</div><!--close section -->';return __p},templates.showAllSharetoolModal=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="section share">\n<ul class="sharetools-menu">\n'+((__t=showAllLinkList)==null?"":__t)+'\n</ul>\n<form class="short-url-form">\n<div class="control">\n<div class="label-container"><label for="short-url-input">Permalink</label></div>\n<div class="field-container">\n<input id="short-url-input" class="short-url-input text" type="text" name="short-url-input" value="'+((__t=shortUrl)==null?"":__t)+'" readonly="readonly" />\n</div>\n</div>\n</form>\n</div> <!--close section -->\n<div class="section tools">\n<h5 class="modal-heading">Tools</h5>\n<ul class="sharetools-menu">\n'+((__t=showAllToolList)==null?"":__t)+"\n</ul>\n</div><!--close section -->";return __p},templates.showallLinks=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<li class="sharetool '+((__t=shareObj.type)==null?"":__t)+"-sharetool "+((__t=config.loginRequired?"login-modal-trigger":"")==null?"":__t)+'" data-modal-title="'+((__t=config.loginModalText||"")==null?"":__t)+'">\n<a href="javascript:;" data-share="'+((__t=shareObj.type)==null?"":__t)+'"><i class="icon sprite-icon"></i>'+((__t=shareObj.label)==null?"":__t)+"</a>\n</li>";return __p},templates}),define("shared/sharetools/views/email",["jquery/nyt","underscore/nyt","foundation/hosts","foundation/views/base-view","shared/modal/views/modal","shared/sharetools/templates"],function(e,t,n,r,i,s){var o=r.extend({template:s.emailModal,className:"email-view-container",frameSize:{small:507,full:867,ad:285},defaultSettings:{emailThisUrl:"https:"+n.www+"/mem/email-this.html?url=",scrolling:window.Modernizr.postmessage?"no":"yes"},defaultModalSettings:{id:"email-share-modal",modalTitle:"Email This Article",binding:".email-sharetool",tailDirection:"centered",hasOverlay:!0,hasCloseButton:!0,modalContent:""},initialize:function(e){var n=this;t.bindAll(this,"handlePostMessage","responsive"),this.settings=t.extend({},this.defaultSettings,e),this.frameState="full",this.modalSettings=t.extend({},this.defaultModalSettings,{openCallback:function(){window.Modernizr.postmessage&&(window.addEventListener?window.addEventListener("message",n.handlePostMessage,!1):window.attachEvent("onmessage",n.handlePostMessage)),n.listenTo(n.pageManager,"nyt:page-breakpoint",n.responsive)},closeCallback:function(){this.removeFromPage(),window.addEventListener?window.removeEventListener("message",n.handlePostMessage,!1):window.detachEvent("onmessage",n.handlePostMessage),n.stopListening(n.pageManager,"nyt:page-breakpoint",n.responsive)}}),this.prepareUrls(),this.render()},render:function(){this.modalSettings.modalContent=this.template(this.settings),this.emailModal=new i(this.modalSettings),this.emailModal.addToPage(),t.defer(this.responsive,this.pageManager.getCurrentBreakpoint())},responsive:function(e){var t=this.emailModal.$modal.find("iframe");e<=1010&&this.frameState==="full"&&(t.css("height",t.height()+this.frameSize.ad+"px").width(this.frameSize.small),this.frameSize.state="small",this.emailModal.positionDialog()),e>1010&&this.frameState==="small"&&(t.css("height",t.height()-this.frameSize.ad+"px").width(this.frameSize.full),this.frameState="full",this.emailModal.positionDialog())},handlePostMessage:function(e){var t;/\.nytimes\.com$/.test(e.origin)&&(t=e.data.match(/(.+)\:(.+)/),t&&t[1]==="frameheight"?this.$el.css("height",t[2]):t&&t[1]==="closewindow"?this.emailModal.close():t&&t[1]==="loginredirect"&&(window.location=n.myaccount+"/auth/login?URI="+encodeURIComponent(window.location.href)))},prepareUrls:function(){typeof this.settings.dataUrl=="string"&&this.settings.dataUrl.indexOf("http")===-1&&(this.settings.dataUrl="http:"+n.www+this.settings.dataUrl)}});return o}),define("shared/sharetools/helpers/share-tools-config",["underscore/nyt","foundation/views/page-manager"],function(e,t){var n={width:600,height:450,adPosition:"Frame4A",overlayAdPosition:"Frame6A",isModalMember:!0,isArticleTool:!1,isInDefaultSet:!1,isPopup:!0,usesShortUrl:!1,shareDataParameters:{},shareServiceParameters:{}},r=function(t){var r=e.extend({},n,t);return Object.freeze?Object.freeze(r):r},i={EMAIL:r({label:"Email",isInDefaultSet:!0,requiresLogin:!0,loginModalTitle:"Log in to email",modalDisplayOrder:1}),FACEBOOK:r({label:"Share",isInDefaultSet:!0,url:"http://www.facebook.com/sharer.php",smid:"fb-share",modalDisplayOrder:3,shareDataParameters:{url:"u"}}),GOOGLE:r({label:"Google+",url:"https://plus.google.com/share",smid:"go-share",height:600,modalDisplayOrder:4,shareDataParameters:{url:"url"},shareServiceParameters:{hl:"en-US"}}),REDDIT:r({label:"Reddit",url:"http://www.reddit.com/submit",smid:"re-share",width:854,height:550,modalDisplayOrder:6,shareDataParameters:{url:"url",title:"title"}}),PINTEREST:r({label:"Pin",url:"https://www.pinterest.com/pin/create/button/",smid:"pin-share",width:750,height:330,modalDisplayOrder:7,shareDataParameters:{url:"url",media:"media",description:"description"}}),TWITTER:r({label:"Tweet",isInDefaultSet:!0,url:"https://twitter.com/share",smid:"tw-share",usesShortUrl:!0,modalDisplayOrder:5,shareDataParameters:{url:"url",title:"text"}}),LINKEDIN:r({label:"Linkedin",url:"http://www.linkedin.com/shareArticle",smid:"li-share",width:750,modalDisplayOrder:2,shareDataParameters:{url:"url",title:"title",description:"summary"},shareServiceParameters:{mini:"true",source:"The New York Times"}}),SAVE:r({label:"Save",isInDefaultSet:!0,isArticleTool:!0,loginModalTitle:"Log in to save",modalDisplayOrder:1}),PRINT:r({label:"Print",isModalMember:t.getApplicationName()!=="interactive",isArticleTool:t.getApplicationName()!=="interactive",modalDisplayOrder:3,shareServiceParameters:{pagewanted:"print"}}),REPRINTS:r({label:"Reprints",isArticleTool:!0,isModalMember:!0,url:"https://s100.copyright.com/AppDispatchServlet",modalDisplayOrder:2,shareDataParameters:{url:"contentID"},shareServiceParameters:{publisherName:"The New York Times",publication:"nytimes.com",token:"",orderBeanReset:"true",postType:"",wordCount:"",title:document.title,publicationDate:"",author:""}}),EMBED:r({label:"Embed",isArticleTool:!1,isInDefaultSet:!1,isModalMember:!1}),"SHOW-ALL":r({label:"More",isInDefaultSet:!0,isModalMember:!1,isModalTrigger:!0}),AD:r({label:"Advertisement",isInDefaultSet:!0,isModalMember:!1})};return Object.freeze?Object.freeze(i):i}),function(e,t){if(typeof exports!="undefined")exports.Auth=t(null,$);else if(typeof define=="function"&&define.amd)define("foundation/lib/auth/userauth",["foundation/hosts","jquery/nyt"],function(e,n){return t(e,n)});else if(typeof e.NYTD=="object"){var n=e.NYTD,r=t(n.Hosts,n.jQuery);n.Auth=n.Auth||{},n.Auth.register=r.register,n.Auth.login=r.login,n.Auth.getToken=r.getToken}}(this,function(e,t){var n,r,i,s,o,u=e?e.www?e.www:e.wwwHost:"//www.nytimes.com",a=e?e.myaccount?e.myaccount:e.myaccountHost:"https://myaccount.nytimes.com",f=u+"/svc/profile/token.jsonp?callback=?",l=5e3,c=6e5,h="X-Nyt-Sartre-Token",p=a+"/register",d=a+"/auth/login",v="timeout",m="corrupt",g="dead",y=function(e){var i=p+"?"+C(),s=function(){var s=['<form action="',i,'" method="POST" class="hidden" id="authRegiForm">','<input name="is_continue" value="1" type="text">','<input name="email_address" value="',e.email,'" type="text">','<input name="password1" type="password">','<input name="password2" type="password">',e.specialOffers?'<input name="subscribe[]" type="text" value="MM">':"",'<input name="token" value="',n,'" type="text">','<input name="expires" value="',r,'">',"</form>"].join("");t(document.body).append(s),t("#authRegiForm input[name=password1]").val(e.password),t("#authRegiForm input[name=password2]").val(e.confPassword),t("#authRegiForm").submit()},o=function(){window.location.replace(i)};w().done(s).fail(o)},b=function(e){var i=d+"?"+C(),s=function(){var s=['<form action="',i,'" method="POST" class="hidden" id="authLoginForm">','<input name="is_continue" value="1" type="text">','<input name="userid" value="',e.user,'" type="text">','<input name="password" type="password">','<input name="remember" value="',e.remember,'" type="text">','<input name="token" value="',n,'" type="text">','<input name="expires" value="',r,'">',"</form>"].join("");t(document.body).append(s),t("#authLoginForm input[name=password]").val(e.password),t("#authLoginForm").submit()},o=function(){window.location.replace(i)};w().done(s).fail(o)},w=function(){if(i)return o.promise();o=new t.Deferred;if(N())return o.resolve(n,h,!0),o.promise();if(s)return o.reject(g),o.promise();i=!0;var e=setTimeout(function(){i=!1,S(),o.reject(v)},l);return t.getJSON(f,null,function(t){i=!1,t&&t.data&&t.data.token?(n=t.data.token,clearTimeout(e),T(),o.resolve(n,h,!1)):(S(),clearTimeout(e),o.reject(m))}),o.promise()},E=function(e,t,n){var r="/oauth/"+t+"-link";return a+r+"?type=login&URI="+e+(n?"&view=popup":"")+"&flow=HPLI"},S=function(){s=!0,setTimeout(x,3e5)},x=function(){s=!1},T=function(){r=(new Date).getTime()+c},N=function(){return r>(new Date).getTime()},C=function(){var e,n=window.location,r={URI:n.protocol+"//"+n.hostname+"/"+n.pathname.replace(/^\//,"")};return n.search.length>1&&(e=n.search.substr(1),e=e.replace(/(\?|&)?gwh=([^&]+)/g,""),e=e.replace(/(\?|&)?gwt=([^&]+)/g,""),e=e.replace(/%/g,"Q"),r.OQ=e),t.param(r)};return{register:y,login:b,getToken:w,getSocialLinkUrl:E}}),define("shared/sharetools/models/saved-article",["jquery/nyt","underscore/nyt","backbone/nyt","foundation/models/base-model"],function(e,t,n,r){var i=r.extend({getSummary:function(){return this.get("Data")?this.get("Data").Summary:""},getByline:function(){return this.get("Data")?this.get("Data").Byline:""},getTitle:function(){return this.get("Data")?this.get("Data").Headline:this.get("URL")},getUrl:function(){return this.get("URL")},getDate:function(){return this.get("CreatedDate")},getFormattedDate:function(){var e=new Date(this.getDate());return this.dateHelper.getMonthName(e.getMonth())+" "+e.getDate()+", "+e.getFullYear()},getThumbUrl:function(){return this.get("Data")?this.get("Data").ImageCrops.MediumThreeByTwo210:""},getCaption:function(){var e="";return this.get("Data")&&(e=this.get("Data").ImageCaption),e},hasThumb:function(){return!!this.getThumbUrl()}});return i}),define("shared/sharetools/collections/cross-platform-save",["jquery/nyt","underscore/nyt","backbone/nyt","foundation/collections/base-collection","foundation/hosts","foundation/lib/auth/userauth","shared/sharetools/models/saved-article"],function(e,t,n,r,i,s,o){var u=r.extend({model:o,offset:0,limit:20,apiCommand:{save:"POST",list:"GET",remove:"DELETE"},url:i.readingListHost+"/reading-list/v2",currentArticleSaved:!1,save:function(e){var t=this,n={data:JSON.stringify({URL:e})};this.sync(this.apiCommand.save,n).done(function(n){t.articleIsSaved(!0),t.add(n.Assets),t.trigger("nyt:xps-saved",e,n.Assets)}).fail(function(){t.trigger("nyt:xps-failed",e)})},removeSavedArticle:function(e){var t=this,n={data:JSON.stringify({URL:e})};this.sync(this.apiCommand.remove,n).done(function(n){t.articleIsSaved(!1),t.remove(n),t.trigger("nyt:xps-article-removed",e,n)}).fail(function(){t.trigger("nyt:xps-failed",e)})},getSavedArticles:function(){var e=this,t={data:{offset:this.offset,limit:this.limit},url:this.url+"/data"};e.reset(),this.sync(this.apiCommand.list,t).done(function(t){e.add(t.Assets),e.totalCount=t.OverallSummary.Count,e.trigger("nyt:xps-articles-loaded",t.Assets)}).fail(function(){e.trigger("nyt:xps-load-failed")})},getNextSavedArticles:function(){return this.offset+=this.limit,this.limit=10,this.totalCount>this.offset?(this.getSavedArticles(),this.totalCount<=this.offset+this.limit&&this.trigger("nyt:xps-finished"),!0):!1},getArticlesStatus:function(e){var t=this,n={data:{url:e},url:this.url+"/active"};this.sync(this.apiCommand.list,n).done(function(e){t.articleIsSaved(e.length)}).fail(function(){t.broadcast("nyt:xps-load-failed")})},articleIsSaved:function(e){this.currentArticleSaved=e,this.broadcast("nyt:xps-article-status",e)},sync:function(n,r){var i=new e.Deferred,o=setTimeout(function(){i.reject()},5e3),u={type:n,dataType:"json",contentType:"application/json",url:this.url,headers:{},xhrFields:{withCredentials:!0},success:function(e){clearTimeout(o),e?i.resolve(e):i.reject()}};return s.getToken().done(function(n,i,s){n&&i&&typeof s!="undefined"&&(u.headers["X-Requested-By"]=n),e.ajax(t.extend(u,r))}),i.promise()}});return u}),define("shared/sharetools/instances/cross-platform-save",["shared/sharetools/collections/cross-platform-save"],function(e){return new e}),define("shared/sharetools/collections/short-url",["jquery/nyt","backbone/nyt","foundation/collections/base-collection"],function(e,t,n){var r=n.extend({url:"http://www.nytimes.com/svc/bitly/shorten.jsonp",initialize:function(){this.currentUrlRequest="",this.addCurrentPage()},sync:function(e,n,r){return r.dataType="jsonp",r.jsonpCallback="shortUrlCallback",r.jsonp="callback",r.cache=!0,r.data={url:this.currentUrlRequest},t.sync(e,n,r)},parse:function(e){return{url:this.currentUrlRequest,shortUrl:e.payload?e.payload.short_url:""}},addCurrentPage:function(){var t,n=this.pageManager.getCanonical();this.pageManager.getUrlParam("rico")==="1"&&typeof this.pageManager.getUrlParam("share_url")!="undefined"?t=this.pageManager.getUrlParam("share_url"):t=e("#masthead").find(".story-short-url").text(),n&&t&&this.add({url:n,shortUrl:t})},getRicoUrl:function(e){var t=this.pageManager.getUrlParam("share_url"),n=document.createElement("a");n.href=e;if(n.pathname===location.pathname&&t&&t.indexOf("r-i.co/")===7)return t},requestUrl:function(e){var t,n=this.findWhere({url:e});if(n)return n.get("shortUrl");t=this.getRicoUrl(e);if(t)return t;this.currentUrlRequest=e,this.fetch()}});return r}),define("shared/sharetools/instances/short-url",["shared/sharetools/collections/short-url"],function(e){return new e}),define("shared/sharetools/views/common-mixin",["jquery/nyt","underscore/nyt","foundation/hosts","foundation/models/user-data","foundation/models/page-storage","foundation/tracking/tracking-mixin","shared/modal/views/modal","shared/sharetools/templates","shared/sharetools/views/email","shared/sharetools/helpers/share-tools-config","shared/sharetools/instances/cross-platform-save","shared/sharetools/instances/short-url"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h={handleShareAction:function(t,n){var i=e(t.target),s=i.attr("data-share")||i.parent().attr("data-share"),o=s&&f[s.toUpperCase()];if(!o)return;n&&this.modal&&this.modal.close(),this.pageManager.getMeta("PT")!=="imageslideshow"&&this.trackShareData(s,o,n);if(o===f.EMBED){this.triggerEmbedLoginModal(t);return}o.isModalTrigger?this.broadcast("nyt:open-share-modal",{instanceContainer:this.$instanceContainer}):o===f.EMAIL?this.isMobileShareTools()?this.openMailToLink():r.isLoggedIn()?new a({dataUrl:this.shareData.getUrl()}):this.triggerLoginModal(t,"Log in to email"):o===f.PRINT?window.print():o===f.SAVE?r.isLoggedIn()?this.saveItem():(this.trackingTrigger("loginmodal-open",{module:"LogIn",action:"Click",region:n?"ToolsMenu":this.trackingRegion,eventName:"ArticleTool-save"}),this.triggerLoginModal(t,"Log in to save")):o.isPopup&&this.popupShareWindow(o)},handleModalShareAction:function(e){this.handleShareAction(e,!0)},triggerLoginModal:function(e,t){e.preventDefault(),e.stopPropagation(),this.broadcast("nyt:loginmodal-open",{modalTitle:t})},triggerEmbedLoginModal:function(t){t.stopPropagation(),e(".show-all-sharetool a").trigger("click"),this.$body.find(".show-all-sharetool-modal #embed-input").select()},popupShareWindow:function(e){e.usesShortUrl?this.handleShortUrlShareAction(e):window.open(this.buildShareServiceUrl(e),"_blank",this.getPopupWindowFeatures(e))},getPopupWindowFeatures:function(e){return"toolbar=0,status=0,height="+e.height+",width="+e.width+",scrollbars=yes,resizable=yes"},buildShareServiceUrl:function(e){var t,n=[],r=e.smid,i=e.shareDataParameters,s=e.shareServiceParameters,o={url:this.shareData.getUrl(),title:this.shareData.getTitle(),description:this.shareData.getDescription(),media:this.shareData.getMedia()};r&&(o.url+=this.getQuerystringDelimiter(o.url),o.url+="smid="+r);if(i)for(t in i)i.hasOwnProperty(t)&&o.hasOwnProperty(t)&&n.push(i[t]+"="+encodeURIComponent(o[t]));if(s){s.hasOwnProperty("publicationDate")&&(s.publicationDate=this.shareData.getPublicationDate()),s.hasOwnProperty("author")&&(s.author=this.shareData.getAuthor());for(t in s)s.hasOwnProperty(t)&&n.push(t+"="+encodeURIComponent(s[t]))}return e.url+"?"+n.join("&")},handleShortUrlShareAction:function(t){var n,r,i,s,o=this,u=this.shareData.getUrl(),a=t.smid;/(?:iPad|iPhone)/.test(navigator.userAgent)?(s=e("#masthead").find(".story-short-url").text()||this.pageManager.getCanonical(),n=t.url+"?url="+encodeURIComponent(s)+"&text="+encodeURIComponent(o.shareData.getTitle()),window.open(n,"_blank",this.getPopupWindowFeatures(t))):(r=window.open("","_blank",this.getPopupWindowFeatures(t)),i=function(e){var n=o.shareData.getVia();e=t.url+"?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(o.shareData.getTitle()),n&&(e+="&via="+encodeURIComponent(n)),r.location.href=e},a&&!this.pageManager.isMobile()&&(u+=this.getQuerystringDelimiter(u),u+="smid="+a),n=c.requestUrl(u)||"",n?i(n):this.listenToOnce(c,"add",function(){var e=c.findWhere({url:u});e&&i(e.get("shortUrl"))}))},getQuerystringDelimiter:function(e){return e.indexOf("?")===-1?"?":"&"},saveItem:function(){var e,t,r,s,o=this,a=this.shareData.getUrl();t=function(){var e="sharetools_hasSaves";i.get(e)!==!0?(s(),i.set(e,!0)):r()},r=function(){o.showModal({id:"save-item-growl-modal",modalTitle:'<i class="icon"></i>Saved',tailDirection:"centered",openCallback:function(){window.setTimeout(this.removeFromPage,2e3)}})},s=function(){o.showModal({id:"save-item-modal",modalTitle:'<i class="icon"></i>Saved',modalContent:u.savemodal({link:n.www+"/saved"}),hasOverlay:!0,hasCloseButton:!0,tailDirection:"centered",closeCallback:function(){this.removeFromPage()}})},e=l.where({url:a}),e.length?r():(this.subscribeOnce(l,"nyt:xps-saved",t),l.save(a))},trackShareData:function(e,t,n){var r={};this.trackingBaseData={module:"ShareTools",action:"click",version:this.shareData.getContentType(),contentCollection:this.pageManager.getMeta("article:section")},n?(r.region="ToolsMenu",r.version="Content"):r.region=this.trackingRegion,t.isArticleTool?(r.module="ArticleTools",r.eventName="ArticleTool-"+e):e==="show-all"?r.eventName="Share-ShowAll":r.eventName="Share-"+e,this.trackingTrigger("share-tools-click",r)},showModal:function(e){var n=new o(e);n.addToPage(),t.defer(n.open)},isMobileShareTools:function(){return this.pageManager.getCurrentBreakpoint()<1e3},openMailToLink:function(){var e="%0A%0A",t=encodeURIComponent(this.shareData.getTitle()),n=encodeURIComponent(this.shareData.getDescription()),r=encodeURIComponent(this.shareData.getUrl()),i="NYTimes.com: "+t,s="From The New York Times:"+e+t+e+n+e+r;window.location="mailto:?subject="+i+"&body="+s}};return h}),define("shared/sharetools/views/share-tool",["jquery/nyt","underscore/nyt","foundation/views/base-view","shared/sharetools/views/common-mixin","shared/sharetools/templates"],function(e,t,n,r,i){var s=n.extend(t.extend({},r,{tagName:"li",events:{click:"handleShareAction"},initialize:function(e){this.toolId=e.toolId,this.toolConfig=e.toolConfig,this.label=e.customLabel||this.toolConfig.label,this.loginModalTitle=this.toolConfig.loginModalTitle||"",this.$instanceContainer=e.instanceContainer,this.shareData=e.shareData,this.trackingRegion=e.trackingRegion,e.customLabel===""&&(this.isLabelHidden=!0)},render:function(){var e,t,n=this.toolId.toLowerCase();return this.isAdView()?(e=this.pageManager.getCurrentBreakpoint()<=1020?"Position1":"Frame4A",this.$instanceContainer.find(".sharetools-inline-article-ad").attr("id",e),this.broadcast("nyt:ad-library:dfp:queue-placement",e),this.$instanceContainer.find("#"+e).removeClass("hidden")):(t=i.shareTool({id:n,label:this.label,loginModalTitle:this.loginModalTitle,isLabelHidden:this.isLabelHidden}),this.$el.addClass("sharetool "+n+"-sharetool"),this.$el.append(t)),this},isAdView:function(){return this.toolId==="AD"}}));return s}),define("shared/sharetools/views/containers-mixin",["jquery/nyt","underscore/nyt","shared/sharetools/models/share-data","shared/sharetools/views/share-tool","shared/sharetools/helpers/share-tools-config"],function(e,t,n,r,i){var s={getToolIdsAndCustomLabels:function(e){var t,n,r,s;this.toolIds=[],this.customLabels={};if(e){e=e.split(",");for(t=0,r=e.length;t<r;t++)n=e[t].toUpperCase(),s=n.indexOf("|"),s!==-1&&(n=n.substring(0,s),this.customLabels[n]=e[t].substr(s+1)),this.toolIds.push(n)}else for(n in i)i.hasOwnProperty(n)&&i[n].isInDefaultSet===!0&&this.toolIds.push(n)},instantiateViews:function(e){var n,s,o,u,a,f=[];for(n=0,s=e.length;n<s;n++)o=e[n],u=this.customLabels&&this.customLabels[o],i.hasOwnProperty(o)&&(a={toolId:o,toolConfig:i[o],instanceContainer:this.$instanceContainer,shareData:this.shareData,trackingRegion:this.trackingRegion},t.isString(u)&&(a.customLabel=u),f.push(new r(a)));return f},renderToolViews:function(){var e,t,n;t=this.instantiateViews(this.toolIds);for(e=0,n=t.length;e<n;e++)t[e].isAdView()?t[e].render():this.$el.append(t[e].render().el)},getToolViewsMarkup:function(t){var n,r=document.createElement("div"),i=this.instantiateViews(t),s=i.length;for(n=0;n<s;n++)r.appendChild(i[n].render().el);return e(r).html()}};return s}),define("foundation/views/ad-view-manager",["jquery/nyt","underscore/nyt","foundation/views/base-view"],function(e,t,n){var r=n.registerView("ad-view-manager").extend({iframeClass:"ad-frame",render:function(n){var r,i,s,o,u,a,f,l=document.createElement("iframe");n=n||{},i=n.model;if(!i||typeof i.get=="undefined"||!n.el||i.get("hasPainted"))return;n.el=e(n.el),o=i.get("confirmation-url"),u=i.get("creative"),f=i.get("isInlineSafe"),typeof f=="string"&&f.toLowerCase()==="n"&&(f=!1);if(f)n.el.append(n.el.html()+u);else if(n.el.find("iframe").length===0&&i.get("name")!=="ADX_CLIENTSIDE"){s=n.frameStyle?n.frameStyle+u:u,e(l).attr("frameBorder",0).addClass(this.iframeClass).css(this.calculateIFrameCss(i.get("width"),i.get("height"))),n.secondaryIframeClass&&(l.className+=" "+n.secondaryIframeClass),n.el.append(l);if(l.contentDocument||l.contentWindow)r=l.contentDocument||l.contentWindow.document,r.open(),r.write(s),t.defer(function(){r.close()})}e(n.el.selector+"-alternate-content").addClass("hidden"),o&&o!==""&&(a=new Image,a.src=o),this.trackingTriggerImpression("ad-render",{module:"Ad",version:i.get("name"),action:"Impression",contentCollection:i.get("campaign"),contentID:i.get("classification"),region:n.page||"",eventName:"AdImpression"}),n.callback&&n.callback()},calculateIFrameCss:function(e,t){var n={};return n.width=e||0,n.height=t||0,n}});return new r}),define("shared/ad/collections/ads",["backbone/nyt","underscore/nyt","foundation/collections/base-collection","foundation/hosts","shared/ad/models/ad"],function(e,t,n,r,i){var s=n.extend({deliveryProofParams:["adxforce","debug"],adForceLookup:{leaderboard:"728x90testnyt5",billboard:"970x90horiztest",pushdown:"testnyt5pushdown",halfpage:"mediamindhalfexptest",xxl:"nyt5xxltestpickletag",bigad:"middlerighttest"},initialize:function(e,n){if(!n)return!1;this.options=n,t.isUndefined(this.pageManager.getMeta("adxPage"))?this.host=this.pageManager.getUrlParam("adx_campaign")||n.adx_campaign||"www.nytimes.com":(this.host="",this.options.page=this.pageManager.getMeta("adxPage")),this.interstitial=n.interstitial?1:0,this.setPageParameter()},setPageParameter:function(){var e;if(this.options.page)return;e=location.pathname,e=e.replace(/\d{4}/,"yr").replace(/\d{2}/,"mo").replace(/\d{2}/,"day"),this.options.page=this.host+e},model:i,url:r.adx+"/adx/bin/adxrun.html",sync:function(n,r,i){var s=this,o=["nyt5"];return i.dataType="jsonp",i.jsonp="jsonp",i.data={page:s.options.page,positions:s.options.positions.join(","),autoconfirm:s.options.autoconfirm||0,v:3,cpp:1,attributes:"nyt5",interstitials:this.interstitial},this.options.cpp===!1&&(delete i.data.interstitials,delete i.data.cpp),i.data=s.assignDeliveryProofParams(i.data),typeof this.pageManager.getUrlParam("hp")!="undefined"&&o.push("hp"),typeof this.pageManager.getUrlParam("src")!="undefined"&&o.push("src-"+this.pageManager.getUrlParam("src")),typeof s.options.keywords!="undefined"&&(o=t.union(o,s.chainKeywords(s.options.keywords))),i.data.keywords=t.filter(o,function(e){return typeof e!="undefined"&&e!==""}).join(","),e.sync(n,r,i)},assignDeliveryProofParams:function(e){var n,r,i={};for(n=this.deliveryProofParams.length-1;n>=0;n-=1)r=this.pageManager.getUrlParam(this.deliveryProofParams[n]),typeof r!="undefined"&&(i[this.deliveryProofParams[n]]=r||"1");return t.extend(e,i)},chainKeywords:function(e){var t,n,r=e.length,i=[],s=this;for(t=0;t<r;t+=1)n=s.adForceLookup[e[t]],i.push(n||e[t]);return this.pageManager.getUrlParam("rico")==="1"&&i.push(this.pageManager.getUrlParam("keywords")),i},parse:function(e){var n=e.ads;return n=t.map(n,function(e,t){var n=e.isInlineSafe;return e.name=t,e.isInlineSafe=n==="Y"||n==="true",e}),typeof this.pageManager.getUrlParam("debug")!="undefined"&&(window.adx_debug_output=e,console.log("adx debug page: ",this.options.page),console.log("adx debug positions: ",this.options.positions.join(",")),console.log("adx debug output: ",e),console.log("adx debug keywords: ",this.chainKeywords(this.options.keywords).join(","))),n},getConfirmPixel:function(){if(this.confirmPixel)return this.confirmPixel.creative}});return s}),define("shared/ad/templates",["underscore/nyt"],function(_){var templates={};return templates.iFrameStyleSheet=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<!--\nDEPRECATED - DO NOT USE/MODIFY - USE SHARED/ADLIBRARY INSTEAD\n-->\n<style type="text/css">\nbody {\nmargin: 0;\noverflow: hidden;\n}a img {\nborder: none;\n}\n</style>';return __p},templates.interstitialModal=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<!--\nDEPRECATED - DO NOT USE/MODIFY - USE SHARED/ADLIBRARY INSTEAD\n-->\n<div id="Interstitial" class="ad interstitial-ad"></div><p class="user-action dismiss-button">Continue &raquo;</p>';return __p},templates.ribbonInterstitial=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<!--\nDEPRECATED - DO NOT USE/MODIFY - USE SHARED/ADLIBRARY INSTEAD\n-->\n<div class="ribbon-interstitial-ad-overlay">\n<h4 class="ad-heading"> Advertisement </h4>\n<div id="RibbonInterstitial" class="ad ribbon-interstitial-ad"> </div>\n</div>';return __p},templates}),define("shared/ad/views/ads",["underscore/nyt","jquery/nyt","foundation/views/base-view","foundation/views/ad-view-manager","shared/ad/collections/ads","shared/ad/templates","shared/modal/views/modal"],function(e,t,n,r,i,s,o){var u=n.registerView("ads").extend({el:".ad",template:s,pushdownWidth:"970",billboardHeight:"90",navBreakPoint:10040,positions:null,blocking:!1,adShown:{},initialize:function(t){e.bindAll(this,"completeInterstitial","renderAd"),this.options=t||this.options||{},this.positions=[],this.preInitialize(),this.local(this,"nyt:ads-pre-initialize"),this.detectTragedy(),this.setAdParametersOnOptions(),this.scope=this.options.scope||this.scope,this.confirm=!0,this.ads=new i([],this.options),this.subscribe(this.ads,"sync",this.receiveAds),this.secondaryIframeClass="frame-for-"+this.scope,this.listenTo(this.pageManager,"nyt:page-breakpoint",this.responsive),this.postInitialize(),this.local(this,"nyt:ads-post-initialize"),this.subscribe("nyt:ads-new-placement",this.handleRemoteAdRequest),this.subscribe("nyt:ads-fire-ribbon-interstitial",this.fireRibbonInterstitial),this.subscribe("nyt:slideshow-ad",this.fireSlideShowAd),this.addAmazonKeywords?this.getAmazonAds():this.requestAds()},getAmazonAds:function(){window.amznads={updateAds:function(t){window.amazonAdData=t.ads,window.amazonAdSlots=e.keys(window.amazonAdData)},renderAd:function(e,t){var n,r;window.amazonAdData&&window.amazonAdData[t]?(e.write(window.amazonAdData[t]),e.close()):(n={c:"dtb",src:"3030",kvmismatch:1,pubReturnedKey:t,aaxReturnedKeys:window.amazonAdSlots,cb:Math.round(1e7*Math.random()),u:window.encodeURIComponent(window.location.host+window.location.pathname),ua:encodeURIComponent(window.navigator.userAgent)},r=window.encodeURIComponent(JSON.stringify(n)),e.write('<img src="//aax.amazon-adsystem.com/x/px/p/0/'+r+'"/>'),e.close())}},this.getAmazonKeywordsAndRequestAds()},getAmazonKeywordsAndRequestAds:function(){var e=this,n="3030",r=encodeURIComponent(document.location);try{r=encodeURIComponent(""+window.top.location)}catch(i){}t.ajax({url:"//aax.amazon-adsystem.com/e/dtb/bid?src="+n+"&u="+r+"&cb="+Math.round(Math.random()*1e7),dataType:"script"}).done(function(){e.addAmazonKeywords()}).always(function(){e.requestAds()})},preInitialize:t.noop,postInitialize:t.noop,responsive:t.noop,setHtmlClasses:t.noop,requestAds:function(){this.options.response?(this.ads.reset(this.ads.parse(this.options.response)),this.ads.trigger("sync")):this.ads.fetch()},receiveAds:function(){this.hasInterstitial()||this.checkAds()},resizeTopAd:e.debounce(function(){var e,n=this.ads.findWhere({name:"TopAd"});n&&(e=n.get("height"),e&&e<90&&t("#TopAd").css("min-height",parseInt(e,10)))},1e3),checkAds:function(){var n,r,i,s,o,u=this;this.removeAds(),n=this.getReturnedAdNames(this.pageManager.isDomReady()),this.pageManager.isDomReady()||this.subscribe("nyt:page-ready",function(){u.getReturnedAdNames(!0)}),n&&n.length>0&&(this.pageManager.getMeta("ads_adNames")||this.pageManager.setMeta("ads_adNames",this.returnAdNames())),e.indexOf(n,"TopAd")<0?(o=t("#TopAd"),o.length===0&&o.addClass("hidden")):u.resizeTopAd(),s=this.getPositions();for(r=0,i=s.length;r<i;r+=1)t("#"+s[r]).toggleClass("hidden",u.isAdUnavailable(n,s[r]));e.indexOf(this.options.positions,"Middle1C")>=0&&!this.ads.findWhere({name:"Middle1C"})&&t("#TopNavAd, .search-flyout-panel .ad").addClass("hidden"),e.defer(function(){u.broadcast("nyt:ads-rendered",u)}),u.setHtmlClasses(),e.delay(function(){u.loadGoogleAdScript()},1200)},loadGoogleAdScript:function(){var e,n,r;if(t("#SponLink, #SponLinkA, #HPSponLink, #TopAd1, #MiddleRightN").length===0||this.pageManager.getMeta("googleAdScriptInjected"))return;e="script",n=document.createElement(e),r=document.getElementsByTagName(e)[0],n.src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",r.parentNode.insertBefore(n,r),this.pageManager.setMeta("googleAdScriptInjected","true")},renderAd:function(e){e.page=e.page||this.ads.options.page,e.frameStyle=e.frameStyle||this.template.iFrameStyleSheet(),e.secondaryIframeClass=e.secondaryIframeClass||this.secondaryIframeClass,r.render(e)},renderAdByPositionName:function(n,r){var i=t("#"+n);return r||(r=this.ads.where({name:n})[0]),i.length&&r||n==="ADX_CLIENTSIDE"?(this.isCreativeBlank(r)||i.removeClass("hidden"),e.defer(this.renderAd,{model:r,el:i}),!0):!1},handleRemoteAdRequest:function(e){this.ads.length>0&&this.renderAdByPositionName(e)},getPositions:function(){return this.options.positions},detectTragedy:function(){var e=this.pageManager.getMeta("ad_sensitivity");e&&(this.options.page="www.nytimes.com/"+e)},returnAdNames:function(){return this.ads.pluck("name")},cleanHtmlClasses:function(){this.htmlClasses&&this.$html.removeClass(e.values(this.htmlClasses).join(" "))},isDirectlySold:function(e){var t=this.ads.where({name:e})[0].attributes.isDirectlySold;return t==="true"},returnAdParametersObject:function(){var t=this.pageManager.getUrlParam("ad-keywords"),n=this.pageManager.getUrlParam("ad-positions");return{keywords:e.isString(t)?[t]:t,positions:e.isString(n)?[n]:n}},setAdParametersOnOptions:function(){var t=this.returnAdParametersObject();this.options.keywords=e.union(this.options.keywords,t.keywords),t.positions&&(this.options.positions=t.positions)},isPlaceholderInViewport:function(e){var n;return!e||e&&e.length===0?!1:(n=e.get(0).getBoundingClientRect(),n.top+e.height()>=0&&n.left+e.width()>=0&&n.bottom-e.height()<=t(window).height()&&n.right-e.width()<=t(window).width())},isCreativeBlank:function(e){var t=e.get("classification");return t==="blank"||t==="blank-but-count-imps"},handleApplicationAd:function(e){var t,n;return t=e.get("name"),n=this.renderAdByPositionName(t,e),n},getReturnedAdNames:function(e){var t=this,n=[];return e=typeof e!="undefined"?e:!1,this.ads.length>0&&this.ads.each(function(r){e?t.handleApplicationAd(r)?n.push(r.get("name")):t.confirm=!1:n.push(r.get("name"))}),n},isAdUnavailable:function(t,n){return e.indexOf(t,n)<0||this.isCreativeBlank(this.ads.where({name:n})[0])},removeAds:function(){t("."+this.secondaryIframeClass).remove()},isHalfPage:function(e,t){return parseInt(e,10)===300&&parseInt(t,10)===600},isPushdown:function(e,t){return e===this.pushdownWidth&&t!==this.billboardHeight},handleTopNav:function(n){var r,i,s,o,u=t("#SponsorAd"),a=u.find("iframe"),f=t("#TopNavAd"),l=f.find("iframe");return r=this.ads.findWhere({name:"Middle1C"}),s=n<this.navBreakPoint&&a.length===0,o=n>=this.navBreakPoint&&l.length===0,r&&(s||o)?(s?(i=u,l.remove()):(i=f,a.remove()),e.defer(this.renderAd,{el:i,model:r}),!0):!1},fireSlideShowAd:function(e){var n=this.ads.findWhere({name:e.position}),r=t('<div class="ad-wrapper"></div>');if(this.adShown[e.position]||typeof n!="object")return;this.adShown[e.position]=!0,e.el.html(r),this.renderAd({el:r,model:n}),this.broadcast("nyt:slideshow-ad-render",n)},hasInterstitial:function(){var e,t=this.ads.findWhere({name:"Interstitial"});return t?(e=t.get("timeout")?parseInt(t.get("timeout"),10)*1e3:15e3,this.createInterstitial(t,this.completeInterstitial,e),!0):!1},fireRibbonInterstitial:function(){var e=this.pageManager.getViewport();this.$shell.prepend(s.ribbonInterstitial()),this.renderAdByPositionName("RibbonInterstitial"),this.$shell.find("#main").addClass("visually-hidden").end().find(".ribbon-interstitial-ad-overlay").css("height",e.height-150).find("iframe").css("width","")},createInterstitial:function(e,t,n){var r=this;this.interstitialModal=(new o({id:"interstitial-ad-modal",modalTitle:"advertisement",tailDirection:"fixed",hasOverlay:!0,hasCloseButton:!0,width:e.get("width"),height:e.get("height"),modalContent:s.interstitialModal(),closeCallback:t,openCallback:function(){r.renderAdByPositionName(e.get("name"))}})).addToPage().open(),n&&(r.closeTimeout=window.setTimeout(this.interstitialModal.close,n))},completeInterstitial:function(e){window.clearTimeout(this.closeTimeout),this.interstitialModal.removeFromPage(),this.ads.remove(e),this.checkAds()}});return u}),define("shared/sharetools/views/share-tools-modal-container",["jquery/nyt","underscore/nyt","foundation/views/base-view","shared/modal/views/modal","shared/ad/views/ads","shared/sharetools/helpers/share-tools-config","shared/sharetools/views/share-tool","shared/sharetools/views/common-mixin","shared/sharetools/views/containers-mixin","shared/sharetools/instances/short-url","shared/sharetools/templates"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.extend(t.extend({},u,a,{events:{click:"handleModalShareAction"},defaultModalSettings:{id:"show-all-sharetool-modal",modalTitle:"share",binding:".show-all-sharetool",tailDirection:"up",hasOverlay:!1,hasCloseButton:!1,positionTailSide:!1,autoPosition:!1,modalContent:"",toolTypeSponsor:"Share",tailLeftOffset:0,tailTopOffset:0,openCallback:function(){this.$target.addClass("active")},closeCallback:function(){this.$target.removeClass("active"),this.removeFromPage()}},initialize:function(n){this.$instanceContainer=n.instanceContainer,this.trackingRegion=n.trackingRegion,this.shareData=n.shareData,this.configIds=n.modalSettings.shares,this.showTools=n.modalSettings.hasOwnProperty("showTools")?n.modalSettings.showTools:!0,this.modalSettings=t.extend({},this.defaultModalSettings,n.modalSettings),this.modalSettings.modalFooter=l.shareToolsModalFooter({toolTypeSponsor:this.modalSettings.toolTypeSponsor}),this.isMobileShareTools()&&(this.modalSettings=t.extend({},this.modalSettings,{tailDirection:"centered",hasCloseButton:!0,hasOverlay:!0,positionTailSide:!1,autoPosition:!1})),this.el=document.createElement("ul"),this.el.className="sharetools-menu",this.$el=e(this.el),this.urlWithSmid=this.shareData.getUrl(),this.urlWithSmid+=this.urlWithSmid.indexOf("?")===-1?"?":"&",this.urlWithSmid+="smid=pl-share",this.permalink=f.requestUrl(this.urlWithSmid)||"",this.permalink||this.listenToOnce(f,"add",this.handleShortUrl),this.render()},render:function(){var e="Frame6A",t=this;this.modalSettings.modalContent=l.shareToolsModal(this.buildMarkup()),this.modal=new r(this.modalSettings),this.setElement(this.modal.$modal),this.modalSettings.embedCode&&this.modal.$modal.find(".embed-input").val(this.modalSettings.embedCode),this.modal.$modal.find(".show-all-sharetool-modal-ad").attr("id",e),this.modal.addToPage(),this.isMobileShareTools()||this.broadcast("nyt:ad-library:dfp:request-placement",e),this.subscribe("nyt:page-resize",function(){t.modal.close()})},buildMarkup:function(){var n,r,i,o=this,u=[],a=[],f=function(e){var n;if(!s.hasOwnProperty(e))return;n=t.extend({},s[e],{id:e}),s[e].isArticleTool?e==="REPRINTS"?o.pageManager.getMeta("PT")==="article"&&!/\/(?:aponline|reuters|opinion|t-magazine|magazine)\//.test(o.shareData.getUrl())&&(o.pageManager.getMeta("CG")!=="books"||o.pageManager.getMeta("tom")!=="Review")&&a.push(n):s[e].isArticleTool&&a.push(n):u.push(n)};if(this.configIds){this.getToolIdsAndCustomLabels(this.configIds);for(n=0,i=this.toolIds.length;n<i;n++)f(this.toolIds[n])}else{for(r in s)s[r].isModalMember&&f(r);u=t.sortBy(u,function(t){return e("html").hasClass("viewport-medium")?t.modalDisplayOrder:t.mobileModalDisplayOrder}),a=t.sortBy(a,function(t){return e("html").hasClass("viewport-medium")?t.modalDisplayOrder:t.mobileModalDisplayOrder})}return{shortUrl:this.permalink,showTools:this.showTools,isCompact:o.pageManager.getApplicationName()==="homepage",standardToolsList:this.getToolViewsMarkup(t.pluck(u,"id")),articleToolsList:this.getToolViewsMarkup(t.pluck(a,"id"))}},handleShortUrl:function(){var e=f.findWhere({url:this.urlWithSmid});e&&this.modal.$modal.find(".short-url-input").val(e.get("shortUrl"))}}));return c}),define("shared/sharetools/views/share-tools-container",["jquery/nyt","underscore/nyt","foundation/views/base-view","shared/sharetools/models/share-data","shared/sharetools/views/containers-mixin","shared/sharetools/views/share-tools-modal-container"],function(e,t,n,r,i,s){var o=n.extend(t.extend({},i,{initializedAttribute:"data-share-tools-initialized",initialize:function(t){this.$instanceContainer=t.el,this.trackingRegion=t.trackingRegion||"";if(!this.$instanceContainer||this.$instanceContainer.attr(this.initializedAttribute))return;this.getToolIdsAndCustomLabels(this.$instanceContainer.data("shares")),this.shareData=new r(this.$instanceContainer),this.el=document.createElement("ul"),this.$el=e(this.el),this.$el.addClass("sharetools-menu"),t.modalSettings&&this.subscribe("nyt:open-share-modal",function(e){e.instanceContainer&&this.$instanceContainer.get(0)===e.instanceContainer.get(0)&&new s({instanceContainer:e.instanceContainer,modalSettings:t.modalSettings,trackingRegion:this.trackingRegion,shareData:this.shareData})}),this.render()},render:function(){var n,r=t.find(this.toolIds,function(e){return e==="AD"})!==undefined,i=this.$instanceContainer.find(".sharetools-inline-article-ad");this.renderToolViews(),this.$instanceContainer.attr(this.initializedAttribute,"1"),r&&i.length?this.$el.insertBefore(i):this.$instanceContainer.append(this.el),n=this.$el.closest(".sharetools").attr("id"),n==="sharetools-masthead"&&(this.isTemplateMinimal()||this.hasCoverMedia())&&e("#sharetools-masthead .show-all-sharetool .sharetool-text").text("Share")},isTemplateMinimal:function(){if(this.$html.hasClass("template-minimal"))return!0},hasCoverMedia:function(){if(this.$html.hasClass("has-cover-media"))return!0}}));return o}),require(["interactive/instances/ad-manager","shared/sharetools/views/share-tools-container"]),define("interactive/main",function(){}),!function(){function e(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function t(e){return null!=e&&!isNaN(e)}function n(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function r(e){return e.length}function i(e){for(var t=1;e*t%1;)t*=10;return t}function s(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function o(){}function u(e){return ou+e in this}function a(e){return e=ou+e,e in this&&delete this[e]}function f(){var e=[];return this.forEach(function(t){e.push(t)}),e}function l(){var e=0;for(var t in this)t.charCodeAt(0)===uu&&++e;return e}function c(){for(var e in this)if(e.charCodeAt(0)===uu)return!1;return!0}function h(){}function p(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function d(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=au.length;r>n;++n){var i=au[n]+t;if(i in e)return i}}function v(){}function m(){}function g(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new o;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function y(){Xo.event.preventDefault()}function b(){for(var e,t=Xo.event;e=t.sourceEvent;)t=e;return t}function w(e){for(var t=new m,n=0,r=arguments.length;++n<r;)t[arguments[n]]=g(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=Xo.event;i.target=e,Xo.event=i,t[i.type].apply(n,r)}finally{Xo.event=s}}},t}function E(e){return lu(e,vu),e}function S(e){return"function"==typeof e?e:function(){return cu(e,this)}}function x(e){return"function"==typeof e?e:function(){return hu(e,this)}}function T(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=Xo.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function N(e){return e.trim().replace(/\s+/g," ")}function C(e){return new RegExp("(?:^|\\s+)"+Xo.requote(e)+"(?:\\s+|$)","g")}function k(e){return(e+"").trim().split(/^|\s+/)}function L(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=k(e).map(A);var i=e.length;return"function"==typeof t?r:n}function A(e){var t=C(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",N(i+" "+e))):n.setAttribute("class",N(i.replace(t," ")))}}function O(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function M(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function _(e){return"function"==typeof e?e:(e=Xo.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function D(e){return{__data__:e}}function P(e){return function(){return du(this,e)}}function H(t){return arguments.length||(t=e),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function B(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function j(e){return lu(e,gu),e}function F(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function I(){var e=this.__transition__;e&&++e.active}function q(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=a(t,$o(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+Xo.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),a=R;u>0&&(e=e.substring(0,u));var f=bu.get(e);return f&&(e=f,a=U),u?t?i:r:t?v:s}function R(e,t){return function(n){var r=Xo.event;Xo.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{Xo.event=r}}}function U(e,t){var n=R(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function z(){var e=".dragsuppress-"+ ++Eu,t="click"+e,n=Xo.select(Qo).on("touchmove"+e,y).on("dragstart"+e,y).on("selectstart"+e,y);if(wu){var r=Ko.style,i=r[wu];r[wu]="none"}return function(s){function o(){n.on(t,null)}n.on(e,null),wu&&(r[wu]=i),s&&(n.on(t,function(){y(),o()},!0),setTimeout(o,0))}}function W(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Su&&(Qo.scrollX||Qo.scrollY)){n=Xo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();Su=!i.f&&!i.e,n.remove()}return Su?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function X(){return Xo.event.changedTouches[0].identifier}function V(){return Xo.event.target}function $(){return Qo}function J(e){return e>0?1:0>e?-1:0}function K(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Q(e){return e>1?0:-1>e?xu:Math.acos(e)}function G(e){return e>1?Nu:-1>e?-Nu:Math.asin(e)}function Y(e){return((e=Math.exp(e))-1/e)/2}function Z(e){return((e=Math.exp(e))+1/e)/2}function et(e){return((e=Math.exp(2*e))-1)/(e+1)}function tt(e){return(e=Math.sin(e/2))*e}function nt(){}function rt(e,t,n){return this instanceof rt?(this.h=+e,this.s=+t,void (this.l=+n)):arguments.length<2?e instanceof rt?new rt(e.h,e.s,e.l):gt(""+e,yt,rt):new rt(e,t,n)}function it(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(o-s)*e/60:180>e?o:240>e?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,s=2*n-o,new pt(i(e+120),i(e),i(e-120))}function st(e,t,n){return this instanceof st?(this.h=+e,this.c=+t,void (this.l=+n)):arguments.length<2?e instanceof st?new st(e.h,e.c,e.l):e instanceof ut?ft(e.l,e.a,e.b):ft((e=bt((e=Xo.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new st(e,t,n)}function ot(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ut(n,Math.cos(e*=Lu)*t,Math.sin(e)*t)}function ut(e,t,n){return this instanceof ut?(this.l=+e,this.a=+t,void (this.b=+n)):arguments.length<2?e instanceof ut?new ut(e.l,e.a,e.b):e instanceof st?ot(e.l,e.c,e.h):bt((e=pt(e)).r,e.g,e.b):new ut(e,t,n)}function at(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=lt(i)*Iu,r=lt(r)*qu,s=lt(s)*Ru,new pt(ht(3.2404542*i-1.5371385*r-.4985314*s),ht(-0.969266*i+1.8760108*r+.041556*s),ht(.0556434*i-.2040259*r+1.0572252*s))}function ft(e,t,n){return e>0?new st(Math.atan2(n,t)*Au,Math.sqrt(t*t+n*n),e):new st(0/0,0/0,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ct(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ht(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function pt(e,t,n){return this instanceof pt?(this.r=~~e,this.g=~~t,void (this.b=~~n)):arguments.length<2?e instanceof pt?new pt(e.r,e.g,e.b):gt(""+e,pt,it):new pt(e,t,n)}function dt(e){return new pt(e>>16,255&e>>8,255&e)}function vt(e){return dt(e)+""}function mt(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function gt(e,t,n){var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Et(i[0]),Et(i[1]),Et(i[2]))}return(s=Wu.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.substring(1),16))||(4===e.length?(o=(3840&s)>>4,o=o>>4|o,u=240&s,u=u>>4|u,a=15&s,a=a<<4|a):7===e.length&&(o=(16711680&s)>>16,u=(65280&s)>>8,a=255&s)),t(o,u,a))}function yt(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=.5>a?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(n>t?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=0/0,i=a>0&&1>a?0:r),new rt(r,i,a)}function bt(e,t,n){e=wt(e),t=wt(t),n=wt(n);var r=ct((.4124564*e+.3575761*t+.1804375*n)/Iu),i=ct((.2126729*e+.7151522*t+.072175*n)/qu),s=ct((.0193339*e+.119192*t+.9503041*n)/Ru);return ut(116*i-16,500*(r-i),200*(i-s))}function wt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Et(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function St(e){return"function"==typeof e?e:function(){return e}}function xt(e){return e}function Tt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Nt(t,n,e,r)}}function Nt(e,t,n,r){function i(){var e,t=a.status;if(!t&&a.responseText||t>=200&&300>t||304===t){try{e=n.call(s,a)}catch(r){return o.error.call(s,r),void 0}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=Xo.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!Qo.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=Xo.event;Xo.event=e;try{o.progress.call(s,a)}finally{Xo.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat($o(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},Xo.rebind(s,o,"on"),null==r?s:s.get(Ct(r))}function Ct(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function kt(){var e=Lt(),t=At()-e;t>24?(isFinite(t)&&(clearTimeout(Ju),Ju=setTimeout(kt,t)),$u=0):($u=1,Qu(kt))}function Lt(){var e=Date.now();for(Ku=Xu;Ku;)e>=Ku.t&&(Ku.f=Ku.c(e-Ku.t)),Ku=Ku.n;return e}function At(){for(var e,t=Xu,n=1/0;t;)t.f?t=e?e.n=t.n:Xu=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Vu=e,n}function Ot(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Mt(e,t){var n=Math.pow(10,3*su(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function _t(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,s=r?function(e){for(var t=e.length,i=[],s=0,o=r[0];t>0&&o>0;)i.push(e.substring(t-=o,t+o)),o=r[s=(s+1)%r.length];return i.reverse().join(n)}:xt;return function(e){var n=Yu.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"",a=n[4]||"",f=n[5],l=+n[6],c=n[7],h=n[8],p=n[9],d=1,v="",m="",g=!1;switch(h&&(h=+h.substring(1)),(f||"0"===r&&"="===o)&&(f=r="0",o="=",c&&(l-=Math.floor((l-1)/4))),p){case"n":c=!0,p="g";break;case"%":d=100,m="%",p="f";break;case"p":d=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":case"d":g=!0,h=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=Zu.get(p)||Dt;var y=f&&c;return function(e){var n=m;if(g&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):u;if(0>d){var a=Xo.formatPrefix(e,h);e=a.scale(e),n=a.symbol+m}else e*=d;e=p(e,h);var b=e.lastIndexOf("."),w=0>b?e:e.substring(0,b),E=0>b?"":t+e.substring(b+1);!f&&c&&(w=s(w));var S=v.length+w.length+E.length+(y?0:i.length),x=l>S?(new Array(S=l-S+1)).join(r):"";return y&&(w=s(x+w)),i+=v,e=w+E,("<"===o?i+e+x:">"===o?x+i+e:"^"===o?x.substring(0,S>>=1)+i+e+x.substring(S):i+(y?e:x+e))+n}}}function Dt(e){return e+""}function Pt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(e,t,n){function r(t){var n=e(t),r=s(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new ta(n-1)),1),n}function s(e,n){return t(e=new ta(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;r>o;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;r>o;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{ta=Pt;var r=new Pt;return r._=e,o(r,t,n)}finally{ta=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=Bt(e);return a.floor=a,a.round=Bt(r),a.ceil=Bt(i),a.offset=Bt(s),a.range=u,e}function Bt(e){return function(t,n){try{ta=Pt;var r=new Pt;return r._=t,e(r,n)._}finally{ta=Date}}}function jt(e){function t(e){function t(t){for(var n,i,s,o=[],u=-1,a=0;++u<r;)37===e.charCodeAt(u)&&(o.push(e.substring(a,u)),null!=(i=ra[n=e.charAt(++u)])&&(n=e.charAt(++u)),(s=L[n])&&(n=s(t,null==i?"e"===n?" ":"0":i)),o.push(n),a=u+1);return o.push(e.substring(a,u)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var s=null!=r.Z&&ta!==Pt,o=new(s?Pt:ta);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),s?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;a>u;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=A[o in ra?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){S.lastIndex=0;var r=S.exec(t.substring(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){w.lastIndex=0;var r=w.exec(t.substring(n));return r?(e.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,n){C.lastIndex=0;var r=C.exec(t.substring(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.substring(n));return r?(e.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,r){return n(e,L.c.toString(),t,r)}function a(e,t,r){return n(e,L.x.toString(),t,r)}function f(e,t,r){return n(e,L.X.toString(),t,r)}function l(e,t,n){var r=b.get(t.substring(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var c=e.dateTime,h=e.date,p=e.time,d=e.periods,v=e.days,m=e.shortDays,g=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{ta=Pt;var t=new ta;return t._=e,r(t)}finally{ta=Date}}var r=t(e);return n.parse=function(e){try{ta=Pt;var t=r.parse(e);return t&&t._}finally{ta=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=rn;var b=Xo.map(),w=It(v),E=qt(v),S=It(m),x=qt(m),T=It(g),N=qt(g),C=It(y),k=qt(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var L={a:function(e){return m[e.getDay()]},A:function(e){return v[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(c),d:function(e,t){return Ft(e.getDate(),t,2)},e:function(e,t){return Ft(e.getDate(),t,2)},H:function(e,t){return Ft(e.getHours(),t,2)},I:function(e,t){return Ft(e.getHours()%12||12,t,2)},j:function(e,t){return Ft(1+ea.dayOfYear(e),t,3)},L:function(e,t){return Ft(e.getMilliseconds(),t,3)},m:function(e,t){return Ft(e.getMonth()+1,t,2)},M:function(e,t){return Ft(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return Ft(e.getSeconds(),t,2)},U:function(e,t){return Ft(ea.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ft(ea.mondayOfYear(e),t,2)},x:t(h),X:t(p),y:function(e,t){return Ft(e.getFullYear()%100,t,2)},Y:function(e,t){return Ft(e.getFullYear()%1e4,t,4)},Z:tn,"%":function(){return"%"}},A={a:r,A:i,b:s,B:o,c:u,d:Kt,e:Kt,H:Gt,I:Gt,j:Qt,L:en,m:Jt,M:Yt,p:l,S:Zt,U:Ut,w:Rt,W:zt,x:a,X:f,y:Xt,Y:Wt,Z:Vt,"%":nn};return t}function Ft(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",s=i.length;return r+(n>s?(new Array(n-s+1)).join(t)+i:i)}function It(e){return new RegExp("^(?:"+e.map(Xo.requote).join("|")+")","i")}function qt(e){for(var t=new o,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Rt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ut(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n));return r?(e.U=+r[0],n+r[0].length):-1}function zt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n));return r?(e.W=+r[0],n+r[0].length):-1}function Wt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.y=$t(+r[0]),n+r[0].length):-1}function Vt(e,t,n){return/^[+-]\d{4}$/.test(t=t.substring(n,n+5))?(e.Z=-t,n+5):-1}function $t(e){return e+(e>68?1900:2e3)}function Jt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Kt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Qt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function Gt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Yt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Zt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function en(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function tn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(su(t)/60),i=su(t)%60;return n+Ft(r,"0",2)+Ft(i,"0",2)}function nn(e,t,n){sa.lastIndex=0;var r=sa.exec(t.substring(n,n+1));return r?n+r[0].length:-1}function rn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function sn(){}function on(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function un(e,t){e&&fa.hasOwnProperty(e.type)&&fa[e.type](e,t)}function an(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function fn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)an(e[n],t,1);t.polygonEnd()}function ln(){function e(e,t){e*=Lu,t=t*Lu/2+xu/4;var n=e-r,o=n>=0?1:-1,u=o*n,a=Math.cos(t),f=Math.sin(t),l=s*f,c=i*a+l*Math.cos(u),h=l*o*Math.sin(u);ca.add(Math.atan2(h,c)),r=e,i=a,s=f}var t,n,r,i,s;ha.point=function(o,u){ha.point=e,r=(t=o)*Lu,i=Math.cos(u=(n=u)*Lu/2+xu/4),s=Math.sin(u)},ha.lineEnd=function(){e(t,n)}}function cn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function hn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function dn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function vn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function mn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function gn(e){return[Math.atan2(e[1],e[0]),G(e[2])]}function yn(e,t){return su(e[0]-t[0])<Cu&&su(e[1]-t[1])<Cu}function bn(e,t){e*=Lu;var n=Math.cos(t*=Lu);wn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function wn(e,t,n){++pa,va+=(e-va)/pa,ma+=(t-ma)/pa,ga+=(n-ga)/pa}function En(){function e(e,i){e*=Lu;var s=Math.cos(i*=Lu),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);da+=f,ya+=f*(t+(t=o)),ba+=f*(n+(n=u)),wa+=f*(r+(r=a)),wn(t,n,r)}var t,n,r;Ta.point=function(i,s){i*=Lu;var o=Math.cos(s*=Lu);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),Ta.point=e,wn(t,n,r)}}function Sn(){Ta.point=bn}function xn(){function e(e,t){e*=Lu;var n=Math.cos(t*=Lu),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-Q(p)/h,v=Math.atan2(h,p);Ea+=d*f,Sa+=d*l,xa+=d*c,da+=v,ya+=v*(r+(r=o)),ba+=v*(i+(i=u)),wa+=v*(s+(s=a)),wn(r,i,s)}var t,n,r,i,s;Ta.point=function(o,u){t=o,n=u,Ta.point=e,o*=Lu;var a=Math.cos(u*=Lu);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),wn(r,i,s)},Ta.lineEnd=function(){e(t,n),Ta.lineEnd=Sn,Ta.point=bn}}function Tn(){return!0}function Nn(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(yn(n,r)){i.lineStart();for(var u=0;t>u;++u)i.point((n=e[u])[0],n[1]);return i.lineEnd(),void 0}var a=new kn(n,e,null,!0),f=new kn(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new kn(r,e,null,!1),f=new kn(r,null,a,!0),a.o=f,s.push(a),o.push(f)}}),o.sort(t),Cn(s),Cn(o),s.length){for(var u=0,a=n,f=o.length;f>u;++u)o[u].e=a=!a;for(var l,c,h=s[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,f=l.length;f>u;++u)i.point((c=l[u])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Cn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function kn(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ln(e,t,n,r){return function(i,s){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function u(e,t){var n=i(e,t);m.point(n[0],n[1])}function a(){y.point=u,m.lineStart()}function f(){y.point=o,m.lineEnd()}function l(e,t){v.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function c(){w.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),d.push(v),v=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(E||(s.polygonStart(),E=!0),s.lineStart();++o<r;)s.point((i=e[o])[0],i[1]);s.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(An))}var p,d,v,m=t(s),g=i.invert(r[0],r[1]),y={point:o,lineStart:a,lineEnd:f,polygonStart:function(){y.point=l,y.lineStart=c,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=a,y.lineEnd=f,p=Xo.merge(p);var e=_n(g,d);p.length?(E||(s.polygonStart(),E=!0),Nn(p,Mn,e,n,s)):e&&(E||(s.polygonStart(),E=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),E&&(s.polygonEnd(),E=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=On(),w=t(b),E=!1;return y}}function An(e){return e.length>1}function On(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:v,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Mn(e,t){return((e=e.x)[0]<0?e[1]-Nu-Cu:Nu-e[1])-((t=t.x)[0]<0?t[1]-Nu-Cu:Nu-t[1])}function _n(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;ca.reset();for(var u=0,a=t.length;a>u;++u){var f=t[u],l=f.length;if(l)for(var c=f[0],h=c[0],p=c[1]/2+xu/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+xu/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>xu,N=d*b;if(ca.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*Tu:E,T^h>=n^g>=n){var C=pn(cn(c),cn(e));mn(C);var k=pn(i,C);mn(k);var L=(T^E>=0?-1:1)*G(k[2]);(r>L||r===L&&(C[0]||C[1]))&&(o+=T^E>=0?1:-1)}if(!(m++))break;h=g,d=b,v=w,c=e}}return(-Cu>s||Cu>s&&0>ca)^1&o}function Dn(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?xu:-xu,a=su(s-n);su(a-xu)<Cu?(e.point(n,r=(r+o)/2>0?Nu:-Nu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=xu&&(su(n-i)<Cu&&(n-=i*Cu),su(s-u)<Cu&&(s-=u*Cu),r=Pn(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Pn(e,t,n,r){var i,s,o=Math.sin(e-n);return su(o)>Cu?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function Hn(e,t,n,r){var i;if(null==e)i=n*Nu,r.point(-xu,i),r.point(0,i),r.point(xu,i),r.point(xu,0),r.point(xu,-i),r.point(0,-i),r.point(-xu,-i),r.point(-xu,0),r.point(-xu,i);else if(su(e[0]-t[0])>Cu){var s=e[0]<t[0]?xu:-xu;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Bn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>s}function n(e){var n,s,a,f,l;return{lineStart:function(){f=a=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=o?v?0:i(c,h):v?i(c+(0>c?xu:-xu),h):0;if(!n&&(f=a=v)&&e.lineStart(),v!==a&&(p=r(n,d),(yn(n,p)||yn(d,p))&&(d[0]+=Cu,d[1]+=Cu,v=t(d[0],d[1]))),v!==a)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(u&&n&&o^v){var g;m&s||!(g=r(d,n,!0))||(l=0,o?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&yn(n,d)||e.point(d[0],d[1]),n=d,a=v,s=m},lineEnd:function(){a&&e.lineEnd(),n=null},clean:function(){return l|(f&&a)<<1}}}function r(e,t,n){var r=cn(e),i=cn(t),o=[1,0,0],u=pn(r,i),a=hn(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=s*a/l,h=-s*f/l,p=pn(o,u),d=vn(o,c),v=vn(u,h);dn(d,v);var m=p,g=hn(d,m),y=hn(m,m),b=g*g-y*(hn(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),E=vn(m,(-g-w)/y);if(dn(E,d),E=gn(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];x>T&&(S=x,x=T,T=S);var k=T-x,L=su(k-xu)<Cu,A=L||Cu>k;if(!L&&N>C&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(su(E[0]-x)<Cu?N:C):N<=E[1]&&E[1]<=C:k>xu^(x<=E[0]&&E[0]<=T)){var O=vn(m,(-g+w)/y);return dn(O,d),[E,gn(O)]}}}function i(t,n){var r=o?e:xu-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var s=Math.cos(e),o=s>0,u=su(s)>Cu,a=lr(e,6*Lu);return Ln(t,n,a,o?[0,-e]:[-xu,e-xu])}function jn(e,t,n,r){return function(i){var s,o=i.a,u=i.b,a=o.x,f=o.y,l=u.x,c=u.y,h=0,p=1,d=l-a,v=c-f;if(s=e-a,d||!(s>0)){if(s/=d,0>d){if(h>s)return;p>s&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=n-a,d||!(0>s)){if(s/=d,0>d){if(s>p)return;s>h&&(h=s)}else if(d>0){if(h>s)return;p>s&&(p=s)}if(s=t-f,v||!(s>0)){if(s/=v,0>v){if(h>s)return;p>s&&(p=s)}else if(v>0){if(s>p)return;s>h&&(h=s)}if(s=r-f,v||!(0>s)){if(s/=v,0>v){if(s>p)return;s>h&&(h=s)}else if(v>0){if(h>s)return;p>s&&(p=s)}return h>0&&(i.a={x:a+h*d,y:f+h*v}),1>p&&(i.b={x:a+p*d,y:f+p*v}),i}}}}}}function Fn(e,t,n,r){function i(r,i){return su(r[0]-e)<Cu?i>0?0:3:su(r[0]-n)<Cu?i>0?2:1:su(r[1]-t)<Cu?i>0?1:0:i>0?3:2}function s(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function a(e){for(var t=0,n=m.length,r=e[1],i=0;n>i;++i)for(var s,o=1,u=m[i],a=u.length,f=u[0];a>o;++o)s=u[o],f[1]<=r?s[1]>r&&K(f,s,e)>0&&++t:s[1]<=r&&K(f,s,e)<0&&--t,f=s;return 0!==t}function f(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function l(i,s){return i>=e&&n>=i&&s>=t&&r>=s}function c(e,t){l(e,t)&&u.point(e,t)}function h(){A.point=d,m&&m.push(g=[]),T=!0,x=!1,E=S=0/0}function p(){v&&(d(y,b),w&&x&&k.rejoin(),v.push(k.buffer())),A.point=c,x&&u.lineEnd()}function d(e,t){e=Math.max(-Ca,Math.min(Ca,e)),t=Math.max(-Ca,Math.min(Ca,t));var n=l(e,t);if(m&&g.push([e,t]),T)y=e,b=t,w=n,T=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&x)u.point(e,t);else{var r={a:{x:E,y:S},b:{x:e,y:t}};L(r)?(x||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),N=!1):n&&(u.lineStart(),u.point(e,t),N=!1)}E=e,S=t,x=n}var v,m,g,y,b,w,E,S,x,T,N,C=u,k=On(),L=jn(e,t,n,r),A={point:c,lineStart:h,lineEnd:p,polygonStart:function(){u=k,v=[],m=[],N=!0},polygonEnd:function(){u=C,v=Xo.merge(v);var t=a([e,r]),n=N&&t,i=v.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),f(null,null,1,u),u.lineEnd()),i&&Nn(v,s,t,f,u),u.polygonEnd()),v=m=g=null}};return A}}function In(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function qn(e){var t=0,n=xu/3,r=nr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*xu/180,n=e[1]*xu/180):[180*(t/xu),180*(n/xu)]},i}function Rn(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,G((s-(e*e+n*n)*i*i)/(2*i))]},n}function Un(){function e(e,t){La+=i*e-r*t,r=e,i=t}var t,n,r,i;Da.point=function(s,o){Da.point=e,t=r=s,n=i=o},Da.lineEnd=function(){e(t,n)}}function zn(e,t){Aa>e&&(Aa=e),e>Ma&&(Ma=e),Oa>t&&(Oa=t),t>_a&&(_a=t)}function Wn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=Xn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=Xn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function Xn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Vn(e,t){va+=e,ma+=t,++ga}function $n(){function e(e,r){var i=e-t,s=r-n,o=Math.sqrt(i*i+s*s);ya+=o*(t+e)/2,ba+=o*(n+r)/2,wa+=o,Vn(t=e,n=r)}var t,n;Ha.point=function(r,i){Ha.point=e,Vn(t=r,n=i)}}function Jn(){Ha.point=Vn}function Kn(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);ya+=o*(r+e)/2,ba+=o*(i+t)/2,wa+=o,o=i*e-r*t,Ea+=o*(r+e),Sa+=o*(i+t),xa+=3*o,Vn(r=e,i=t)}var t,n,r,i;Ha.point=function(s,o){Ha.point=e,Vn(t=r=s,n=i=o)},Ha.lineEnd=function(){e(t,n)}}function Qn(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,o,0,Tu)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:v};return u}function Gn(e){function t(e){return(u?r:n)(e)}function n(t){return er(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=0/0,T.point=s,t.lineStart()}function s(n,r){var s=cn([n,r]),o=e(n,r);i(b,w,y,E,S,x,b=o[0],w=o[1],y=n,E=s[0],S=s[1],x=s[2],u,t),t.point(b,w)}function o(){T.point=n,t.lineEnd()}function a(){r(),T.point=f,T.lineEnd=l}function f(e,t){s(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=s}function l(){i(b,w,y,E,S,x,p,d,c,v,m,g,u,t),T.lineEnd=o,o()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-n,w=y*y+b*b;if(w>4*s&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=su(su(x)-1)<Cu||su(r-h)<Cu?(r+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-n,_=b*O-y*M;(_*_/w>s||su((y*O+b*M)/w-.5)>.3||o>u*p+a*d+f*v)&&(i(t,n,r,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),i(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var s=.5,o=Math.cos(30*Lu),u=16;return t.precision=function(e){return arguments.length?(u=(s=e*e)>0&&16,t):Math.sqrt(s)},t}function Yn(e){var t=Gn(function(t,n){return e([t*Au,n*Au])});return function(e){return rr(t(e))}}function Zn(e){this.stream=e}function er(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function tr(e){return nr(function(){return e})()}function nr(e){function t(e){return e=u(e[0]*Lu,e[1]*Lu),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*Au,e[1]*Au]}function r(){u=In(o=or(g,y,b),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=Gn(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,y=0,b=0,w=Na,E=xt,S=null,x=null;return t.stream=function(e){return l&&(l.valid=!1),l=rr(w(o,c(E(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(w=null==e?(S=e,Na):Bn((S=+e)*Lu),i()):S},t.clipExtent=function(e){return arguments.length?(x=e,E=e?Fn(e[0][0],e[0][1],e[1][0],e[1][1]):xt,i()):x},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*Lu,m=e[1]%360*Lu,r()):[v*Au,m*Au]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Lu,y=e[1]%360*Lu,b=e.length>2?e[2]%360*Lu:0,r()):[g*Au,y*Au,b*Au]},Xo.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function rr(e){return er(e,function(t,n){e.point(t*Lu,n*Lu)})}function ir(e,t){return[e,t]}function sr(e,t){return[e>xu?e-Tu:-xu>e?e+Tu:e,t]}function or(e,t,n){return e?t||n?In(ar(e),fr(t,n)):ar(e):t||n?fr(t,n):sr}function ur(e){return function(t,n){return t+=e,[t>xu?t-Tu:-xu>t?t+Tu:t,n]}}function ar(e){var t=ur(e);return t.invert=ur(-e),t}function fr(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),G(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),G(l*r-u*i)]},n}function lr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=cr(n,i),s=cr(n,s),(o>0?s>i:i>s)&&(i+=o*Tu)):(i=e+o*Tu,s=e-.5*a);for(var f,l=i;o>0?l>s:s>l;l-=a)u.point((f=gn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function cr(e,t){var n=cn(t);n[0]-=e,mn(n);var r=Q(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Cu)%(2*Math.PI)}function hr(e,t,n){var r=Xo.range(e,t-Cu,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function pr(e,t,n){var r=Xo.range(e,t-Cu,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function dr(e){return e.source}function vr(e){return e.target}function mr(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(tt(r-t)+i*o*tt(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Au,Math.atan2(o,Math.sqrt(r*r+i*i))*Au]}:function(){return[e*Au,t*Au]};return d.distance=h,d}function gr(){function e(e,i){var s=Math.sin(i*=Lu),o=Math.cos(i),u=su((e*=Lu)-t),a=Math.cos(u);Ba+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;ja.point=function(i,s){t=i*Lu,n=Math.sin(s*=Lu),r=Math.cos(s),ja.point=e},ja.lineEnd=function(){ja.point=ja.lineEnd=v}}function yr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function br(e,t){function n(e,t){o>0?-Nu+Cu>t&&(t=-Nu+Cu):t>Nu-Cu&&(t=Nu-Cu);var n=o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(xu/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=J(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-Nu]},n):Er}function wr(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return su(i)<Cu?ir:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-J(i)*Math.sqrt(e*e+n*n)]},n)}function Er(e,t){return[e,Math.log(Math.tan(xu/4+t/2))]}function Sr(e){var t,n=tr(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=xu*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function xr(e,t){return[Math.log(Math.tan(xu/4+t/2)),-e]}function Tr(e){return e[0]}function Nr(e){return e[1]}function Cr(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&K(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function kr(e,t){return e[0]-t[0]||e[1]-t[1]}function Lr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ar(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Or(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Mr(){Yr(this),this.edge=this.site=this.circle=null}function _r(e){var t=Ka.pop()||new Mr;return t.site=e,t}function Dr(e){zr(e),Va.remove(e),Ka.push(e),Yr(e)}function Pr(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];Dr(e);for(var a=s;a.circle&&su(n-a.circle.x)<Cu&&su(r-a.circle.cy)<Cu;)s=a.P,u.unshift(a),Dr(a),a=s;u.unshift(a),zr(a);for(var f=o;f.circle&&su(n-f.circle.x)<Cu&&su(r-f.circle.cy)<Cu;)o=f.N,u.push(f),Dr(f),f=o;u.push(f),zr(f);var l,c=u.length;for(l=1;c>l;++l)f=u[l],a=u[l-1],Kr(f.edge,a.site,f.site,i);a=u[0],f=u[c-1],f.edge=$r(a.site,f.site,null,i),Ur(a),Ur(f)}function Hr(e){for(var t,n,r,i,s=e.x,o=e.y,u=Va._;u;)if(r=Br(u,o)-s,r>Cu)u=u.L;else{if(i=s-jr(u,o),!(i>Cu)){r>-Cu?(t=u.P,n=u):i>-Cu?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var a=_r(e);if(Va.insert(t,a),t||n){if(t===n)return zr(t),n=_r(t.site),Va.insert(a,n),a.edge=n.edge=$r(t.site,a.site),Ur(t),Ur(n),void 0;if(!n)return a.edge=$r(t.site,a.site),void 0;zr(t),zr(n);var f=t.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=n.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};Kr(n.edge,f,d,w),a.edge=$r(f,e,null,w),n.edge=$r(e,d,null,w),Ur(t),Ur(n)}}function Br(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function jr(e,t){var n=e.N;if(n)return Br(n,t);var r=e.site;return r.y===t?r.x:1/0}function Fr(e){this.site=e,this.edges=[]}function Ir(e){for(var t,n,r,i,s,o,u,a,f,l,c=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],v=Xa,m=v.length;m--;)if(s=v[m],s&&s.prepare())for(u=s.edges,a=u.length,o=0;a>o;)l=u[o].end(),r=l.x,i=l.y,f=u[++o%a].start(),t=f.x,n=f.y,(su(r-t)>Cu||su(i-n)>Cu)&&(u.splice(o,0,new Qr(Jr(s.site,l,su(r-c)<Cu&&d-i>Cu?{x:c,y:su(t-c)<Cu?n:d}:su(i-d)<Cu&&h-r>Cu?{x:su(n-d)<Cu?t:h,y:d}:su(r-h)<Cu&&i-p>Cu?{x:h,y:su(t-h)<Cu?n:p}:su(i-p)<Cu&&r-c>Cu?{x:su(n-p)<Cu?t:c,y:p}:null),s.site,null)),++a)}function qr(e,t){return t.angle-e.angle}function Rr(){Yr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ur(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,s=n.site;if(r!==s){var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(!(h>=-ku)){var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=Qa.pop()||new Rr;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;for(var y=null,b=Ja._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Ja.insert(y,g),y||($a=g)}}}}function zr(e){var t=e.circle;t&&(t.P||($a=t.N),Ja.remove(t),Qa.push(t),Yr(t),e.circle=null)}function Wr(e){for(var t,n=Wa,r=jn(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Xr(t,e)||!r(t)||su(t.a.x-t.b.x)<Cu&&su(t.a.y-t.b.y)<Cu)&&(t.a=t.b=null,n.splice(i,1))}function Xr(e,t){var n=e.b;if(n)return!0;var r,i,s=e.a,o=t[0][0],u=t[1][0],a=t[0][1],f=t[1][1],l=e.l,c=e.r,h=l.x,p=l.y,d=c.x,v=c.y,m=(h+d)/2,g=(p+v)/2;if(v===p){if(o>m||m>=u)return;if(h>d){if(s){if(s.y>=f)return}else s={x:m,y:a};n={x:m,y:f}}else{if(s){if(s.y<a)return}else s={x:m,y:f};n={x:m,y:a}}}else if(r=(h-d)/(v-p),i=g-r*m,-1>r||r>1)if(h>d){if(s){if(s.y>=f)return}else s={x:(a-i)/r,y:a};n={x:(f-i)/r,y:f}}else{if(s){if(s.y<a)return}else s={x:(f-i)/r,y:f};n={x:(a-i)/r,y:a}}else if(v>p){if(s){if(s.x>=u)return}else s={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(s){if(s.x<o)return}else s={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=s,e.b=n,!0}function Vr(e,t){this.l=e,this.r=t,this.a=this.b=null}function $r(e,t,n,r){var i=new Vr(e,t);return Wa.push(i),n&&Kr(i,e,t,n),r&&Kr(i,t,e,r),Xa[e.i].edges.push(new Qr(i,e,t)),Xa[t.i].edges.push(new Qr(i,t,e)),i}function Jr(e,t,n){var r=new Vr(e,null);return r.a=t,r.b=n,Wa.push(r),r}function Kr(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Qr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Gr(){this._=null}function Yr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Zr(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ei(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ti(e){for(;e.L;)e=e.L;return e}function ni(e,t){var n,r,i,s=e.sort(ri).pop();for(Wa=[],Xa=new Array(e.length),Va=new Gr,Ja=new Gr;;)if(i=$a,s&&(!i||s.y<i.y||s.y===i.y&&s.x<i.x))(s.x!==n||s.y!==r)&&(Xa[s.i]=new Fr(s),Hr(s),n=s.x,r=s.y),s=e.pop();else{if(!i)break;Pr(i.arc)}t&&(Wr(t),Ir(t));var o={cells:Xa,edges:Wa};return Va=Ja=Wa=Xa=null,o}function ri(e,t){return t.y-e.y||t.x-e.x}function ii(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function si(e){return e.x}function oi(e){return e.y}function ui(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ai(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&ai(e,a[0],n,r,o,u),a[1]&&ai(e,a[1],o,r,i,u),a[2]&&ai(e,a[2],n,u,o,s),a[3]&&ai(e,a[3],o,u,i,s)}}function fi(e,t){e=Xo.rgb(e),t=Xo.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+mt(Math.round(n+s*e))+mt(Math.round(r+o*e))+mt(Math.round(i+u*e))}}function li(e,t){var n,r={},i={};for(n in e)n in t?r[n]=pi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function ci(e,t){return t-=e=+e,function(n){return e+t*n}}function hi(e,t){var n,r,i,s=Ya.lastIndex=Za.lastIndex=0,o=-1,u=[],a=[];for(e+="",t+="";(n=Ya.exec(e))&&(r=Za.exec(t));)(i=r.index)>s&&(i=t.substring(s,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,a.push({i:o,x:ci(n,r)})),s=Za.lastIndex;return s<t.length&&(i=t.substring(s),u[o]?u[o]+=i:u[++o]=i),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n,r=0;t>r;++r)u[(n=a[r]).i]=n.x(e);return u.join("")})}function pi(e,t){for(var n,r=Xo.interpolators.length;--r>=0&&!(n=Xo.interpolators[r](e,t)););return n}function di(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(pi(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function vi(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function mi(e){return function(t){return 1-e(1-t)}}function gi(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function yi(e){return e*e}function bi(e){return e*e*e}function wi(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ei(e){return function(t){return Math.pow(t,e)}}function Si(e){return 1-Math.cos(e*Nu)}function xi(e){return Math.pow(2,10*(e-1))}function Ti(e){return 1-Math.sqrt(1-e*e)}function Ni(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Tu*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Tu/t)}}function Ci(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function ki(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Li(e,t){e=Xo.hcl(e),t=Xo.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return ot(n+s*e,r+o*e,i+u*e)+""}}function Ai(e,t){e=Xo.hsl(e),t=Xo.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return it(n+s*e,r+o*e,i+u*e)+""}}function Oi(e,t){e=Xo.lab(e),t=Xo.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return at(n+s*e,r+o*e,i+u*e)+""}}function Mi(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function _i(e){var t=[e.a,e.b],n=[e.c,e.d],r=Pi(t),i=Di(t,n),s=Pi(Hi(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Au,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Au:0}function Di(e,t){return e[0]*t[0]+e[1]*t[1]}function Pi(e){var t=Math.sqrt(Di(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Hi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Bi(e,t){var n,r=[],i=[],s=Xo.transform(e),o=Xo.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:ci(u[0],a[0])},{i:3,x:ci(u[1],a[1])})):a[0]||a[1]?r.push("translate("+a+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:ci(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:ci(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:ci(p[0],d[0])},{i:n-2,x:ci(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function ji(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function Fi(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function Ii(e){for(var t=e.source,n=e.target,r=Ri(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function qi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ri(e,t){if(e===t)return e;for(var n=qi(e),r=qi(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function Ui(e){e.fixed|=2}function zi(e){e.fixed&=-7}function Wi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Xi(e){e.fixed&=-5}function Vi(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(Vi(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function $i(e,t){return Xo.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Zi,e}function Ji(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ki(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(s=e.children)&&(i=s.length))for(var i,s,o=-1;++o<i;)n.push(s[o]);for(;null!=(e=r.pop());)t(e)}function Qi(e){return e.children}function Gi(e){return e.value}function Yi(e,t){return t.value-e.value}function Zi(e){return Xo.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function es(e){return e.x}function ts(e){return e.y}function ns(e,t,n){e.y0=t,e.y=n}function rs(e){return Xo.range(e.length)}function is(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ss(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;s>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function os(e){return e.reduce(us,0)}function us(e,t){return e+t[1]}function as(e,t){return fs(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function fs(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function ls(e){return[Xo.min(e),Xo.max(e)]}function cs(e,t){return e.value-t.value}function hs(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ps(e,t){e._pack_next=t,t._pack_prev=e}function ds(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function vs(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(ms),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],bs(r,i,s),t(s),hs(r,s),r._pack_prev=s,hs(s,i),i=r._pack_next,o=3;f>o;o++){bs(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(ds(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!ds(a,s);a=a._pack_prev,m++);d?(m>v||v==m&&i.r<r.r?ps(r,i=u):ps(r=a,i),o--):(hs(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;f>o;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(gs)}}function ms(e){e._pack_next=e._pack_prev=e}function gs(e){delete e._pack_next,delete e._pack_prev}function ys(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)ys(i[s],t,n,r)}function bs(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function ws(e,t){return e.parent==t.parent?1:2}function Es(e){var t=e.children;return t.length?t[0]:e.t}function Ss(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function xs(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ts(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ns(e,t,n){return e.a.parent===t.parent?e.a:n}function Cs(e){return 1+Xo.max(e,function(e){return e.y})}function ks(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ls(e){var t=e.children;return t&&t.length?Ls(t[0]):e}function As(e){var t,n=e.children;return n&&(t=n.length)?As(n[t-1]):e}function Os(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ms(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>s&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function _s(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Ds(e){return e.rangeExtent?e.rangeExtent():_s(e.range())}function Ps(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Hs(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function Bs(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:cf}function js(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=Xo.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function Fs(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?js:Ps,a=r?Fi:ji;return o=i(e,t,a,n),u=i(t,e,a,pi),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Mi)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return Us(e,t)},s.tickFormat=function(t,n){return zs(e,t,n)},s.nice=function(t){return qs(e,t),i()},s.copy=function(){return Fs(e,t,n,r)},i()}function Is(e,t){return Xo.rebind(e,t,"range","rangeRound","interpolate","clamp")}function qs(e,t){return Hs(e,Bs(Rs(e,t)[2]))}function Rs(e,t){null==t&&(t=10);var n=_s(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Us(e,t){return Xo.range.apply(Xo,Rs(e,t))}function zs(e,t,n){var r=Rs(e,t);if(n){var i=Yu.exec(n);if(i.shift(),"s"===i[8]){var s=Xo.formatPrefix(Math.max(su(r[0]),su(r[1])));return i[7]||(i[7]="."+Ws(s.scale(r[2]))),i[8]="f",n=Xo.format(i.join("")),function(e){return n(s.scale(e))+s.symbol}}i[7]||(i[7]="."+Xs(i[8],r)),n=i.join("")}else n=",."+Ws(r[2])+"f";return Xo.format(n)}function Ws(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Xs(e,t){var n=Ws(t[2]);return e in hf?Math.abs(n-Ws(Math.max(su(t[0]),su(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Vs(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Hs(r.map(i),n?Math:df);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=_s(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;l>f;f++)for(var h=1;c>h;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,t){if(!arguments.length)return pf;arguments.length<2?t=pf:"function"!=typeof t&&(t=Xo.format(t));var r,u=Math.max(.1,e/o.ticks().length),a=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/s(a(i(e)+r))<=u?t(e):""}},o.copy=function(){return Vs(e.copy(),t,n,r)},Is(o,e)}function $s(e,t,n){function r(t){return e(i(t))}var i=Js(t),s=Js(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Us(n,e)},r.tickFormat=function(e,t){return zs(n,e,t)},r.nice=function(e){return r.domain(qs(n,e))},r.exponent=function(o){return arguments.length?(i=Js(t=o),s=Js(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return $s(e.copy(),t,n)},Is(r,e)}function Js(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function Ks(e,t){function n(n){return s[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):0/0))-1)%s.length]}function r(t,n){return Xo.range(e.length).map(function(e){return t+n*e})}var i,s,u;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new o;for(var s,u=-1,a=r.length;++u<a;)i.has(s=r[u])||i.set(s,e.push(s));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(s=e,u=0,t={t:"range",a:arguments},n):s},n.rangePoints=function(i,o){arguments.length<2&&(o=0);var a=i[0],f=i[1],l=(f-a)/(Math.max(1,e.length-1)+o);return s=r(e.length<2?(a+f)/2:a+l*o/2,l),u=0,t={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,o,a){arguments.length<2&&(o=0),arguments.length<3&&(a=o);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-o+2*a);return s=r(l+h*a,h),f&&s.reverse(),u=h*(1-o),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,o,a){arguments.length<2&&(o=0),arguments.length<3&&(a=o);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-o+2*a)),p=c-l-(e.length-o)*h;return s=r(l+Math.round(p/2),h),f&&s.reverse(),u=Math.round(h*(1-o)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return u},n.rangeExtent=function(){return _s(t.a[0])},n.copy=function(){return Ks(e,t)},n.domain(e)}function Qs(n,r){function i(){var e=0,t=r.length;for(o=[];++e<t;)o[e-1]=Xo.quantile(n,e/t);return s}function s(e){return isNaN(e=+e)?void 0:r[Xo.bisect(o,e)]}var o;return s.domain=function(r){return arguments.length?(n=r.filter(t).sort(e),i()):n},s.range=function(e){return arguments.length?(r=e,i()):r},s.quantiles=function(){return o},s.invertExtent=function(e){return e=r.indexOf(e),0>e?[0/0,0/0]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},s.copy=function(){return Qs(n,r)},i()}function Gs(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/s+e,[t,t+1/s]},r.copy=function(){return Gs(e,t,n)},i()}function Ys(e,t){function n(n){return n>=n?t[Xo.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Ys(e,t)},n}function Zs(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Us(e,t)},t.tickFormat=function(t,n){return zs(e,t,n)},t.copy=function(){return Zs(e)},t}function eo(e){return e.innerRadius}function to(e){return e.outerRadius}function no(e){return e.startAngle}function ro(e){return e.endAngle}function io(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=St(n),d=St(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Tr,r=Nr,i=Tn,s=so,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=Ef.get(e)||so).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function so(e){return e.join("L")}function oo(e){return so(e)+"Z"}function uo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function ao(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function fo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function lo(e,t){return e.length<4?so(e):e[1]+po(e.slice(1,e.length-1),vo(e,t))}function co(e,t){return e.length<3?so(e):e[0]+po((e.push(e[0]),e),vo([e[e.length-2]].concat(e,[e[1]]),t))}function ho(e,t){return e.length<3?so(e):e[0]+po(e,vo(e,t))}function po(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return so(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function vo(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function mo(e){if(e.length<3)return so(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",wo(Tf,o),",",wo(Tf,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Eo(a,o,u);return e.pop(),a.push("L",r),a.join("")}function go(e){if(e.length<4)return so(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(wo(Tf,s)+","+wo(Tf,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),Eo(n,s,o);return n.join("")}function yo(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[wo(Tf,o),",",wo(Tf,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Eo(t,o,u);return t.join("")}function bo(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return mo(e)}function wo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Eo(e,t,n){e.push("C",wo(Sf,t),",",wo(Sf,n),",",wo(xf,t),",",wo(xf,n),",",wo(Tf,t),",",wo(Tf,n))}function So(e,t){return(t[1]-e[1])/(t[0]-e[0])}function xo(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=So(i,s);++t<n;)r[t]=(o+(o=So(i=s,s=e[t+1])))/2;return r[t]=o,r}function To(e){for(var t,n,r,i,s=[],o=xo(e),u=-1,a=e.length-1;++u<a;)t=So(e[u],e[u+1]),su(t)<Cu?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function No(e){return e.length<3?so(e):e[0]+po(e,To(e))}function Co(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]+bf,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ko(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=St(n),E=St(i),S=n===r?function(){return p}:St(r),x=i===s?function(){return d}:St(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Tr,r=Tr,i=0,s=Nr,o=Tn,u=so,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=Ef.get(e)||so).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function Lo(e){return e.radius}function Ao(e){return[e.x,e.y]}function Oo(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+bf;return[n*Math.cos(r),n*Math.sin(r)]}}function Mo(){return 64}function _o(){return"circle"}function Do(e){var t=Math.sqrt(e/xu);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Po(e,t){return lu(e,Of),e.id=t,e}function Ho(e,t,n,r){var i=e.id;return B(e,"function"==typeof n?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function Bo(e){return null==e&&(e=""),function(){this.textContent=e}}function jo(e,t,n,r){var i=e.__transition__||(e.__transition__={active:0,count:0}),s=i[n];if(!s){var u=r.time;s=i[n]={tween:new o,time:u,ease:r.ease,delay:r.delay,duration:r.duration},++i.count,Xo.timer(function(r){function o(r){return i.active>n?f():(i.active=n,s.event&&s.event.start.call(e,l,t),s.tween.forEach(function(n,r){(r=r.call(e,l,t))&&v.push(r)}),Xo.timer(function(){return d.c=a(r||1)?Tn:a,1},0,u),void 0)}function a(r){if(i.active!==n)return f();for(var o=r/p,u=c(o),a=v.length;a>0;)v[--a].call(e,u);return o>=1?(s.event&&s.event.end.call(e,l,t),f()):void 0}function f(){return--i.count?delete i[n]:delete e.__transition__,1}var l=e.__data__,c=s.ease,h=s.delay,p=s.duration,d=Ku,v=[];return d.t=h+u,r>=h?o(r-h):(d.c=o,void 0)},0,u)}}function Fo(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Io(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function qo(e){return e.toISOString()}function Ro(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=Xo.bisect(If,i);return s==If.length?[t.year,Rs(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/If[s-1]<If[s]/i?s-1:s]:[Uf,Rs(e,n)[2]]}return r.invert=function(t){return Uo(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Uo)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Uo(+n+1),t).length}var s=r.domain(),o=_s(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(Hs(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Uo(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Uo(+t+1);return t}}:e))},r.ticks=function(e,t){var n=_s(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],Uo(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Ro(e.copy(),t,n)},Is(r,e)}function Uo(e){return new Date(e)}function zo(e){return JSON.parse(e.responseText)}function Wo(e){var t=Jo.createRange();return t.selectNode(Jo.body),t.createContextualFragment(e.responseText)}var Xo={version:"3.4.11"};Date.now||(Date.now=function(){return+(new Date)});var Vo=[].slice,$o=function(e){return Vo.call(e)},Jo=document,Ko=Jo.documentElement,Qo=window;try{$o(Ko.childNodes)[0].nodeType}catch(Go){$o=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{Jo.createElement("div").style.setProperty("opacity",0,"")}catch(Yo){var Zo=Qo.Element.prototype,eu=Zo.setAttribute,tu=Zo.setAttributeNS,nu=Qo.CSSStyleDeclaration.prototype,ru=nu.setProperty;Zo.setAttribute=function(e,t){eu.call(this,e,t+"")},Zo.setAttributeNS=function(e,t,n){tu.call(this,e,t,n+"")},nu.setProperty=function(e,t,n){ru.call(this,e,t+"",n)}}Xo.ascending=e,Xo.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},Xo.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},Xo.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},Xo.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o&&!(null!=(n=i=e[s])&&n>=n);)n=i=void 0;for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o&&!(null!=(n=i=t.call(e,e[s],s))&&n>=n);)n=void 0;for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},Xo.sum=function(e,t){var n,r=0,i=e.length,s=-1;if(1===arguments.length)for(;++s<i;)isNaN(n=+e[s])||(r+=n);else for(;++s<i;)isNaN(n=+t.call(e,e[s],s))||(r+=n);return r},Xo.mean=function(e,n){var r,i=0,s=e.length,o=-1,u=s;if(1===arguments.length)for(;++o<s;)t(r=e[o])?i+=r:--u;else for(;++o<s;)t(r=n.call(e,e[o],o))?i+=r:--u;return u?i/u:void 0},Xo.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},Xo.median=function(n,r){return arguments.length>1&&(n=n.map(r)),n=n.filter(t),n.length?Xo.quantile(n.sort(e),.5):void 0};var iu=n(e);Xo.bisectLeft=iu.left,Xo.bisect=Xo.bisectRight=iu.right,Xo.bisector=function(t){return n(1===t.length?function(n,r){return e(t(n),r)}:t)},Xo.shuffle=function(e){for(var t,n,r=e.length;r;)n=0|Math.random()*r--,t=e[r],e[r]=e[n],e[n]=t;return e},Xo.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},Xo.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},Xo.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=Xo.min(arguments,r),n=new Array(t);++e<t;)for(var i,s=-1,o=n[e]=new Array(i);++s<i;)o[s]=arguments[s][e];return n},Xo.transpose=function(e){return Xo.zip.apply(Xo,e)},Xo.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Xo.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Xo.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Xo.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var su=Math.abs;Xo.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/n)throw new Error("infinite range");var r,s=[],o=i(su(n)),u=-1;if(e*=o,t*=o,n*=o,0>n)for(;(r=e+n*++u)>t;)s.push(r/o);else for(;(r=e+n*++u)<t;)s.push(r/o);return s},Xo.map=function(e){var t=new o;if(e instanceof o)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},s(o,{has:u,get:function(e){return this[ou+e]},set:function(e,t){return this[ou+e]=t},remove:a,keys:f,values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},size:l,empty:c,forEach:function(e){for(var t in this)t.charCodeAt(0)===uu&&e.call(this,t.substring(1),this[t])}});var ou="\0",uu=ou.charCodeAt(0);Xo.nest=function(){function e(t,u,a){if(a>=s.length)return r?r.call(i,u):n?u.sort(n):u;for(var f,l,c,h,p=-1,d=u.length,v=s[a++],m=new o;++p<d;)(h=m.get(f=v(l=u[p])))?h.push(l):m.set(f,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,a))}):(l={},c=function(n,r){l[n]=e(t,r,a)}),m.forEach(c),l}function t(e,n){if(n>=s.length)return e;var r=[],i=u[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},s=[],u=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(Xo.map,n,0),0)},i.key=function(e){return s.push(e),i},i.sortKeys=function(e){return u[s.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},Xo.set=function(e){var t=new h;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},s(h,{has:u,add:function(e){return this[ou+e]=!0,e},remove:function(e){return e=ou+e,e in this&&delete this[e]},values:f,size:l,empty:c,forEach:function(e){for(var t in this)t.charCodeAt(0)===uu&&e.call(this,t.substring(1))}}),Xo.behavior={},Xo.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=p(e,t,t[n]);return e};var au=["webkit","ms","moz","Moz","o","O"];Xo.dispatch=function(){for(var e=new m,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=g(e);return e},m.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.substring(n+1),e=e.substring(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},Xo.event=null,Xo.requote=function(e){return e.replace(fu,"\\$&")};var fu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,lu={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},cu=function(e,t){return t.querySelector(e)},hu=function(e,t){return t.querySelectorAll(e)},pu=Ko.matches||Ko[d(Ko,"matchesSelector")],du=function(e,t){return pu.call(e,t)};"function"==typeof Sizzle&&(cu=function(e,t){return Sizzle(e,t)[0]||null},hu=Sizzle,du=Sizzle.matchesSelector),Xo.selection=function(){return yu};var vu=Xo.selection.prototype=[];vu.select=function(e){var t,n,r,i,s=[];e=S(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return E(s)},vu.selectAll=function(e){var t,n,r=[];e=x(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=$o(e.call(n,n.__data__,u,i))),t.parentNode=n);return E(r)};var mu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Xo.ns={prefix:mu,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),mu.hasOwnProperty(n)?{space:mu[n],local:e}:e}},vu.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=Xo.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(T(t,e[t]));return this}return this.each(T(e,t))},vu.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=k(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!C(e[i]).test(t))return!1;return!0}for(t in e)this.each(L(t,e[t]));return this}return this.each(L(e,t))},vu.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(O(n,e[n],t));return this}if(2>r)return Qo.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(O(e,t,n))},vu.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(M(t,e[t]));return this}return this.each(M(e,t))},vu.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},vu.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},vu.append=function(e){return e=_(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},vu.insert=function(e,t){return e=_(e),t=S(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},vu.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},vu.data=function(e,t){function n(e,n){var r,i,s,u=e.length,c=n.length,h=Math.min(u,c),p=new Array(c),d=new Array(c),v=new Array(u);if(t){var m,g=new o,y=new o,b=[];for(r=-1;++r<u;)m=t.call(i=e[r],i.__data__,r),g.has(m)?v[r]=i:g.set(m,i),b.push(m);for(r=-1;++r<c;)m=t.call(n,s=n[r],r),(i=g.get(m))?(p[r]=i,i.__data__=s):y.has(m)||(d[r]=D(s)),y.set(m,s),g.remove(m);for(r=-1;++r<u;)g.has(b[r])&&(v[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],s=n[r],i?(i.__data__=s,p[r]=i):d[r]=D(s);for(;c>r;++r)d[r]=D(n[r]);for(;u>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,a.push(d),f.push(p),l.push(v)}var r,i,s=-1,u=this.length;if(!arguments.length){for(e=new Array(u=(r=this[0]).length);++s<u;)(i=r[s])&&(e[s]=i.__data__);return e}var a=j([]),f=E([]),l=E([]);if("function"==typeof e)for(;++s<u;)n(r=this[s],e.call(r,r.parentNode.__data__,s));else for(;++s<u;)n(r=this[s],e);return f.enter=function(){return a},f.exit=function(){return l},f},vu.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},vu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=P(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return E(i)},vu.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},vu.sort=function(e){e=H.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},vu.each=function(e){return B(this,function(t,n,r){e.call(t,t.__data__,n,r)})},vu.call=function(e){var t=$o(arguments);return e.apply(t[0]=this,t),this},vu.empty=function(){return!this.node()},vu.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},vu.size=function(){var e=0;return this.each(function(){++e}),e};var gu=[];Xo.selection.enter=j,Xo.selection.enter.prototype=gu,gu.append=vu.append,gu.empty=vu.empty,gu.node=vu.node,gu.call=vu.call,gu.size=vu.size,gu.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return E(o)},gu.insert=function(e,t){return arguments.length<2&&(t=F(this)),vu.insert.call(this,e,t)},vu.transition=function(){for(var e,t,n=Cf||++Mf,r=[],i=kf||{time:Date.now(),ease:wi,delay:0,duration:250},s=-1,o=this.length;++s<o;){r.push(e=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(t=u[a])&&jo(t,a,n,i),e.push(t)}return Po(r,n)},vu.interrupt=function(){return this.each(I)},Xo.select=function(e){var t=["string"==typeof e?cu(e,Jo):e];return t.parentNode=Ko,E([t])},Xo.selectAll=function(e){var t=$o("string"==typeof e?hu(e,Jo):e);return t.parentNode=Ko,E([t])};var yu=Xo.select(Ko);vu.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(q(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(q(e,t,n))};var bu=Xo.map({mouseenter:"mouseover",mouseleave:"mouseout"});bu.forEach(function(e){"on"+e in Jo&&bu.remove(e)});var wu="onselectstart"in Jo?null:d(Ko.style,"userSelect"),Eu=0;Xo.mouse=function(e){return W(e,b())};var Su=/WebKit/.test(Qo.navigator.userAgent)?-1:0;Xo.touches=function(e,t){return arguments.length<2&&(t=b().touches),t?$o(t).map(function(t){var n=W(e,t);return n.identifier=t.identifier,n}):[]},Xo.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",s)}function t(e,t,i,s,o){return function(){function u(){var e,n,r=t(h,v);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+f[0],y:r[1]+f[1],dx:e,dy:n}))}function a(){t(h,v)&&(g.on(s+m,null).on(o+m,null),y(d&&Xo.event.target===c),p({type:"dragend"}))}var f,l=this,c=Xo.event.target,h=l.parentNode,p=n.of(l,arguments),d=0,v=e(),m=".drag"+(null==v?"":"-"+v),g=Xo.select(i()).on(s+m,u).on(o+m,a),y=z(),b=t(h,v);r?(f=r.apply(l,arguments),f=[f.x-b[0],f.y-b[1]]):f=[0,0],p({type:"dragstart"})}}var n=w(e,"drag","dragstart","dragend"),r=null,i=t(v,Xo.mouse,$,"mousemove","mouseup"),s=t(X,Xo.touch,V,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},Xo.rebind(e,n,"on")};var xu=Math.PI,Tu=2*xu,Nu=xu/2,Cu=1e-6,ku=Cu*Cu,Lu=xu/180,Au=180/xu,Ou=Math.SQRT2,Mu=2,_u=4;Xo.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=Z(v),o=s/(Mu*h)*(n*et(Ou*t+v)-Y(v));return[r+o*f,i+o*l,s*n/Z(Ou*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Ou*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+_u*c)/(2*s*Mu*h),d=(a*a-s*s-_u*c)/(2*a*Mu*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Ou;return n.duration=1e3*y,n},Xo.behavior.zoom=function(){function e(e){e.on(k,f).on(Hu+".zoom",c).on("dblclick.zoom",h).on(O,l)}function t(e){return[(e[0]-T.x)/T.k,(e[1]-T.y)/T.k]}function n(e){return[e[0]*T.k+T.x,e[1]*T.k+T.y]}function r(e){T.k=Math.max(C[0],Math.min(C[1],e))}function i(e,t){t=n(t),T.x+=e[0]-t[0],T.y+=e[1]-t[1]}function s(){E&&E.domain(b.range().map(function(e){return(e-T.x)/T.k}).map(b.invert)),x&&x.domain(S.range().map(function(e){return(e-T.y)/T.k}).map(S.invert))}function o(e){e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function a(e){e({type:"zoomend"})}function f(){function e(){l=1,i(Xo.mouse(r),h),u(f)}function n(){c.on(L,null).on(A,null),p(l&&Xo.event.target===s),a(f)}var r=this,s=Xo.event.target,f=M.of(r,arguments),l=0,c=Xo.select(Qo).on(L,e).on(A,n),h=t(Xo.mouse(r)),p=z();I.call(r),o(f)}function l(){function e(){var e=Xo.touches(p);return h=T.k,e.forEach(function(e){e.identifier in v&&(v[e.identifier]=t(e))}),e}function n(){var t=Xo.event.target;Xo.select(t).on(w,s).on(E,c),S.push(t);for(var n=Xo.event.changedTouches,o=0,a=n.length;a>o;++o)v[n[o].identifier]=null;var f=e(),l=Date.now();if(1===f.length){if(500>l-g){var h=f[0],p=v[h.identifier];r(2*T.k),i(h,p),y(),u(d)}g=l}else if(f.length>1){var h=f[0],b=f[1],x=h[0]-b[0],N=h[1]-b[1];m=x*x+N*N}}function s(){for(var e,t,n,s,o=Xo.touches(p),a=0,f=o.length;f>a;++a,s=null)if(n=o[a],s=v[n.identifier]){if(t)break;e=n,t=s}if(s){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=m&&Math.sqrt(l/m);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+s[0])/2,(t[1]+s[1])/2],r(c*h)}g=null,i(e,t),u(d)}function c(){if(Xo.event.touches.length){for(var t=Xo.event.changedTouches,n=0,r=t.length;r>n;++n)delete v[t[n].identifier];for(var i in v)return void e()}Xo.selectAll(S).on(b,null),x.on(k,f).on(O,l),N(),a(d)}var h,p=this,d=M.of(p,arguments),v={},m=0,b=".zoom-"+Xo.event.changedTouches[0].identifier,w="touchmove"+b,E="touchend"+b,S=[],x=Xo.select(p).on(k,null).on(O,n),N=z();I.call(p),n(),o(d)}function c(){var e=M.of(this,arguments);m?clearTimeout(m):(p=t(d=v||Xo.mouse(this)),I.call(this),o(e)),m=setTimeout(function(){m=null,a(e)},50),y(),r(Math.pow(2,.002*Du())*T.k),i(d,p),u(e)}function h(){var e=M.of(this,arguments),n=Xo.mouse(this),s=t(n),f=Math.log(T.k)/Math.LN2;o(e),r(Math.pow(2,Xo.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),i(n,s),u(e),a(e)}var p,d,v,m,g,b,E,S,x,T={x:0,y:0,k:1},N=[960,500],C=Pu,k="mousedown.zoom",L="mousemove.zoom",A="mouseup.zoom",O="touchstart.zoom",M=w(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=M.of(this,arguments),t=T;Cf?Xo.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],i=n/2,s=r/2,o=Xo.interpolateZoom([(i-T.x)/T.k,(s-T.y)/T.k,n/T.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),a=n/r[2];this.__chart__=T={x:i-r[0]*a,y:s-r[1]*a,k:a},u(e)}}).each("end.zoom",function(){a(e)}):(this.__chart__=T,o(e),u(e),a(e))})},e.translate=function(t){return arguments.length?(T={x:+t[0],y:+t[1],k:T.k},s(),e):[T.x,T.y]},e.scale=function(t){return arguments.length?(T={x:T.x,y:T.y,k:+t},s(),e):T.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Pu:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(N=t&&[+t[0],+t[1]],e):N},e.x=function(t){return arguments.length?(E=t,b=t.copy(),T={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),T={x:0,y:0,k:1},e):x},Xo.rebind(e,M,"on")};var Du,Pu=[0,1/0],Hu="onwheel"in Jo?(Du=function(){return-Xo.event.deltaY*(Xo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Jo?(Du=function(){return Xo.event.wheelDelta},"mousewheel"):(Du=function(){return-Xo.event.detail},"MozMousePixelScroll");Xo.color=nt,nt.prototype.toString=function(){return this.rgb()+""},Xo.hsl=rt;var Bu=rt.prototype=new nt;Bu.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new rt(this.h,this.s,this.l/e)},Bu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new rt(this.h,this.s,e*this.l)},Bu.rgb=function(){return it(this.h,this.s,this.l)},Xo.hcl=st;var ju=st.prototype=new nt;ju.brighter=function(e){return new st(this.h,this.c,Math.min(100,this.l+Fu*(arguments.length?e:1)))},ju.darker=function(e){return new st(this.h,this.c,Math.max(0,this.l-Fu*(arguments.length?e:1)))},ju.rgb=function(){return ot(this.h,this.c,this.l).rgb()},Xo.lab=ut;var Fu=18,Iu=.95047,qu=1,Ru=1.08883,Uu=ut.prototype=new nt;Uu.brighter=function(e){return new ut(Math.min(100,this.l+Fu*(arguments.length?e:1)),this.a,this.b)},Uu.darker=function(e){return new ut(Math.max(0,this.l-Fu*(arguments.length?e:1)),this.a,this.b)},Uu.rgb=function(){return at(this.l,this.a,this.b)},Xo.rgb=pt;var zu=pt.prototype=new nt;zu.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new pt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new pt(i,i,i)},zu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new pt(e*this.r,e*this.g,e*this.b)},zu.hsl=function(){return yt(this.r,this.g,this.b)},zu.toString=function(){return"#"+mt(this.r)+mt(this.g)+mt(this.b)};var Wu=Xo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wu.forEach(function(e,t){Wu.set(e,dt(t))}),Xo.functor=St,Xo.xhr=Tt(xt),Xo.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=Nt(e,t,null==n?r:i(n),s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function s(t){return t.map(o).join(e)}function o(e){return u.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=f)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<f;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;f>l;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==a)continue;return e.substring(t,l-u)}return e.substring(t)}for(var r,i,s={},o={},u=[],f=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();(!t||(h=t(h,c++)))&&u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new h,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(s).join("\n")},n},Xo.csv=Xo.dsv(",","text/csv"),Xo.tsv=Xo.dsv("	","text/tab-separated-values"),Xo.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=b().changedTouches),t)for(var r,i=0,s=t.length;s>i;++i)if((r=t[i]).identifier===n)return W(e,r)};var Xu,Vu,$u,Ju,Ku,Qu=Qo[d(Qo,"requestAnimationFrame")]||function(e){setTimeout(e,17)};Xo.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};Vu?Vu.n=s:Xu=s,Vu=s,$u||(Ju=clearTimeout(Ju),$u=1,Qu(kt))},Xo.timer.flush=function(){Lt(),At()},Xo.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Gu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Mt);Xo.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=Xo.round(e,Ot(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Gu[8+n/3]};var Yu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Zu=Xo.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=Xo.round(e,Ot(e,t))).toFixed(Math.max(0,Math.min(20,Ot(e*(1+1e-15),t))))}}),ea=Xo.time={},ta=Date;Pt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){na.setUTCDate.apply(this._,arguments)},setDay:function(){na.setUTCDay.apply(this._,arguments)},setFullYear:function(){na.setUTCFullYear.apply(this._,arguments)},setHours:function(){na.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){na.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){na.setUTCMinutes.apply(this._,arguments)},setMonth:function(){na.setUTCMonth.apply(this._,arguments)},setSeconds:function(){na.setUTCSeconds.apply(this._,arguments)},setTime:function(){na.setTime.apply(this._,arguments)}};var na=Date.prototype;ea.year=Ht(function(e){return e=ea.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ea.years=ea.year.range,ea.years.utc=ea.year.utc.range,ea.day=Ht(function(e){var t=new ta(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ea.days=ea.day.range,ea.days.utc=ea.day.utc.range,ea.dayOfYear=function(e){var t=ea.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ea[e]=Ht(function(e){return(e=ea.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ea.year(e).getDay();return Math.floor((ea.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ea[e+"s"]=n.range,ea[e+"s"].utc=n.utc.range,ea[e+"OfYear"]=function(e){var n=ea.year(e).getDay();return Math.floor((ea.dayOfYear(e)+(n+t)%7)/7)}}),ea.week=ea.sunday,ea.weeks=ea.sunday.range,ea.weeks.utc=ea.sunday.utc.range,ea.weekOfYear=ea.sundayOfYear;var ra={"-":"",_:" ",0:"0"},ia=/^\s*\d+/,sa=/^%/;Xo.locale=function(e){return{numberFormat:_t(e),timeFormat:jt(e)}};var oa=Xo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Xo.format=oa.numberFormat,Xo.geo={},sn.prototype={s:0,t:0,add:function(e){on(e,this.t,ua),on(ua.s,this.s,this),this.s?this.t+=ua.t:this.s=ua.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ua=new sn;Xo.geo.stream=function(e,t){e&&aa.hasOwnProperty(e.type)?aa[e.type](e,t):un(e,t)};var aa={Feature:function(e,t){un(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)un(n[r].geometry,t)}},fa={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){an(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)an(n[r],t,0)},Polygon:function(e,t){fn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)fn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)un(n[r],t)}};Xo.geo.area=function(e){return la=0,Xo.geo.stream(e,ha),la};var la,ca=new sn,ha={sphere:function(){la+=4*xu},point:v,lineStart:v,lineEnd:v,polygonStart:function(){ca.reset(),ha.lineStart=ln},polygonEnd:function(){var e=2*ca;la+=0>e?4*xu+e:e,ha.lineStart=ha.lineEnd=ha.point=v}};Xo.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),c>t&&(c=t),t>p&&(p=t)}function t(t,n){var r=cn([t*Lu,n*Lu]);if(g){var i=pn(g,r),s=[i[1],-i[0],0],o=pn(s,i);mn(o),o=gn(o);var a=t-d,f=a>0?1:-1,v=o[0]*Au*f,m=su(a)>180;if(m^(v>f*d&&f*t>v)){var y=o[1]*Au;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(v>f*d&&f*t>v)){var y=-o[1]*Au;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?d>t?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=su(r)>180?r+(r>0?360:-360):r}else v=e,m=n;ha.point(e,n),t(e,n)}function s(){ha.lineStart()}function o(){i(v,m),ha.lineEnd(),su(y)>Cu&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,ha.polygonStart()},polygonEnd:function(){ha.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,0>ca?(l=-(h=180),c=-(p=90)):y>Cu?p=90:-Cu>y&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],Xo.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];t>r;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];t>=r;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,1/0===l||1/0===c?[[0/0,0/0],[0/0,0/0]]:[[l,c],[h,p]]}}(),Xo.geo.centroid=function(e){pa=da=va=ma=ga=ya=ba=wa=Ea=Sa=xa=0,Xo.geo.stream(e,Ta);var t=Ea,n=Sa,r=xa,i=t*t+n*n+r*r;return ku>i&&(t=ya,n=ba,r=wa,Cu>da&&(t=va,n=ma,r=ga),i=t*t+n*n+r*r,ku>i)?[0/0,0/0]:[Math.atan2(n,t)*Au,G(r/Math.sqrt(i))*Au]};var pa,da,va,ma,ga,ya,ba,wa,Ea,Sa,xa,Ta={sphere:v,point:bn,lineStart:En,lineEnd:Sn,polygonStart:function(){Ta.lineStart=xn},polygonEnd:function(){Ta.lineStart=En}},Na=Ln(Tn,Dn,Hn,[-xu,-xu/2]),Ca=1e9;Xo.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=Fn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(Xo.geo.conicEqualArea=function(){return qn(Rn)}).raw=Rn,Xo.geo.albers=function(){return Xo.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},Xo.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=Xo.geo.albers(),o=Xo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Xo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-0.425&&-0.214>r?o:i>=.166&&.234>i&&r>=-0.214&&-0.115>r?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Cu,c+.12*f+Cu],[l-.214*f-Cu,c+.234*f-Cu]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Cu,c+.166*f+Cu],[l-.115*f-Cu,c+.234*f-Cu]]).stream(a).point,e},e.scale(1070)};var ka,La,Aa,Oa,Ma,_a,Da={point:v,lineStart:v,lineEnd:v,polygonStart:function(){La=0,Da.lineStart=Un},polygonEnd:function(){Da.lineStart=Da.lineEnd=Da.point=v,ka+=su(La/2)}},Pa={point:zn,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Ha={point:Vn,lineStart:$n,lineEnd:Jn,polygonStart:function(){Ha.lineStart=Kn},polygonEnd:function(){Ha.point=Vn,Ha.lineStart=$n,Ha.lineEnd=Jn}};Xo.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),Xo.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return ka=0,Xo.geo.stream(e,i(Da)),ka},e.centroid=function(e){return va=ma=ga=ya=ba=wa=Ea=Sa=xa=0,Xo.geo.stream(e,i(Ha)),xa?[Ea/xa,Sa/xa]:wa?[ya/wa,ba/wa]:ga?[va/ga,ma/ga]:[0/0,0/0]},e.bounds=function(e){return Ma=_a=-(Aa=Oa=1/0),Xo.geo.stream(e,i(Pa)),[[Aa,Oa],[Ma,_a]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||Yn(e):xt,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new Wn:new Qn(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(Xo.geo.albersUsa()).context(null)},Xo.geo.transform=function(e){return{stream:function(t){var n=new Zn(t);for(var r in e)n[r]=e[r];return n}}},Zn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Xo.geo.projection=tr,Xo.geo.projectionMutator=nr,(Xo.geo.equirectangular=function(){return tr(ir)}).raw=ir.invert=ir,Xo.geo.rotation=function(e){function t(t){return t=e(t[0]*Lu,t[1]*Lu),t[0]*=Au,t[1]*=Au,t}return e=or(e[0]%360*Lu,e[1]*Lu,e.length>2?e[2]*Lu:0),t.invert=function(t){return t=e.invert(t[0]*Lu,t[1]*Lu),t[0]*=Au,t[1]*=Au,t},t},sr.invert=ir,Xo.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=or(-e[0]*Lu,-e[1]*Lu,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Au,e[1]*=Au}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=lr((t=+r)*Lu,i*Lu),e):t},e.precision=function(r){return arguments.length?(n=lr(t*Lu,(i=+r)*Lu),e):i},e.angle(90)},Xo.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Lu,i=e[1]*Lu,s=t[1]*Lu,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},Xo.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Xo.range(Math.ceil(s/m)*m,i,m).map(h).concat(Xo.range(Math.ceil(f/g)*g,a,g).map(p)).concat(Xo.range(Math.ceil(r/d)*d,n,d).filter(function(e){return su(e%m)>Cu}).map(l)).concat(Xo.range(Math.ceil(u/v)*v,o,v).filter(function(e){return su(e%g)>Cu}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=hr(u,o,90),c=pr(r,n,y),h=hr(f,a,90),p=pr(s,i,y),e):y},e.majorExtent([[-180,-90+Cu],[180,90-Cu]]).minorExtent([[-180,-80-Cu],[180,80+Cu]])},Xo.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=dr,i=vr;return e.distance=function(){return Xo.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},Xo.geo.interpolate=function(e,t){return mr(e[0]*Lu,e[1]*Lu,t[0]*Lu,t[1]*Lu)},Xo.geo.length=function(e){return Ba=0,Xo.geo.stream(e,ja),Ba};var Ba,ja={sphere:v,point:v,lineStart:gr,lineEnd:v,polygonStart:v,polygonEnd:v},Fa=yr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(Xo.geo.azimuthalEqualArea=function(){return tr(Fa)}).raw=Fa;var Ia=yr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},xt);(Xo.geo.azimuthalEquidistant=function(){return tr(Ia)}).raw=Ia,(Xo.geo.conicConformal=function(){return qn(br)}).raw=br,(Xo.geo.conicEquidistant=function(){return qn(wr)}).raw=wr;var qa=yr(function(e){return 1/e},Math.atan);(Xo.geo.gnomonic=function(){return tr(qa)}).raw=qa,Er.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Nu]},(Xo.geo.mercator=function(){return Sr(Er)}).raw=Er;var Ra=yr(function(){return 1},Math.asin);(Xo.geo.orthographic=function(){return tr(Ra)}).raw=Ra;var Ua=yr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(Xo.geo.stereographic=function(){return tr(Ua)}).raw=Ua,xr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Nu]},(Xo.geo.transverseMercator=function(){var e=Sr(xr),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=xr,Xo.geom={},Xo.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=St(n),s=St(r),o=e.length,u=[],a=[];for(t=0;o>t;t++)u.push([+i.call(this,e[t],t),+s.call(this,e[t],t),t]);for(u.sort(kr),t=0;o>t;t++)a.push([u[t][0],-u[t][1]]);var f=Cr(u),l=Cr(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(t=f.length-1;t>=0;--t)p.push(e[u[f[t]][2]]);for(t=+c;t<l.length-h;++t)p.push(e[u[l[t]][2]]);return p}var n=Tr,r=Nr;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},Xo.geom.polygon=function(e){return lu(e,za),e};var za=Xo.geom.polygon.prototype=[];za.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},za.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},za.clip=function(e){for(var t,n,r,i,s,o,u=Or(e),a=-1,f=this.length-Or(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],Lr(o,l,i)?(Lr(s,l,i)||e.push(Ar(s,o,l,i)),e.push(o)):Lr(s,l,i)&&e.push(Ar(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e};var Wa,Xa,Va,$a,Ja,Ka=[],Qa=[];Fr.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(qr),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Gr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ti(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Zr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ei(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ei(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Zr(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,o=e.R;if(n=s?o?ti(o):s:o,i?i.L===e?i.L=n:i.R=n:this._=n,s&&o?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return e.C=!1,void 0;do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,Zr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ei(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Zr(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ei(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Zr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ei(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},Xo.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=u[0][0],i=u[0][1],s=u[1][0],o=u[1][1];return ni(n(e),u).cells.forEach(function(n,u){var a=n.edges,f=n.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=r&&f.x<=s&&f.y>=i&&f.y<=o?[[r,o],[s,o],[s,i],[r,i]]:[];l.point=e[u]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(s(e,t)/Cu)*Cu,y:Math.round(o(e,t)/Cu)*Cu,i:t}})}var r=Tr,i=Nr,s=r,o=i,u=Ga;return e?t(e):(t.links=function(e){return ni(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return ni(n(e)).cells.forEach(function(n,r){for(var i,s,o=n.site,u=n.edges.sort(qr),a=-1,f=u.length,l=u[f-1].edge,c=l.l===o?l.r:l.l;++a<f;)i=l,s=c,l=u[a].edge,c=l.l===o?l.r:l.l,r<s.i&&r<c.i&&ii(o,s,c)<0&&t.push([e[r],e[s.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(s=St(r=e),t):r},t.y=function(e){return arguments.length?(o=St(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?Ga:e,t):u===Ga?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===Ga?null:u&&u[1]},t)};var Ga=[[-1e6,-1e6],[1e6,1e6]];Xo.geom.delaunay=function(e){return Xo.geom.voronoi().triangles(e)},Xo.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(su(a-n)+su(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=(h<<1)+c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=ui()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=St(u),w=St(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;d>p;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var E=+b(l=e[p],p),S=+w(l,p);v>E&&(v=E),m>S&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=ui();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){ai(e,N,v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Tr,a=Nr;return(o=arguments.length)?(u=si,a=oi,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},Xo.interpolateRgb=fi,Xo.interpolateObject=li,Xo.interpolateNumber=ci,Xo.interpolateString=hi;var Ya=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Za=new RegExp(Ya.source,"g");Xo.interpolate=pi,Xo.interpolators=[function(e,t){var n=typeof t;return("string"===n?Wu.has(t)||/^(#|rgb\(|hsl\()/.test(t)?fi:hi:t instanceof nt?fi:Array.isArray(t)?di:"object"===n&&isNaN(t)?li:ci)(e,t)}],Xo.interpolateArray=di;var ef=function(){return xt},tf=Xo.map({linear:ef,poly:Ei,quad:function(){return yi},cubic:function(){return bi},sin:function(){return Si},exp:function(){return xi},circle:function(){return Ti},elastic:Ni,back:Ci,bounce:function(){return ki}}),nf=Xo.map({"in":xt,out:mi,"in-out":gi,"out-in":function(e){return gi(mi(e))}});Xo.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return n=tf.get(n)||ef,r=nf.get(r)||xt,vi(r(n.apply(null,Vo.call(arguments,1))))},Xo.interpolateHcl=Li,Xo.interpolateHsl=Ai,Xo.interpolateLab=Oi,Xo.interpolateRound=Mi,Xo.transform=function(e){var t=Jo.createElementNS(Xo.ns.prefix.svg,"g");return(Xo.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new _i(n?n.matrix:rf)})(e)},_i.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var rf={a:1,b:0,c:0,d:1,e:0,f:0};Xo.interpolateTransform=Bi,Xo.layout={},Xo.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Ii(e[n]));return t}},Xo.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=Xo.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(Xo.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(Tu-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:(f-c)/e},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},Xo.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(a>u*u/m){if(d>a){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&d>a){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function t(e){e.px=Xo.event.x,e.py=Xo.event.y,u.resume()}var n,r,i,s,o,u={},a=Xo.dispatch("start","tick","end"),f=[1,1],l=.9,c=sf,h=of,p=-30,d=uf,v=.1,m=.64,g=[],y=[];return u.tick=function(){if((r*=.99)<.005)return a.end({type:"end",alpha:r=0}),!0;var t,n,u,c,h,d,m,b,w,E=g.length,S=y.length;for(n=0;S>n;++n)u=y[n],c=u.source,h=u.target,b=h.x-c.x,w=h.y-c.y,(d=b*b+w*w)&&(d=r*s[n]*((d=Math.sqrt(d))-i[n])/d,b*=d,w*=d,h.x-=b*(m=c.weight/(h.weight+c.weight)),h.y-=w*m,c.x+=b*(m=1-m),c.y+=w*m);if((m=r*v)&&(b=f[0]/2,w=f[1]/2,n=-1,m))for(;++n<E;)u=g[n],u.x+=(b-u.x)*m,u.y+=(w-u.y)*m;if(p)for(Vi(t=Xo.geom.quadtree(g),r,o),n=-1;++n<E;)(u=g[n]).fixed||t.visit(e(u));for(n=-1;++n<E;)u=g[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);a.tick({type:"tick",alpha:r})},u.nodes=function(e){return arguments.length?(g=e,u):g},u.links=function(e){return arguments.length?(y=e,u):y},u.size=function(e){return arguments.length?(f=e,u):f},u.linkDistance=function(e){return arguments.length?(c="function"==typeof e?e:+e,u):c},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.friction=function(e){return arguments.length?(l=+e,u):l},u.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.chargeDistance=function(e){return arguments.length?(d=e*e,u):Math.sqrt(d)},u.gravity=function(e){return arguments.length?(v=+e,u):v},u.theta=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(a.start({type:"start",alpha:r=e}),Xo.timer(u.tick)),u):r},u.start=function(){function e(e,r){if(!n){for(n=new Array(a),u=0;a>u;++u)n[u]=[];for(u=0;f>u;++u){var i=y[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var s,o=n[t],u=-1,f=o.length;++u<f;)if(!isNaN(s=o[u][e]))return s;return Math.random()*r}var t,n,r,a=g.length,l=y.length,d=f[0],v=f[1];for(t=0;a>t;++t)(r=g[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=y[t],"number"==typeof r.source&&(r.source=g[r.source]),"number"==typeof r.target&&(r.target=g[r.target]),++r.source.weight,++r.target.weight;for(t=0;a>t;++t)r=g[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof c)for(t=0;l>t;++t)i[t]=+c.call(this,y[t],t);else for(t=0;l>t;++t)i[t]=c;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,y[t],t);else for(t=0;l>t;++t)s[t]=h;if(o=[],"function"==typeof p)for(t=0;a>t;++t)o[t]=+p.call(this,g[t],t);else for(t=0;a>t;++t)o[t]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=Xo.behavior.drag().origin(xt).on("dragstart.force",Ui).on("drag.force",t).on("dragend.force",zi)),arguments.length?(this.on("mouseover.force",Wi).on("mouseout.force",Xi).call(n),void 0):n},Xo.rebind(u,a,"on")};var sf=20,of=1,uf=1/0;Xo.layout.hierarchy=function(){function e(i){var s,o=[i],u=[];for(i.depth=0;null!=(s=o.pop());)if(u.push(s),(f=n.call(e,s,s.depth))&&(a=f.length)){for(var a,f,l;--a>=0;)o.push(l=f[a]),l.parent=s,l.depth=s.depth+1;r&&(s.value=0),s.children=f}else r&&(s.value=+r.call(e,s,s.depth)||0),delete s.children;return Ki(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),u}var t=Yi,n=Qi,r=Gi;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(Ji(t,function(e){e.children&&(e.value=0)}),Ki(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},Xo.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=Xo.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},$i(n,r)},Xo.layout.pie=function(){function e(s){var o=s.map(function(n,r){return+t.call(e,n,r)}),u=+("function"==typeof r?r.apply(this,arguments):r),a=(("function"==typeof i?i.apply(this,arguments):i)-u)/Xo.sum(o),f=Xo.range(s.length);null!=n&&f.sort(n===af?function(e,t){return o[t]-o[e]}:function(e,t){return n(s[e],s[t])});var l=[];return f.forEach(function(e){var t;l[e]={data:s[e],value:t=o[e],startAngle:u,endAngle:u+=t*a}}),l}var t=Number,n=af,r=0,i=Tu;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e};var af={};Xo.layout.stack=function(){function e(u,a){var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=Xo.permute(f,c),l=Xo.permute(l,c);var h,p,d,v=r.call(e,l,a),m=f.length,g=f[0].length;for(p=0;g>p;++p)for(i.call(e,f[0][p],d=v[p],l[0][p][1]),h=1;m>h;++h)i.call(e,f[h][p],d+=l[h-1][p][1],l[h][p][1]);return u}var t=xt,n=rs,r=is,i=ns,s=es,o=ts;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:ff.get(t)||rs,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:lf.get(t)||is,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var ff=Xo.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ss),s=e.map(os),o=Xo.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;r>t;++t)n=o[t],a>u?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return Xo.range(e.length).reverse()},"default":rs}),lf=Xo.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;s>n;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;h>n;++n){for(t=0,i=0;l>t;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];l>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,f>a&&(f=a)}for(n=0;h>n;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;s>n;++n)u[n]=0;return u},zero:is});Xo.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[Xo.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=ls,i=as;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=St(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return fs(e,t)}:St(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},Xo.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,Ki(u,function(e){e.r=+l(e.value)}),Ki(u,vs),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;Ki(u,function(e){e.r+=c}),Ki(u,vs),Ki(u,function(e){e.r-=c})}return ys(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=Xo.layout.hierarchy().sort(cs),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},$i(e,n)},Xo.layout.tree=function(){function e(e,i){var l=o.call(this,e,i),c=l[0],h=t(c);if(Ki(h,n),h.parent.m=-h.z,Ji(h,r),f)Ji(c,s);else{var p=c,d=c,v=c;Ji(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=u(p,d)/2-p.x,g=a[0]/(d.x+u(d,p)/2+m),y=a[1]/(v.depth||1);Ji(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return l}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,s=t.children,o=0,u=s.length;u>o;++o)r.push((s[o]=i={_:s[o],parent:t,children:(i=s[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Ts(e);var s=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+u(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+u(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,s=e,o=t,a=i.parent.children[0],f=i.m,l=s.m,c=o.m,h=a.m;o=Ss(o),i=Es(i),o&&i;)a=Es(a),s=Ss(s),s.a=e,r=o.z+c-i.z-f+u(o._,i._),r>0&&(xs(Ns(o,e,n),e,r),f+=r,l+=r),c+=o.m,f+=i.m,h+=a.m,l+=s.m;o&&!Ss(s)&&(s.t=o,s.m+=c-l),i&&!Es(a)&&(a.t=i,a.m+=f-h,n=e)}return n}function s(e){e.x*=a[0],e.y=e.depth*a[1]}var o=Xo.layout.hierarchy().sort(null).value(null),u=ws,a=[1,1],f=null;return e.separation=function(t){return arguments.length?(u=t,e):u},e.size=function(t){return arguments.length?(f=null==(a=t)?s:null,e):f?null:a},e.nodeSize=function(t){return arguments.length?(f=null==(a=t)?null:s,e):f?a:null},$i(e,o)},Xo.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;Ki(a,function(e){var t=e.children;t&&t.length?(e.x=ks(t),e.y=Cs(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Ls(a),c=As(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return Ki(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=Xo.layout.hierarchy().sort(null).value(null),n=ws,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},$i(e,t)},Xo.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(s>n&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=0,s.y=0,s.dx=f[0],s.dy=f[1],o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=Xo.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=Os,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Os(t):Ms(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ms(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?Os:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},$i(s,u)},Xo.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=Xo.random.normal.apply(Xo,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=Xo.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},Xo.scale={};var cf={floor:xt,ceil:xt};Xo.scale.linear=function(){return Fs([0,1],[0,1],pi,!1)};var hf={s:1,g:1,p:1,r:1,e:1};Xo.scale.log=function(){return Vs(Xo.scale.linear().domain([0,1]),10,!0,[1,10])};var pf=Xo.format(".0e"),df={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};Xo.scale.pow=function(){return $s(Xo.scale.linear(),1,[0,1])},Xo.scale.sqrt=function(){return Xo.scale.pow().exponent(.5)},Xo.scale.ordinal=function(){return Ks([],{t:"range",a:[[]]})},Xo.scale.category10=function(){return Xo.scale.ordinal().range(vf)},Xo.scale.category20=function(){return Xo.scale.ordinal().range(mf)},Xo.scale.category20b=function(){return Xo.scale.ordinal().range(gf)},Xo.scale.category20c=function(){return Xo.scale.ordinal().range(yf)};var vf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vt),mf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vt),gf=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vt),yf=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vt);Xo.scale.quantile=function(){return Qs([],[])},Xo.scale.quantize=function(){return Gs(0,1,[0,1])},Xo.scale.threshold=function(){return Ys([.5],[0,1])},Xo.scale.identity=function(){return Zs([0,1])},Xo.svg={},Xo.svg.arc=function(){function e(){var e=t.apply(this,arguments),s=n.apply(this,arguments),o=r.apply(this,arguments)+bf,u=i.apply(this,arguments)+bf,a=(o>u&&(a=o,o=u,u=a),u-o),f=xu>a?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=wf?e?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":e?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+f+",0 "+e*l+","+e*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var t=eo,n=to,r=no,i=ro;return e.innerRadius=function(n){return arguments.length?(t=St(n),e):t},e.outerRadius=function(t){return arguments.length?(n=St(t),e):n},e.startAngle=function(t){return arguments.length?(r=St(t),e):r},e.endAngle=function(t){return arguments.length?(i=St(t),e):i},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,s=(r.apply(this,arguments)+i.apply(this,arguments))/2+bf;return[Math.cos(s)*e,Math.sin(s)*e]},e};var bf=-Nu,wf=Tu-Cu;Xo.svg.line=function(){return io(xt)};var Ef=Xo.map({linear:so,"linear-closed":oo,step:uo,"step-before":ao,"step-after":fo,basis:mo,"basis-open":go,"basis-closed":yo,bundle:bo,cardinal:ho,"cardinal-open":lo,"cardinal-closed":co,monotone:No});Ef.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Sf=[0,2/3,1/3,0],xf=[0,1/3,2/3,0],Tf=[0,1/6,2/3,1/6];Xo.svg.line.radial=function(){var e=io(Co);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ao.reverse=fo,fo.reverse=ao,Xo.svg.area=function(){return ko(xt)},Xo.svg.area.radial=function(){var e=ko(Co);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},Xo.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)+bf,l=f.call(e,i,r)+bf;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>xu)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=dr,o=vr,u=Lo,a=no,f=ro;return e.radius=function(t){return arguments.length?(u=St(t),e):u},e.source=function(t){return arguments.length?(s=St(t),e):s},e.target=function(t){return arguments.length?(o=St(t),e):o},e.startAngle=function(t){return arguments.length?(a=St(t),e):a},e.endAngle=function(t){return arguments.length?(f=St(t),e):f},e},Xo.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=dr,n=vr,r=Ao;return e.source=function(n){return arguments.length?(t=St(n),e):t},e.target=function(t){return arguments.length?(n=St(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},Xo.svg.diagonal.radial=function(){var e=Xo.svg.diagonal(),t=Ao,n=e.projection;return e.projection=function(e){return arguments.length?n(Oo(t=e)):t},e},Xo.svg.symbol=function(){function e(e,r){return(Nf.get(t.call(this,e,r))||Do)(n.call(this,e,r))}var t=_o,n=Mo;return e.type=function(n){return arguments.length?(t=St(n),e):t},e.size=function(t){return arguments.length?(n=St(t),e):n},e};var Nf=Xo.map({circle:Do,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Af)),n=t*Af;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});Xo.svg.symbolTypes=Nf.keys();var Cf,kf,Lf=Math.sqrt(3),Af=Math.tan(30*Lu),Of=[],Mf=0;Of.call=vu.call,Of.empty=vu.empty,Of.node=vu.node,Of.size=vu.size,Xo.transition=function(e){return arguments.length?Cf?e.transition():e:yu.transition()},Xo.transition.prototype=Of,Of.select=function(e){var t,n,r,i=this.id,s=[];e=S(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(r=a[f])&&(n=e.call(r,r.__data__,f,o))?("__data__"in r&&(n.__data__=r.__data__),jo(n,f,i,r.__transition__[i]),t.push(n)):t.push(null)}return Po(s,i)},Of.selectAll=function(e){var t,n,r,i,s,o=this.id,u=[];e=x(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(r=l[c]){s=r.__transition__[o],n=e.call(r,r.__data__,c,a),u.push(t=[]);for(var p=-1,d=n.length;++p<d;)(i=n[p])&&jo(i,p,o,s),t.push(i)}return Po(u,o)},Of.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=P(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return Po(i,this.id)},Of.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):B(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},Of.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Bi:pi,u=Xo.ns.qualify(e);return Ho(this,"attr."+e,t,u.local?s:i)},Of.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=Xo.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Of.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=Qo.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=pi(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var s=arguments.length;if(3>s){if("string"!=typeof e){2>s&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Ho(this,"style."+e,t,i)},Of.styleTween=function(e,t,n){function r(r,i){var s=t.call(this,r,i,Qo.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Of.text=function(e){return Ho(this,"text",e,Bo)},Of.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},Of.ease=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof e&&(e=Xo.ease.apply(Xo,arguments)),B(this,function(n){n.__transition__[t].ease=e}))},Of.delay=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:B(this,"function"==typeof e?function(n,r,i){n.__transition__[t].delay=+e.call(n,n.__data__,r,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Of.duration=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:B(this,"function"==typeof e?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},Of.each=function(e,t){var n=this.id;if(arguments.length<2){var r=kf,i=Cf;Cf=n,B(this,function(t,r,i){kf=t.__transition__[n],e.call(t,t.__data__,r,i)}),kf=r,Cf=i}else B(this,function(r){var i=r.__transition__[n];(i.event||(i.event=Xo.dispatch("start","end"))).on(e,t)});return this},Of.transition=function(){for(var e,t,n,r,i=this.id,s=++Mf,o=[],u=0,a=this.length;a>u;u++){o.push(e=[]);for(var t=this[u],f=0,l=t.length;l>f;f++)(n=t[f])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,jo(n,f,s,r)),e.push(n)}return Po(o,s)},Xo.svg.axis=function(){function e(e){e.each(function(){var e,f=Xo.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):xt:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Cu),m=Xo.transition(d.exit()).style("opacity",Cu).remove(),g=Xo.transition(d.order()).style("opacity",1),y=Ds(c),b=f.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),Xo.transition(b));v.append("line"),v.append("text");var E=v.select("line"),S=g.select("line"),x=d.select("text").text(p),T=v.select("text"),N=g.select("text");switch(r){case"bottom":e=Fo,E.attr("y2",i),T.attr("y",Math.max(i,0)+o),S.attr("x2",0).attr("y2",i),N.attr("x",0).attr("y",Math.max(i,0)+o),x.attr("dy",".71em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+s+"V0H"+y[1]+"V"+s);break;case"top":e=Fo,E.attr("y2",-i),T.attr("y",-(Math.max(i,0)+o)),S.attr("x2",0).attr("y2",-i),N.attr("x",0).attr("y",-(Math.max(i,0)+o)),x.attr("dy","0em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+ -s+"V0H"+y[1]+"V"+ -s);break;case"left":e=Io,E.attr("x2",-i),T.attr("x",-(Math.max(i,0)+o)),S.attr("x2",-i).attr("y2",0),N.attr("x",-(Math.max(i,0)+o)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),w.attr("d","M"+ -s+","+y[0]+"H0V"+y[1]+"H"+ -s);break;case"right":e=Io,E.attr("x2",i),T.attr("x",Math.max(i,0)+o),S.attr("x2",i).attr("y2",0),N.attr("x",Math.max(i,0)+o).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),w.attr("d","M"+s+","+y[0]+"H0V"+y[1]+"H"+s)}if(c.rangeBand){var C=c,k=C.rangeBand()/2;l=c=function(e){return C(e)+k}}else l.rangeBand?l=c:m.call(e,c);v.call(e,l),g.call(e,c)})}var t,n=Xo.scale.linear(),r=_f,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Df?t+"":_f,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var _f="bottom",Df={top:1,right:1,bottom:1,left:1};Xo.svg.brush=function(){function e(s){s.each(function(){var s=Xo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=s.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=s.selectAll(".resize").data(d,xt);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Pf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var l,c=Xo.transition(s),h=Xo.transition(o);a&&(l=Ds(a),h.attr("x",l[0]).attr("width",l[1]-l[0]),n(c)),f&&(l=Ds(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(c)),t(c)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+l[+/e$/.test(e)]+","+c[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",l[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(e){e.select(".extent").attr("y",c[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1]-c[0])}function i(){function i(){32==Xo.event.keyCode&&(L||(b=null,O[0]-=l[1],O[1]-=c[1],L=2),y())}function d(){32==Xo.event.keyCode&&2==L&&(O[0]+=l[1],O[1]+=c[1],L=0,y())}function v(){var e=Xo.mouse(E),i=!1;w&&(e[0]+=w[0],e[1]+=w[1]),L||(Xo.event.altKey?(b||(b=[(l[0]+l[1])/2,(c[0]+c[1])/2]),O[0]=l[+(e[0]<b[0])],O[1]=c[+(e[1]<b[1])]):b=null),C&&m(e,a,0)&&(n(T),i=!0),k&&m(e,f,1)&&(r(T),i=!0),i&&(t(T),x({type:"brush",mode:L?"move":"resize"}))}function m(e,t,n){var r,i,u=Ds(t),a=u[0],f=u[1],d=O[n],v=n?c:l,m=v[1]-v[0];return L&&(a-=d,f-=m+d),r=(n?p:h)?Math.max(a,Math.min(f,e[n])):e[n],L?i=(r+=d)+m:(b&&(d=Math.max(a,Math.min(f,2*b[n]-r))),r>d?(i=r,r=d):i=d),v[0]!=r||v[1]!=i?(n?o=null:s=null,v[0]=r,v[1]=i,!0):void 0}function g(){v(),T.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),Xo.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),x({type:"brushend"})}var b,w,E=this,S=Xo.select(Xo.event.target),x=u.of(E,arguments),T=Xo.select(E),N=S.datum(),C=!/^(n|s)$/.test(N)&&a,k=!/^(e|w)$/.test(N)&&f,L=S.classed("extent"),A=z(),O=Xo.mouse(E),M=Xo.select(Qo).on("keydown.brush",i).on("keyup.brush",d);if(Xo.event.changedTouches?M.on("touchmove.brush",v).on("touchend.brush",g):M.on("mousemove.brush",v).on("mouseup.brush",g),T.interrupt().selectAll("*").interrupt(),L)O[0]=l[0]-O[0],O[1]=c[0]-O[1];else if(N){var _=+/w$/.test(N),D=+/^n/.test(N);w=[l[1-_]-O[0],c[1-D]-O[1]],O[0]=l[_],O[1]=c[D]}else Xo.event.altKey&&(b=O.slice());T.style("pointer-events","none").selectAll(".resize").style("display",null),Xo.select("body").style("cursor",S.style("cursor")),x({type:"brushstart"}),v()}var s,o,u=w(e,"brushstart","brush","brushend"),a=null,f=null,l=[0,0],c=[0,0],h=!0,p=!0,d=Hf[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:l,y:c,i:s,j:o},n=this.__chart__||t;this.__chart__=t,Cf?Xo.select(this).transition().each("start.brush",function(){s=n.i,o=n.j,l=n.x,c=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=di(l,t.x),r=di(c,t.y);return s=o=null,function(i){l=t.x=n(i),c=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(a=t,d=Hf[!a<<1|!f],e):a},e.y=function(t){return arguments.length?(f=t,d=Hf[!a<<1|!f],e):f},e.clamp=function(t){return arguments.length?(a&&f?(h=!!t[0],p=!!t[1]):a?h=!!t:f&&(p=!!t),e):a&&f?[h,p]:a?h:f?p:null},e.extent=function(t){var n,r,i,u,h;return arguments.length?(a&&(n=t[0],r=t[1],f&&(n=n[0],r=r[0]),s=[n,r],a.invert&&(n=a(n),r=a(r)),n>r&&(h=n,n=r,r=h),(n!=l[0]||r!=l[1])&&(l=[n,r])),f&&(i=t[0],u=t[1],a&&(i=i[1],u=u[1]),o=[i,u],f.invert&&(i=f(i),u=f(u)),i>u&&(h=i,i=u,u=h),(i!=c[0]||u!=c[1])&&(c=[i,u])),e):(a&&(s?(n=s[0],r=s[1]):(n=l[0],r=l[1],a.invert&&(n=a.invert(n),r=a.invert(r)),n>r&&(h=n,n=r,r=h))),f&&(o?(i=o[0],u=o[1]):(i=c[0],u=c[1],f.invert&&(i=f.invert(i),u=f.invert(u)),i>u&&(h=i,i=u,u=h))),a&&f?[[n,i],[r,u]]:a?[n,r]:f&&[i,u])},e.clear=function(){return e.empty()||(l=[0,0],c=[0,0],s=o=null),e},e.empty=function(){return!!a&&l[0]==l[1]||!!f&&c[0]==c[1]},Xo.rebind(e,u,"on")};var Pf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bf=ea.format=oa.timeFormat,jf=Bf.utc,Ff=jf("%Y-%m-%dT%H:%M:%S.%LZ");Bf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?qo:Ff,qo.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},qo.toString=Ff.toString,ea.second=Ht(function(e){return new ta(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ea.seconds=ea.second.range,ea.seconds.utc=ea.second.utc.range,ea.minute=Ht(function(e){return new ta(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ea.minutes=ea.minute.range,ea.minutes.utc=ea.minute.utc.range,ea.hour=Ht(function(e){var t=e.getTimezoneOffset()/60;return new ta(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ea.hours=ea.hour.range,ea.hours.utc=ea.hour.utc.range,ea.month=Ht(function(e){return e=ea.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ea.months=ea.month.range,ea.months.utc=ea.month.utc.range;var If=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],qf=[[ea.second,1],[ea.second,5],[ea.second,15],[ea.second,30],[ea.minute,1],[ea.minute,5],[ea.minute,15],[ea.minute,30],[ea.hour,1],[ea.hour,3],[ea.hour,6],[ea.hour,12],[ea.day,1],[ea.day,2],[ea.week,1],[ea.month,1],[ea.month,3],[ea.year,1]],Rf=Bf.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Tn]]),Uf={range:function(e,t,n){return Xo.range(Math.ceil(e/n)*n,+t,n).map(Uo)},floor:xt,ceil:xt};qf.year=ea.year,ea.scale=function(){return Ro(Xo.scale.linear(),qf,Rf)};var zf=qf.map(function(e){return[e[0].utc,e[1]]}),Wf=jf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Tn]]);zf.year=ea.year.utc,ea.scale.utc=function(){return Ro(Xo.scale.linear(),zf,Wf)},Xo.text=Tt(function(e){return e.responseText}),Xo.json=function(e,t){return Nt(e,"application/json",zo,t)},Xo.html=function(e,t){return Nt(e,"text/html",Wo,t)},Xo.xml=Tt(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define("d3/3",Xo):"object"==typeof module&&module.exports&&(module.exports=Xo),this.d3=Xo}();var global=this;define("moment/elections",function(){function t(){return e.apply(null,arguments)}function n(t){e=t}function r(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function i(e){return Object.prototype.toString.call(e)==="[object Object]"}function s(e){var t;for(t in e)return!1;return!0}function o(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function u(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,n,r){return Pr(e,t,n,r,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function h(e){return e._pf==null&&(e._pf=c()),e._pf}function d(e){if(e._isValid==null){var t=h(e),n=p.call(t.parsedDateParts,function(e){return e!=null});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return e._isValid}function v(e){var t=l(NaN);return e!=null?f(h(t),e):h(t).userInvalidated=!0,t}function m(e){return e===void 0}function y(e,t){var n,r,i;m(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),m(t._i)||(e._i=t._i),m(t._f)||(e._f=t._f),m(t._l)||(e._l=t._l),m(t._strict)||(e._strict=t._strict),m(t._tzm)||(e._tzm=t._tzm),m(t._isUTC)||(e._isUTC=t._isUTC),m(t._offset)||(e._offset=t._offset),m(t._pf)||(e._pf=h(t)),m(t._locale)||(e._locale=t._locale);if(g.length>0)for(n in g)r=g[n],i=t[r],m(i)||(e[r]=i);return e}function w(e){y(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),b===!1&&(b=!0,t.updateOffset(this),b=!1)}function E(e){return e instanceof w||e!=null&&e._isAMomentObject!=null}function S(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function x(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=S(t)),n}function T(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&x(e[o])!==x(t[o]))&&s++;return s+i}function N(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,n){var r=!0;return f(function(){return t.deprecationHandler!=null&&t.deprecationHandler(null,e),r&&(N(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),r=!1),n.apply(this,arguments)},n)}function L(e,n){t.deprecationHandler!=null&&t.deprecationHandler(e,n),k[e]||(N(n),k[e]=!0)}function A(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function O(e){var t,n;for(n in e)t=e[n],A(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function M(e,t){var n=f({},e),r;for(r in t)a(t,r)&&(i(e[r])&&i(t[r])?(n[r]={},f(n[r],e[r]),f(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)a(e,r)&&!a(t,r)&&i(e[r])&&(n[r]=f({},n[r]));return n}function _(e){e!=null&&this.set(e)}function H(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return A(r)?r.call(t,n):r}function j(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function I(){return this._invalidDate}function U(e){return this._ordinal.replace("%d",e)}function W(e,t,n,r){var i=this._relativeTime[n];return A(i)?i(e,t,n,r):i.replace(/%d/i,e)}function X(e,t){var n=this._relativeTime[e>0?"future":"past"];return A(n)?n(t):n.replace(/%s/i,t)}function $(e,t){var n=e.toLowerCase();V[n]=V[n+"s"]=V[t]=e}function J(e){return typeof e=="string"?V[e]||V[e.toLowerCase()]:undefined}function K(e){var t={},n,r;for(r in e)a(e,r)&&(n=J(r),n&&(t[n]=e[r]));return t}function G(e,t){Q[e]=t}function Y(e){var t=[];for(var n in e)t.push({unit:n,priority:Q[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function Z(e,n){return function(r){return r!=null?(tt(this,e,r),t.updateOffset(this,n),this):et(this,e)}}function et(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function tt(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function nt(e){return e=J(e),A(this[e])?this[e]():this}function rt(e,t){if(typeof e=="object"){e=K(e);var n=Y(e);for(var r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else{e=J(e);if(A(this[e]))return this[e](t)}return this}function it(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function ft(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(at[e]=i),t&&(at[t[0]]=function(){return it(i.apply(this,arguments),t[1],t[2])}),n&&(at[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function lt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function ct(e){var t=e.match(st),n,r;for(n=0,r=t.length;n<r;n++)at[t[n]]?t[n]=at[t[n]]:t[n]=lt(t[n]);return function(n){var i="",s;for(s=0;s<r;s++)i+=t[s]instanceof Function?t[s].call(n,e):t[s];return i}}function ht(e,t){return e.isValid()?(t=pt(t,e.localeData()),ut[t]=ut[t]||ct(t),ut[t](e)):e.localeData().invalidDate()}function pt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;ot.lastIndex=0;while(n>=0&&ot.test(e))e=e.replace(ot,r),ot.lastIndex=0,n-=1;return e}function _t(e,t,n){Mt[e]=A(t)?t:function(e,r){return e&&n?n:t}}function Dt(e,t){return a(Mt,e)?Mt[e](t._strict,t._locale):new RegExp(Pt(e))}function Pt(e){return Ht(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function Ht(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function jt(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=x(e)});for(n=0;n<e.length;n++)Bt[e[n]]=r}function Ft(e,t){jt(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function It(e,t,n){t!=null&&a(Bt,e)&&Bt[e](t,n._a,n,e)}function Qt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Zt(e,t){return r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Gt).test(t)?"format":"standalone"][e.month()]}function tn(e,t){return r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Gt.test(t)?"format":"standalone"][e.month()]}function nn(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[];for(r=0;r<12;++r)s=l([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase()}return n?t==="MMM"?(i=Kt.call(this._shortMonthsParse,o),i!==-1?i:null):(i=Kt.call(this._longMonthsParse,o),i!==-1?i:null):t==="MMM"?(i=Kt.call(this._shortMonthsParse,o),i!==-1?i:(i=Kt.call(this._longMonthsParse,o),i!==-1?i:null)):(i=Kt.call(this._longMonthsParse,o),i!==-1?i:(i=Kt.call(this._shortMonthsParse,o),i!==-1?i:null))}function rn(e,t,n){var r,i,s;if(this._monthsParseExact)return nn.call(this,e,t,n);this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=l([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function sn(e,t){var n;if(!e.isValid())return e;if(typeof t=="string")if(/^\d+$/.test(t))t=x(t);else{t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),Qt(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function on(e){return e!=null?(sn(this,e),t.updateOffset(this,!0),this):et(this,"Month")}function un(){return Qt(this.year(),this.month())}function fn(e){return this._monthsParseExact?(a(this,"_monthsRegex")||hn.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=an),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function cn(e){return this._monthsParseExact?(a(this,"_monthsRegex")||hn.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=ln),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function hn(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i,s;for(i=0;i<12;i++)s=l([2e3,i]),t.push(this.monthsShort(s,"")),n.push(this.months(s,"")),r.push(this.months(s,"")),r.push(this.monthsShort(s,""));t.sort(e),n.sort(e),r.sort(e);for(i=0;i<12;i++)t[i]=Ht(t[i]),n[i]=Ht(n[i]);for(i=0;i<24;i++)r[i]=Ht(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function pn(e){return dn(e)?366:365}function dn(e){return e%4===0&&e%100!==0||e%400===0}function mn(){return dn(this.year())}function gn(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<100&&e>=0&&isFinite(u.getFullYear())&&u.setFullYear(e),u}function yn(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function bn(e,t,n){var r=7+t-n,i=(7+yn(e,0,r).getUTCDay()-t)%7;return-i+r-1}function wn(e,t,n,r,i){var s=(7+n-r)%7,o=bn(e,r,i),u=1+7*(t-1)+s+o,a,f;return u<=0?(a=e-1,f=pn(a)+u):u>pn(e)?(a=e+1,f=u-pn(e)):(a=e,f=u),{year:a,dayOfYear:f}}function En(e,t,n){var r=bn(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,o;return i<1?(o=e.year()-1,s=i+Sn(o,t,n)):i>Sn(e.year(),t,n)?(s=i-Sn(e.year(),t,n),o=e.year()+1):(o=e.year(),s=i),{week:s,year:o}}function Sn(e,t,n){var r=bn(e,t,n),i=bn(e+1,t,n);return(pn(e)-r+i)/7}function xn(e){return En(e,this._week.dow,this._week.doy).week}function Nn(){return this._week.dow}function Cn(){return this._week.doy}function kn(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Ln(e){var t=En(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function An(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function On(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function _n(e,t){return r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function Pn(e){return this._weekdaysShort[e.day()]}function Bn(e){return this._weekdaysMin[e.day()]}function jn(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[];for(r=0;r<7;++r)s=l([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase()}return n?t==="dddd"?(i=Kt.call(this._weekdaysParse,o),i!==-1?i:null):t==="ddd"?(i=Kt.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=Kt.call(this._minWeekdaysParse,o),i!==-1?i:null):t==="dddd"?(i=Kt.call(this._weekdaysParse,o),i!==-1?i:(i=Kt.call(this._shortWeekdaysParse,o),i!==-1?i:(i=Kt.call(this._minWeekdaysParse,o),i!==-1?i:null))):t==="ddd"?(i=Kt.call(this._shortWeekdaysParse,o),i!==-1?i:(i=Kt.call(this._weekdaysParse,o),i!==-1?i:(i=Kt.call(this._minWeekdaysParse,o),i!==-1?i:null))):(i=Kt.call(this._minWeekdaysParse,o),i!==-1?i:(i=Kt.call(this._weekdaysParse,o),i!==-1?i:(i=Kt.call(this._shortWeekdaysParse,o),i!==-1?i:null)))}function Fn(e,t,n){var r,i,s;if(this._weekdaysParseExact)return jn.call(this,e,t,n);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(r=0;r<7;r++){i=l([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function In(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=An(e,this.localeData()),this.add(e-t,"d")):t}function qn(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Rn(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=On(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function zn(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Jn.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Un),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Xn(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Jn.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Wn),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $n(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Jn.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Vn),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Jn(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i=[],s,o,u,a,f;for(s=0;s<7;s++)o=l([2e3,1]).day(s),u=this.weekdaysMin(o,""),a=this.weekdaysShort(o,""),f=this.weekdays(o,""),t.push(u),n.push(a),r.push(f),i.push(u),i.push(a),i.push(f);t.sort(e),n.sort(e),r.sort(e),i.sort(e);for(s=0;s<7;s++)n[s]=Ht(n[s]),r[s]=Ht(r[s]),i[s]=Ht(i[s]);this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Kn(){return this.hours()%12||12}function Qn(){return this.hours()||24}function Gn(e,t){ft(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Yn(e,t){return t._meridiemParse}function Zn(e){return(e+"").toLowerCase().charAt(0)==="p"}function tr(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function or(e){return e?e.toLowerCase().replace("_","-"):e}function ur(e){var t=0,n,r,i,s;while(t<e.length){s=or(e[t]).split("-"),n=s.length,r=or(e[t+1]),r=r?r.split("-"):null;while(n>0){i=ar(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&T(s,r,!0)>=n-1)break;n--}t++}return null}function ar(e){var t=null;if(!ir[e]&&typeof module!="undefined"&&module&&module.exports)try{t=sr._abbr,require("./locale/"+e),fr(t)}catch(n){}return ir[e]}function fr(e,t){var n;return e&&(m(t)?n=hr(e):n=lr(e,t),n&&(sr=n)),sr._abbr}function lr(e,t){if(t!==null){var n=rr;return t.abbr=e,ir[e]!=null?(L("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ir[e]._config):t.parentLocale!=null&&(ir[t.parentLocale]!=null?n=ir[t.parentLocale]._config:L("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),ir[e]=new _(M(n,t)),fr(e),ir[e]}return delete ir[e],null}function cr(e,t){if(t!=null){var n,r=rr;ir[e]!=null&&(r=ir[e]._config),t=M(r,t),n=new _(t),n.parentLocale=ir[e],ir[e]=n,fr(e)}else ir[e]!=null&&(ir[e].parentLocale!=null?ir[e]=ir[e].parentLocale:ir[e]!=null&&delete ir[e]);return ir[e]}function hr(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return sr;if(!r(e)){t=ar(e);if(t)return t;e=[e]}return ur(e)}function pr(){return D(ir)}function dr(e){var t,n=e._a;return n&&h(e).overflow===-2&&(t=n[Rt]<0||n[Rt]>11?Rt:n[Ut]<1||n[Ut]>Qt(n[qt],n[Rt])?Ut:n[zt]<0||n[zt]>24||n[zt]===24&&(n[Wt]!==0||n[Xt]!==0||n[Vt]!==0)?zt:n[Wt]<0||n[Wt]>59?Wt:n[Xt]<0||n[Xt]>59?Xt:n[Vt]<0||n[Vt]>999?Vt:-1,h(e)._overflowDayOfYear&&(t<qt||t>Ut)&&(t=Ut),h(e)._overflowWeeks&&t===-1&&(t=$t),h(e)._overflowWeekday&&t===-1&&(t=Jt),h(e).overflow=t),e}function Er(e){var t,n,r=e._i,i=vr.exec(r)||mr.exec(r),s,o,u,a;if(i){h(e).iso=!0;for(t=0,n=yr.length;t<n;t++)if(yr[t][1].exec(i[1])){o=yr[t][0],s=yr[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(i[3]){for(t=0,n=br.length;t<n;t++)if(br[t][1].exec(i[3])){u=(i[2]||" ")+br[t][0];break}if(u==null){e._isValid=!1;return}}if(!s&&u!=null){e._isValid=!1;return}if(i[4]){if(!gr.exec(i[4])){e._isValid=!1;return}a="Z"}e._f=o+(u||"")+(a||""),kr(e)}else e._isValid=!1}function Sr(e){var n=wr.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}Er(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function xr(e,t,n){return e!=null?e:t!=null?t:n}function Tr(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function Nr(e){var t,n,r=[],i,s;if(e._d)return;i=Tr(e),e._w&&e._a[Ut]==null&&e._a[Rt]==null&&Cr(e),e._dayOfYear&&(s=xr(e._a[qt],i[qt]),e._dayOfYear>pn(s)&&(h(e)._overflowDayOfYear=!0),n=yn(s,0,e._dayOfYear),e._a[Rt]=n.getUTCMonth(),e._a[Ut]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[zt]===24&&e._a[Wt]===0&&e._a[Xt]===0&&e._a[Vt]===0&&(e._nextDay=!0,e._a[zt]=0),e._d=(e._useUTC?yn:gn).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[zt]=24)}function Cr(e){var t,n,r,i,s,o,u,a;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){s=1,o=4,n=xr(t.GG,e._a[qt],En(Hr(),1,4).year),r=xr(t.W,1),i=xr(t.E,1);if(i<1||i>7)a=!0}else{s=e._locale._week.dow,o=e._locale._week.doy,n=xr(t.gg,e._a[qt],En(Hr(),s,o).year),r=xr(t.w,1);if(t.d!=null){i=t.d;if(i<0||i>6)a=!0}else if(t.e!=null){i=t.e+s;if(t.e<0||t.e>6)a=!0}else i=s}r<1||r>Sn(n,s,o)?h(e)._overflowWeeks=!0:a!=null?h(e)._overflowWeekday=!0:(u=wn(n,r,i,s,o),e._a[qt]=u.year,e._dayOfYear=u.dayOfYear)}function kr(e){if(e._f===t.ISO_8601){Er(e);return}e._a=[],h(e).empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=pt(e._f,e._locale).match(st)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(Dt(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&h(e).unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),at[o]?(i?h(e).empty=!1:h(e).unusedTokens.push(o),It(o,i,e)):e._strict&&!i&&h(e).unusedTokens.push(o);h(e).charsLeftOver=a-f,n.length>0&&h(e).unusedInput.push(n),e._a[zt]<=12&&h(e).bigHour===!0&&e._a[zt]>0&&(h(e).bigHour=undefined),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[zt]=Lr(e._locale,e._a[zt],e._meridiem),Nr(e),dr(e)}function Lr(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function Ar(e){var t,n,r,i,s;if(e._f.length===0){h(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=y({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],kr(t);if(!d(t))continue;s+=h(t).charsLeftOver,s+=h(t).unusedTokens.length*10,h(t).score=s;if(r==null||s<r)r=s,n=t}f(e,n||t)}function Or(e){if(e._d)return;var t=K(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Nr(e)}function Mr(e){var t=new w(dr(_r(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function _r(e){var t=e._i,n=e._f;return e._locale=e._locale||hr(e._l),t===null||n===undefined&&t===""?v({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),E(t)?new w(dr(t)):(r(n)?Ar(e):o(t)?e._d=t:n?kr(e):Dr(e),d(e)||(e._d=null),e))}function Dr(e){var n=e._i;n===undefined?e._d=new Date(t.now()):o(n)?e._d=new Date(n.valueOf()):typeof n=="string"?Sr(e):r(n)?(e._a=u(n.slice(0),function(e){return parseInt(e,10)}),Nr(e)):typeof n=="object"?Or(e):typeof n=="number"?e._d=new Date(n):t.createFromInputFallback(e)}function Pr(e,t,n,o,u){var a={};typeof n=="boolean"&&(o=n,n=undefined);if(i(e)&&s(e)||r(e)&&e.length===0)e=undefined;return a._isAMomentObject=!0,a._useUTC=a._isUTC=u,a._l=n,a._i=e,a._f=t,a._strict=o,Mr(a)}function Hr(e,t,n,r){return Pr(e,t,n,r,!1)}function Fr(e,t){var n,i;t.length===1&&r(t[0])&&(t=t[0]);if(!t.length)return Hr();n=t[0];for(i=1;i<t.length;++i)if(!t[i].isValid()||t[i][e](n))n=t[i];return n}function Ir(){var e=[].slice.call(arguments,0);return Fr("isBefore",e)}function qr(){var e=[].slice.call(arguments,0);return Fr("isAfter",e)}function Ur(e){var t=K(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*1e3*60*60,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=hr(),this._bubble()}function zr(e){return e instanceof Ur}function Wr(e,t){ft(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+it(~~(e/60),2)+t+it(~~e%60,2)})}function Vr(e,t){var n=(t||"").match(e)||[],r=n[n.length-1]||[],i=(r+"").match(Xr)||["-",0,0],s=+(i[1]*60)+x(i[2]);return i[0]==="+"?s:-s}function $r(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(E(e)||o(e)?e.valueOf():Hr(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):Hr(e).local()}function Jr(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function Kr(e,n){var r=this._offset||0,i;return this.isValid()?e!=null?(typeof e=="string"?e=Vr(Lt,e):Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=Jr(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?di(this,ai(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Jr(this):e!=null?this:NaN}function Qr(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Gr(e){return this.utcOffset(0,e)}function Yr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Jr(this),"m")),this}function Zr(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(Vr(kt,this._i)),this}function ei(e){return this.isValid()?(e=e?Hr(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function ti(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ni(){if(!m(this._isDSTShifted))return this._isDSTShifted;var e={};y(e,this),e=_r(e);if(e._a){var t=e._isUTC?l(e._a):Hr(e._a);this._isDSTShifted=this.isValid()&&T(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function ri(){return this.isValid()?!this._isUTC:!1}function ii(){return this.isValid()?this._isUTC:!1}function si(){return this.isValid()?this._isUTC&&this._offset===0:!1}function ai(e,t){var n=e,r=null,i,s,o;return zr(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=oi.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:x(r[Ut])*i,h:x(r[zt])*i,m:x(r[Wt])*i,s:x(r[Xt])*i,ms:x(r[Vt])*i}):(r=ui.exec(e))?(i=r[1]==="-"?-1:1,n={y:fi(r[2],i),M:fi(r[3],i),w:fi(r[4],i),d:fi(r[5],i),h:fi(r[6],i),m:fi(r[7],i),s:fi(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=ci(Hr(n.from),Hr(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),s=new Ur(n),zr(e)&&a(e,"_locale")&&(s._locale=e._locale),s}function fi(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function li(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function ci(e,t){var n;return!e.isValid()||!t.isValid()?{milliseconds:0,months:0}:(t=$r(t,e),e.isBefore(t)?n=li(e,t):(n=li(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n)}function hi(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function pi(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(L(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=ai(n,r),di(this,i,e),this}}function di(e,n,r,i){var s=n._milliseconds,o=hi(n._days),u=hi(n._months);if(!e.isValid())return;i=i==null?!0:i,s&&e._d.setTime(e._d.valueOf()+s*r),o&&tt(e,"Date",et(e,"Date")+o*r),u&&sn(e,et(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function gi(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function yi(e,n){var r=e||Hr(),i=$r(r,this).startOf("day"),s=t.calendarFormat(this,i)||"sameElse",o=n&&(A(n[s])?n[s].call(this,r):n[s]);return this.format(o||this.localeData().calendar(s,this,Hr(r)))}function bi(){return new w(this)}function wi(e,t){var n=E(e)?e:Hr(e);return!this.isValid()||!n.isValid()?!1:(t=J(m(t)?"millisecond":t),t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Ei(e,t){var n=E(e)?e:Hr(e);return!this.isValid()||!n.isValid()?!1:(t=J(m(t)?"millisecond":t),t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Si(e,t,n,r){return r=r||"()",(r[0]==="("?this.isAfter(e,n):!this.isBefore(e,n))&&(r[1]===")"?this.isBefore(t,n):!this.isAfter(t,n))}function xi(e,t){var n=E(e)?e:Hr(e),r;return!this.isValid()||!n.isValid()?!1:(t=J(t||"millisecond"),t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))}function Ti(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Ni(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Ci(e,t,n){var r,i,s,o;return this.isValid()?(r=$r(e,this),r.isValid()?(i=(r.utcOffset()-this.utcOffset())*6e4,t=J(t),t==="year"||t==="month"||t==="quarter"?(o=ki(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:S(o)):NaN):NaN}function ki(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)||0}function Li(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ai(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?A(Date.prototype.toISOString)?this.toDate().toISOString():ht(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):ht(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Oi(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=ht(this,e);return this.localeData().postformat(n)}function Mi(e,t){return this.isValid()&&(E(e)&&e.isValid()||Hr(e).isValid())?ai({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _i(e){return this.from(Hr(),e)}function Di(e,t){return this.isValid()&&(E(e)&&e.isValid()||Hr(e).isValid())?ai({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Pi(e){return this.to(Hr(),e)}function Hi(e){var t;return e===undefined?this._locale._abbr:(t=hr(e),t!=null&&(this._locale=t),this)}function ji(){return this._locale}function Fi(e){e=J(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function Ii(e){return e=J(e),e===undefined||e==="millisecond"?this:(e==="date"&&(e="day"),this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms"))}function qi(){return this._d.valueOf()-(this._offset||0)*6e4}function Ri(){return Math.floor(this.valueOf()/1e3)}function Ui(){return new Date(this.valueOf())}function zi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Wi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Xi(){return this.isValid()?this.toISOString():null}function Vi(){return d(this)}function $i(){return f({},h(this))}function Ji(){return h(this).overflow}function Ki(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Qi(e,t){ft(0,[e,e.length],0,t)}function Gi(e){return ts.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Yi(e){return ts.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Zi(){return Sn(this.year(),1,4)}function es(){var e=this.localeData()._week;return Sn(this.year(),e.dow,e.doy)}function ts(e,t,n,r,i){var s;return e==null?En(this,r,i).year:(s=Sn(e,r,i),t>s&&(t=s),ns.call(this,e,t,n,r,i))}function ns(e,t,n,r,i){var s=wn(e,t,n,r,i),o=yn(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function rs(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function ss(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function fs(e,t){t[Vt]=x(("0."+e)*1e3)}function cs(){return this._isUTC?"UTC":""}function hs(){return this._isUTC?"Coordinated Universal Time":""}function vs(e){return Hr(e*1e3)}function ms(){return Hr.apply(null,arguments).parseZone()}function gs(e){return e}function bs(e,t,n,r){var i=hr(),s=l().set(r,t);return i[n](s,e)}function ws(e,t,n){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return bs(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=bs(e,r,n,"month");return i}function Es(e,t,n,r){typeof e=="boolean"?(typeof t=="number"&&(n=t,t=undefined),t=t||""):(t=e,n=t,e=!1,typeof t=="number"&&(n=t,t=undefined),t=t||"");var i=hr(),s=e?i._week.dow:0;if(n!=null)return bs(t,(n+s)%7,r,"day");var o,u=[];for(o=0;o<7;o++)u[o]=bs(t,(o+s)%7,r,"day");return u}function Ss(e,t){return ws(e,t,"months")}function xs(e,t){return ws(e,t,"monthsShort")}function Ts(e,t,n){return Es(e,t,n,"weekdays")}function Ns(e,t,n){return Es(e,t,n,"weekdaysShort")}function Cs(e,t,n){return Es(e,t,n,"weekdaysMin")}function Ls(){var e=this._data;return this._milliseconds=ks(this._milliseconds),this._days=ks(this._days),this._months=ks(this._months),e.milliseconds=ks(e.milliseconds),e.seconds=ks(e.seconds),e.minutes=ks(e.minutes),e.hours=ks(e.hours),e.months=ks(e.months),e.years=ks(e.years),this}function As(e,t,n,r){var i=ai(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Os(e,t){return As(this,e,t,1)}function Ms(e,t){return As(this,e,t,-1)}function _s(e){return e<0?Math.floor(e):Math.ceil(e)}function Ds(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=_s(Hs(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=S(e/1e3),r.seconds=i%60,s=S(i/60),r.minutes=s%60,o=S(s/60),r.hours=o%24,t+=S(o/24),a=S(Ps(t)),n+=a,t-=_s(Hs(a)),u=S(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function Ps(e){return e*4800/146097}function Hs(e){return e*146097/4800}function Bs(e){var t,n,r=this._milliseconds;e=J(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+Ps(t),e==="month"?n:n/12;t=this._days+Math.round(Hs(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function js(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+x(this._months/12)*31536e6}function Fs(e){return function(){return this.as(e)}}function $s(e){return e=J(e),this[e+"s"]()}function Js(e){return function(){return this._data[e]}}function no(){return S(this.days()/7)}function so(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function oo(e,t,n){var r=ai(e).abs(),i=ro(r.as("s")),s=ro(r.as("m")),o=ro(r.as("h")),u=ro(r.as("d")),a=ro(r.as("M")),f=ro(r.as("y")),l=i<io.s&&["s",i]||s<=1&&["m"]||s<io.m&&["mm",s]||o<=1&&["h"]||o<io.h&&["hh",o]||u<=1&&["d"]||u<io.d&&["dd",u]||a<=1&&["M"]||a<io.M&&["MM",a]||f<=1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,so.apply(null,l)}function uo(e){return e===undefined?ro:typeof e=="function"?(ro=e,!0):!1}function ao(e,t){return io[e]===undefined?!1:t===undefined?io[e]:(io[e]=t,!0)}function fo(e){var t=this.localeData(),n=oo(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function co(){var e=lo(this._milliseconds)/1e3,t=lo(this._days),n=lo(this._months),r,i,s;r=S(e/60),i=S(r/60),e%=60,r%=60,s=S(n/12),n%=12;var o=s,u=n,a=t,f=i,l=r,c=e,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(f||l||c?"T":"")+(f?f+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var e,p;Array.prototype.some?p=Array.prototype.some:p=function(e){var t=Object(this),n=t.length>>>0;for(var r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var g=t.momentProperties=[],b=!1,k={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var D;Object.keys?D=Object.keys:D=function(e){var t,n=[];for(t in e)a(e,t)&&n.push(t);return n};var P={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},B={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},F="Invalid date",q="%d",R=/\d{1,2}/,z={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},V={},Q={},st=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ot=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ut={},at={},dt=/\d/,vt=/\d\d/,mt=/\d{3}/,gt=/\d{4}/,yt=/[+-]?\d{6}/,bt=/\d\d?/,wt=/\d\d\d\d?/,Et=/\d\d\d\d\d\d?/,St=/\d{1,3}/,xt=/\d{1,4}/,Tt=/[+-]?\d{1,6}/,Nt=/\d+/,Ct=/[+-]?\d+/,kt=/Z|[+-]\d\d:?\d\d/gi,Lt=/Z|[+-]\d\d(?::?\d\d)?/gi,At=/[+-]?\d+(\.\d{1,3})?/,Ot=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Mt={},Bt={},qt=0,Rt=1,Ut=2,zt=3,Wt=4,Xt=5,Vt=6,$t=7,Jt=8,Kt;Array.prototype.indexOf?Kt=Array.prototype.indexOf:Kt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},ft("M",["MM",2],"Mo",function(){return this.month()+1}),ft("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),ft("MMMM",0,0,function(e){return this.localeData().months(this,e)}),$("month","M"),G("month",8),_t("M",bt),_t("MM",bt,vt),_t("MMM",function(e,t){return t.monthsShortRegex(e)}),_t("MMMM",function(e,t){return t.monthsRegex(e)}),jt(["M","MM"],function(e,t){t[Rt]=x(e)-1}),jt(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[Rt]=i:h(n).invalidMonth=e});var Gt=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Yt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),en="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),an=Ot,ln=Ot;ft("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),ft(0,["YY",2],0,function(){return this.year()%100}),ft(0,["YYYY",4],0,"year"),ft(0,["YYYYY",5],0,"year"),ft(0,["YYYYYY",6,!0],0,"year"),$("year","y"),G("year",1),_t("Y",Ct),_t("YY",bt,vt),_t("YYYY",xt,gt),_t("YYYYY",Tt,yt),_t("YYYYYY",Tt,yt),jt(["YYYYY","YYYYYY"],qt),jt("YYYY",function(e,n){n[qt]=e.length===2?t.parseTwoDigitYear(e):x(e)}),jt("YY",function(e,n){n[qt]=t.parseTwoDigitYear(e)}),jt("Y",function(e,t){t[qt]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return x(e)+(x(e)>68?1900:2e3)};var vn=Z("FullYear",!0);ft("w",["ww",2],"wo","week"),ft("W",["WW",2],"Wo","isoWeek"),$("week","w"),$("isoWeek","W"),G("week",5),G("isoWeek",5),_t("w",bt),_t("ww",bt,vt),_t("W",bt),_t("WW",bt,vt),Ft(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=x(e)});var Tn={dow:0,doy:6};ft("d",0,"do","day"),ft("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),ft("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),ft("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),ft("e",0,0,"weekday"),ft("E",0,0,"isoWeekday"),$("day","d"),$("weekday","e"),$("isoWeekday","E"),G("day",11),G("weekday",11),G("isoWeekday",11),_t("d",bt),_t("e",bt),_t("E",bt),_t("dd",function(e,t){return t.weekdaysMinRegex(e)}),_t("ddd",function(e,t){return t.weekdaysShortRegex(e)}),_t("dddd",function(e,t){return t.weekdaysRegex(e)}),Ft(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:h(n).invalidWeekday=e}),Ft(["d","e","E"],function(e,t,n,r){t[r]=x(e)});var Mn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Dn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Hn="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Un=Ot,Wn=Ot,Vn=Ot;ft("H",["HH",2],0,"hour"),ft("h",["hh",2],0,Kn),ft("k",["kk",2],0,Qn),ft("hmm",0,0,function(){return""+Kn.apply(this)+it(this.minutes(),2)}),ft("hmmss",0,0,function(){return""+Kn.apply(this)+it(this.minutes(),2)+it(this.seconds(),2)}),ft("Hmm",0,0,function(){return""+this.hours()+it(this.minutes(),2)}),ft("Hmmss",0,0,function(){return""+this.hours()+it(this.minutes(),2)+it(this.seconds(),2)}),Gn("a",!0),Gn("A",!1),$("hour","h"),G("hour",13),_t("a",Yn),_t("A",Yn),_t("H",bt),_t("h",bt),_t("HH",bt,vt),_t("hh",bt,vt),_t("hmm",wt),_t("hmmss",Et),_t("Hmm",wt),_t("Hmmss",Et),jt(["H","HH"],zt),jt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),jt(["h","hh"],function(e,t,n){t[zt]=x(e),h(n).bigHour=!0}),jt("hmm",function(e,t,n){var r=e.length-2;t[zt]=x(e.substr(0,r)),t[Wt]=x(e.substr(r)),h(n).bigHour=!0}),jt("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[zt]=x(e.substr(0,r)),t[Wt]=x(e.substr(r,2)),t[Xt]=x(e.substr(i)),h(n).bigHour=!0}),jt("Hmm",function(e,t,n){var r=e.length-2;t[zt]=x(e.substr(0,r)),t[Wt]=x(e.substr(r))}),jt("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[zt]=x(e.substr(0,r)),t[Wt]=x(e.substr(r,2)),t[Xt]=x(e.substr(i))});var er=/[ap]\.?m?\.?/i,nr=Z("Hours",!0),rr={calendar:P,longDateFormat:B,invalidDate:F,ordinal:q,ordinalParse:R,relativeTime:z,months:Yt,monthsShort:en,week:Tn,weekdays:Mn,weekdaysMin:Hn,weekdaysShort:Dn,meridiemParse:er},ir={},sr,vr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,mr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,gr=/Z|[+-]\d\d(?::?\d\d)?/,yr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],br=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wr=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=C("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Br=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Hr.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()}),jr=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Hr.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}),Rr=function(){return Date.now?Date.now():+(new Date)};Wr("Z",":"),Wr("ZZ",""),_t("Z",Lt),_t("ZZ",Lt),jt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Vr(Lt,e)});var Xr=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var oi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,ui=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;ai.fn=Ur.prototype;var vi=pi(1,"add"),mi=pi(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Bi=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});ft(0,["gg",2],0,function(){return this.weekYear()%100}),ft(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Qi("gggg","weekYear"),Qi("ggggg","weekYear"),Qi("GGGG","isoWeekYear"),Qi("GGGGG","isoWeekYear"),$("weekYear","gg"),$("isoWeekYear","GG"),G("weekYear",1),G("isoWeekYear",1),_t("G",Ct),_t("g",Ct),_t("GG",bt,vt),_t("gg",bt,vt),_t("GGGG",xt,gt),_t("gggg",xt,gt),_t("GGGGG",Tt,yt),_t("ggggg",Tt,yt),Ft(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=x(e)}),Ft(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),ft("Q",0,"Qo","quarter"),$("quarter","Q"),G("quarter",7),_t("Q",dt),jt("Q",function(e,t){t[Rt]=(x(e)-1)*3}),ft("D",["DD",2],"Do","date"),$("date","D"),G("date",9),_t("D",bt),_t("DD",bt,vt),_t("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),jt(["D","DD"],Ut),jt("Do",function(e,t){t[Ut]=x(e.match(bt)[0],10)});var is=Z("Date",!0);ft("DDD",["DDDD",3],"DDDo","dayOfYear"),$("dayOfYear","DDD"),G("dayOfYear",4),_t("DDD",St),_t("DDDD",mt),jt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=x(e)}),ft("m",["mm",2],0,"minute"),$("minute","m"),G("minute",14),_t("m",bt),_t("mm",bt,vt),jt(["m","mm"],Wt);var os=Z("Minutes",!1);ft("s",["ss",2],0,"second"),$("second","s"),G("second",15),_t("s",bt),_t("ss",bt,vt),jt(["s","ss"],Xt);var us=Z("Seconds",!1);ft("S",0,0,function(){return~~(this.millisecond()/100)}),ft(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ft(0,["SSS",3],0,"millisecond"),ft(0,["SSSS",4],0,function(){return this.millisecond()*10}),ft(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ft(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ft(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ft(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ft(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),$("millisecond","ms"),G("millisecond",16),_t("S",St,dt),_t("SS",St,vt),_t("SSS",St,mt);var as;for(as="SSSS";as.length<=9;as+="S")_t(as,Nt);for(as="S";as.length<=9;as+="S")jt(as,fs);var ls=Z("Milliseconds",!1);ft("z",0,0,"zoneAbbr"),ft("zz",0,0,"zoneName");var ps=w.prototype;ps.add=vi,ps.calendar=yi,ps.clone=bi,ps.diff=Ci,ps.endOf=Ii,ps.format=Oi,ps.from=Mi,ps.fromNow=_i,ps.to=Di,ps.toNow=Pi,ps.get=nt,ps.invalidAt=Ji,ps.isAfter=wi,ps.isBefore=Ei,ps.isBetween=Si,ps.isSame=xi,ps.isSameOrAfter=Ti,ps.isSameOrBefore=Ni,ps.isValid=Vi,ps.lang=Bi,ps.locale=Hi,ps.localeData=ji,ps.max=jr,ps.min=Br,ps.parsingFlags=$i,ps.set=rt,ps.startOf=Fi,ps.subtract=mi,ps.toArray=zi,ps.toObject=Wi,ps.toDate=Ui,ps.toISOString=Ai,ps.toJSON=Xi,ps.toString=Li,ps.unix=Ri,ps.valueOf=qi,ps.creationData=Ki,ps.year=vn,ps.isLeapYear=mn,ps.weekYear=Gi,ps.isoWeekYear=Yi,ps.quarter=ps.quarters=rs,ps.month=on,ps.daysInMonth=un,ps.week=ps.weeks=kn,ps.isoWeek=ps.isoWeeks=Ln,ps.weeksInYear=es,ps.isoWeeksInYear=Zi,ps.date=is,ps.day=ps.days=In,ps.weekday=qn,ps.isoWeekday=Rn,ps.dayOfYear=ss,ps.hour=ps.hours=nr,ps.minute=ps.minutes=os,ps.second=ps.seconds=us,ps.millisecond=ps.milliseconds=ls,ps.utcOffset=Kr,ps.utc=Gr,ps.local=Yr,ps.parseZone=Zr,ps.hasAlignedHourOffset=ei,ps.isDST=ti,ps.isLocal=ri,ps.isUtcOffset=ii,ps.isUtc=si,ps.isUTC=si,ps.zoneAbbr=cs,ps.zoneName=hs,ps.dates=C("dates accessor is deprecated. Use date instead.",is),ps.months=C("months accessor is deprecated. Use month instead",on),ps.years=C("years accessor is deprecated. Use year instead",vn),ps.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Qr),ps.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ni);var ds=ps,ys=_.prototype;ys.calendar=H,ys.longDateFormat=j,ys.invalidDate=I,ys.ordinal=U,ys.preparse=gs,ys.postformat=gs,ys.relativeTime=W,ys.pastFuture=X,ys.set=O,ys.months=Zt,ys.monthsShort=tn,ys.monthsParse=rn,ys.monthsRegex=cn,ys.monthsShortRegex=fn,ys.week=xn,ys.firstDayOfYear=Cn,ys.firstDayOfWeek=Nn,ys.weekdays=_n,ys.weekdaysMin=Bn,ys.weekdaysShort=Pn,ys.weekdaysParse=Fn,ys.weekdaysRegex=zn,ys.weekdaysShortRegex=Xn,ys.weekdaysMinRegex=$n,ys.isPM=Zn,ys.meridiem=tr,fr("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=x(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=C("moment.lang is deprecated. Use moment.locale instead.",fr),t.langData=C("moment.langData is deprecated. Use moment.localeData instead.",hr);var ks=Math.abs,Is=Fs("ms"),qs=Fs("s"),Rs=Fs("m"),Us=Fs("h"),zs=Fs("d"),Ws=Fs("w"),Xs=Fs("M"),Vs=Fs("y"),Ks=Js("milliseconds"),Qs=Js("seconds"),Gs=Js("minutes"),Ys=Js("hours"),Zs=Js("days"),eo=Js("months"),to=Js("years"),ro=Math.round,io={s:45,m:45,h:22,d:26,M:11},lo=Math.abs,ho=Ur.prototype;ho.abs=Ls,ho.add=Os,ho.subtract=Ms,ho.as=Bs,ho.asMilliseconds=Is,ho.asSeconds=qs,ho.asMinutes=Rs,ho.asHours=Us,ho.asDays=zs,ho.asWeeks=Ws,ho.asMonths=Xs,ho.asYears=Vs,ho.valueOf=js,ho._bubble=Ds,ho.get=$s,ho.milliseconds=Ks,ho.seconds=Qs,ho.minutes=Gs,ho.hours=Ys,ho.days=Zs,ho.weeks=no,ho.months=eo,ho.years=to,ho.humanize=fo,ho.toISOString=co,ho.toString=co,ho.toJSON=co,ho.locale=Hi,ho.localeData=ji,ho.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",co),ho.lang=Bi,ft("X",0,0,"unix"),ft("x",0,0,"valueOf"),_t("x",Ct),_t("X",At),jt("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),jt("x",function(e,t,n){n._d=new Date(x(e))}),t.version="2.14.1",n(Hr),t.fn=ds,t.min=Ir,t.max=qr,t.now=Rr,t.utc=l,t.unix=vs,t.months=Ss,t.isDate=o,t.locale=fr,t.invalid=v,t.duration=ai,t.isMoment=E,t.weekdays=Ts,t.parseZone=ms,t.localeData=hr,t.isDuration=zr,t.monthsShort=xs,t.weekdaysMin=Cs,t.defineLocale=lr,t.updateLocale=cr,t.locales=pr,t.weekdaysShort=Ns,t.normalizeUnits=J,t.relativeTimeRounding=uo,t.relativeTimeThreshold=ao,t.calendarFormat=gi,t.prototype=ds;var po=t;return global.moment=po,po}),define("ic",function(){function n(){}function r(e,t){var r=new n;if(e instanceof n)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var i=-1,s=e.length,o;if(t==null)while(++i<s)r.set(i,e[i]);else while(++i<s)r.set(t(o=e[i],i,e),o)}else if(e)for(var u in e)r.set(u,e[u]);return r}function i(){return{}}function s(e,t,n){e[t]=n}function o(){return r()}function u(e,t,n){e.set(t,n)}function a(){}function l(e,t){var n=new a;if(e instanceof a)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(t==null)while(++r<i)n.add(e[r]);else while(++r<i)n.add(t(e[r],r,e))}return n}function h(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new p(n)}function p(e){this._=e}function d(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");r>=0&&(n=e.slice(r+1),e=e.slice(0,r));if(e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function v(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function m(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=c,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}function y(e){return function(t,n){e(t==null?n:null)}}function b(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function E(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function S(e,t){var n=E(e);return function(r,i){return t(n(r),i,e)}}function x(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function O(e,t){return function(n){return e(n.responseText,t)}}function _(e){return e&&e.__esModule?e["default"]:e}function D(e,t){return t={exports:{}},e(t,t.exports),t.exports}function Z(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function et(e,t){return e<<t|e>>>32-t}function tt(e,t,n,r,i,s){return Z(et(Z(Z(t,e),Z(r,s)),i),n)}function nt(e,t,n,r,i,s,o){return tt(t&n|~t&r,e,t,i,s,o)}function rt(e,t,n,r,i,s,o){return tt(t&r|n&~r,e,t,i,s,o)}function it(e,t,n,r,i,s,o){return tt(t^n^r,e,t,i,s,o)}function st(e,t,n,r,i,s,o){return tt(n^(t|~r),e,t,i,s,o)}function ot(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n,r,i,s,o,u=1732584193,a=-271733879,f=-1732584194,l=271733878;for(n=0;n<e.length;n+=16)r=u,i=a,s=f,o=l,u=nt(u,a,f,l,e[n],7,-680876936),l=nt(l,u,a,f,e[n+1],12,-389564586),f=nt(f,l,u,a,e[n+2],17,606105819),a=nt(a,f,l,u,e[n+3],22,-1044525330),u=nt(u,a,f,l,e[n+4],7,-176418897),l=nt(l,u,a,f,e[n+5],12,1200080426),f=nt(f,l,u,a,e[n+6],17,-1473231341),a=nt(a,f,l,u,e[n+7],22,-45705983),u=nt(u,a,f,l,e[n+8],7,1770035416),l=nt(l,u,a,f,e[n+9],12,-1958414417),f=nt(f,l,u,a,e[n+10],17,-42063),a=nt(a,f,l,u,e[n+11],22,-1990404162),u=nt(u,a,f,l,e[n+12],7,1804603682),l=nt(l,u,a,f,e[n+13],12,-40341101),f=nt(f,l,u,a,e[n+14],17,-1502002290),a=nt(a,f,l,u,e[n+15],22,1236535329),u=rt(u,a,f,l,e[n+1],5,-165796510),l=rt(l,u,a,f,e[n+6],9,-1069501632),f=rt(f,l,u,a,e[n+11],14,643717713),a=rt(a,f,l,u,e[n],20,-373897302),u=rt(u,a,f,l,e[n+5],5,-701558691),l=rt(l,u,a,f,e[n+10],9,38016083),f=rt(f,l,u,a,e[n+15],14,-660478335),a=rt(a,f,l,u,e[n+4],20,-405537848),u=rt(u,a,f,l,e[n+9],5,568446438),l=rt(l,u,a,f,e[n+14],9,-1019803690),f=rt(f,l,u,a,e[n+3],14,-187363961),a=rt(a,f,l,u,e[n+8],20,1163531501),u=rt(u,a,f,l,e[n+13],5,-1444681467),l=rt(l,u,a,f,e[n+2],9,-51403784),f=rt(f,l,u,a,e[n+7],14,1735328473),a=rt(a,f,l,u,e[n+12],20,-1926607734),u=it(u,a,f,l,e[n+5],4,-378558),l=it(l,u,a,f,e[n+8],11,-2022574463),f=it(f,l,u,a,e[n+11],16,1839030562),a=it(a,f,l,u,e[n+14],23,-35309556),u=it(u,a,f,l,e[n+1],4,-1530992060),l=it(l,u,a,f,e[n+4],11,1272893353),f=it(f,l,u,a,e[n+7],16,-155497632),a=it(a,f,l,u,e[n+10],23,-1094730640),u=it(u,a,f,l,e[n+13],4,681279174),l=it(l,u,a,f,e[n],11,-358537222),f=it(f,l,u,a,e[n+3],16,-722521979),a=it(a,f,l,u,e[n+6],23,76029189),u=it(u,a,f,l,e[n+9],4,-640364487),l=it(l,u,a,f,e[n+12],11,-421815835),f=it(f,l,u,a,e[n+15],16,530742520),a=it(a,f,l,u,e[n+2],23,-995338651),u=st(u,a,f,l,e[n],6,-198630844),l=st(l,u,a,f,e[n+7],10,1126891415),f=st(f,l,u,a,e[n+14],15,-1416354905),a=st(a,f,l,u,e[n+5],21,-57434055),u=st(u,a,f,l,e[n+12],6,1700485571),l=st(l,u,a,f,e[n+3],10,-1894986606),f=st(f,l,u,a,e[n+10],15,-1051523),a=st(a,f,l,u,e[n+1],21,-2054922799),u=st(u,a,f,l,e[n+8],6,1873313359),l=st(l,u,a,f,e[n+15],10,-30611744),f=st(f,l,u,a,e[n+6],15,-1560198380),a=st(a,f,l,u,e[n+13],21,1309151649),u=st(u,a,f,l,e[n+4],6,-145523070),l=st(l,u,a,f,e[n+11],10,-1120210379),f=st(f,l,u,a,e[n+2],15,718787259),a=st(a,f,l,u,e[n+9],21,-343485551),u=Z(u,r),a=Z(a,i),f=Z(f,s),l=Z(l,o);return[u,a,f,l]}function ut(e){var t,n="",r=e.length*32;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function at(e){var t,n=[];n[(e.length>>2)-1]=undefined;for(t=0;t<n.length;t+=1)n[t]=0;var r=e.length*8;for(t=0;t<r;t+=8)n[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32;return n}function ft(e){return ut(ot(at(e),e.length*8))}function lt(e,t){var n,r=at(e),i=[],s=[],o;i[15]=s[15]=undefined,r.length>16&&(r=ot(r,e.length*8));for(n=0;n<16;n+=1)i[n]=r[n]^909522486,s[n]=r[n]^1549556828;return o=ot(i.concat(at(t)),512+t.length*8),ut(ot(s.concat(o),640))}function ct(e){var t="0123456789abcdef",n="",r,i;for(i=0;i<e.length;i+=1)r=e.charCodeAt(i),n+=t.charAt(r>>>4&15)+t.charAt(r&15);return n}function ht(e){return unescape(encodeURIComponent(e))}function pt(e){return ft(ht(e))}function dt(e){return ct(pt(e))}function vt(e,t){return lt(ht(e),ht(t))}function mt(e,t){return ct(vt(e,t))}function gt(e,t,n){return t?n?vt(t,e):mt(t,e):n?pt(e):dt(e)}function bt(e){return function(n){return n.map(function(t){return e(t.url).map(function(e){return{error:e.error,data:e.data,request:t}})}).compose(W)}}function wt(e,t){return function(r){var i=e(r).timeout(t),s={start:function(e){var n=setTimeout(function(){e.next({error:new Error(yt.TIMEOUT),data:null}),e.complete()},t);i.response(function(t){if(t.statusText instanceof Error){e.next({error:t.statusText,data:null}),e.complete();return}try{return JSON.parse(t.responseText)}catch(n){e.next({error:n,data:null}),e.complete()}}).get(function(t,r){t?(e.next({error:t,data:null}),e.complete()):(clearTimeout(n),e.next({error:null,data:r}),e.complete())})},stop:function(){}};return R.create(s)}}function Et(e){var t=e.fold(function(e,t){var n=e.max===null||e.current>e.max,r=n?e.current:e.max,i=t.timebox,s=t;return{max:r,current:i,transmission:s}},{max:null,current:null,transmission:null}).drop(1),n=t.filter(function(e){return e.transmission.transmission_type!=="complete"}).filter(function(e){return e.max!==null}),r=n.filter(function(e){return e.current-e.max>=5}),i=n.filter(function(e){return e.current>e.max+1&&e.current-e.max<5});return{missed_many$:r,missed_few$:i,transmission_out$:t.map(function(e){return e.transmission})}}function St(e){var t=null,n=r(),i=U.create({start:function(r){e.addListener({next:function(e){t===null?r.next(e):e.transmission_type==="complete"?(n.clear(),r.next(e)):n.size()===0?e.timebox===t+1?r.next(e):e.timebox>t+1&&(xt(n,t+1,e.timebox),n.set(""+e.timebox,e)):n.size()>0&&(e.timebox<t?n.set(""+e.timebox,e):e.timebox>t&&(xt(n,t+1,e.timebox),n.set(""+e.timebox,e))),Tt(n,r),e.timebox>t&&(t=e.timebox)},error:function(e){return r.error(e)},complete:function(){return r.complete()}})},stop:function(){}});return U.merge(i)}function xt(e,t,n){Ct(t,n).reduce(function(e,t){return e.set(""+t,null)},e)}function Tt(e,t){var n=Nt(e.keys()),r=e.get(n);r&&r!==null&&(t.next(r),e.remove(n),Tt(e,t))}function Nt(e){var t=-1,n=e.length,r,i;while(++t<n)if((i=e[t])!=null&&i>=i){r=i;break}while(++t<n)(i=e[t])!=null&&r>i&&(r=i);return r}function Ct(e,t){var n=t-e+1,r=new Array(n),i=-1;while(++i<n)r[i]=e+i;return r}function kt(e,t){var n=t-e+1,r=new Array(n),i=-1;while(++i<n)r[i]=e+i;return r}function Lt(e){var t=e.polling_start$,n=e.polling_stop$,r=e.polling_response$,i=e.interval$,s=e.static_bundle_url$,o=e.polling_request_random_delay,u=R.merge(t,n).compose(Q()).remember(),a=R.merge(u.filter(function(e){return e}),r.mapTo(!0)).debug(function(){return Yu.log("Making next polling request.")}),f=a.compose(Y(i)).map(function(e){var t=e[0],n=e[1];return R.periodic(n+Math.random()*o).take(1)}).flatten(),l=f.compose(Y(u)).filter(function(e){return e[1]}).map(function(e){return e[0]}).compose(Y(s)).map(function(e){var t=e[0],n=e[1];return{url:n,category:"polling"}});return l}function Bt(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return e[t-2]==="="?2:e[t-1]==="="?1:0}function jt(e){var t,n,r,i,s,o,u=e.length;s=Bt(e),o=new _t(u*3/4-s),r=s>0?u-4:u;var a=0;for(t=0,n=0;t<r;t+=4,n+=3)i=Mt[e.charCodeAt(t)]<<18|Mt[e.charCodeAt(t+1)]<<12|Mt[e.charCodeAt(t+2)]<<6|Mt[e.charCodeAt(t+3)],o[a++]=i>>16&255,o[a++]=i>>8&255,o[a++]=i&255;return s===2?(i=Mt[e.charCodeAt(t)]<<2|Mt[e.charCodeAt(t+1)]>>4,o[a++]=i&255):s===1&&(i=Mt[e.charCodeAt(t)]<<10|Mt[e.charCodeAt(t+1)]<<4|Mt[e.charCodeAt(t+2)]>>2,o[a++]=i>>8&255,o[a++]=i&255),o}function Ft(e){return Ot[e>>18&63]+Ot[e>>12&63]+Ot[e>>6&63]+Ot[e&63]}function It(e,t,n){var r,i=[];for(var s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],i.push(Ft(r));return i.join("")}function Vt(e){var t=e.length;while(--t>=0)e[t]=0}function xn(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function kn(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Ln(e){return e<256?bn[e]:bn[256+(e>>>7)]}function An(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function On(e,t,n){e.bi_valid>on-n?(e.bi_buf|=t<<e.bi_valid&65535,An(e,e.bi_buf),e.bi_buf=t>>on-e.bi_valid,e.bi_valid+=n-on):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function Mn(e,t,n){On(e,n[t*2],n[t*2+1])}function _n(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function Dn(e){e.bi_valid===16?(An(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function Pn(e,t){var n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,a=t.stat_desc.max_length,f,l,c,h,p,d,v=0;for(h=0;h<=sn;h++)e.bl_count[h]=0;n[e.heap[e.heap_max]*2+1]=0;for(f=e.heap_max+1;f<rn;f++){l=e.heap[f],h=n[n[l*2+1]*2+1]+1,h>a&&(h=a,v++),n[l*2+1]=h;if(l>r)continue;e.bl_count[h]++,p=0,l>=u&&(p=o[l-u]),d=n[l*2],e.opt_len+=d*(h+p),s&&(e.static_len+=d*(i[l*2+1]+p))}if(v===0)return;do{h=a-1;while(e.bl_count[h]===0)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[a]--,v-=2}while(v>0);for(h=a;h!==0;h--){l=e.bl_count[h];while(l!==0){c=e.heap[--f];if(c>r)continue;n[c*2+1]!==h&&(e.opt_len+=(h-n[c*2+1])*n[c*2],n[c*2+1]=h),l--}}}function Hn(e,t,n){var r=new Array(sn+1),i=0,s,o;for(s=1;s<=sn;s++)r[s]=i=i+n[s-1]<<1;for(o=0;o<=t;o++){var u=e[o*2+1];if(u===0)continue;e[o*2]=_n(r[u]++,u)}}function Bn(){var e,t,n,r,i,s=new Array(sn+1);n=0;for(r=0;r<Yt-1;r++){En[r]=n;for(e=0;e<1<<hn[r];e++)wn[n++]=r}wn[n-1]=r,i=0;for(r=0;r<16;r++){Sn[r]=i;for(e=0;e<1<<pn[r];e++)bn[i++]=r}i>>=7;for(;r<tn;r++){Sn[r]=i<<7;for(e=0;e<1<<pn[r]-7;e++)bn[256+i++]=r}for(t=0;t<=sn;t++)s[t]=0;e=0;while(e<=143)gn[e*2+1]=8,e++,s[8]++;while(e<=255)gn[e*2+1]=9,e++,s[9]++;while(e<=279)gn[e*2+1]=7,e++,s[7]++;while(e<=287)gn[e*2+1]=8,e++,s[8]++;Hn(gn,en+1,s);for(e=0;e<tn;e++)yn[e*2+1]=5,yn[e*2]=_n(e,5);Tn=new xn(gn,hn,Zt+1,en,sn),Nn=new xn(yn,pn,0,tn,sn),Cn=new xn(new Array(0),dn,0,nn,un)}function jn(e){var t;for(t=0;t<en;t++)e.dyn_ltree[t*2]=0;for(t=0;t<tn;t++)e.dyn_dtree[t*2]=0;for(t=0;t<nn;t++)e.bl_tree[t*2]=0;e.dyn_ltree[an*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Fn(e){e.bi_valid>8?An(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function In(e,t,n,r){Fn(e),r&&(An(e,n),An(e,~n)),Rt.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function qn(e,t,n,r){var i=t*2,s=n*2;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function Rn(e,t,n){var r=e.heap[n],i=n<<1;while(i<=e.heap_len){i<e.heap_len&&qn(t,e.heap[i+1],e.heap[i],e.depth)&&i++;if(qn(t,r,e.heap[i],e.depth))break;e.heap[n]=e.heap[i],n=i,i<<=1}e.heap[n]=r}function Un(e,t,n){var r,i,s=0,o,u;if(e.last_lit!==0)do r=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],i=e.pending_buf[e.l_buf+s],s++,r===0?Mn(e,i,t):(o=wn[i],Mn(e,o+Zt+1,t),u=hn[o],u!==0&&(i-=En[o],On(e,i,u)),r--,o=Ln(r),Mn(e,o,n),u=pn[o],u!==0&&(r-=Sn[o],On(e,r,u)));while(s<e.last_lit);Mn(e,an,t)}function zn(e,t){var n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems,o,u,a=-1,f;e.heap_len=0,e.heap_max=rn;for(o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=a=o,e.depth[o]=0):n[o*2+1]=0;while(e.heap_len<2)f=e.heap[++e.heap_len]=a<2?++a:0,n[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=r[f*2+1]);t.max_code=a;for(o=e.heap_len>>1;o>=1;o--)Rn(e,n,o);f=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Rn(e,n,1),u=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=u,n[f*2]=n[o*2]+n[u*2],e.depth[f]=(e.depth[o]>=e.depth[u]?e.depth[o]:e.depth[u])+1,n[o*2+1]=n[u*2+1]=f,e.heap[1]=f++,Rn(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Pn(e,t),Hn(n,a,e.bl_count)}function Wn(e,t,n){var r,i=-1,s,o=t[1],u=0,a=7,f=4;o===0&&(a=138,f=3),t[(n+1)*2+1]=65535;for(r=0;r<=n;r++){s=o,o=t[(r+1)*2+1];if(++u<a&&s===o)continue;u<f?e.bl_tree[s*2]+=u:s!==0?(s!==i&&e.bl_tree[s*2]++,e.bl_tree[fn*2]++):u<=10?e.bl_tree[ln*2]++:e.bl_tree[cn*2]++,u=0,i=s,o===0?(a=138,f=3):s===o?(a=6,f=3):(a=7,f=4)}}function Xn(e,t,n){var r,i=-1,s,o=t[1],u=0,a=7,f=4;o===0&&(a=138,f=3);for(r=0;r<=n;r++){s=o,o=t[(r+1)*2+1];if(++u<a&&s===o)continue;if(u<f){do Mn(e,s,e.bl_tree);while(--u!==0)}else s!==0?(s!==i&&(Mn(e,s,e.bl_tree),u--),Mn(e,fn,e.bl_tree),On(e,u-3,2)):u<=10?(Mn(e,ln,e.bl_tree),On(e,u-3,3)):(Mn(e,cn,e.bl_tree),On(e,u-11,7));u=0,i=s,o===0?(a=138,f=3):s===o?(a=6,f=3):(a=7,f=4)}}function Vn(e){var t;Wn(e,e.dyn_ltree,e.l_desc.max_code),Wn(e,e.dyn_dtree,e.d_desc.max_code),zn(e,e.bl_desc);for(t=nn-1;t>=3;t--)if(e.bl_tree[vn[t]*2+1]!==0)break;return e.opt_len+=3*(t+1)+5+5+4,t}function $n(e,t,n,r){var i;On(e,t-257,5),On(e,n-1,5),On(e,r-4,4);for(i=0;i<r;i++)On(e,e.bl_tree[vn[i]*2+1],3);Xn(e,e.dyn_ltree,t-1),Xn(e,e.dyn_dtree,n-1)}function Jn(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return zt;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return Wt;for(n=32;n<Zt;n++)if(e.dyn_ltree[n*2]!==0)return Wt;return zt}function Qn(e){Kn||(Bn(),Kn=!0),e.l_desc=new kn(e.dyn_ltree,Tn),e.d_desc=new kn(e.dyn_dtree,Nn),e.bl_desc=new kn(e.bl_tree,Cn),e.bi_buf=0,e.bi_valid=0,jn(e)}function Gn(e,t,n,r){On(e,($t<<1)+(r?1:0),3),In(e,t,n,!0)}function Yn(e){On(e,Jt<<1,3),Mn(e,an,gn),Dn(e)}function Zn(e,t,n,r){var i,s,o=0;e.level>0?(e.strm.data_type===Xt&&(e.strm.data_type=Jn(e)),zn(e,e.l_desc),zn(e,e.d_desc),o=Vn(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?Gn(e,t,n,r):e.strategy===Ut||s===i?(On(e,(Jt<<1)+(r?1:0),3),Un(e,gn,yn)):(On(e,(Kt<<1)+(r?1:0),3),$n(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Un(e,e.dyn_ltree,e.dyn_dtree)),jn(e),r&&Fn(e)}function er(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(wn[n]+Zt+1)*2]++,e.dyn_dtree[Ln(t)*2]++),e.last_lit===e.lit_bufsize-1}function ur(e,t,n,r){var i=e&65535|0,s=e>>>16&65535|0,o=0;while(n!==0){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}function fr(){var e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}function cr(e,t,n,r){var i=lr,s=r+n;e^=-1;for(var o=r;o<s;o++)e=e>>>8^i[(e^t[o])&255];return e^-1}function fi(e,t){return e.msg=yr[t],t}function li(e){return(e<<1)-(e>4?9:0)}function ci(e){var t=e.length;while(--t>=0)e[t]=0}function hi(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out);if(n===0)return;dr.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0)}function pi(e,t){vr._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,hi(e.strm)}function di(e,t){e.pending_buf[e.pending++]=t}function vi(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function mi(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,dr.arraySet(t,e.input,e.next_in,i,n),e.state.wrap===1?e.adler=mr(e.adler,t,i,n):e.state.wrap===2&&(e.adler=gr(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function gi(e,t){var n=e.max_chain_length,r=e.strstart,i,s,o=e.prev_length,u=e.nice_match,a=e.strstart>e.w_size-Kr?e.strstart-(e.w_size-Kr):0,f=e.window,l=e.w_mask,c=e.prev,h=e.strstart+Jr,p=f[r+o-1],d=f[r+o];e.prev_length>=e.good_match&&(n>>=2),u>e.lookahead&&(u=e.lookahead);do{i=t;if(f[i+o]!==d||f[i+o-1]!==p||f[i]!==f[r]||f[++i]!==f[r+1])continue;r+=2,i++;do;while(f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&f[++r]===f[++i]&&r<h);s=Jr-(h-r),r=h-Jr;if(s>o){e.match_start=t,o=s;if(s>=u)break;p=f[r+o-1],d=f[r+o]}}while((t=c[t&l])>a&&--n!==0);return o<=e.lookahead?o:e.lookahead}function yi(e){var t=e.w_size,n,r,i,s,o;do{s=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-Kr)){dr.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do i=e.head[--n],e.head[n]=i>=t?i-t:0;while(--r);r=t,n=r;do i=e.prev[--n],e.prev[n]=i>=t?i-t:0;while(--r);s+=t}if(e.strm.avail_in===0)break;r=mi(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=r;if(e.lookahead+e.insert>=$r){o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;while(e.insert){e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+$r-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--;if(e.lookahead+e.insert<$r)break}}}while(e.lookahead<Kr&&e.strm.avail_in!==0)}function bi(e,t){var n=65535;n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);for(;;){if(e.lookahead<=1){yi(e);if(e.lookahead===0&&t===br)return ii;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if(e.strstart===0||e.strstart>=r){e.lookahead=e.strstart-r,e.strstart=r,pi(e,!1);if(e.strm.avail_out===0)return ii}if(e.strstart-e.block_start>=e.w_size-Kr){pi(e,!1);if(e.strm.avail_out===0)return ii}}e.insert=0;if(t===Sr)return pi(e,!0),e.strm.avail_out===0?oi:ui;if(e.strstart>e.block_start){pi(e,!1);if(e.strm.avail_out===0)return ii}return ii}function wi(e,t){var n,r;for(;;){if(e.lookahead<Kr){yi(e);if(e.lookahead<Kr&&t===br)return ii;if(e.lookahead===0)break}n=0,e.lookahead>=$r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$r-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Kr&&(e.match_length=gi(e,n));if(e.match_length>=$r){r=vr._tr_tally(e,e.strstart-e.match_start,e.match_length-$r),e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=$r){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$r-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}else r=vr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r){pi(e,!1);if(e.strm.avail_out===0)return ii}}e.insert=e.strstart<$r-1?e.strstart:$r-1;if(t===Sr)return pi(e,!0),e.strm.avail_out===0?oi:ui;if(e.last_lit){pi(e,!1);if(e.strm.avail_out===0)return ii}return si}function Ei(e,t){var n,r,i;for(;;){if(e.lookahead<Kr){yi(e);if(e.lookahead<Kr&&t===br)return ii;if(e.lookahead===0)break}n=0,e.lookahead>=$r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$r-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=$r-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Kr&&(e.match_length=gi(e,n),e.match_length<=5&&(e.strategy===Or||e.match_length===$r&&e.strstart-e.match_start>4096)&&(e.match_length=$r-1));if(e.prev_length>=$r&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-$r,r=vr._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-$r),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+$r-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);e.match_available=0,e.match_length=$r-1,e.strstart++;if(r){pi(e,!1);if(e.strm.avail_out===0)return ii}}else if(e.match_available){r=vr._tr_tally(e,0,e.window[e.strstart-1]),r&&pi(e,!1),e.strstart++,e.lookahead--;if(e.strm.avail_out===0)return ii}else e.match_available=1,e.strstart++,e.lookahead--}e.match_available&&(r=vr._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<$r-1?e.strstart:$r-1;if(t===Sr)return pi(e,!0),e.strm.avail_out===0?oi:ui;if(e.last_lit){pi(e,!1);if(e.strm.avail_out===0)return ii}return si}function Si(e,t){var n,r,i,s,o=e.window;for(;;){if(e.lookahead<=Jr){yi(e);if(e.lookahead<=Jr&&t===br)return ii;if(e.lookahead===0)break}e.match_length=0;if(e.lookahead>=$r&&e.strstart>0){i=e.strstart-1,r=o[i];if(r===o[++i]&&r===o[++i]&&r===o[++i]){s=e.strstart+Jr;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=Jr-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}}e.match_length>=$r?(n=vr._tr_tally(e,1,e.match_length-$r),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=vr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++);if(n){pi(e,!1);if(e.strm.avail_out===0)return ii}}e.insert=0;if(t===Sr)return pi(e,!0),e.strm.avail_out===0?oi:ui;if(e.last_lit){pi(e,!1);if(e.strm.avail_out===0)return ii}return si}function xi(e,t){var n;for(;;){if(e.lookahead===0){yi(e);if(e.lookahead===0){if(t===br)return ii;break}}e.match_length=0,n=vr._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n){pi(e,!1);if(e.strm.avail_out===0)return ii}}e.insert=0;if(t===Sr)return pi(e,!0),e.strm.avail_out===0?oi:ui;if(e.last_lit){pi(e,!1);if(e.strm.avail_out===0)return ii}return si}function Ti(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function Ci(e){e.window_size=2*e.w_size,ci(e.head),e.max_lazy_match=Ni[e.level].max_lazy,e.good_match=Ni[e.level].good_length,e.nice_match=Ni[e.level].nice_length,e.max_chain_length=Ni[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=$r-1,e.match_available=0,e.ins_h=0}function ki(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Br,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new dr.Buf16(Xr*2),this.dyn_dtree=new dr.Buf16((2*zr+1)*2),this.bl_tree=new dr.Buf16((2*Wr+1)*2),ci(this.dyn_ltree),ci(this.dyn_dtree),ci(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new dr.Buf16(Vr+1),this.heap=new dr.Buf16(2*Ur+1),ci(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new dr.Buf16(2*Ur+1),ci(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Li(e){var t;return!e||!e.state?fi(e,Cr):(e.total_in=e.total_out=0,e.data_type=Hr,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Gr:ni,e.adler=t.wrap===2?0:1,t.last_flush=br,vr._tr_init(t),Tr)}function Ai(e){var t=Li(e);return t===Tr&&Ci(e.state),t}function Oi(e,t){return!e||!e.state?Cr:e.state.wrap!==2?Cr:(e.state.gzhead=t,Tr)}function Mi(e,t,n,r,i,s){if(!e)return Cr;var o=1;t===Ar&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16);if(i<1||i>jr||n!==Br||r<8||r>15||t<0||t>9||s<0||s>Dr)return fi(e,Cr);r===8&&(r=9);var u=new ki;return e.state=u,u.strm=e,u.wrap=o,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+$r-1)/$r),u.window=new dr.Buf8(u.w_size*2),u.head=new dr.Buf16(u.hash_size),u.prev=new dr.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new dr.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=n,Ai(e)}function _i(e,t){return Mi(e,t,Br,Fr,Ir,Pr)}function Di(e,t){var n,r,i,s;if(!e||!e.state||t>xr||t<0)return e?fi(e,Cr):Cr;r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===ri&&t!==Sr)return fi(e,e.avail_out===0?Lr:Cr);r.strm=e,n=r.last_flush,r.last_flush=t;if(r.status===Gr)if(r.wrap===2)e.adler=0,di(r,31),di(r,139),di(r,8),r.gzhead?(di(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),di(r,r.gzhead.time&255),di(r,r.gzhead.time>>8&255),di(r,r.gzhead.time>>16&255),di(r,r.gzhead.time>>24&255),di(r,r.level===9?2:r.strategy>=Mr||r.level<2?4:0),di(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(di(r,r.gzhead.extra.length&255),di(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=gr(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Yr):(di(r,0),di(r,0),di(r,0),di(r,0),di(r,0),di(r,r.level===9?2:r.strategy>=Mr||r.level<2?4:0),di(r,ai),r.status=ni);else{var o=Br+(r.w_bits-8<<4)<<8,u=-1;r.strategy>=Mr||r.level<2?u=0:r.level<6?u=1:r.level===6?u=2:u=3,o|=u<<6,r.strstart!==0&&(o|=Qr),o+=31-o%31,r.status=ni,vi(r,o),r.strstart!==0&&(vi(r,e.adler>>>16),vi(r,e.adler&65535)),e.adler=1}if(r.status===Yr)if(r.gzhead.extra){i=r.pending;while(r.gzindex<(r.gzhead.extra.length&65535)){if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>i&&(e.adler=gr(e.adler,r.pending_buf,r.pending-i,i)),hi(e),i=r.pending;if(r.pending===r.pending_buf_size)break}di(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++}r.gzhead.hcrc&&r.pending>i&&(e.adler=gr(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=Zr)}else r.status=Zr;if(r.status===Zr)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>i&&(e.adler=gr(e.adler,r.pending_buf,r.pending-i,i)),hi(e),i=r.pending;if(r.pending===r.pending_buf_size){s=1;break}}r.gzindex<r.gzhead.name.length?s=r.gzhead.name.charCodeAt(r.gzindex++)&255:s=0,di(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=gr(e.adler,r.pending_buf,r.pending-i,i)),s===0&&(r.gzindex=0,r.status=ei)}else r.status=ei;if(r.status===ei)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size){r.gzhead.hcrc&&r.pending>i&&(e.adler=gr(e.adler,r.pending_buf,r.pending-i,i)),hi(e),i=r.pending;if(r.pending===r.pending_buf_size){s=1;break}}r.gzindex<r.gzhead.comment.length?s=r.gzhead.comment.charCodeAt(r.gzindex++)&255:s=0,di(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=gr(e.adler,r.pending_buf,r.pending-i,i)),s===0&&(r.status=ti)}else r.status=ti;r.status===ti&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&hi(e),r.pending+2<=r.pending_buf_size&&(di(r,e.adler&255),di(r,e.adler>>8&255),e.adler=0,r.status=ni)):r.status=ni);if(r.pending!==0){hi(e);if(e.avail_out===0)return r.last_flush=-1,Tr}else if(e.avail_in===0&&li(t)<=li(n)&&t!==Sr)return fi(e,Lr);if(r.status===ri&&e.avail_in!==0)return fi(e,Lr);if(e.avail_in!==0||r.lookahead!==0||t!==br&&r.status!==ri){var a=r.strategy===Mr?xi(r,t):r.strategy===_r?Si(r,t):Ni[r.level].func(r,t);if(a===oi||a===ui)r.status=ri;if(a===ii||a===oi)return e.avail_out===0&&(r.last_flush=-1),Tr;if(a===si){t===wr?vr._tr_align(r):t!==xr&&(vr._tr_stored_block(r,0,0,!1),t===Er&&(ci(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),hi(e);if(e.avail_out===0)return r.last_flush=-1,Tr}}return t!==Sr?Tr:r.wrap<=0?Nr:(r.wrap===2?(di(r,e.adler&255),di(r,e.adler>>8&255),di(r,e.adler>>16&255),di(r,e.adler>>24&255),di(r,e.total_in&255),di(r,e.total_in>>8&255),di(r,e.total_in>>16&255),di(r,e.total_in>>24&255)):(vi(r,e.adler>>>16),vi(r,e.adler&65535)),hi(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Tr:Nr)}function Pi(e){var t;return!e||!e.state?Cr:(t=e.state.status,t!==Gr&&t!==Yr&&t!==Zr&&t!==ei&&t!==ti&&t!==ni&&t!==ri?fi(e,Cr):(e.state=null,t===ni?fi(e,kr):Tr))}function Hi(e,t){var n=t.length,r,i,s,o,u,a,f,l;if(!e||!e.state)return Cr;r=e.state,o=r.wrap;if(o===2||o===1&&r.status!==Gr||r.lookahead)return Cr;o===1&&(e.adler=mr(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(o===0&&(ci(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new dr.Buf8(r.w_size),dr.arraySet(l,t,n-r.w_size,r.w_size,0),t=l,n=r.w_size),u=e.avail_in,a=e.next_in,f=e.input,e.avail_in=n,e.next_in=0,e.input=t,yi(r);while(r.lookahead>=$r){i=r.strstart,s=r.lookahead-($r-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+$r-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++;while(--s);r.strstart=i,r.lookahead=$r-1,yi(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=$r-1,r.match_available=0,e.next_in=a,e.input=f,e.avail_in=u,r.wrap=o,Tr}function Zi(e,t){if(t<65537)if(e.subarray&&Ji||!e.subarray&&$i)return String.fromCharCode.apply(null,Vi.shrinkBuf(e,t));var n="";for(var r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}function ss(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Es(e){if(!(this instanceof Es))return new Es(e);this.options=as.assign({level:ys,method:ws,chunkSize:16384,windowBits:15,memLevel:8,strategy:bs,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cs,this.strm.avail_out=0;var n=us.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==vs)throw new Error(ls[n]);t.header&&us.deflateSetHeader(this.strm,t.header);if(t.dictionary){var r;typeof t.dictionary=="string"?r=fs.string2buf(t.dictionary):hs.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=us.deflateSetDictionary(this.strm,r);if(n!==vs)throw new Error(ls[n]);this._dict_set=!0}}function Ss(e,t){var n=new Es(t);n.push(e,!0);if(n.err)throw n.msg;return n.result}function xs(e,t){return t=t||{},t.raw=!0,Ss(e,t)}function Ts(e,t){return t=t||{},t.gzip=!0,Ss(e,t)}function $o(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function Jo(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Xs.Buf16(320),this.work=new Xs.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ko(e){var t;return!e||!e.state?so:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=lo,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Xs.Buf32(zo),t.distcode=t.distdyn=new Xs.Buf32(Wo),t.sane=1,t.back=-1,no)}function Qo(e){var t;return!e||!e.state?so:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,Ko(e))}function Go(e,t){var n,r;return!e||!e.state?so:(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?so:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Qo(e)))}function Yo(e,t){var n,r;return e?(r=new Jo,e.state=r,r.window=null,n=Go(e,t),n!==no&&(e.state=null),n):so}function Zo(e){return Yo(e,Vo)}function ru(e){if(eu){var t;tu=new Xs.Buf32(512),nu=new Xs.Buf32(32),t=0;while(t<144)e.lens[t++]=8;while(t<256)e.lens[t++]=9;while(t<280)e.lens[t++]=7;while(t<288)e.lens[t++]=8;Ks(Gs,e.lens,0,288,tu,0,e.work,{bits:9}),t=0;while(t<32)e.lens[t++]=5;Ks(Ys,e.lens,0,32,nu,0,e.work,{bits:5}),eu=!1}e.lencode=tu,e.lenbits=9,e.distcode=nu,e.distbits=5}function iu(e,t,n,r){var i,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Xs.Buf8(s.wsize)),r>=s.wsize?(Xs.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),Xs.arraySet(s.window,t,n-r,i,s.wnext),r-=i,r?(Xs.arraySet(s.window,t,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function su(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m=0,g,y,b,w,E,S,x,T,N=new Xs.Buf8(4),C,k,L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return so;n=e.state,n.mode===So&&(n.mode=xo),o=e.next_out,i=e.output,a=e.avail_out,s=e.next_in,r=e.input,u=e.avail_in,f=n.hold,l=n.bits,c=u,h=a,T=no;e:for(;;)switch(n.mode){case lo:if(n.wrap===0){n.mode=xo;break}while(l<16){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}if(n.wrap&2&&f===35615){n.check=0,N[0]=f&255,N[1]=f>>>8&255,n.check=$s(n.check,N,2,0),f=0,l=0,n.mode=co;break}n.flags=0,n.head&&(n.head.done=!1);if(!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=qo;break}if((f&15)!==fo){e.msg="unknown compression method",n.mode=qo;break}f>>>=4,l-=4,x=(f&15)+8;if(n.wbits===0)n.wbits=x;else if(x>n.wbits){e.msg="invalid window size",n.mode=qo;break}n.dmax=1<<x,e.adler=n.check=1,n.mode=f&512?wo:So,f=0,l=0;break;case co:while(l<16){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.flags=f;if((n.flags&255)!==fo){e.msg="unknown compression method",n.mode=qo;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=qo;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&(N[0]=f&255,N[1]=f>>>8&255,n.check=$s(n.check,N,2,0)),f=0,l=0,n.mode=ho;case ho:while(l<32){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.head&&(n.head.time=f),n.flags&512&&(N[0]=f&255,N[1]=f>>>8&255,N[2]=f>>>16&255,N[3]=f>>>24&255,n.check=$s(n.check,N,4,0)),f=0,l=0,n.mode=po;case po:while(l<16){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&(N[0]=f&255,N[1]=f>>>8&255,n.check=$s(n.check,N,2,0)),f=0,l=0,n.mode=vo;case vo:if(n.flags&1024){while(l<16){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&(N[0]=f&255,N[1]=f>>>8&255,n.check=$s(n.check,N,2,0)),f=0,l=0}else n.head&&(n.head.extra=null);n.mode=mo;case mo:if(n.flags&1024){p=n.length,p>u&&(p=u),p&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Xs.arraySet(n.head.extra,r,s,p,x)),n.flags&512&&(n.check=$s(n.check,r,p,s)),u-=p,s+=p,n.length-=p);if(n.length)break e}n.length=0,n.mode=go;case go:if(n.flags&2048){if(u===0)break e;p=0;do x=r[s+p++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x));while(x&&p<u);n.flags&512&&(n.check=$s(n.check,r,p,s)),u-=p,s+=p;if(x)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=yo;case yo:if(n.flags&4096){if(u===0)break e;p=0;do x=r[s+p++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x));while(x&&p<u);n.flags&512&&(n.check=$s(n.check,r,p,s)),u-=p,s+=p;if(x)break e}else n.head&&(n.head.comment=null);n.mode=bo;case bo:if(n.flags&512){while(l<16){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}if(f!==(n.check&65535)){e.msg="header crc mismatch",n.mode=qo;break}f=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=So;break;case wo:while(l<32){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}e.adler=n.check=$o(f),f=0,l=0,n.mode=Eo;case Eo:if(n.havedict===0)return e.next_out=o,e.avail_out=a,e.next_in=s,e.avail_in=u,n.hold=f,n.bits=l,io;e.adler=n.check=1,n.mode=So;case So:if(t===eo||t===to)break e;case xo:if(n.last){f>>>=l&7,l-=l&7,n.mode=jo;break}while(l<3){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.last=f&1,f>>>=1,l-=1;switch(f&3){case 0:n.mode=To;break;case 1:ru(n),n.mode=Oo;if(t===to){f>>>=2,l-=2;break e}break;case 2:n.mode=ko;break;case 3:e.msg="invalid block type",n.mode=qo}f>>>=2,l-=2;break;case To:f>>>=l&7,l-=l&7;while(l<32){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=qo;break}n.length=f&65535,f=0,l=0,n.mode=No;if(t===to)break e;case No:n.mode=Co;case Co:p=n.length;if(p){p>u&&(p=u),p>a&&(p=a);if(p===0)break e;Xs.arraySet(i,r,s,p,o),u-=p,s+=p,a-=p,o+=p,n.length-=p;break}n.mode=So;break;case ko:while(l<14){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.nlen=(f&31)+257,f>>>=5,l-=5,n.ndist=(f&31)+1,f>>>=5,l-=5,n.ncode=(f&15)+4,f>>>=4,l-=4;if(n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=qo;break}n.have=0,n.mode=Lo;case Lo:while(n.have<n.ncode){while(l<3){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.lens[L[n.have++]]=f&7,f>>>=3,l-=3}while(n.have<19)n.lens[L[n.have++]]=0;n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},T=Ks(Qs,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits;if(T){e.msg="invalid code lengths set",n.mode=qo;break}n.have=0,n.mode=Ao;case Ao:while(n.have<n.nlen+n.ndist){for(;;){m=n.lencode[f&(1<<n.lenbits)-1],g=m>>>24,y=m>>>16&255,b=m&65535;if(g<=l)break;if(u===0)break e;u--,f+=r[s++]<<l,l+=8}if(b<16)f>>>=g,l-=g,n.lens[n.have++]=b;else{if(b===16){k=g+2;while(l<k){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}f>>>=g,l-=g;if(n.have===0){e.msg="invalid bit length repeat",n.mode=qo;break}x=n.lens[n.have-1],p=3+(f&3),f>>>=2,l-=2}else if(b===17){k=g+3;while(l<k){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}f>>>=g,l-=g,x=0,p=3+(f&7),f>>>=3,l-=3}else{k=g+7;while(l<k){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}f>>>=g,l-=g,x=0,p=11+(f&127),f>>>=7,l-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=qo;break}while(p--)n.lens[n.have++]=x}}if(n.mode===qo)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=qo;break}n.lenbits=9,C={bits:n.lenbits},T=Ks(Gs,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits;if(T){e.msg="invalid literal/lengths set",n.mode=qo;break}n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},T=Ks(Ys,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits;if(T){e.msg="invalid distances set",n.mode=qo;break}n.mode=Oo;if(t===to)break e;case Oo:n.mode=Mo;case Mo:if(u>=6&&a>=258){e.next_out=o,e.avail_out=a,e.next_in=s,e.avail_in=u,n.hold=f,n.bits=l,Js(e,h),o=e.next_out,i=e.output,a=e.avail_out,s=e.next_in,r=e.input,u=e.avail_in,f=n.hold,l=n.bits,n.mode===So&&(n.back=-1);break}n.back=0;for(;;){m=n.lencode[f&(1<<n.lenbits)-1],g=m>>>24,y=m>>>16&255,b=m&65535;if(g<=l)break;if(u===0)break e;u--,f+=r[s++]<<l,l+=8}if(y&&(y&240)===0){w=g,E=y,S=b;for(;;){m=n.lencode[S+((f&(1<<w+E)-1)>>w)],g=m>>>24,y=m>>>16&255,b=m&65535;if(w+g<=l)break;if(u===0)break e;u--,f+=r[s++]<<l,l+=8}f>>>=w,l-=w,n.back+=w}f>>>=g,l-=g,n.back+=g,n.length=b;if(y===0){n.mode=Bo;break}if(y&32){n.back=-1,n.mode=So;break}if(y&64){e.msg="invalid literal/length code",n.mode=qo;break}n.extra=y&15,n.mode=_o;case _o:if(n.extra){k=n.extra;while(l<k){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Do;case Do:for(;;){m=n.distcode[f&(1<<n.distbits)-1],g=m>>>24,y=m>>>16&255,b=m&65535;if(g<=l)break;if(u===0)break e;u--,f+=r[s++]<<l,l+=8}if((y&240)===0){w=g,E=y,S=b;for(;;){m=n.distcode[S+((f&(1<<w+E)-1)>>w)],g=m>>>24,y=m>>>16&255,b=m&65535;if(w+g<=l)break;if(u===0)break e;u--,f+=r[s++]<<l,l+=8}f>>>=w,l-=w,n.back+=w}f>>>=g,l-=g,n.back+=g;if(y&64){e.msg="invalid distance code",n.mode=qo;break}n.offset=b,n.extra=y&15,n.mode=Po;case Po:if(n.extra){k=n.extra;while(l<k){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=qo;break}n.mode=Ho;case Ho:if(a===0)break e;p=h-a;if(n.offset>p){p=n.offset-p;if(p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=qo;break}p>n.wnext?(p-=n.wnext,d=n.wsize-p):d=n.wnext-p,p>n.length&&(p=n.length),v=n.window}else v=i,d=o-n.offset,p=n.length;p>a&&(p=a),a-=p,n.length-=p;do i[o++]=v[d++];while(--p);n.length===0&&(n.mode=Mo);break;case Bo:if(a===0)break e;i[o++]=n.length,a--,n.mode=Mo;break;case jo:if(n.wrap){while(l<32){if(u===0)break e;u--,f|=r[s++]<<l,l+=8}h-=a,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?$s(n.check,i,h,o-h):Vs(n.check,i,h,o-h)),h=a;if((n.flags?f:$o(f))!==n.check){e.msg="incorrect data check",n.mode=qo;break}f=0,l=0}n.mode=Fo;case Fo:if(n.wrap&&n.flags){while(l<32){if(u===0)break e;u--,f+=r[s++]<<l,l+=8}if(f!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=qo;break}f=0,l=0}n.mode=Io;case Io:T=ro;break e;case qo:T=oo;break e;case Ro:return uo;case Uo:default:return so}e.next_out=o,e.avail_out=a,e.next_in=s,e.avail_in=u,n.hold=f,n.bits=l;if(n.wsize||h!==e.avail_out&&n.mode<qo&&(n.mode<jo||t!==Zs))if(iu(e,e.output,e.next_out,h-e.avail_out))return n.mode=Ro,uo;return c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?$s(n.check,i,h,e.next_out-h):Vs(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===So?128:0)+(n.mode===Oo||n.mode===No?256:0),(c===0&&h===0||t===Zs)&&T===no&&(T=ao),T}function ou(e){if(!e||!e.state)return so;var t=e.state;return t.window&&(t.window=null),e.state=null,no}function uu(e,t){var n;return!e||!e.state?so:(n=e.state,(n.wrap&2)===0?so:(n.head=t,t.done=!1,no))}function au(e,t){var n=t.length,r,i,s;if(!e||!e.state)return so;r=e.state;if(r.wrap!==0&&r.mode!==Eo)return so;if(r.mode===Eo){i=1,i=Vs(i,t,n,0);if(i!==r.check)return oo}return s=iu(e,t,n,n),s?(r.mode=Ro,uo):(r.havedict=1,no)}function Eu(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function Mu(e){if(!(this instanceof Mu))return new Mu(e);this.options=Tu.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&(!e||!e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Lu,this.strm.avail_out=0;var n=xu.inflateInit2(this.strm,t.windowBits);if(n!==Cu.Z_OK)throw new Error(ku[n]);this.header=new Au,xu.inflateGetHeader(this.strm,this.header)}function _u(e,t){var n=new Mu(t);n.push(e,!0);if(n.err)throw n.msg;return n.result}function Du(e,t){return t=t||{},t.raw=!0,_u(e,t)}function Xu(e){var t=At(e.replace(/\s/g,"")),n=Wu.inflate(t),r=Vu(n);return r}function Vu(e){var t,n,r,i,s,o;t="",r=e.length,n=0;while(n<r){i=e[n++];switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(i);break;case 12:case 13:s=e[n++],t+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=e[n++],o=e[n++],t+=String.fromCharCode((i&15)<<12|(s&63)<<6|(o&63)<<0)}}return t}function $u(e,t,n){return function(i){function o(r){var i=!1;if(!r.error)s.set(r.request.url,0);else if(s.has(r.request.url)){var o=s.get(r.request.url),u=o!==0?o*t:e;u>n?(i=!0,s.set(r.request.url,0)):s.set(r.request.url,u)}else s.set(r.request.url,e);var a=s.get(r.request.url),f={request:r.request,data:r.data,error:r.error,backoff_delay:a,backoff_failure:i};return f}var s=r(),u={start:function(e){i.addListener({next:function(t){var n=o(t);e.next(n)},error:e.error,complete:function(){return e.complete()}})},stop:function(){}};return U.create(u)}}function Ju(e){var t=e.filter(function(e){return e.type==="error"||e.type==="failed"||e.type==="unavailable"}),n=e.filter(function(e){return e.type==="connected"}),r=e.filter(function(e){return e.type==="reload"}),i=e.filter(function(e){return e.type==="message"}).map(function(e){return e.data});return{pusher_error$:t,pusher_connected$:n,pusher_message$:i,pusher_reload$:r}}function Ku(e,t,n,r,i){var s=Qu(e,t,n,r,i);return function(t){var n=t.map(function(){return s()}).compose(W);return n}}function Qu(e,t,n,r,i){return function(){e.isReady=!1;var s=new e(n,i);return r.addListener({next:function(e){s.disconnect()},error:function(e){return console.error(e)},complete:function(){}}),R.create({start:function(e){var n=s.connection;n.bind("failed",function(t){e.next({type:"failed",data:null,error:t})}),n.bind("unavailable",function(t){e.next({type:"unavailable",data:null,error:t})}),n.bind("error",function(t){e.next({type:"error",data:null,error:t})}),n.bind("connected",function(t){e.next({type:"connected",data:null,error:null})}),s.connect();var r=s.subscribe(t);r.bind("message",function(t){e.next({type:"message",data:t,error:null})}),r.bind("reload",function(t){e.next({type:"reload",data:t,error:null})})},stop:function(){}})}}function Zu(e,t,n,r,i,s){var o=t.map(function(e){Yu.log("Missed timeboxes",e);var t=Date.now()-i;return{broker_session_duration:t,datadog_metric_name:"invisible_city.client.missed_many_timeboxes",environment:s==="production"?"prd":"stg",session_start:i,missed_timebox_start:e.max,missed_timebox_end:e.current}}),u=t.compose(Y(n)).map(function(e){var t=e[0],n=e[1],r=Math.random()*Yu.timebox_static_request_random_delay;return U.of(n).compose(J(r))}).compose(W).map(function(e){return{url:e,category:"missed-many"}}),a=e.map(function(e){Yu.log("Missed timeboxes",e);var t=Date.now()-i;return{broker_session_duration:t,datadog_metric_name:"invisible_city.client.missed_few_timeboxes",environment:s==="production"?"prd":"stg",session_start:i,missed_timebox_start:e.max,missed_timebox_end:e.current}}),f=e.map(function(e){var t=e.current,n=e.max,r=t-n,i=kt(n+1,t-1);return U.fromArray(i)}).compose(W).compose(Y(r)).map(function(e){var t=e[0],n=e[1];return n(t)}).map(function(e){return e+"?reason=pointer"}).map(function(e){var t=Math.random()*Yu.timebox_request_random_delay;return U.of(e).compose(J(t))}).compose(W).map(function(e){return{url:e,category:"missed-few"}}),l=U.merge(u,f),c=U.merge(a,o);return{request$:l,metric$:c}}function ea(e){return typeof e.transmission_type!="undefined"&&e.transmission_type==="pointer"}function ta(e){Yu.request(Yu.metrics_endpoint).header("Content-Type","application/json").post(JSON.stringify(e))}function na(e){var t=function(e,t){return e<t?-1:e===t?0:1};return e.sort(t),JSON.stringify(e)}function ra(){}function ia(e,t,n){var i=t.reduce(function(e,t){return e.set(t,{state:r(),create:r(),update:r()}),e},r());return e.map(function(e){return e.contents}).map(function(e){return sa(e,n)}).fold(function(e,t){return t(e)},i).drop(1)}function sa(e,t){return function(n){n.each(function(e){e.create=r(),e.update=r()});for(var i in e)if(n.has(i)!==!1){var s=n.get(i),o=e[i];o.forEach(ua(s,t))}return n}}function ua(e,t){t===void 0&&(t=oa);var n=e.state;return function(n){if(e.state.has(n.guid)===!1){var r=t.unwrap(n);e.create.set(r.guid,r),e.state.set(r.guid,r)}else{var i=e.state.get(n.guid),s=t.wrap(i),o=void 0;n.merge_strategy==="mergepatch"?o=!0:n.updated_at?n.updated_at!==i.updated_at?o=!0:o=!1:o=!0;var u=n.merge_strategy==="mergepatch"?aa(s,n):n,r=t.unwrap(u);o&&e.update.set(r.guid,r),e.state.set(r.guid,r)}}}function aa(e,t){if(t===null||typeof t!="object"||Array.isArray(t))return t;if(e===null||typeof e!="object"||Array.isArray(e))e={};var n=Object.keys(t);for(var r=0;r<n.length;r++){var i=n[r];t[i]===null?e.hasOwnProperty(i)&&delete e[i]:e[i]=aa(e[i],t[i])}return e}function fa(e,t){return e.reduce(function(e,n){var r=t.map(function(e){var t=e.get(n);return t});return e.set(n,r),e},r())}var e,t="$";n.prototype=r.prototype={constructor:n,has:function(e){return t+e in this},get:function(e){return this[t+e]},set:function(e,n){return this[t+e]=n,this},remove:function(e){var n=t+e;return n in this&&delete this[n]},clear:function(){for(var e in this)e[0]===t&&delete this[e]},keys:function(){var e=[];for(var n in this)n[0]===t&&e.push(n.slice(1));return e},values:function(){var e=[];for(var n in this)n[0]===t&&e.push(this[n]);return e},entries:function(){var e=[];for(var n in this)n[0]===t&&e.push({key:n.slice(1),value:this[n]});return e},size:function(){var e=0;for(var n in this)n[0]===t&&++e;return e},empty:function(){for(var e in this)if(e[0]===t)return!1;return!0},each:function(e){for(var n in this)n[0]===t&&e(this[n],n.slice(1),this)}};var f=r.prototype;a.prototype=l.prototype={constructor:a,has:f.has,add:function(e){return e+="",this[t+e]=e,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};var c={value:function(){}};p.prototype=h.prototype={constructor:p,on:function(e,t){var n=this._,r=d(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){while(++s<o)if((i=(e=r[s]).type)&&(i=v(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);while(++s<o)if(i=(e=r[s]).type)n[i]=m(n[i],e.name,t);else if(t==null)for(i in n)n[i]=m(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new p(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};var g=function(e,t){function d(e){var t=u.status,r;if(!t&&b(u)||t>=200&&t<300||t===304){if(l)try{r=l.call(n,u)}catch(s){i.call("error",n,s);return}else r=u;i.call("load",n,r)}else i.call("error",n,e)}var n,i=h("beforesend","progress","load","error"),s,o=r(),u=new XMLHttpRequest,a=null,f=null,l,c,p=0;typeof XDomainRequest!="undefined"&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(e)&&(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=u.ontimeout=d:u.onreadystatechange=function(e){u.readyState>3&&d(e)},u.onprogress=function(e){i.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?o.get(e):(t==null?o.remove(e):o.set(e,t+""),n)},mimeType:function(e){return arguments.length?(s=e==null?null:e+"",n):s},responseType:function(e){return arguments.length?(c=e,n):c},timeout:function(e){return arguments.length?(p=+e,n):p},user:function(e){return arguments.length<1?a:(a=e==null?null:e+"",n)},password:function(e){return arguments.length<1?f:(f=e==null?null:e+"",n)},response:function(e){return l=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,r,l){return u.open(t,e,!0,a,f),s!=null&&!o.has("accept")&&o.set("accept",s+",*/*"),u.setRequestHeader&&o.each(function(e,t){u.setRequestHeader(t,e)}),s!=null&&u.overrideMimeType&&u.overrideMimeType(s),c!=null&&(u.responseType=c),p>0&&(u.timeout=p),l==null&&typeof r=="function"&&(l=r,r=null),l!=null&&l.length===1&&(l=y(l)),l!=null&&n.on("error",l).on("load",function(e){l(null,e)}),i.call("beforesend",n,u),u.send(r==null?null:r),n},abort:function(){return u.abort(),n},on:function(){var e=i.on.apply(i,arguments);return e===i?n:e}};if(t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return n.get(t)}return n},w=function(e,t){return function(n,r){var i=g(n).mimeType(e).response(t);if(r!=null){if(typeof r!="function")throw new Error("invalid callback: "+r);return i.get(r)}return i}};w("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),w("application/json",function(e){return JSON.parse(e.responseText)}),w("text/plain",function(e){return e.responseText}),w("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t});var T=function(e){function r(e,t){var n,r,s=i(e,function(e,i){if(n)return n(e,i-1);r=e,n=t?S(e,t):E(e)});return s.columns=r,s}function i(e,t){function c(){if(u>=o)return i;if(l)return l=!1,r;var t=u,s;if(e.charCodeAt(t)===34){var a=t;while(a++<o)if(e.charCodeAt(a)===34){if(e.charCodeAt(a+1)!==34)break;++a}return u=a+2,s=e.charCodeAt(a+1),s===13?(l=!0,e.charCodeAt(a+2)===10&&++u):s===10&&(l=!0),e.slice(t+1,a).replace(/""/g,'"')}while(u<o){var f=1;s=e.charCodeAt(u++);if(s===10)l=!0;else if(s===13)l=!0,e.charCodeAt(u)===10&&(++u,++f);else if(s!==n)continue;return e.slice(t,u-f)}return e.slice(t)}var r={},i={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==i){var h=[];while(f!==r&&f!==i)h.push(f),f=c();if(t&&(h=t(h,a++))==null)continue;s.push(h)}return s}function s(t,n){return n==null&&(n=x(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")}function o(e){return e.map(u).join("\n")}function u(t){return t.map(a).join(e)}function a(e){return e==null?"":t.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}var t=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);return{parse:r,parseRows:i,format:s,formatRows:o}},N=T(","),C=N.parse,k=T("	"),L=k.parse,A=function(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var s=g(n).mimeType(e);return s.row=function(e){return arguments.length?s.response(O(t,r=e)):r},s.row(r),i?s.get(i):s}};A("text/csv",C),A("text/tab-separated-values",L);var M=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},P=D(function(t,n){(function(i,s){typeof n=="object"&&typeof t=="object"?t.exports=s():typeof e=="function"&&e.amd?e([],s):typeof n=="object"?n.Pusher=s():i.Pusher=s()})(M,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){var r=n(1);e.exports=r["default"]},function(e,t,n){function v(e){if(e===null||e===undefined)throw"You must pass your app key when you instantiate Pusher."}var r=n(2),i=n(9),s=n(23),o=n(38),u=n(39),a=n(40),f=n(12),l=n(5),c=n(62),h=n(8),p=n(42),d=function(){function e(t,n){var f=this;v(t),n=n||{},this.key=t,this.config=i.extend(c.getGlobalConfig(),n.cluster?c.getClusterConfig(n.cluster):{},n),this.channels=p["default"].createChannels(),this.global_emitter=new s["default"],this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new o["default"](this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:u["default"].INFO,version:l["default"].VERSION}),this.config.disableStats||(this.timelineSender=p["default"].createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+r["default"].TimelineTransport.name}));var d=function(e){var t=i.extend({},f.config,e);return a.build(r["default"].getDefaultStrategy(t),t)};this.connection=p["default"].createConnectionManager(this.key,i.extend({getStrategy:d,timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){f.subscribeAll(),f.timelineSender&&f.timelineSender.send(f.connection.isEncrypted())}),this.connection.bind("message",function(e){var t=e.event.indexOf("pusher_internal:")===0;if(e.channel){var n=f.channel(e.channel);n&&n.handleEvent(e.event,e.data)}t||f.global_emitter.emit(e.event,e.data)}),this.connection.bind("disconnected",function(){f.channels.disconnect()}),this.connection.bind("error",function(e){h["default"].warn("Error",e)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.log=function(t){e.logToConsole&&window.console&&window.console.log&&window.console.log(t)},e.getClientFeatures=function(){return i.keys(i.filterObject({ws:r["default"].Transports.ws},function(e){return e.isSupported({})}))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){this.connection.connect();if(this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isEncrypted(),t=this.timelineSender;this.timelineSenderTimer=new f.PeriodicTimer(6e4,function(){t.send(e)})}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t){return this.global_emitter.bind(e,t),this},e.prototype.unbind=function(e,t){return this.global_emitter.unbind(e,t),this},e.prototype.bind_all=function(e){return this.global_emitter.bind_all(e),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return this.connection.state==="connected"&&t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e),t&&this.connection.state==="connected"&&t.unsubscribe())},e.prototype.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},e.prototype.isEncrypted=function(){return r["default"].getProtocol()==="https:"?!0:Boolean(this.config.encrypted)},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=r["default"],e.ScriptReceivers=r["default"].ScriptReceivers,e.DependenciesReceivers=r["default"].DependenciesReceivers,e.auth_callbacks=r["default"].auth_callbacks,e}();t.__esModule=!0,t["default"]=d,r["default"].setup(d)},function(e,t,n){var r=n(3),i=n(7),s=n(14),o=n(15),u=n(16),a=n(4),f=n(17),l=n(18),c=n(25),h=n(26),p=n(27),d=n(28),v={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:a.ScriptReceivers,DependenciesReceivers:r.DependenciesReceivers,getDefaultStrategy:h["default"],Transports:l["default"],transportConnectionInitializer:p["default"],HTTPFactory:d["default"],TimelineTransport:f["default"],getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():r.Dependencies.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:i["default"],jsonp:s["default"]}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout(function(){t.onDocumentBody(e)},0)},createJSONPRequest:function(e,t){return new u["default"](e,t)},createScriptRequest:function(e){return new o["default"](e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return undefined}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var e=this.getXHRAPI();return new e},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return c.Network},createWebSocket:function(e){var t=this.getWebSocketAPI();return new t(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(t.indexOf("https:")===0))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&(new e).withCredentials!==undefined},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener:function(e){window.addEventListener!==undefined?window.addEventListener("unload",e,!1):window.attachEvent!==undefined&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){window.addEventListener!==undefined?window.removeEventListener("unload",e,!1):window.detachEvent!==undefined&&window.detachEvent("onunload",e)}};t.__esModule=!0,t["default"]=v},function(e,t,n){var r=n(4),i=n(5),s=n(6);t.DependenciesReceivers=new r.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),t.Dependencies=new s["default"]({cdn_http:i["default"].cdn_http,cdn_https:i["default"].cdn_https,version:i["default"].VERSION,suffix:i["default"].dependency_suffix,receivers:t.DependenciesReceivers})},function(e,t){var n=function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}return e.prototype.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+"["+t+"]",i=!1,s=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=s,{number:t,id:n,name:r,callback:s}},e.prototype.remove=function(e){delete this[e.number]},e}();t.ScriptReceiverFactory=n,t.ScriptReceivers=new n("_pusher_script_","Pusher.ScriptReceivers")},function(e,t){var n={VERSION:"3.2.2",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""};t.__esModule=!0,t["default"]=n},function(e,t,n){var r=n(4),i=n(2),s=function(){function e(e){this.options=e,this.receivers=e.receivers||r.ScriptReceivers,this.loading={}}return e.prototype.load=function(e,t,n){var r=this;if(r.loading[e]&&r.loading[e].length>0)r.loading[e].push(n);else{r.loading[e]=[n];var s=i["default"].createScriptRequest(r.getPath(e,t)),o=r.receivers.create(function(t){r.receivers.remove(o);if(r.loading[e]){var n=r.loading[e];delete r.loading[e];var i=function(e){e||s.cleanup()};for(var u=0;u<n.length;u++)n[u](t,i)}});s.send(o)}},e.prototype.getRoot=function(e){var t,n=i["default"].getDocument().location.protocol;return e&&e.encrypted||n==="https:"?t=this.options.cdn_https:t=this.options.cdn_http,t.replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},e}();t.__esModule=!0,t["default"]=s},function(e,t,n){var r=n(8),i=n(2),s=function(e,t,n){var s=this,o;o=i["default"].createXHR(),o.open("POST",s.options.authEndpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var u in this.authOptions.headers)o.setRequestHeader(u,this.authOptions.headers[u]);return o.onreadystatechange=function(){if(o.readyState===4)if(o.status===200){var e,t=!1;try{e=JSON.parse(o.responseText),t=!0}catch(i){n(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+o.responseText)}t&&n(!1,e)}else r["default"].warn("Couldn't get auth info from your webapp",o.status),n(!0,o.status)},o.send(this.composeQuery(t)),o};t.__esModule=!0,t["default"]=s},function(e,t,n){var r=n(9),i=n(1),s={debug:function(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(!i["default"].log)return;i["default"].log(r.stringify.apply(this,arguments))},warn:function(){var e=[];for(var t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=r.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(n):window.console.log&&window.console.log(n)),i["default"].log&&i["default"].log(n)}};t.__esModule=!0,t["default"]=s},function(e,t,n){function s(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)i[o]&&i[o].constructor&&i[o].constructor===Object?e[o]=s(e[o]||{},i[o]):e[o]=i[o]}return e}function o(){var e=["Pusher"];for(var t=0;t<arguments.length;t++)typeof arguments[t]=="string"?e.push(arguments[t]):e.push(S(arguments[t]));return e.join(" : ")}function u(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function a(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function f(e){var t=[];return a(e,function(e,n){t.push(n)}),t}function l(e){var t=[];return a(e,function(e){t.push(e)}),t}function c(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function h(e,t){var n=[];for(var r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function p(e,t){var n={};return a(e,function(e,r){n[r]=t(e)}),n}function d(e,t){t=t||function(e){return!!e};var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function v(e,t){var n={};return a(e,function(r,i){if(t&&t(r,i,e,n)||Boolean(r))n[i]=r}),n}function m(e){var t=[];return a(e,function(e,n){t.push([n,e])}),t}function g(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function y(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}function b(e){return p(e,function(e){return typeof e=="object"&&(e=S(e)),encodeURIComponent(r["default"](e.toString()))})}function w(e){var t=v(e,function(e){return e!==undefined}),n=h(m(b(t)),i["default"].method("join","=")).join("&");return n}function E(e){var t=[],n=[];return function r(e,i){var s,o,u;switch(typeof e){case"object":if(!e)return null;for(s=0;s<t.length;s+=1)if(t[s]===e)return{$ref:n[s]};t.push(e),n.push(i);if(Object.prototype.toString.apply(e)==="[object Array]"){u=[];for(s=0;s<e.length;s+=1)u[s]=r(e[s],i+"["+s+"]")}else{u={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(u[o]=r(e[o],i+"["+JSON.stringify(o)+"]"))}return u;case"number":case"string":case"boolean":return e}}(e,"$")}function S(e){try{return JSON.stringify(e)}catch(t){return JSON.stringify(E(e))}}var r=n(10),i=n(11);t.extend=s,t.stringify=o,t.arrayIndexOf=u,t.objectApply=a,t.keys=f,t.values=l,t.apply=c,t.map=h,t.mapObject=p,t.filter=d,t.filterObject=v,t.flatten=m,t.any=g,t.all=y,t.encodeParamsObject=b,t.buildQueryString=w,t.decycleObject=E,t.safeJSONStringify=S},function(e,t,n){function r(e){return h(l(e))}t.__esModule=!0,t["default"]=r;var i=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={};for(var u=0,a=s.length;u<a;u++)o[s.charAt(u)]=u;var f=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?i(192|t>>>6)+i(128|t&63):i(224|t>>>12&15)+i(128|t>>>6&63)+i(128|t&63)},l=function(e){return e.replace(/[^\x00-\x7F]/g,f)},c=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[s.charAt(n>>>18),s.charAt(n>>>12&63),t>=2?"=":s.charAt(n>>>6&63),t>=1?"=":s.charAt(n&63)];return r.join("")},h=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,c)}},function(e,t,n){var r=n(12),i={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new r.OneOffTimer(0,e)},method:function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,r.concat(arguments))}}};t.__esModule=!0,t["default"]=i},function(e,t,n){function s(e){window.clearTimeout(e)}function o(e){window.clearInterval(e)}var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(13),u=function(e){function t(t,n){e.call(this,setTimeout,s,t,function(e){return n(),null})}return r(t,e),t}(i["default"]);t.OneOffTimer=u;var a=function(e){function t(t,n){e.call(this,setInterval,o,t,function(e){return n(),e})}return r(t,e),t}(i["default"]);t.PeriodicTimer=a},function(e,t){var n=function(){function e(e,t,n,r){var i=this;this.clear=t,this.timer=e(function(){i.timer&&(i.timer=r(i.timer))},n)}return e.prototype.isRunning=function(){return this.timer!==null},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}();t.__esModule=!0,t["default"]=n},function(e,t,n){var r=n(8),i=function(e,t,n){this.authOptions.headers!==undefined&&r["default"].warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var i=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var s=e.getDocument(),o=s.createElement("script");e.auth_callbacks[i]=function(e){n(!1,e)};var u="Pusher.auth_callbacks['"+i+"']";o.src=this.options.authEndpoint+"?callback="+encodeURIComponent(u)+"&"+this.composeQuery(t);var a=s.getElementsByTagName("head")[0]||s.documentElement;a.insertBefore(o,a.firstChild)};t.__esModule=!0,t["default"]=i},function(e,t){var n=function(){function e(e){this.src=e}return e.prototype.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){(t.script.readyState==="loaded"||t.script.readyState==="complete")&&e.callback(null)},t.script.async===undefined&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}();t.__esModule=!0,t["default"]=n},function(e,t,n){var r=n(9),i=n(2),s=function(){function e(e,t){this.url=e,this.data=t}return e.prototype.send=function(e){if(this.request)return;var t=r.buildQueryString(this.data),n=this.url+"/"+e.number+"?"+t;this.request=i["default"].createScriptRequest(n),this.request.send(e)},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}();t.__esModule=!0,t["default"]=s},function(e,t,n){var r=n(2),i=n(4),s=function(e,t){return function(n,s){var o="http"+(t?"s":"")+"://",u=o+(e.host||e.options.host)+e.options.path,a=r["default"].createJSONPRequest(u,n),f=r["default"].ScriptReceivers.create(function(t,n){i.ScriptReceivers.remove(f),a.cleanup(),n&&n.host&&(e.host=n.host),s&&s(t,n)});a.send(f)}},o={name:"jsonp",getAgent:s};t.__esModule=!0,t["default"]=o},function(e,t,n){var r=n(19),i=n(21),s=n(20),o=n(2),u=n(3),a=n(9),f=new i["default"]({file:"sockjs",urls:s.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==undefined},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:u.Dependencies.getPath("sockjs",{encrypted:t.encrypted}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),l={isSupported:function(e){var t=o["default"].isXDRSupported(e.encrypted);return t}},c=new i["default"](a.extend({},r.streamingConfiguration,l)),h=new i["default"](a.extend({},r.pollingConfiguration,l));r["default"].xdr_streaming=c,r["default"].xdr_polling=h,r["default"].sockjs=f,t.__esModule=!0,t["default"]=r["default"]},function(e,t,n){var r=n(20),i=n(21),s=n(9),o=n(2),u=new i["default"]({urls:r.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(o["default"].getWebSocketAPI())},isSupported:function(){return Boolean(o["default"].getWebSocketAPI())},getSocket:function(e){return o["default"].createWebSocket(e)}}),a={urls:r.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};t.streamingConfiguration=s.extend({getSocket:function(e){return o["default"].HTTPFactory.createStreamingSocket(e)}},a),t.pollingConfiguration=s.extend({getSocket:function(e){return o["default"].HTTPFactory.createPollingSocket(e)}},a);var f={isSupported:function(){return o["default"].isXHRSupported()}},l=new i["default"](s.extend({},t.streamingConfiguration,f)),c=new i["default"](s.extend({},t.pollingConfiguration,f)),h={ws:u,xhr_streaming:l,xhr_polling:c};t.__esModule=!0,t["default"]=h},function(e,t,n){function i(e,t,n){var r=e+(t.encrypted?"s":""),i=t.encrypted?t.hostEncrypted:t.hostUnencrypted;return r+"://"+i+n}function s(e,t){var n="/app/"+e,i="?protocol="+r["default"].PROTOCOL+"&client=js"+"&version="+r["default"].VERSION+(t?"&"+t:"");return n+i}var r=n(5);t.ws={getInitial:function(e,t){return i("ws",t,s(e,"flash=false"))}},t.http={getInitial:function(e,t){var n=(t.httpPath||"/pusher")+s(e);return i("http",t,n)}},t.sockjs={getInitial:function(e,t){return i("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return s(e)}}},function(e,t,n){var r=n(22),i=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,n,i){return new r["default"](this.hooks,e,t,n,i)},e}();t.__esModule=!0,t["default"]=i},function(e,t,n){var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(11),s=n(9),o=n(23),u=n(8),a=n(2),f=function(e){function t(t,n,r,i,s){e.call(this),this.initialize=a["default"].transportConnectionInitializer,this.hooks=t,this.name=n,this.priority=r,this.key=i,this.options=s,this.state="new",this.timeline=s.timeline,this.activityTimeout=s.activityTimeout,this.id=this.timeline.generateUniqueID()}return r(t,e),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var e=this;if(this.socket||this.state!=="initialized")return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(n){return i["default"].defer(function(){e.onError(n),e.changeState("closed")}),!1}return this.bindListeners(),u["default"].debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},t.prototype.send=function(e){var t=this;return this.state==="open"?(i["default"].defer(function(){t.socket&&t.socket.send(e)}),!0):!1},t.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=undefined},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=undefined},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=undefined,this.socket.onerror=undefined,this.socket.onclose=undefined,this.socket.onmessage=undefined,this.supportsPing()&&(this.socket.onactivity=undefined))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return s.extend({cid:this.id},e)},t}(o["default"]);t.__esModule=!0,t["default"]=f},function(e,t,n){var r=n(24),i=function(){function e(e){this.callbacks=new r["default"],this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},e.prototype.bind_all=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},e.prototype.unbind_all=function(e,t){return this.callbacks.remove(e,t),this},e.prototype.emit=function(e,t){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var r=this.callbacks.get(e);if(r&&r.length>0)for(n=0;n<r.length;n++)r[n].fn.call(r[n].context||window,t);else this.failThrough&&this.failThrough(e,t);return this},e}();t.__esModule=!0,t["default"]=i},function(e,t,n){function s(e){return"_"+e}var r=n(9),i=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks[s(e)]},e.prototype.add=function(e,t,n){var r=s(e);this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:t,context:n})},e.prototype.remove=function(e,t,n){if(!e&&!t&&!n){this._callbacks={};return}var i=e?[s(e)]:r.keys(this._callbacks);t||n?this.removeCallback(i,t,n):this.removeAllCallbacks(i)},e.prototype.removeCallback=function(e,t,n){r.apply(e,function(e){this._callbacks[e]=r.filter(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),this._callbacks[e].length===0&&delete this._callbacks[e]},this)},e.prototype.removeAllCallbacks=function(e){r.apply(e,function(e){delete this._callbacks[e]},this)},e}();t.__esModule=!0,t["default"]=i},function(e,t,n){var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(23),s=function(e){function t(){e.call(this);var t=this;window.addEventListener!==undefined&&(window.addEventListener("online",function(){t.emit("online")},!1),window.addEventListener("offline",function(){t.emit("offline")},!1))}return r(t,e),t.prototype.isOnline=function(){return window.navigator.onLine===undefined?!0:window.navigator.onLine},t}(i["default"]);t.NetInfo=s,t.Network=new s},function(e,t){var n=function(e){var t;return e.encrypted?t=[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:t=[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:e.wsHost+":"+e.wsPort,hostEncrypted:e.wsHost+":"+e.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:e.httpHost+":"+e.httpPort,hostEncrypted:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],t,":http_fallback_loop"]]]]]};t.__esModule=!0,t["default"]=n},function(e,t,n){function i(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.encrypted?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),r.Dependencies.load(e.hooks.file,{encrypted:e.options.encrypted},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()}var r=n(3);t.__esModule=!0,t["default"]=i},function(e,t,n){var r=n(29),i=n(31);i["default"].createXDR=function(e,t){return this.createRequest(r["default"],e,t)},t.__esModule=!0,t["default"]=i["default"]},function(e,t,n){var r=n(30),i={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new r.RequestTimedOut),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}};t.__esModule=!0,t["default"]=i},function(e,t){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},r=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.BadEventName=r;var i=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.RequestTimedOut=i;var s=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.TransportPriorityTooLow=s;var o=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.TransportClosed=o;var u=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.UnsupportedTransport=u;var a=function(e){function t(){e.apply(this,arguments)}return n(t,e),t}(Error);t.UnsupportedStrategy=a},function(e,t,n){var r=n(32),i=n(33),s=n(35),o=n(36),u=n(37),a={createStreamingSocket:function(e){return this.createSocket(s["default"],e)},createPollingSocket:function(e){return this.createSocket(o["default"],e)},createSocket:function(e,t){return new i["default"](e,t)},createXHR:function(e,t){return this.createRequest(u["default"],e,t)},createRequest:function(e,t,n){return new r["default"](e,t,n)}};t.__esModule=!0,t["default"]=a},function(e,t,n){var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(2),s=n(23),o=262144,u=function(e){function t(t,n,r){e.call(this),this.hooks=t,this.method=n,this.url=r}return r(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},i["default"].addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(i["default"].removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var n=this.advanceBuffer(t);if(!n)break;this.emit("chunk",{status:e,data:n})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),n=t.indexOf("\n");return n!==-1?(this.position+=n+1,t.slice(0,n)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>o},t}(s["default"]);t.__esModule=!0,t["default"]=u},function(e,t,n){function a(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}function f(e,t){return e.base+"/"+t+"/xhr_send"}function l(e){var t=e.indexOf("?")===-1?"?":"&";return e+t+"t="+ +(new Date)+"&n="+o++}function c(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}function h(e){return Math.floor(Math.random()*e)}function p(e){var t=[];for(var n=0;n<e;n++)t.push(h(32).toString(32));return t.join("")}var r=n(34),i=n(11),s=n(2),o=1,u=function(){function e(e,t){this.hooks=e,this.session=h(1e3)+"/"+p(8),this.location=a(t),this.readyState=r["default"].CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==r["default"].OPEN)return!1;try{return s["default"].createSocketRequest("POST",l(f(this.location,this.session))).start(e),!0}catch(t){return!1}},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,n){this.closeStream(),this.readyState=r["default"].CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})},e.prototype.onChunk=function(e){if(e.status!==200)return;this.readyState===r["default"].OPEN&&this.onActivity();var t,n=e.data.slice(0,1);switch(n){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var i=0;i<t.length;i++)this.onEvent(t[i]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}},e.prototype.onOpen=function(e){this.readyState===r["default"].CONNECTING?(e&&e.hostname&&(this.location.base=c(this.location.base,e.hostname)),this.readyState=r["default"].OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===r["default"].OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=s["default"].createSocketRequest("POST",l(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(t){e.onChunk(t)}),this.stream.bind("finished",function(t){e.hooks.onFinished(e,t)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(t){i["default"].defer(function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();t.__esModule=!0,t["default"]=u},function(e,t){var n;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"})(n||(n={})),t.__esModule=!0,t["default"]=n},function(e,t){var n={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}};t.__esModule=!0,t["default"]=n},function(e,t){var n={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){t===200?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}};t.__esModule=!0,t["default"]=n},function(e,t,n){var r=n(2),i={getRequest:function(e){var t=r["default"].getXHRAPI(),n=new t;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText),e.emit("finished",n.status),e.close()}},n},abortRequest:function(e){e.onreadystatechange=null,e.abort()}};t.__esModule=!0,t["default"]=i},function(e,t,n){var r=n(9),i=n(11),s=n(39),o=function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push(r.extend({},t,{timestamp:i["default"].now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(s["default"].ERROR,e)},e.prototype.info=function(e){this.log(s["default"].INFO,e)},e.prototype.debug=function(e){this.log(s["default"].DEBUG,e)},e.prototype.isEmpty=function(){return this.events.length===0},e.prototype.send=function(e,t){var n=this,i=r.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(i,function(e,r){e||n.sent++,t&&t(e,r)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}();t.__esModule=!0,t["default"]=o},function(e,t){var n;(function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(n||(n={})),t.__esModule=!0,t["default"]=n},function(e,t,n){function g(e){return function(t){return[e.apply(this,arguments),t]}}function b(e){return typeof e=="string"&&e.charAt(0)===":"}function w(e,t){return t[e.slice(1)]}function E(e,t){if(e.length===0)return[[],t];var n=T(e[0],t),r=E(e.slice(1),n[1]);return[[n[0]].concat(r[0]),r[1]]}function S(e,t){if(!b(e))return[e,t];var n=w(e,t);if(n===undefined)throw"Undefined symbol "+e;return[n,t]}function x(e,t){if(b(e[0])){var n=w(e[0],t);if(e.length>1){if(typeof n!="function")throw"Calling non-function "+e[0];var i=[r.extend({},t)].concat(r.map(e.slice(1),function(e){return T(e,r.extend({},t))[0]}));return n.apply(this,i)}return[n,t]}return E(e,t)}function T(e,t){return typeof e=="string"?S(e,t):typeof e=="object"&&e instanceof Array&&e.length>0?x(e,t):[e,t]}var r=n(9),i=n(11),s=n(41),o=n(30),u=n(55),a=n(56),f=n(57),l=n(58),c=n(59),h=n(60),p=n(61),d=n(2),v=d["default"].Transports;t.build=function(e,t){var n=r.extend({},y,t);return T(e,n)[1].strategy};var m={isSupported:function(){return!1},connect:function(e,t){var n=i["default"].defer(function(){t(new o.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},y={extend:function(e,t,n){return[r.extend({},t,n),e]},def:function(e,t,n){if(e[t]!==undefined)throw"Redefining symbol "+t;return e[t]=n,[undefined,e]},def_transport:function(e,t,n,i,s,a){var f=v[n];if(!f)throw new o.UnsupportedTransport(n);var l=(!e.enabledTransports||r.arrayIndexOf(e.enabledTransports,t)!==-1)&&(!e.disabledTransports||r.arrayIndexOf(e.disabledTransports,t)===-1),c;l?c=new u["default"](t,i,a?a.getAssistant(f):f,r.extend({key:e.key,encrypted:e.encrypted,timeline:e.timeline,ignoreNullOrigin:e.ignoreNullOrigin},s)):c=m;var h=e.def(e,t,c)[1];return h.Transports=e.Transports||{},h.Transports[t]=c,[undefined,h]},transport_manager:g(function(e,t){return new s["default"](t)}),sequential:g(function(e,t){var n=Array.prototype.slice.call(arguments,2);return new a["default"](n,t)}),cached:g(function(e,t,n){return new l["default"](n,e.Transports,{ttl:t,timeline:e.timeline,encrypted:e.encrypted})}),first_connected:g(function(e,t){return new p["default"](t)}),best_connected_ever:g(function(){var e=Array.prototype.slice.call(arguments,1);return new f["default"](e)}),delayed:g(function(e,t,n){return new c["default"](n,{delay:t})}),"if":g(function(e,t,n,r){return new h["default"](t,n,r)}),is_supported:g(function(e,t){return function(){return t.isSupported()}})}},function(e,t,n){var r=n(42),i=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||Infinity}return e.prototype.getAssistant=function(e){return r["default"].createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}();t.__esModule=!0,t["default"]=i},function(e,t,n){var r=n(43),i=n(44),s=n(47),o=n(48),u=n(49),a=n(50),f=n(51),l=n(53),c=n(54),h={createChannels:function(){return new c["default"]},createConnectionManager:function(e,t){return new l["default"](e,t)},createChannel:function(e,t){return new f["default"](e,t)},createPrivateChannel:function(e,t){return new a["default"](e,t)},createPresenceChannel:function(e,t){return new u["default"](e,t)},createTimelineSender:function(e,t){return new o["default"](e,t)},createAuthorizer:function(e,t){return new s["default"](e,t)},createHandshake:function(e,t){return new i["default"](e,t)},createAssistantToTheTransportManager:function(e,t,n){return new r["default"](e,t,n)}};t.__esModule=!0,t["default"]=h},function(e,t,n){var r=n(11),i=n(9),s=function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=undefined}return e.prototype.createConnection=function(e,t,n,s){var o=this;s=i.extend({},s,{activityTimeout:this.pingDelay});var u=this.transport.createConnection(e,t,n,s),a=null,f=function(){u.unbind("open",f),u.bind("closed",l),a=r["default"].now()},l=function(e){u.unbind("closed",l);if(e.code===1002||e.code===1003)o.manager.reportDeath();else if(!e.wasClean&&a){var t=r["default"].now()-a;t<2*o.maxPingDelay&&(o.manager.reportDeath(),o.pingDelay=Math.max(t/2,o.minPingDelay))}};return u.bind("open",f),u},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}();t.__esModule=!0,t["default"]=s},function(e,t,n){var r=n(9),i=n(45),s=n(46),o=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){e.unbindListeners();var n;try{n=i.processHandshake(t)}catch(r){e.finish("error",{error:r}),e.transport.close();return}n.action==="connected"?e.finish("connected",{connection:new s["default"](n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var n=i.getCloseAction(t)||"backoff",r=i.getCloseError(t);e.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback(r.extend({transport:this.transport,action:e},t))},e}();t.__esModule=!0,t["default"]=o},function(e,t){t.decodeMessage=function(e){try{var t=JSON.parse(e.data);if(typeof t.data=="string")try{t.data=JSON.parse(t.data)}catch(n){if(!(n instanceof SyntaxError))throw n}return t}catch(n){throw{type:"MessageParseError",error:n,data:e.data}}},t.encodeMessage=function(e){return JSON.stringify(e)},t.processHandshake=function(e){e=t.decodeMessage(e);if(e.event==="pusher:connection_established"){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:e.data.activity_timeout*1e3}}if(e.event==="pusher:error")return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},t.getCloseAction=function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:e.code===4e3?"ssl_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},t.getCloseError=function(e){return e.code!==1e3&&e.code!==1001?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},function(e,t,n){var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(9),s=n(23),o=n(45),u=n(8),a=function(e){function t(t,n){e.call(this),this.id=t,this.transport=n,this.activityTimeout=n.activityTimeout,this.bindListeners()}return r(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),u["default"].debug("Event sent",r),this.send(o.encodeMessage(r))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=o.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(n!==undefined){u["default"].debug("Event recd",n);switch(n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){i.objectApply(t,function(t,n){e.transport.unbind(n,t)})};i.objectApply(t,function(t,n){e.transport.bind(n,t)})},t.prototype.handleCloseEvent=function(e){var t=o.getCloseAction(e),n=o.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t)},t}(s["default"]);t.__esModule=!0,t["default"]=a},function(e,t,n){var r=n(2),i=function(){function e(e,t){this.channel=e;var n=t.authTransport;if(typeof r["default"].getAuthorizers()[n]=="undefined")throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=t,this.authOptions=(t||{}).auth||{}}return e.prototype.composeQuery=function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},e.prototype.authorize=function(t,n){return e.authorizers=e.authorizers||r["default"].getAuthorizers(),e.authorizers[this.type].call(this,r["default"],t,n)},e}();t.__esModule=!0,t["default"]=i},function(e,t,n){var r=n(2),i=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){if(this.timeline.isEmpty())return;this.timeline.send(r["default"].TimelineTransport.getAgent(this,e),t)},e}();t.__esModule=!0,t["default"]=i},function(e,t,n){var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(50),s=n(8),o=n(52),u=function(e){function t(t,n){e.call(this,t,n),this.members=new o["default"]}return r(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,function(e,t){if(!e){if(t.channel_data===undefined){s["default"].warn("Invalid auth response for channel '"+r.name+"', expected 'channel_data' field"),n("Invalid auth response");return}var i=JSON.parse(t.channel_data);r.members.setMyID(i.user_id)}n(e,t)})},t.prototype.handleEvent=function(e,t){switch(e){case"pusher_internal:subscription_succeeded":this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t),this.emit("pusher:subscription_succeeded",this.members));break;case"pusher_internal:member_added":var n=this.members.addMember(t);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var r=this.members.removeMember(t);r&&this.emit("pusher:member_removed",r);break;default:i["default"].prototype.handleEvent.call(this,e,t)}},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(i["default"]);t.__esModule=!0,t["default"]=u},function(e,t,n){var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(42),s=n(51),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.authorize=function(e,t){var n=i["default"].createAuthorizer(this,this.pusher.config);return n.authorize(e,t)},t}(s["default"]);t.__esModule=!0,t["default"]=o},function(e,t,n){var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(23),s=n(30),o=n(8),u=function(e){function t(t,n){e.call(this,function(e,n){o["default"].debug("No callbacks on "+t+" for "+e)}),this.name=t,this.pusher=n,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}return r(t,e),t.prototype.authorize=function(e,t){return t(!1,{})},t.prototype.trigger=function(e,t){if(e.indexOf("client-")!==0)throw new s.BadEventName("Event '"+e+"' does not start with 'client-'");return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1},t.prototype.handleEvent=function(e,t){e.indexOf("pusher_internal:")===0?e==="pusher_internal:subscription_succeeded"&&(this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t)):this.emit(e,t)},t.prototype.subscribe=function(){var e=this;this.subscriptionPending=!0,this.authorize(this.pusher.connection.socket_id,function(t,n){t?e.handleEvent("pusher:subscription_error",n):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t}(i["default"]);t.__esModule=!0,t["default"]=u},function(e,t,n){var r=n(9),i=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;r.objectApply(this.members,function(n,r){e(t.get(r))})},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}();t.__esModule=!0,t["default"]=i},function(e,t,n){var r=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},i=n(23),s=n(12),o=n(8),u=n(9),a=n(2),f=function(e){function t(t,n){var r=this;e.call(this),this.key=t,this.options=n||{},this.state="initialized",this.connection=null,this.encrypted=!!n.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var i=a["default"].getNetwork();i.bind("online",function(){r.timeline.info({netinfo:"online"}),(r.state==="connecting"||r.state==="unavailable")&&r.retryIn(0)}),i.bind("offline",function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()}),this.updateStrategy()}return r(t,e),t.prototype.connect=function(){if(this.connection||this.runner)return;if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()},t.prototype.send=function(e){return this.connection?this.connection.send(e):!1},t.prototype.send_event=function(e,t,n){return this.connection?this.connection.send_event(e,t,n):!1},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isEncrypted=function(){return this.encrypted},t.prototype.startConnecting=function(){var e=this,t=function(n,r){n?e.runner=e.strategy.connect(0,t):r.action==="error"?(e.emit("error",{type:"HandshakeError",error:r.error}),e.timeline.error({handshakeError:r.error})):(e.abortConnecting(),e.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,t)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer();if(this.connection){var e=this.abandonConnection();e.close()}},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new s.OneOffTimer(e||0,function(){t.disconnectInternally(),t.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new s.OneOffTimer(this.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new s.OneOffTimer(this.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)})},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.handlesActivityChecks()||(this.activityTimer=new s.OneOffTimer(this.activityTimeout,function(){e.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(){var e=this;return{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}}},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return u.extend({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||Infinity),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}};return{ssl_only:t(function(){e.encrypted=!0,e.updateStrategy(),e.retryIn(0)}),refused:t(function(){e.disconnect()}),backoff:t(function(){e.retryIn(1e3)}),retry:t(function(){e.retryIn(0)})}},t.prototype.setConnection=function(e){this.connection=e;for(var t in this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(!this.connection)return;this.stopActivityCheck();for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t},t.prototype.updateState=function(e,t){var n=this.state;this.state=e;if(n!==e){var r=e;r==="connected"&&(r+=" with new socket ID "+t.socket_id),o["default"].debug("State changed",n+" -> "+r),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},t}(i["default"]);t.__esModule=!0,t["default"]=f},function(e,t,n){function o(e,t){return e.indexOf("private-")===0?i["default"].createPrivateChannel(e,t):e.indexOf("presence-")===0?i["default"].createPresenceChannel(e,t):i["default"].createChannel(e,t)}var r=n(9),i=n(42),s=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=o(e,t)),this.channels[e]},e.prototype.all=function(){return r.values(this.channels)},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){r.objectApply(this.channels,function(e){e.disconnect()})},e}();t.__esModule=!0,t["default"]=s},function(e,t,n){function a(e,t){return i["default"].defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var r=n(42),i=n(11),s=n(30),o=n(9),u=function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},e.prototype.connect=function(e,t){var n=this;if(!this.isSupported())return a(new s.UnsupportedStrategy,t);if(this.priority<e)return a(new s.TransportPriorityTooLow,t);var i=!1,u=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),f=null,l=function(){u.unbind("initialized",l),u.connect()},c=function(){f=r["default"].createHandshake(u,function(e){i=!0,d(),t(null,e)})},h=function(e){d(),t(e)},p=function(){d();var e;e=o.safeJSONStringify(u),t(new s.TransportClosed(e))},d=function(){u.unbind("initialized",l),u.unbind("open",c),u.unbind("error",h),u.unbind("closed",p)};return u.bind("initialized",l),u.bind("open",c),u.bind("error",h),u.bind("closed",p),u.initialize(),{abort:function(){if(i)return;d(),f?f.close():u.close()},forceMinPriority:function(e){if(i)return;n.priority<e&&(f?f.close():u.close())}}},e}();t.__esModule=!0,t["default"]=u},function(e,t,n){var r=n(9),i=n(11),s=n(12),o=function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return r.any(this.strategies,i["default"].method("isSupported"))},e.prototype.connect=function(e,t){var n=this,r=this.strategies,i=0,s=this.timeout,o=null,u=function(a,f){f?t(null,f):(i+=1,n.loop&&(i%=r.length),i<r.length?(s&&(s*=2,n.timeoutLimit&&(s=Math.min(s,n.timeoutLimit))),o=n.tryStrategy(r[i],e,{timeout:s,failFast:n.failFast},u)):t(!0))};return o=this.tryStrategy(r[i],e,{timeout:s,failFast:this.failFast},u),{abort:function(){o.abort()},forceMinPriority:function(t){e=t,o&&o.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,n,r){var i=null,o=null;return n.timeout>0&&(i=new s.OneOffTimer(n.timeout,function(){o.abort(),r(!0)})),o=e.connect(t,function(e,t){if(e&&i&&i.isRunning()&&!n.failFast)return;i&&i.ensureAborted(),r(e,t)}),{abort:function(){i&&i.ensureAborted(),o.abort()},forceMinPriority:function(e){o.forceMinPriority(e)}}},e}();t.__esModule=!0,t["default"]=o},function(e,t,n){function o(e,t,n){var i=r.map(e,function(e,r,i,s){return e.connect(t,n(r,s))});return{abort:function(){r.apply(i,a)},forceMinPriority:function(e){r.apply(i,function(t){t.forceMinPriority(e)})}}}function u(e){return r.all(e,function(e){return Boolean(e.error)})}function a(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}var r=n(9),i=n(11),s=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return r.any(this.strategies,i["default"].method("isSupported"))},e.prototype.connect=function(e,t){return o(this.strategies,e,function(e,n){return function(i,s){n[e].error=i;if(i){u(n)&&t(!0);return}r.apply(n,function(e){e.forceMinPriority(s.transport.priority)}),t(null,s)}})},e}();t.__esModule=!0,t["default"]=s},function(e,t,n){function a(e){return"pusherTransport"+(e?"Encrypted":"Unencrypted")}function f(e){var t=i["default"].getLocalStorage();if(t)try{var n=t[a(e)];if(n)return JSON.parse(n)}catch(r){c(e)}return null}function l(e,t,n){var s=i["default"].getLocalStorage();if(s)try{s[a(e)]=o.safeJSONStringify({timestamp:r["default"].now(),transport:t,latency:n})}catch(u){}}function c(e){var t=i["default"].getLocalStorage();if(t)try{delete t[a(e)]}catch(n){}}var r=n(11),i=n(2),s=n(56),o=n(9),u=function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.encrypted,i=f(n),o=[this.strategy];if(i&&i.timestamp+this.ttl>=r["default"].now()){var u=this.transports[i.transport];u&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),o.push(new s["default"]([u],{timeout:i.latency*2+1e3,failFast:!0})))}var a=r["default"].now(),h=o.pop().connect(e,function p(i,s){i?(c(n),o.length>0?(a=r["default"].now(),h=o.pop().connect(e,p)):t(i)):(l(n,s.transport.name,r["default"].now()-a),t(null,s))});return{abort:function(){h.abort()},forceMinPriority:function(t){e=t,h&&h.forceMinPriority(t)}}},e}();t.__esModule=!0,t["default"]=u},function(e,t,n){var r=n(12),i=function(){function e(e,t){var n=t.delay;this.strategy=e,this.options={delay:n}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.strategy,i,s=new r.OneOffTimer(this.options.delay,function(){i=n.connect(e,t)});return{abort:function(){s.ensureAborted(),i&&i.abort()},forceMinPriority:function(t){e=t,i&&i.forceMinPriority(t)}}},e}();t.__esModule=!0,t["default"]=i},function(e,t){var n=function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}return e.prototype.isSupported=function(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()},e.prototype.connect=function(e,t){var n=this.test()?this.trueBranch:this.falseBranch;return n.connect(e,t)},e}();t.__esModule=!0,t["default"]=n},function(e,t){var n=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.strategy.connect(e,function(e,r){r&&n.abort(),t(e,r)});return n},e}();t.__esModule=!0,t["default"]=n},function(e,t,n){var r=n(5);t.getGlobalConfig=function(){return{wsHost:r["default"].host,wsPort:r["default"].ws_port,wssPort:r["default"].wss_port,httpHost:r["default"].sockjs_host,httpPort:r["default"].sockjs_http_port,httpsPort:r["default"].sockjs_https_port,httpPath:r["default"].sockjs_path,statsHost:r["default"].stats_host,authEndpoint:r["default"].channel_auth_endpoint,authTransport:r["default"].channel_auth_transport,activity_timeout:r["default"].activity_timeout,pong_timeout:r["default"].pong_timeout,unavailable_timeout:r["default"].unavailable_timeout}},t.getClusterConfig=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}}}])})}),H=_(P),B=D(function(e,t){function n(e){var t,n=e.Symbol;return typeof n=="function"?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}),j=D(function(e,t){function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=B,r=i(n),s;typeof self!="undefined"?s=self:typeof window!="undefined"?s=window:typeof M!="undefined"?s=M:typeof e!="undefined"?s=e:s=Function("return this")();var o=(0,r["default"])(s);t["default"]=o}),F=j,I=D(function(e,t){function s(){}function o(e){var t=e.length,n=Array(t);for(var r=0;r<t;++r)n[r]=e[r];return n}function u(e){e._start=function(t){t.next=t._n,t.error=t._e,t.complete=t._c,this.start(t)},e._stop=e.stop}function a(e,t){return function(r){return e(r)&&t(r)}}var n=M&&M.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},r=F,i={};t.NO_IL={_n:s,_e:s,_c:s};var f=function(){function e(e,t){this._stream=e,this._listener=t}return e.prototype.unsubscribe=function(){this._stream.removeListener(this._listener)},e}();t.Subscription=f;var l=function(){function e(e){this.type="fromObservable",this.ins=e}return e.prototype._start=function(e){this.out=e,this._subscription=this.ins.subscribe(new c(e))},e.prototype._stop=function(){this._subscription.unsubscribe()},e}(),c=function(){function e(e){this._listener=e}return e.prototype.next=function(e){this._listener._n(e)},e.prototype.error=function(e){this._listener._e(e)},e.prototype.complete=function(){this._listener._c()},e}(),h=function(){function e(e){this.type="merge",this.insArr=e,this.out=i,this.ac=0}return e.prototype._start=function(e){this.out=e;var t=this.insArr,n=t.length;this.ac=n;for(var r=0;r<n;r++)t[r]._add(this)},e.prototype._stop=function(){var e=this.insArr,t=e.length;for(var n=0;n<t;n++)e[n]._remove(this);this.out=i},e.prototype._n=function(e){var t=this.out;if(t===i)return;t._n(e)},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){if(--this.ac<=0){var e=this.out;if(e===i)return;e._c()}},e}();t.MergeProducer=h;var p=function(){function e(e,t,n){this.i=e,this.out=t,this.p=n,n.ils.push(this)}return e.prototype._n=function(e){var t=this.p,n=this.out;if(n===i)return;t.up(e,this.i)&&n._n(t.vals)},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){var e=this.p;if(e.out===i)return;--e.Nc===0&&e.out._c()},e}();t.CombineListener=p;var d=function(){function e(e){this.type="combine",this.insArr=e,this.out=i,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(e,t){var n=this.vals[t],r=this.Nn?n===i?--this.Nn:this.Nn:0;return this.vals[t]=e,r===0},e.prototype._start=function(e){this.out=e;var t=this.insArr,n=this.Nc=this.Nn=t.length,r=this.vals=new Array(n);if(n===0)e._n([]),e._c();else for(var s=0;s<n;s++)r[s]=i,t[s]._add(new p(s,e,this))},e.prototype._stop=function(){var e=this.insArr,t=e.length,n=this.ils;for(var r=0;r<t;r++)e[r]._remove(n[r]);this.out=i,this.ils=[],this.vals=[]},e}();t.CombineProducer=d;var v=function(){function e(e){this.type="fromArray",this.a=e}return e.prototype._start=function(e){var t=this.a;for(var n=0,r=t.length;n<r;n++)e._n(t[n]);e._c()},e.prototype._stop=function(){},e}();t.FromArrayProducer=v;var m=function(){function e(e){this.type="fromPromise",this.on=!1,this.p=e}return e.prototype._start=function(e){var t=this;this.on=!0,this.p.then(function(n){t.on&&(e._n(n),e._c())},function(t){e._e(t)}).then(s,function(e){setTimeout(function(){throw e})})},e.prototype._stop=function(){this.on=!1},e}();t.FromPromiseProducer=m;var g=function(){function e(e){this.type="periodic",this.period=e,this.intervalID=-1,this.i=0}return e.prototype._start=function(e){function n(){e._n(t.i++)}var t=this;this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}();t.PeriodicProducer=g;var y=function(){function e(e,t){this.type="debug",this.ins=e,this.out=i,this.s=s,this.l="",typeof t=="string"?this.l=t:typeof t=="function"&&(this.s=t)}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t===i)return;var n=this.s,r=this.l;if(n!==s)try{n(e)}catch(o){t._e(o)}else r?console.log(r+":",e):console.log(e);t._n(e)},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(e===i)return;e._c()},e}();t.DebugOperator=y;var b=function(){function e(e,t){this.type="drop",this.ins=t,this.out=i,this.max=e,this.dropped=0}return e.prototype._start=function(e){this.out=e,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t===i)return;this.dropped++>=this.max&&t._n(e)},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(e===i)return;e._c()},e}();t.DropOperator=b;var w=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(e){this.op.end()},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.end()},e}(),E=function(){function e(e,n){this.type="endWhen",this.ins=n,this.out=i,this.o=e,this.oil=t.NO_IL}return e.prototype._start=function(e){this.out=e,this.o._add(this.oil=new w(e,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=i,this.oil=t.NO_IL},e.prototype.end=function(){var e=this.out;if(e===i)return;e._c()},e.prototype._n=function(e){var t=this.out;if(t===i)return;t._n(e)},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){this.end()},e}();t.EndWhenOperator=E;var S=function(){function e(e,t){this.type="filter",this.ins=t,this.out=i,this.passes=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t===i)return;try{this.passes(e)&&t._n(e)}catch(n){t._e(n)}},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(e===i)return;e._c()},e}();t.FilterOperator=S;var x=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(e){this.out._n(e)},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.inner=i,this.op.less()},e}(),T=function(){function e(e){this.type="flatten",this.ins=e,this.out=i,this.open=!0,this.inner=i,this.il=t.NO_IL}return e.prototype._start=function(e){this.out=e,this.open=!0,this.inner=i,this.il=t.NO_IL,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==i&&this.inner._remove(this.il),this.out=i,this.open=!0,this.inner=i,this.il=t.NO_IL},e.prototype.less=function(){var e=this.out;if(e===i)return;!this.open&&this.inner===i&&e._c()},e.prototype._n=function(e){var n=this.out;if(n===i)return;var r=this,s=r.inner,o=r.il;s!==i&&o!==t.NO_IL&&s._remove(o),(this.inner=e)._add(this.il=new x(n,this))},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){this.open=!1,this.less()},e}();t.FlattenOperator=T;var N=function(){function e(e,t,n){this.type="fold",this.ins=n,this.out=i,this.f=e,this.acc=this.seed=t}return e.prototype._start=function(e){this.out=e,this.acc=this.seed,e._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i,this.acc=this.seed},e.prototype._n=function(e){var t=this.out;if(t===i)return;try{t._n(this.acc=this.f(this.acc,e))}catch(n){t._e(n)}},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(e===i)return;e._c()},e}();t.FoldOperator=N;var C=function(){function e(e){this.type="last",this.ins=e,this.out=i,this.has=!1,this.val=i}return e.prototype._start=function(e){this.out=e,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i,this.val=i},e.prototype._n=function(e){this.has=!0,this.val=e},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(e===i)return;this.has?(e._n(this.val),e._c()):e._e("TODO show proper error")},e}();t.LastOperator=C;var k=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(e){this.out._n(e)},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.inner=i,this.op.less()},e}(),L=function(){function e(e){this.type=e.type+"+flatten",this.ins=e.ins,this.out=i,this.mapOp=e,this.inner=i,this.il=t.NO_IL,this.open=!0}return e.prototype._start=function(e){this.out=e,this.inner=i,this.il=t.NO_IL,this.open=!0,this.mapOp.ins._add(this)},e.prototype._stop=function(){this.mapOp.ins._remove(this),this.inner!==i&&this.inner._remove(this.il),this.out=i,this.inner=i,this.il=t.NO_IL},e.prototype.less=function(){if(!this.open&&this.inner===i){var e=this.out;if(e===i)return;e._c()}},e.prototype._n=function(e){var n=this.out;if(n===i)return;var r=this,s=r.inner,o=r.il,u;try{u=this.mapOp.project(e)}catch(a){n._e(a);return}s!==i&&o!==t.NO_IL&&s._remove(o),(this.inner=u)._add(this.il=new k(n,this))},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){this.open=!1,this.less()},e}();t.MapFlattenOperator=L;var A=function(){function e(e,t){this.type="map",this.ins=t,this.out=i,this.project=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t===i)return;try{t._n(this.project(e))}catch(n){t._e(n)}},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(e===i)return;e._c()},e}();t.MapOperator=A;var O=function(e){function t(t,n,r){e.call(this,n,r),this.type="filter+map",this.passes=t}return n(t,e),t.prototype._n=function(e){if(!this.passes(e))return;var t=this.out;if(t===i)return;try{t._n(this.project(e))}catch(n){t._e(n)}},t}(A);t.FilterMapOperator=O;var _=function(){function e(e){this.type="remember",this.ins=e,this.out=i}return e.prototype._start=function(e){this.out=e,this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=i},e}();t.RememberOperator=_;var D=function(){function e(e,t){this.type="replaceError",this.ins=t,this.out=i,this.fn=e}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t===i)return;t._n(e)},e.prototype._e=function(e){var t=this.out;if(t===i)return;try{this.ins._remove(this),(this.ins=this.fn(e))._add(this)}catch(n){t._e(n)}},e.prototype._c=function(){var e=this.out;if(e===i)return;e._c()},e}();t.ReplaceErrorOperator=D;var P=function(){function e(e,t){this.type="startWith",this.ins=e,this.out=i,this.val=t}return e.prototype._start=function(e){this.out=e,this.out._n(this.val),this.ins._add(e)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=i},e}();t.StartWithOperator=P;var H=function(){function e(e,t){this.type="take",this.ins=t,this.out=i,this.max=e,this.taken=0}return e.prototype._start=function(e){this.out=e,this.taken=0,this.max<=0?e._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=i},e.prototype._n=function(e){var t=this.out;if(t===i)return;this.taken++<this.max-1?t._n(e):(t._n(e),t._c())},e.prototype._e=function(e){var t=this.out;if(t===i)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(e===i)return;e._c()},e}();t.TakeOperator=H;var B=function(){function e(e){this._prod=e||i,this._ils=[],this._stopID=i,this._dl=i,this._d=!1,this._target=i,this._err=i}return e.prototype._n=function(e){var t=this._ils,n=t.length;this._d&&this._dl._n(e);if(n==1)t[0]._n(e);else{var r=o(t);for(var i=0;i<n;i++)r[i]._n(e)}},e.prototype._e=function(e){if(this._err!==i)return;this._err=e;var t=this._ils,n=t.length;this._x(),this._d&&this._dl._e(e);if(n==1)t[0]._e(e);else{var r=o(t);for(var s=0;s<n;s++)r[s]._e(e)}},e.prototype._c=function(){var e=this._ils,t=e.length;this._x(),this._d&&this._dl._c();if(t==1)e[0]._c();else{var n=o(e);for(var r=0;r<t;r++)n[r]._c()}},e.prototype._x=function(){if(this._ils.length===0)return;this._prod!==i&&this._prod._stop(),this._err=i,this._ils=[]},e.prototype._stopNow=function(){this._prod._stop(),this._err=i,this._stopID=i},e.prototype._add=function(e){var t=this._target;if(t!==i)return t._add(e);var n=this._ils;n.push(e);if(n.length>1)return;if(this._stopID!==i)clearTimeout(this._stopID),this._stopID=i;else{var r=this._prod;r!==i&&r._start(this)}},e.prototype._remove=function(e){var t=this,n=this._target;if(n!==i)return n._remove(e);var r=this._ils,s=r.indexOf(e);s>-1&&(r.splice(s,1),this._prod!==i&&r.length<=0?(this._err=i,this._stopID=setTimeout(function(){return t._stopNow()})):r.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(e,t){if(t.indexOf(e)!==-1)return!0;if(e.out===this)return!0;if(e.out&&e.out!==i)return this._hasNoSinks(e.out,t.concat(e));if(e._ils){for(var n=0,r=e._ils.length;n<r;n++)if(!this._hasNoSinks(e._ils[n],t.concat(e)))return!1;return!0}return!1},e.prototype.ctor=function(){return this instanceof j?j:e},e.prototype.addListener=function(e){e._n=e.next||s,e._e=e.error||s,e._c=e.complete||s,this._add(e)},e.prototype.removeListener=function(e){this._remove(e)},e.prototype.subscribe=function(e){return this.addListener(e),new f(this,e)},e.prototype[r.default]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");u(t)}return new e(t)},e.createWithMemory=function(e){return e&&u(e),new j(e)},e.never=function(){return new e({_start:s,_stop:s})},e.empty=function(){return new e({_start:function(e){e._c()},_stop:s})},e.throw=function(t){return new e({_start:function(e){e._e(t)},_stop:s})},e.from=function(t){if(typeof t[r.default]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){var t=[];for(var n=0;n<arguments.length;n++)t[n-0]=arguments[n];return e.fromArray(t)},e.fromArray=function(t){return new e(new v(t))},e.fromPromise=function(t){return new e(new m(t))},e.fromObservable=function(t){return new e(new l(t))},e.periodic=function(t){return new e(new g(t))},e.prototype._map=function(e){var t=this._prod,n=this.ctor();return t instanceof S?new n(new O(t.passes,e,t.ins)):new n(new A(e,this))},e.prototype.map=function(e){return this._map(e)},e.prototype.mapTo=function(e){var t=this.map(function(){return e}),n=t._prod;return n.type=n.type.replace("map","mapTo"),t},e.prototype.filter=function(t){var n=this._prod;return n instanceof S?new e(new S(a(n.passes,t),n.ins)):new e(new S(t,this))},e.prototype.take=function(e){return new(this.ctor())(new H(e,this))},e.prototype.drop=function(t){return new e(new b(t,this))},e.prototype.last=function(){return new e(new C(this))},e.prototype.startWith=function(e){return new j(new P(this,e))},e.prototype.endWhen=function(e){return new(this.ctor())(new E(e,this))},e.prototype.fold=function(e,t){return new j(new N(e,t,this))},e.prototype.replaceError=function(e){return new(this.ctor())(new D(e,this))},e.prototype.flatten=function(){var t=this._prod;return new e(t instanceof A&&!(t instanceof O)?new L(t):new T(this))},e.prototype.compose=function(e){return e(this)},e.prototype.remember=function(){return new j(new _(this))},e.prototype.debug=function(e){return new(this.ctor())(new y(this,e))},e.prototype.imitate=function(e){if(e instanceof j)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=e;for(var t=this._ils,n=t.length,r=0;r<n;r++)e._add(t[r]);this._ils=[]},e.prototype.shamefullySendNext=function(e){this._n(e)},e.prototype.shamefullySendError=function(e){this._e(e)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(e){e?(this._d=!0,e._n=e.next,e._e=e.error,e._c=e.complete,this._dl=e):(this._d=!1,this._dl=i)},e.merge=function(){var n=[];for(var r=0;r<arguments.length;r++)n[r-0]=arguments[r];return new e(new h(n))},e.combine=function(){var n=[];for(var r=0;r<arguments.length;r++)n[r-0]=arguments[r];return new e(new d(n))},e}();t.Stream=B;var j=function(e){function t(t){e.call(this,t),this._has=!1}return n(t,e),t.prototype._n=function(t){this._v=t,this._has=!0,e.prototype._n.call(this,t)},t.prototype._add=function(e){var t=this._target;if(t!==i)return t._add(e);var n=this._ils;n.push(e);if(n.length>1){this._has&&e._n(this._v);return}if(this._stopID!==i)this._has&&e._n(this._v),clearTimeout(this._stopID),this._stopID=i;else if(this._has)e._n(this._v);else{var r=this._prod;r!==i&&r._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(e){return this._map(e)},t.prototype.mapTo=function(t){return e.prototype.mapTo.call(this,t)},t.prototype.take=function(t){return e.prototype.take.call(this,t)},t.prototype.endWhen=function(t){return e.prototype.endWhen.call(this,t)},t.prototype.replaceError=function(t){return e.prototype.replaceError.call(this,t)},t.prototype.remember=function(){return this},t.prototype.debug=function(t){return e.prototype.debug.call(this,t)},t}(B);t.MemoryStream=j,Object.defineProperty(t,"__esModule",{value:!0}),t.default=B}),q=D(function(e,t){var n=I;t.Stream=n.Stream,t.MemoryStream=n.MemoryStream,Object.defineProperty(t,"__esModule",{value:!0}),t.default=n.Stream}),R=_(q),U=q.Stream,z=D(function(e,t){function s(e){return new n.Stream(new i(e))}var n=I,r=function(){function e(e,t){this.out=e,this.op=t}return e.prototype._n=function(e){this.out._n(e)},e.prototype._e=function(e){this.out._e(e)},e.prototype._c=function(){this.op.less()},e}(),i=function(){function e(e){this.ins=e,this.type="flattenConcurrently",this.active=1,this.out=null}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.active=1,this.out=null},e.prototype.less=function(){if(--this.active===0){var e=this.out;if(!e)return;e._c()}},e.prototype._n=function(e){var t=this.out;if(!t)return;this.active++,e._add(new r(t,this))},e.prototype._e=function(e){var t=this.out;if(!t)return;t._e(e)},e.prototype._c=function(){this.less()},e}();t.FlattenConcOperator=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=s}),W=_(z),X=D(function(e,t){function i(e){return new n.Stream(new r(e))}var n=I,r=function(){function e(e){this.ins=e,this.type="pairwise",this.val=null,this.has=!1,this.out=null}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.has=!1,this.out=null,this.val=null},e.prototype._n=function(e){var t=this.out;if(!t)return;if(this.has){var n=this.val;this.val=e,t._n([n,e])}else this.val=e,this.has=!0},e.prototype._e=function(e){var t=this.out;if(!t)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(!e)return;e._c()},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),V=_(X),$=D(function(e,t){function i(e){return function(i){return new n.Stream(new r(e,i))}}var n=I,r=function(){function e(e,t){this.dt=e,this.ins=t,this.type="delay",this.out=null}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(e){var t=this.out;if(!t)return;var n=setInterval(function(){t._n(e),clearInterval(n)},this.dt)},e.prototype._e=function(e){var t=this.out;if(!t)return;var n=setInterval(function(){t._e(e),clearInterval(n)},this.dt)},e.prototype._c=function(){var e=this.out;if(!e)return;var t=setInterval(function(){e._c(),clearInterval(t)},this.dt)},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),J=_($),K=D(function(e,t){function s(e){return e===void 0&&(e=void 0),function(r){return new n.Stream(new i(r,e))}}var n=I,r={},i=function(){function e(e,t){this.ins=e,this.fn=t,this.type="dropRepeats",this.out=null,this.v=r}return e.prototype._start=function(e){this.out=e,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=r},e.prototype.isEq=function(e,t){return this.fn?this.fn(e,t):e===t},e.prototype._n=function(e){var t=this.out;if(!t)return;var n=this.v;if(n!==r&&this.isEq(e,n))return;this.v=Array.isArray(e)?e.slice():e,t._n(e)},e.prototype._e=function(e){var t=this.out;if(!t)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(!e)return;e._c()},e}();t.DropRepeatsOperator=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=s}),Q=_(K),G=D(function(e,t){var n=I,r={},i=function(){function e(e,t){this.i=e,this.p=t,t.ils[e]=this}return e.prototype._n=function(e){var t=this.p;if(t.out===r)return;t.up(e,this.i)},e.prototype._e=function(e){this.p._e(e)},e.prototype._c=function(){this.p.down(this.i,this)},e}();t.SampleCombineListener=i;var s=function(){function e(e,t){this.type="sampleCombine",this.ins=e,this.others=t,this.out=r,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(e){this.out=e;var t=this.others,n=this.Nn=t.length,s=this.vals=new Array(n);for(var o=0;o<n;o++)s[o]=r,t[o]._add(new i(o,this));this.ins._add(this)},e.prototype._stop=function(){var e=this.others,t=e.length,n=this.ils;this.ins._remove(this);for(var i=0;i<t;i++)e[i]._remove(n[i]);this.out=r,this.vals=[],this.ils=[]},e.prototype._n=function(e){var t=this.out;if(t===r)return;if(this.Nn>0)return;t._n([e].concat(this.vals))},e.prototype._e=function(e){var t=this.out;if(t===r)return;t._e(e)},e.prototype._c=function(){var e=this.out;if(e===r)return;e._c()},e.prototype.up=function(e,t){var n=this.vals[t];this.Nn>0&&n===r&&this.Nn--,this.vals[t]=e},e.prototype.down=function(e,t){this.others[e]._remove(t)},e}();t.SampleCombineOperator=s;var o;o=function(){var t=[];for(var r=0;r<arguments.length;r++)t[r-0]=arguments[r];return function(r){return new n.Stream(new s(r,t))}},Object.defineProperty(t,"__esModule",{value:!0}),t.default=o}),Y=_(G),yt={TIMEOUT:"Request timed out."},At=jt,Ot=[],Mt=[],_t=typeof Uint8Array!="undefined"?Uint8Array:Array,Dt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Pt=0,Ht=Dt.length;Pt<Ht;++Pt)Ot[Pt]=Dt[Pt],Mt[Dt.charCodeAt(Pt)]=Pt;Mt["-".charCodeAt(0)]=62,Mt["_".charCodeAt(0)]=63;var qt=D(function(e,t){var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);while(t.length){var n=t.shift();if(!n)continue;if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray){e.set(t.subarray(n,n+r),i);return}for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){var t,n,r,i,s,o;r=0;for(t=0,n=e.length;t<n;t++)r+=e[t].length;o=new Uint8Array(r),i=0;for(t=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},i={arraySet:function(e,t,n,r,i){for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)}),Rt=qt,Ut=4,zt=0,Wt=1,Xt=2,$t=0,Jt=1,Kt=2,Qt=3,Gt=258,Yt=29,Zt=256,en=Zt+1+Yt,tn=30,nn=19,rn=2*en+1,sn=15,on=16,un=7,an=256,fn=16,ln=17,cn=18,hn=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],pn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],dn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],vn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],mn=512,gn=new Array((en+2)*2);Vt(gn);var yn=new Array(tn*2);Vt(yn);var bn=new Array(mn);Vt(bn);var wn=new Array(Gt-Qt+1);Vt(wn);var En=new Array(Yt);Vt(En);var Sn=new Array(tn);Vt(Sn);var Tn,Nn,Cn,Kn=!1,tr=Qn,nr=Gn,rr=Zn,ir=er,sr=Yn,or={_tr_init:tr,_tr_stored_block:nr,_tr_flush_block:rr,_tr_tally:ir,_tr_align:sr},ar=ur,lr=fr(),hr=cr,pr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},dr=qt,vr=or,mr=ar,gr=hr,yr=pr,br=0,wr=1,Er=3,Sr=4,xr=5,Tr=0,Nr=1,Cr=-2,kr=-3,Lr=-5,Ar=-1,Or=1,Mr=2,_r=3,Dr=4,Pr=0,Hr=2,Br=8,jr=9,Fr=15,Ir=8,qr=29,Rr=256,Ur=Rr+1+qr,zr=30,Wr=19,Xr=2*Ur+1,Vr=15,$r=3,Jr=258,Kr=Jr+$r+1,Qr=32,Gr=42,Yr=69,Zr=73,ei=91,ti=103,ni=113,ri=666,ii=1,si=2,oi=3,ui=4,ai=3,Ni;Ni=[new Ti(0,0,0,0,bi),new Ti(4,4,8,4,wi),new Ti(4,5,16,8,wi),new Ti(4,6,32,32,wi),new Ti(4,4,16,16,Ei),new Ti(8,16,32,32,Ei),new Ti(8,16,128,128,Ei),new Ti(8,32,128,256,Ei),new Ti(32,128,258,1024,Ei),new Ti(32,258,258,4096,Ei)];var Bi=_i,ji=Mi,Fi=Ai,Ii=Li,qi=Oi,Ri=Di,Ui=Pi,zi=Hi,Wi="pako deflate (from Nodeca project)",Xi={deflateInit:Bi,deflateInit2:ji,deflateReset:Fi,deflateResetKeep:Ii,deflateSetHeader:qi,deflate:Ri,deflateEnd:Ui,deflateSetDictionary:zi,deflateInfo:Wi},Vi=qt,$i=!0,Ji=!0;try{String.fromCharCode.apply(null,[0])}catch(Ki){$i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Ki){Ji=!1}var Qi=new Vi.Buf8(256);for(var Gi=0;Gi<256;Gi++)Qi[Gi]=Gi>=252?6:Gi>=248?5:Gi>=240?4:Gi>=224?3:Gi>=192?2:1;Qi[254]=Qi[254]=1;var Yi=function(e){var t,n,r,i,s,o=e.length,u=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),u+=n<128?1:n<2048?2:n<65536?3:4;t=new Vi.Buf8(u);for(s=0,i=0;s<u;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t},es=function(e){return Zi(e,e.length)},ts=function(e){var t=new Vi.Buf8(e.length);for(var n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},ns=function(e,t){var n,r,i,s,o=t||e.length,u=new Array(o*2);for(r=0,n=0;n<o;){i=e[n++];if(i<128){u[r++]=i;continue}s=Qi[i];if(s>4){u[r++]=65533,n+=s-1;continue}i&=s===2?31:s===3?15:7;while(s>1&&n<o)i=i<<6|e[n++]&63,s--;if(s>1){u[r++]=65533;continue}i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|i&1023)}return Zi(u,r)},rs=function(e,t){var n;t=t||e.length,t>e.length&&(t=e.length),n=t-1;while(n>=0&&(e[n]&192)===128)n--;return n<0?t:n===0?t:n+Qi[e[n]]>t?n:t},is={string2buf:Yi,buf2binstring:es,binstring2buf:ts,buf2string:ns,utf8border:rs},os=ss,us=Xi,as=qt,fs=is,ls=pr,cs=os,hs=Object.prototype.toString,ps=0,ds=4,vs=0,ms=1,gs=2,ys=-1,bs=0,ws=8;Es.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i,s;if(this.ended)return!1;s=t===~~t?t:t===!0?ds:ps,typeof e=="string"?n.input=fs.string2buf(e):hs.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{n.avail_out===0&&(n.output=new as.Buf8(r),n.next_out=0,n.avail_out=r),i=us.deflate(n,s);if(i!==ms&&i!==vs)return this.onEnd(i),this.ended=!0,!1;if(n.avail_out===0||n.avail_in===0&&(s===ds||s===gs))this.options.to==="string"?this.onData(fs.buf2binstring(as.shrinkBuf(n.output,n.next_out))):this.onData(as.shrinkBuf(n.output,n.next_out))}while((n.avail_in>0||n.avail_out===0)&&i!==ms);return s===ds?(i=us.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===vs):s===gs?(this.onEnd(vs),n.avail_out=0,!0):!0},Es.prototype.onData=function(e){this.chunks.push(e)},Es.prototype.onEnd=function(e){e===vs&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=as.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Ns=Es,Cs=Ss,ks=xs,Ls=Ts,As={Deflate:Ns,deflate:Cs,deflateRaw:ks,gzip:Ls},Os=30,Ms=12,_s=function(t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;r=t.state,i=t.next_in,C=t.input,s=i+(t.avail_in-5),o=t.next_out,k=t.output,u=o-(n-t.avail_out),a=o+(t.avail_out-257),f=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,p=r.window,d=r.hold,v=r.bits,m=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{v<15&&(d+=C[i++]<<v,v+=8,d+=C[i++]<<v,v+=8),w=m[d&y];t:for(;;){E=w>>>24,d>>>=E,v-=E,E=w>>>16&255;if(E===0)k[o++]=w&65535;else{if(!(E&16)){if((E&64)===0){w=m[(w&65535)+(d&(1<<E)-1)];continue t}if(E&32){r.mode=Ms;break e}t.msg="invalid literal/length code",r.mode=Os;break e}S=w&65535,E&=15,E&&(v<E&&(d+=C[i++]<<v,v+=8),S+=d&(1<<E)-1,d>>>=E,v-=E),v<15&&(d+=C[i++]<<v,v+=8,d+=C[i++]<<v,v+=8),w=g[d&b];n:for(;;){E=w>>>24,d>>>=E,v-=E,E=w>>>16&255;if(!(E&16)){if((E&64)===0){w=g[(w&65535)+(d&(1<<E)-1)];continue n}t.msg="invalid distance code",r.mode=Os;break e}x=w&65535,E&=15,v<E&&(d+=C[i++]<<v,v+=8,v<E&&(d+=C[i++]<<v,v+=8)),x+=d&(1<<E)-1;if(x>f){t.msg="invalid distance too far back",r.mode=Os;break e}d>>>=E,v-=E,E=o-u;if(x>E){E=x-E;if(E>c&&r.sane){t.msg="invalid distance too far back",r.mode=Os;break e}T=0,N=p;if(h===0){T+=l-E;if(E<S){S-=E;do k[o++]=p[T++];while(--E);T=o-x,N=k}}else if(h<E){T+=l+h-E,E-=h;if(E<S){S-=E;do k[o++]=p[T++];while(--E);T=0;if(h<S){E=h,S-=E;do k[o++]=p[T++];while(--E);T=o-x,N=k}}}else{T+=h-E;if(E<S){S-=E;do k[o++]=p[T++];while(--E);T=o-x,N=k}}while(S>2)k[o++]=N[T++],k[o++]=N[T++],k[o++]=N[T++],S-=3;S&&(k[o++]=N[T++],S>1&&(k[o++]=N[T++]))}else{T=o-x;do k[o++]=k[T++],k[o++]=k[T++],k[o++]=k[T++],S-=3;while(S>2);S&&(k[o++]=k[T++],S>1&&(k[o++]=k[T++]))}break}}break}}while(i<s&&o<a);S=v>>3,i-=S,v-=S<<3,d&=(1<<v)-1,t.next_in=i,t.next_out=o,t.avail_in=i<s?5+(s-i):5-(i-s),t.avail_out=o<a?257+(a-o):257-(o-a),r.hold=d,r.bits=v;return},Ds=qt,Ps=15,Hs=852,Bs=592,js=0,Fs=1,Is=2,qs=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Rs=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Us=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],zs=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Ws=function(t,n,r,i,s,o,u,a){var f=a.bits,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w,E,S,x,T,N=null,C=0,k,L=new Ds.Buf16(Ps+1),A=new Ds.Buf16(Ps+1),O=null,M=0,_,D,P;for(l=0;l<=Ps;l++)L[l]=0;for(c=0;c<i;c++)L[n[r+c]]++;d=f;for(p=Ps;p>=1;p--)if(L[p]!==0)break;d>p&&(d=p);if(p===0)return s[o++]=20971520,s[o++]=20971520,a.bits=1,0;for(h=1;h<p;h++)if(L[h]!==0)break;d<h&&(d=h),g=1;for(l=1;l<=Ps;l++){g<<=1,g-=L[l];if(g<0)return-1}if(g>0&&(t===js||p!==1))return-1;A[1]=0;for(l=1;l<Ps;l++)A[l+1]=A[l]+L[l];for(c=0;c<i;c++)n[r+c]!==0&&(u[A[n[r+c]]++]=c);t===js?(N=O=u,k=19):t===Fs?(N=qs,C-=257,O=Rs,M-=257,k=256):(N=Us,O=zs,k=-1),b=0,c=0,l=h,T=o,v=d,m=0,S=-1,y=1<<d,x=y-1;if(t===Fs&&y>Hs||t===Is&&y>Bs)return 1;var H=0;for(;;){H++,_=l-m,u[c]<k?(D=0,P=u[c]):u[c]>k?(D=O[M+u[c]],P=N[C+u[c]]):(D=96,P=0),w=1<<l-m,E=1<<v,h=E;do E-=w,s[T+(b>>m)+E]=_<<24|D<<16|P|0;while(E!==0);w=1<<l-1;while(b&w)w>>=1;w!==0?(b&=w-1,b+=w):b=0,c++;if(--L[l]===0){if(l===p)break;l=n[r+u[c]]}if(l>d&&(b&x)!==S){m===0&&(m=d),T+=h,v=l-m,g=1<<v;while(v+m<p){g-=L[v+m];if(g<=0)break;v++,g<<=1}y+=1<<v;if(t===Fs&&y>Hs||t===Is&&y>Bs)return 1;S=b&x,s[S]=d<<24|v<<16|T-o|0}}return b!==0&&(s[T+b]=l-m<<24|64<<16|0),a.bits=d,0},Xs=qt,Vs=ar,$s=hr,Js=_s,Ks=Ws,Qs=0,Gs=1,Ys=2,Zs=4,eo=5,to=6,no=0,ro=1,io=2,so=-2,oo=-3,uo=-4,ao=-5,fo=8,lo=1,co=2,ho=3,po=4,vo=5,mo=6,go=7,yo=8,bo=9,wo=10,Eo=11,So=12,xo=13,To=14,No=15,Co=16,ko=17,Lo=18,Ao=19,Oo=20,Mo=21,_o=22,Do=23,Po=24,Ho=25,Bo=26,jo=27,Fo=28,Io=29,qo=30,Ro=31,Uo=32,zo=852,Wo=592,Xo=15,Vo=Xo,eu=!0,tu,nu,fu=Qo,lu=Go,cu=Ko,hu=Zo,pu=Yo,du=su,vu=ou,mu=uu,gu=au,yu="pako inflate (from Nodeca project)",bu={inflateReset:fu,inflateReset2:lu,inflateResetKeep:cu,inflateInit:hu,inflateInit2:pu,inflate:du,inflateEnd:vu,inflateGetHeader:mu,inflateSetDictionary:gu,inflateInfo:yu},wu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Su=Eu,xu=bu,Tu=qt,Nu=is,Cu=wu,ku=pr,Lu=os,Au=Su,Ou=Object.prototype.toString;Mu.prototype.push=function(e,t){var n=this.strm,r=this.options.chunkSize,i=this.options.dictionary,s,o,u,a,f,l,c=!1;if(this.ended)return!1;o=t===~~t?t:t===!0?Cu.Z_FINISH:Cu.Z_NO_FLUSH,typeof e=="string"?n.input=Nu.binstring2buf(e):Ou.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{n.avail_out===0&&(n.output=new Tu.Buf8(r),n.next_out=0,n.avail_out=r),s=xu.inflate(n,Cu.Z_NO_FLUSH),s===Cu.Z_NEED_DICT&&i&&(typeof i=="string"?l=Nu.string2buf(i):Ou.call(i)==="[object ArrayBuffer]"?l=new Uint8Array(i):l=i,s=xu.inflateSetDictionary(this.strm,l)),s===Cu.Z_BUF_ERROR&&c===!0&&(s=Cu.Z_OK,c=!1);if(s!==Cu.Z_STREAM_END&&s!==Cu.Z_OK)return this.onEnd(s),this.ended=!0,!1;n.next_out&&(n.avail_out===0||s===Cu.Z_STREAM_END||n.avail_in===0&&(o===Cu.Z_FINISH||o===Cu.Z_SYNC_FLUSH))&&(this.options.to==="string"?(u=Nu.utf8border(n.output,n.next_out),a=n.next_out-u,f=Nu.buf2string(n.output,u),n.next_out=a,n.avail_out=r-a,a&&Tu.arraySet(n.output,n.output,u,a,0),this.onData(f)):this.onData(Tu.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(c=!0)}while((n.avail_in>0||n.avail_out===0)&&s!==Cu.Z_STREAM_END);return s===Cu.Z_STREAM_END&&(o=Cu.Z_FINISH),o===Cu.Z_FINISH?(s=xu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Cu.Z_OK):o===Cu.Z_SYNC_FLUSH?(this.onEnd(Cu.Z_OK),n.avail_out=0,!0):!0},Mu.prototype.onData=function(e){this.chunks.push(e)},Mu.prototype.onEnd=function(e){e===Cu.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Tu.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Pu=Mu,Hu=_u,Bu=Du,ju=_u,Fu={Inflate:Pu,inflate:Hu,inflateRaw:Bu,ungzip:ju},Iu=qt.assign,qu=As,Ru=Fu,Uu=wu,zu={};Iu(zu,qu,Ru,Uu);var Wu=zu,Gu="https",Yu=function(){function e(t){function Jt(t){t.debug(function(){return e.warn("RELOAD")}).map(function(t){var n=t.delay_minutes,r=n&&n>1?Number(n):e.minimum_reload_delay_minutes,i=Math.random()*1e3*60*r;return e.warn("Reload delay is "+i),U.periodic(i).take(1)}).flatten().addListener({next:function(e){return window.location.reload(!0)},error:function(e){return console.error(e)},complete:function(){}})}var n=U.create(),r=U.create(),i={response$:n,pusher$:r},s=i.response$,o=i.pusher$,u=t.static_bundle_host,a=t.dynamic_bundle_host,f=t.transport_mode,l=f===void 0?"websockets":f,c=t.stream_names,h=t.environment,p=t.pusher_key,d=t.pusher_options,v=t.debug,m=t.transform;v!==!0&&(e.log=function(){}),e.Pusher.log=e.log,e.log("New IC Broker"),e.log("Registered streams:",c);var g=Date.now(),y=na(c),b=gt(y),w=encodeURIComponent(y),E=Gu+"://"+a+"/ic/state.json?q="+w,S=U.merge(U.of(u)),x=S.map(function(e){return"https://"+e+"/data/ic/"}),T=b.substring(0,4),N=x.map(function(e){return""+e+T+"/bundles/"+b+".json"}),C=x.map(function(e){return function(t){var n=b.substring(0,3),r=t%26+97,i=String.fromCharCode(r);return""+e+i+n+"/timeboxes/"+b+"/"+t+".json"}}),k=N.map(function(e){return{url:e,category:"first"}}),L=s.compose($u(e.backoff_start,e.backoff_increase,e.backoff_max)),A=L.filter(function(e){return!e.error}),O=A.filter(function(e){return e.request.category==="polling"}).map(function(e){return e.data}),M=A.filter(function(e){return e.request.category==="pointer"}).map(function(e){return e.data}),_=L.filter(function(e){var t=["polling","pointer","timebox","missed-few","missed-many"];return t.indexOf(e.request.category)!==-1}).filter(function(e){return!!e.error}).filter(function(e){return e.backoff_failure!==!0}).debug(function(t){return e.warn("Using backoff delay: "+t.backoff_delay)}).map(function(e){return U.periodic(e.backoff_delay).take(1).mapTo(e.request)}).compose(W),D=L.filter(function(e){return e.request.category==="first"}),P=D.filter(function(e){return!e.error}),H=D.filter(function(e){return!!e.error}).debug(function(t){return e.warn("Static bundle error. Trying dynamic bundle host.")}).mapTo({url:E,category:"dynamic"}),B=L.filter(function(e){return e.request.category==="dynamic"}),j=B.filter(function(e){return!e.error}),F=U.merge(P,j).map(function(e){return e.data}),I=B.filter(function(e){return!!e.error});I.debug(function(t){return e.error("Dynamic bundle response error. Aborting.",t.error)}).addListener({next:function(e){},error:function(e){return console.error(e)},complete:function(){}});var q=Ju(o),R=q.pusher_error$,z=q.pusher_connected$,X=q.pusher_message$,$=q.pusher_reload$;Jt($.map(function(e){return e.data}));var K=F.mapTo(l),G=U.create(),Z=U.merge(K,R.mapTo("polling"),z.mapTo("websockets"),G).compose(Q()).remember().debug(function(t){return e.log("Transport mode:",t)}),et=U.merge(R,z).compose(V),tt=et.filter(function(e){return e[0].type==="connected"&&e[1].type!=="connected"}).debug(function(){return e.warn("Switching to polling.")}).map(function(e){return e[1]}).map(function(e){var t=Date.now()-g;return{broker_session_duration:t,datadog_metric_name:"invisible_city.client.switched_to_polling",environment:h==="production"?"prd":"stg",reason:e.data,session_start:g}}),nt=et.filter(function(e){return e[0].type!=="connected"&&e[1].type==="connected"}).debug(function(){return e.log("Pusher re-connected.")}).map(function(e){return e[1]}).map(function(){var e=Date.now()-g;return{broker_session_duration:e,datadog_metric_name:"invisible_city.client.switched_from_polling_to_pusher",environment:h==="production"?"prd":"stg",session_start:g}}),rt=Z.filter(function(e){return e==="polling"}),it=Z.filter(function(e){return e==="websockets"}),st=U.merge(rt).mapTo(!0).debug(function(){return e.log("Starting polling.")}),ot=U.merge(it).mapTo(!1),ut=U.create(),at=U.merge(U.of(e.polling_interval),ut),ft=Lt({polling_start$:st,polling_stop$:ot,polling_response$:O,interval$:at,static_bundle_url$:N,polling_request_random_delay:e.polling_random_delay}),lt=A.filter(function(e){return e.request.category==="missed-few"}).map(function(e){return e.data}),ct=A.filter(function(e){return e.request.category==="missed-many"}).map(function(e){return e.data}),ht=U.merge(lt,ct),pt=U.merge(F,X,O,M,ht).debug(function(t){return e.log("New transmission.",t)});pt.addListener({});var dt=U.merge(X).filter(function(e){return e.transmission_type==="pointer"}),vt=dt.compose(Y(C)).map(function(e){var t=e[0],n=e[1];return n(t.timebox)}).map(function(e){return e+"?reason=pointer"}).map(function(t){var n=Math.random()*e.pointer_request_random_delay;return U.of(t).compose(J(n))}).compose(W).debug(function(t){return e.log("Pointer request",t)}).map(function(e){return{url:e,category:"pointer"}}),mt=pt.filter(function(e){return ea(e)===!1}).compose(Q(function(e,t){return e.timebox===t.timebox&&e.transmission_type===t.transmission_type})),yt=Et(mt),xt=yt.transmission_out$,Tt=yt.missed_few$,Nt=yt.missed_many$,Ct=Zu(Tt,Nt,N,C,g,h),kt=Ct.request$,At=Ct.metric$,Ot=U.merge(At,tt,nt),Mt=U.merge(k,H,ft,_,vt,kt),_t=it.debug(function(){return e.log("Pusher connect.")}),Dt=Z.filter(function(e){return e!=="websockets"});Ot.addListener({next:function(e){return ta(e)}});var Pt=wt(e.request,e.ajax_timeout),Ht=bt(Pt),Bt=Ht(Mt);n.imitate(Bt);var jt=p?p:h==="production"?"8f13fcf3994b423d772c":"bb21c148a4e3fcbb5fbd",Ft=Ku(e.Pusher,b,jt,Dt,d),It=Ft(_t);r.imitate(It);var qt=Gu+"://"+u+"/data/ic/",Rt=""+qt+T+"/bundles/"+b+".json",Ut=St(xt),zt=Ut.map(function(t){if(t.transmission_encoding==="gzip"){e.log("Got gizipped message");try{var n=Xu(t.contents);e.log("Unzipped");var r=JSON.parse(n);t.contents=r,t.transmission_encoding=undefined}catch(i){throw e.error("Error unzipping",i),i}}return t}).debug(function(t){return e.log("New un-zipped transmission",t)}),Wt=ia(zt,c,m).remember(),Xt=fa(c,Wt);this.consumer_streams=Xt;var Vt=c.filter(function(e){return e.match(/_control/)}),$t=pt.fold(function(e){return e+1},0);Vt.filter(function(e,t){return t===0}).forEach(function(t){var n=Xt.get(t).map(function(e){return e.state}).debug(function(t){return e.log("Control command state:",t)}).remember(),r=n.filter(function(e){return e.has("broker_config")}).map(function(e){return e.get("broker_config")}).compose(Y($t)).debug(function(t){return e.log("Transmission count: "+t[1])}).map(function(e){var t=e[0],n=e[1];if(n===0){var r=Math.random()*5e3;return U.periodic(r).take(1).mapTo(t)}var i=Math.random()*t.delay_minutes*1e3*60;return U.periodic(i).take(1).mapTo(t)}).flatten().remember();$t.addListener({}),r.addListener({});var i=r.filter(function(e){if(typeof e["polling_interval"]!="undefined")return!0}).map(function(e){return Number(e.polling_interval)}).map(function(e){return e*1e3}).compose(Q()).debug(function(t){return e.log("Polling interval based on control message.",t)});ut.imitate(i);var s=r.filter(function(e){if(typeof e["transport_mode"]!="undefined")return!0}).map(function(e){return{transport_mode:e.transport_mode,delay_minutes:e.delay_minutes}}).compose(Q(function(e,t){return e.transport_mode===t.transport_mode})).map(function(e){return e.transport_mode});s.debug(function(t){return e.log("Switch transport command: "+t)}).addListener({}),G.imitate(s);var o=n.take(1).map(function(t){return t.has("reload")?{reload_counter:t.get("reload").reload_counter,delay_minutes:t.get("reload").delay_minutes}:{reload_counter:0,delay_minutes:e.minimum_reload_delay_minutes}}),u=n.filter(function(e){return e.has("reload")}).map(function(e){return{reload_counter:e.get("reload").reload_counter,delay_minutes:e.get("reload").delay_minutes}}),a=U.merge(o,u).compose(V).filter(function(e){return Number(e[1].reload_counter)>Number(e[0].reload_counter)}).map(function(e){return e[1]});Jt(a)}),Wt.debug(function(t){return e.log("New internal state-with-diff map.",t)}).addListener({next:ra,error:function(e){throw e},complete:function(){}})}return e.prototype.register=function(t){e.log("Register consumer");var n=t.stream_name;this.consumer_streams.has(n)===!1?e.error("Tried to register a consumer with a stream not registered with this broker"):this.consumer_streams.get(n).filter(function(e){return e.create.size()>0||e.update.size()>0}).debug(function(t){return e.log("state-with-diff for "+n,t)}).addListener(t.listener)},e.warn=function(e,t){t?console.warn("IC Broker Warning:",e,t):console.warn("IC Broker Warning:",e)},e.log=function(e,t){t?console.log("IC Broker:",e,t):console.log("IC Broker:",e)},e.error=function(e,t){t?console.error("IC Broker Error:",e,t):console.error("IC Broker Error:",e)},e.ajax_timeout=3e4,e.polling_interval=15e3,e.polling_random_delay=2e3,e.backoff_start=5e3,e.backoff_max=12e4,e.backoff_increase=1.5,e.switch_to_polling_random_delay=8e3,e.pointer_request_random_delay=8e3,e.timebox_request_random_delay=2e3,e.timebox_static_request_random_delay=2e3,e.minimum_reload_delay_minutes=1,e.metrics_endpoint="https://pnkqtrtwe9.execute-api.us-east-1.amazonaws.com/prod",e}(),oa={wrap:function(e){return e},unwrap:function(e){return e}},la=function(){function e(e){var t=this;this.stream_name=e,this.callbacks=r({create:[],update:[],error:[]}),this.listener={next:function(){},error:function(e){return console.error(e)},complete:function(){}};var n={start:function(e){return t.listener=e},stop:function(){}},i=R.create(n).map(function(e){return{state:e.state.values(),create:e.create.values(),update:e.update.values()}}),s=i.drop(1),o=i.take(1).map(function(e){return{event:"create",data:e.state,state:e.state}}),u=s.filter(function(e){return e.create.length>0}).map(function(e){return{event:"create",data:e.create,state:e.state}}),a=s.filter(function(e){return e.update.length>0}).map(function(e){return{event:"update",data:e.update,state:e.state}});R.merge(o,u,a).addListener({next:function(e){return t.emit(e.event,e.data,e.state||null)},error:function(e){throw e.stack?console.error(e.stack):console.error(e),e},complete:function(){return t.emit("complete",undefined)}})}return e.prototype.emit=function(e,t,n){if(this.callbacks.has(e)===!1)return;this.callbacks.get(e).forEach(function(e){e(t,n||null)})},e.prototype.on=function(e,t){if(arguments.length===1)return this.callbacks.get(e);this.callbacks.has(e)?this.callbacks.get(e).push(t):this.callbacks.set(e,[t])},e}(),ca="2.48.0",ha={version:ca,Broker:Yu,Consumer:la,getBroker:function(e){return console.info("IC Version: "+ca),Yu.Pusher=H,Yu.request=g,new Yu(e)}};return ha}),typeof define=="function"&&define.amd?define("arrayToObject",function(){return arrayToObject}):typeof module=="object"&&module.exports&&(module.exports=arrayToObject),function(e,t){typeof define=="function"&&define.amd?define("moment-timezone/elections",t):typeof module=="object"&&module.exports?module.exports=t(require("moment/elections")):t(e.moment)}(this,function(){function f(e){return e>96?e-87:e>64?e-29:e-48}function l(e){var t=0,n=e.split("."),r=n[0],i=n[1]||"",s=1,o,u=0,a=1;e.charCodeAt(0)===45&&(t=1,a=-1);for(t;t<r.length;t++)o=f(r.charCodeAt(t)),u=60*u+o;for(t=0;t<i.length;t++)s/=60,o=f(i.charCodeAt(t)),u+=o*s;return u*a}function c(e){for(var t=0;t<e.length;t++)e[t]=l(e[t])}function h(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+e[n]*6e4);e[t-1]=Infinity}function p(e,t){var n=[],r;for(r=0;r<t.length;r++)n[r]=e[t[r]];return n}function d(e){var t=e.split("|"),n=t[2].split(" "),r=t[3].split(""),i=t[4].split(" ");return c(n),c(r),c(i),h(i,r.length),{name:t[0],abbrs:p(t[1].split(" "),r),offsets:p(n,r),untils:i,population:t[5]|0}}function v(e){e&&this._set(d(e))}function m(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);n&&n[0]?(n=n[0].match(/[A-Z]/g),n=n?n.join(""):undefined):(n=t.match(/[A-Z]{3,5}/g),n=n?n[0]:undefined),n==="GMT"&&(n=undefined),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function g(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function y(e,t){var n,r;while(r=((t.at-e.at)/12e4|0)*6e4)n=new m(new Date(e.at+r)),n.offset===e.offset?e=n:t=n;return e}function b(){var e=(new Date).getFullYear()-2,t=new m(new Date(e,0,1)),n=[t],r,i,s;for(s=1;s<48;s++)i=new m(new Date(e,s,1)),i.offset!==t.offset&&(r=y(t,i),n.push(r),n.push(new m(new Date(r.at+6e4)))),t=i;for(s=0;s<4;s++)n.push(new m(new Date(e+s,0,1))),n.push(new m(new Date(e+s,6,1)));return n}function w(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:t.zone.population-e.zone.population}function E(e,t){var n,r;c(t);for(n=0;n<t.length;n++)r=t[n],i[r]=i[r]||{},i[r][e]=!0}function S(e){var t=e.length,n={},s=[],o,u,a;for(o=0;o<t;o++){a=i[e[o].offset]||{};for(u in a)a.hasOwnProperty(u)&&(n[u]=!0)}for(o in n)n.hasOwnProperty(o)&&s.push(r[o]);return s}function x(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e){var t=r[N(e)];if(t)return t;D("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(n){}var i=b(),s=i.length,o=S(i),u=[],a,f,l;for(f=0;f<o.length;f++){a=new g(k(o[f]),s);for(l=0;l<s;l++)a.scoreOffsetAt(i[l]);u.push(a)}return u.sort(w),u.length>0?u[0].zone.name:undefined}function T(e){if(!s||e)s=x();return s}function N(e){return(e||"").toLowerCase().replace(/\//g,"_")}function C(e){var n,i,s,o;typeof e=="string"&&(e=[e]);for(n=0;n<e.length;n++)s=e[n].split("|"),i=s[0],o=N(i),t[o]=e[n],r[o]=i,s[5]&&E(o,s[2].split(" "))}function k(e,i){e=N(e);var s=t[e],o;return s instanceof v?s:typeof s=="string"?(s=new v(s),t[e]=s,s):n[e]&&i!==k&&(o=k(n[e],k))?(s=t[e]=new v,s._set(o),s.name=r[e],s):null}function L(){var e,i=[];for(e in r)r.hasOwnProperty(e)&&(t[e]||t[n[e]])&&r[e]&&i.push(r[e]);return i.sort()}function A(e){var t,i,s,o;typeof e=="string"&&(e=[e]);for(t=0;t<e.length;t++)i=e[t].split("|"),s=N(i[0]),o=N(i[1]),n[s]=o,r[s]=i[0],n[o]=s,r[o]=i[1]}function O(e){C(e.zones),A(e.links),P.dataVersion=e.version}function M(e){return M.didShowError||(M.didShowError=!0,D("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!k(e)}function _(e){return!!e._a&&e._tzm===undefined}function D(e){typeof console!="undefined"&&typeof console.error=="function"&&console.error(e)}function P(e){var t=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],r=k(n),i=moment.utc.apply(null,t);return r&&!moment.isMoment(e)&&_(i)&&i.add(r.parse(i),"minutes"),i.tz(n),i}function B(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function j(e){return function(){return this._z=null,e.apply(this,arguments)}}if(moment.tz!==undefined)return D("Moment Timezone "+moment.tz.version+" was already loaded "+(moment.tz.dataVersion?"with data from ":"without any data")+moment.tz.dataVersion),moment;var e="0.5.5",t={},n={},r={},i={},s,o=moment.version.split("."),u=+o[0],a=+o[1];(u<2||u===2&&a<6)&&D("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+moment.version+". See momentjs.com"),v.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t=+e,n=this.untils,r;for(r=0;r<n.length;r++)if(t<n[r])return r},parse:function(e){var t=+e,n=this.offsets,r=this.untils,i=r.length-1,s,o,u,a;for(a=0;a<i;a++){s=n[a],o=n[a+1],u=n[a?a-1:a],s<o&&P.moveAmbiguousForward?s=o:s>u&&P.moveInvalidForward&&(s=u);if(t<r[a]-s*6e4)return n[a]}return n[i]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},g.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.offset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},P.version=e,P.dataVersion="",P._zones=t,P._links=n,P._names=r,P.add=C,P.link=A,P.load=O,P.zone=k,P.zoneExists=M,P.guess=T,P.names=L,P.Zone=v,P.unpack=d,P.unpackBase60=l,P.needsOffset=_,P.moveInvalidForward=!0,P.moveAmbiguousForward=!1;var H=moment.fn;moment.tz=P,moment.defaultZone=null,moment.updateOffset=function(e,t){var n=moment.defaultZone,r;e._z===undefined&&(n&&_(e)&&!e._isUTC&&(e._d=moment.utc(e._a)._d,e.utc().add(n.parse(e),"minutes")),e._z=n),e._z&&(r=e._z.offset(e),Math.abs(r)<16&&(r/=60),e.utcOffset!==undefined?e.utcOffset(-r,t):e.zone(r,t))},H.tz=function(e){if(e)return this._z=k(e),this._z?moment.updateOffset(this):D("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this;if(this._z)return this._z.name},H.zoneName=B(H.zoneName),H.zoneAbbr=B(H.zoneAbbr),H.utc=j(H.utc),moment.tz.setDefault=function(e){return(u<2||u===2&&a<9)&&D("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+moment.version+"."),moment.defaultZone=e?k(e):null,moment};var F=moment.momentProperties;return Object.prototype.toString.call(F)==="[object Array]"?(F.push("_z"),F.push("_a")):F&&(F._z=null),moment.tz.add(["America/New_York|EST EDT|50 40|0101|1Lz50 1zb0 Op0","Etc/GMT+0|GMT|0|0|"]),moment}),define("pourover",["underscore/nyt"],function(e){var t=function(){var n=function(e,t){console.warn("Deprecation warning: "+e+" will be renamed to "+t+" in the next major release.")},r=function(){},i=e.create||function(e){r.prototype=e;var t=new r;return r.prototype=null,t};t={union_sorted:function(e,t){return n("union_sorted","unionSort"),this.unionSort(e,t)},unionSort:function(t,n){var r=0,i=0,s=t.length,o=n.length,u=[],a,f;while(s>r||o>i){a=t[r],f=n[i],e.isUndefined(a)&&(a=Infinity),e.isUndefined(f)&&(f=Infinity);if(r==s)return u.concat(n.slice(i,o));if(i==o)return u.concat(t.slice(r,s));a==f?(u.push(a),r++,i++):a<f?(u.push(a),r++):(u.push(f),i++)}return u},intersect_sorted:function(e,t){return n("intersect_sorted","intersectSort"),this.intersectSort(e,t)},intersectSort:function(e,t){var n=0,r=0,i=e.length,s=t.length,o=[],u,a;while(i>n&&s>r)u=e[n],a=t[r],u==a?(o.push(u),n++,r++):u<a?n++:r++;return o},subtract_sorted:function(e,t){return n("subtract_sorted","subtractSort"),this.subtractSort(e,t)},subtractSort:function(e,t){var n=0,r=0,i=e.length,s=t.length,o=[],u,a;while(i>n||s>r){u=e[n],a=t[r];if(i==n)return o;if(s==r)return o.concat(e.slice(n,i));u==a?(n++,r++):u<a?(o.push(u),n++):r++}return o},insert_sorted:function(e,t){return n("insert_sorted","insertSort"),this.insertSort(e,t)},insertSort:function(e,t){var n=e.length,r=0,i=e[n-1];if(t>i)return e.push(t),e;while(r<n){if(t<e[r])return e.slice(0,r).concat([t]).concat(e.slice(r,n));r++}return e.push(t),e},build_permutation_array:function(e,t){return n("build_permutation_array","buildPermutationArray"),this.buildPermutationArray(e,t)},buildPermutationArray:function(t,n){var r=e.clone(t),i=[];return typeof n=="function"?r.sort(n):r.sort(function(e,t){return n.fn.call(n,e,t)}),e.each(r,function(e,t){i[e.cid]=t}),i},permute_from_array:function(e,t){return n("permute_from_array","permuteFromArray"),this.permuteFromArray(e,t)},permuteFromArray:function(t,n){var r=[];return typeof t[0]=="number"?e.each(t,function(e){r[n[e]]=e}):e.each(t,function(e){r[n[e.cid]]=e}),e.without(r,undefined)},remove_sorted:function(e,t){return n("remove_sorted","removeSort"),this.removeSort(e,t)},removeSort:function(e,t){var n=e.length,r=0;while(r<n){if(t==e[r])return e.slice(0,r).concat(e.slice(r+1,n));r++}return e},bisect_by:function(e){return n("bisect_by","bisectBy"),this.bisectBy(e)},bisectBy:function(e){function t(t,n,r,i){while(r<i){var s=r+i>>>1;e(t[s])<n?r=s+1:i=s}return r}function n(t,n,r,i){while(r<i){var s=r+i>>>1;n<e(t[s])?i=s:r=s+1}return r}return n.right=n,n.left=t,n},cacheMethods:{defaultCache:function(t){var n=this;e.each(n.possibilities,function(r){var i=e.filter(t,function(e){return n.fn(r,e)}),s=e.pluck(i,"cid");r.matching_cids=s})},defaultAddCache:function(n){var r=this;e.each(r.possibilities,function(i){var s=e.filter(n,function(e){return r.fn(i,e)}),o=e.pluck(s,"cid");i.matching_cids=t.unionSort(i.matching_cids,o)})},exactCache:function(n){var r=this,i=this.attr||this.name;e.each(n,function(e){var n=r.possibilities[e[i]];n&&(n.matching_cids=t.insertSort(n.matching_cids,e.cid))})},exactAddCache:function(e){t.cacheMethods.exactCache.call(this,e)},inclusionCache:function(n){var r=this,i=this.attr||this.name;e.each(n,function(n){e.each(n[i],function(e){var i=r.possibilities[e];i&&(i.matching_cids=t.insertSort(i.matching_cids,n.cid))})})},inclusionAddCache:function(e){t.cacheMethods.inclusionCache.call(this,e)}}};var s=[],o=s.push,u=s.slice,a=s.splice,f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(t,n,r){if(!c(this,"once",t,[n,r])||!n)return this;var i=this,s=e.once(function(){i.off(t,s),n.apply(this,arguments)});return s._callback=n,this.on(t,s,r)},off:function(t,n,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",t,[n,r]))return this;if(!t&&!n&&!r)return this._events=void 0,this;u=t?[t]:e.keys(this._events);for(a=0,f=u.length;a<f;a++){t=u[a];if(o==this._events[t]){this._events[t]=i=[];if(n||r)for(l=0,h=o.length;l<h;l++)s=o[l],(n&&n!==s.callback&&n!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[t]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(t,n,r){var i=this._listeningTo;if(!i)return this;var s=!n&&!r;!r&&typeof n=="object"&&(r=this),t&&((i={})[t._listenId]=t);for(var o in i)t=i[o],t.off(n,r,this),(s||e.isEmpty(t._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};return e.each(p,function(t,n){f[n]=function(n,r,i){var s=this._listeningTo||(this._listeningTo={}),o=n._listenId||(n._listenId=e.uniqueId("l"));return s[o]=n,!i&&typeof r=="object"&&(i=this),n[t](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,e.extend(t,f),t.Collection=function(t,n){typeof t=="undefined"&&(t=[]),this.items=[],this.filters={},this.sorts={},this.addItems(t),this.on("change",function(){e.each(this.filters,function(e){e.current_query&&e.current_query.refresh()})}),this.initialize.apply(this,arguments)},e.extend(t.Collection.prototype,t.Events,{initialize:function(){},refresh:function(){this.trigger("queryChange")},get:function(e){return t.Collection.prototype.getBy.call(this,"cid",e,!0)},getBy:function(t,n,r){if(!e.isArray(n))var n=[n];typeof r=="undefined"&&(r=!1);var i=0,s=this.items.length,o=0,u=n.length,a=[],f=this.items,l;if(r===!0)while(i<s&&o<u)n[o]==(l=f[i])[t]?(a.push(l),i++,o++):n[o]<l[t]?o++:i++;else if(r=="reverse")while(i<s&&o<u)n[o]==(l=f[i])[t]?(a.push(l),i++,o++):n[o]>l[t]?o++:i++;else while(i<s&&o<u)e.include(n,(l=f[i])[t])?(a.push(l),n=e.without(n,l[t]),i++,o++):i++;return a},getByFirst:function(e,t,n){typeof n=="undefined"&&(n=!1);var r=0,i=this.items.length,s=this.items,o,u;if(n===!0)while(r<i){if(t==(u=s[r])[e]){o=u;break}if(t<u[e])break;r++}else if(n=="reverse")while(r<i){if(t==(u=s[r])[e]){o=u;break}if(t>u[e])break;r++}else while(r<i){if(t==(u=s[r])[e]){o=u;break}r++}return o},addItems:function(n){this.trigger("will_change"),e.isArray(n)||(n=[n]);var r=this.items.length>0?e.last(this.items).cid+1:0,i;i=e.map(n,function(e){var n=t.Item(e);return n.cid=r++,n}),this.items=this.items.concat(i),this.regenerateFilterSets(i),this.trigger("change",e(i).pluck("cid"))},removeItems:function(t,n){this.trigger("will_change");if(typeof n=="undefined")var n=!1;if(!e.isArray(t))var t=[t];if(n){t=t.sort(function(e,t){return e.cid-t.cid});var r=[],i=this.items,s=t.length,o=this.items.length,u=0,a=0;while(a<o){if(!u<s){r=r.concat(i.slice(a));break}i[a].cid===t[u].cid?(u++,a++):(r.push(i[a]),a++)}}else{var r=[],i=this.items,o=this.items.length,a=0,f=e.pluck(t,"cid");while(a<o&&f.length>0)e.include(f,i[a].cid)||r.push(i[a]),a++}this.items=r,this.regenerateFilterSets(),this.trigger("change",e(t).pluck("cid"))},addFilters:function(t){var n=this,r;e.isArray(t)||(t=[t]),r=e.reduce(t,function(e,t){return e[t.name]=i(t),e[t.name].collection=n,e},{}),this.filters=e.extend(this.filters,r),e.each(r,function(t){t.on("queryChange",function(){n.trigger("queryChange")}),t.cacheResults(n.items),t.associated_attrs&&e.each(t.associated_attrs,function(e){n.on("change:"+e,function(e){t.removeFromCache(e),t.addCacheResults(e),t.current_query&&t.current_query.refresh()})})})},regenerateFilterSets:function(t){var n=this;typeof t=="undefined"?e.each(this.filters,function(e){e.cacheResults(n.items)}):e.each(this.filters,function(e){e.addCacheResults(t)})},getAllItems:function(){var n=e.pluck(this.items,"cid");return new t.MatchSet(n,this,["all"])},getCurrentFilteredItems:function(e,n){return typeof n=="undefined"&&(n=!1),this.filters[e].current_query&&this.filters[e].current_query.stack.length>0?this.filters[e].current_query:n?new t.MatchSet([],this,[]):this.getAllItems()},getFilteredItems:function(t,n){var r=this.filters[t],i;if(e.isUndefined(r))throw"The filter "+t+" does not exist.";return r.getFn(n)},addSort:function(t){var n=this;this.sorts[t.name]=t,t.collection=this,t.rebuildSort(),this.on("change",function(){t.rebuildSort(!0)}),t.associated_attrs&&e.each(t.associated_attrs,function(e){n.on("change:"+e,function(e){t.rebuildSort()})})},addSorts:function(t){typeof opts=="undefined"&&(opts={}),e.isArray(t)||(t=[t]);var n=this;e.each(t,function(e){n.addSort(e)})},getSortedItems:function(e){var t=this.sorts[e],n=this,r;return t.sort(this.items)},getItemValue:function(t,n){var r=e.find(this.items,function(e){return e.cid===Number(t)});return r[n]},updateItem:function(t,n,r){this.trigger("will_incremental_change");var i=e.find(this.items,function(e){return e.cid===Number(t)});return i[n]=r,this.trigger("change:"+n,[i]),this.trigger("incremental_change",[n]),this.trigger("update","updateItem"),i.guid},removeItemAttribute:function(t,n,r){this.trigger("will_incremental_change");var i=e.find(this.items,function(e){return e.cid===Number(t)});return delete i[n],this.trigger("change:"+n,[i]),this.trigger("incremental_change",[n]),this.trigger("update","updateItem"),i.guid},batchUpdateItems:function(t,n,r){this.trigger("will_incremental_change");var i=this.get(t,!0);return e.each(i,function(e){e[n]=r}),this.trigger("change:"+n,i),this.trigger("incremental_change",[n]),this.trigger("update","batchUpdate"),e.pluck(i,"guid")},updateAttributes:function(t,n,r){if(typeof r=="undefined")var r=!1;this.trigger("will_incremental_change");var i=e.find(this.items,function(e){return e.cid===Number(t)}),s=this;return e.each(n,function(e,t){i[t]=e,s.trigger("change:"+t,[i])}),this.trigger("incremental_change",e.keys(n)),r||this.trigger("update","updateAttribute"),i.guid},batchUpdateAttributes:function(t,n,r){if(typeof r=="undefined")var r=!1;this.trigger("will_incremental_change");var i=this.get(t,!0),s=this;return e.each(i,function(t){e.each(n,function(e,n){t[n]=e})}),e.each(n,function(e,t){s.trigger("change:"+t,i)}),this.trigger("incremental_change",e.keys(n)),r||(this.trigger("update","batchUpdate"),this.trigger("batchUpdateAttribute")),e.pluck(i,"guid")},batchLoadItems:function(n){this.trigger("will_incremental_change");var r=[],i=e.pluck(n,"guid"),s=this.getBy("guid",i),o={};e(s).each(function(e){o[e.guid]=e}),e.each(n,e.bind(function(n){var i=o[n.guid],u=this.items.length>0?e(this.items).last().cid+1:0,a;i?(a=i,e.each(n,function(e,t){a[t]=e})):(i=t.Item(n),i.cid=u++,r.push(i.cid),this.items=this.items.concat([i]),s[i.guid]=i)},this)),this.regenerateFilterSets(),this.trigger("incremental_change","*"),this.trigger("change",r),this.trigger("update","batchLoad"),this.trigger("batchLoadItems")}}),t.Item=function(e){return e},t.Filter=function(t,n,r){typeof r=="undefined"&&(r={}),this.name=t,this.possibilities=this.createPossibilities(n),this.values=e.pluck(n,"value"),e.extend(this,r),this.initialize.apply(this,arguments)},e.extend(t.Filter.prototype,t.Events,{initialize:function(){},create_possibilities:function(e){return n("create_possibilities","createPossibilities"),this.createPossibilities(e)},createPossibilities:function(t){var n={};return e.each(t,function(e){var t=e.name||String(e.value);n[t]=e,n[t].matching_cids=[]}),n},cacheResults:function(e){throw"No cache function has been defined for this filter '"+this.name+"'."},addCacheResults:function(e){throw"No add cache function has been defined for this filter '"+this.name+"'."},makeQueryMatchSet:function(e,n){return new t.MatchSet(e,this.getCollection(),[[this,n]])},removeFromCache:function(n){var r=e.pluck(n,"cid").sort(function(e,t){return e-t});e.each(this.possibilities,function(e){e.matching_cids=t.subtractSort(e.matching_cids,r)})},query:function(e,t){if(typeof t=="undefined")var t=!1;var n=this.getFn(e);this.setQuery(n,t)},setQuery:function(e,t){if(typeof t=="undefined")var t=!1;this.current_query=e,t||this.trigger("queryChange")},clearQuery:function(e){if(typeof e=="undefined")var e=!1;this.current_query=!1,e||this.trigger("queryChange")},unionQuery:function(t,n){if(typeof n=="undefined")var n=!1;if(typeof t=="string"||typeof t=="number"||e.isArray(t))var t=this.getFn(t);this.current_query?this.current_query=this.current_query.or(t):this.current_query=t,n||this.trigger("queryChange")},intersectQuery:function(t,n){if(typeof n=="undefined")var n=!1;if(typeof t=="string"||typeof t=="number"||e.isArray(t))var t=this.getFn(t);this.current_query?this.current_query=this.current_query.and(t):this.current_query=t,n||this.trigger("queryChange")},subtractQuery:function(t,n){if(typeof n=="undefined")var n=!1;if(typeof t=="string"||typeof t=="number"||e.isArray(t))var t=this.getFn(t);this.current_query?this.current_query=this.current_query.not(t):this.current_query=t,n||this.trigger("queryChange")},removeSingleQuery:function(t,n){if(!this.current_query)return!1;if(typeof n=="undefined")var n=!1;if(typeof t=="string"||typeof t=="number"||e.isArray(t))var t=this.getFn(t);var r=[],i=this.current_query.stack,s,o=function(t){return e.isString(t)&&t.match(/^(or|and|not)$/)};s=e.reduce(i,function(e,n){return n[1]===t.stack[0][1]?e:o(n[0])&&n[1][0][1]===t.stack[0][1]?e:(e.push(n),e)},r),s[0]&&(s[0][0]=="and"||s[0][0]=="or"||s[0][0]=="not")&&(s[0]=s[0][1][0]),this.current_query.stack=s,this.current_query.refresh(),n||this.trigger("queryChange")},getCollection:function(){return this.collection},getByPossibilityGroups:function(){var t=this.collection;return e.reduce(this.possibilities,function(e,n,r){return e[r]=t.get(n.matching_cids),e},{})}}),t.Sort=function(t,n){this.name=t,e.extend(this,n),this.initialize.apply(this,arguments)},e.extend(t.Sort.prototype,t.Events,{initialize:function(){},view:!1,sort:function(e){return t.permuteFromArray(e,this.permutation_array)},rebuild_sort:function(e){n("rebuild_sort","rebuildSort"),this.rebuildSort(e)},rebuildSort:function(e){typeof e=="undefined"&&(e=!1);if(this.view)var n=this.view.match_set.all();else var n=this.collection.items;this.permutation_array=t.buildPermutationArray(n,this),this.trigger("resort",e)}}),t.View=function(n,r,i){var s=this;this.name=n,typeof i=="undefined"&&(i={}),this.collection=r,this.match_set=new t.MatchSet(e.pluck(this.collection.items,"cid"),this.collection,["all"]),i.template&&(this.template=i.template),this.collection.on("will_change will_incremental_change",function(){s.storeViewPosition()}),this.collection.on("change",function(){s.match_set.refresh(),s.setNaturalSelection(),s.resetPage(),s.trigger("collection-change")}),this.collection.on("incremental_change",function(e){s.match_set.refresh(),s.setNaturalSelection(e),s.resetPage(),s.trigger("collection-incremental-change")}),this.collection.on("update",function(e){s.trigger("update",e)}),this.collection.on("queryChange",function(){s.setNaturalSelection(),s.trigger("update","query")}),this.on("sortChange",function(){this.trigger("update","sort")}),this.on("pageChange",function(){this.trigger("update","page")}),this.view_sorts=[],e.extend(this,i),this.initialize.apply(this,arguments)},e.extend(t.View.prototype,t.Events,{initialize:function(){},current_page:0,page_size:Infinity,current_sort:!1,removeSort:function(){this.current_sort.off&&this.current_sort.off("resort"),this.current_sort=!1,this.trigger("sortChange")},setSort:function(t,n,r){typeof n=="undefined"&&(n=!1),typeof r=="undefined"&&(r=!1);var i=this;this.current_sort.off&&this.current_sort.off("resort"),t&&n?(this.current_sort=this.view_sorts[t],this.current_sort.on("resort",e.bind(function(e){(!this.silent_sort||!e)&&i.trigger("sortChange")},this))):t?(this.current_sort=this.collection.sorts[t],this.current_sort.on("resort",e.bind(function(e){(!this.silent_sort||!e)&&i.trigger("sortChange")},this))):this.current_sort=!1,r||this.trigger("sortChange")},getSort:function(){return this.current_sort?this.current_sort.name:!1},addViewSorts:function(t){typeof opts=="undefined"&&(opts={}),e.isArray(t)||(t=[t]);var n=this;e.each(t,function(t){n.view_sorts[t.name]=t,t.collection=n.collection,t.view=n,t.rebuildSort(),n.on("selectionChange",function(n){(t.associated_attrs===undefined||n==="*")&&t.rebuildSort(),t.associated_attrs&&e.intersection(t.associated_attrs,n).length>0&&t.rebuildSort()})})},selectionFn:function(){var t=this.collection;if(e.isEmpty(t.filters))return t.getAllItems();var n=e.reduce(t.filters,function(n,r){var i=r.current_query;return n&&(!i||e.isEmpty(i.stack))?n:!n&&(!i||e.isEmpty(i.stack))?t.getAllItems():n?n.and(i):i},!1);return n},setSelection:function(e,t){this.match_set=e,this.trigger("selectionChange",t)},setNaturalSelection:function(e){var t;t=this.selectionFn(),this.setSelection(t,e)},clearSelection:function(){this.match_set=this.collection.getAllItems()},getCurrentItems:function(t){if(!this.match_set)return[];if(typeof t=="undefined")var t=this.current_page;if(this.page_size==Infinity)if(this.current_sort)var n=this.match_set.allSorted(this.current_sort);else var n=this.match_set.all();else if(this.current_sort){var n=this.match_set.allSortedCids(this.current_sort);n=n.slice(this.page_size*t,this.page_size*(t+1));var r=e.clone(n).sort(function(e,t){return e-t}),i=this.collection.get(r);n=e.map(n,function(t){return e.findWhere(i,{cid:t})})}else{var n=this.match_set.cids;n=n.slice(this.page_size*t,this.page_size*(t+1)),n=this.collection.get(n)}return n},storeViewPosition:function(){var e=this.getCurrentItems()[0];e&&(this.last_head_cid=e.cid)},resetPage:function(){this.last_head_cid&&(this.current_sort&&this.current_sort.rebuildSort(),this.pageTo(this.last_head_cid,!0)),this.last_head_cid=undefined},page:function(e){var t=e+this.current_page;t<0&&(t=0),t>Math.ceil(this.match_set.length()/this.page_size-1)&&(t=Math.ceil(this.match_set.length()/this.page_size-1)),this.current_page=t,this.trigger("pageChange")},pageTo:function(t,n){if(typeof n=="undefined")var n=!1;if(this.current_sort)var r=e.indexOf(this.match_set.allSortedCids(this.current_sort),t),i=this.match_set.cids.length,s=Math.floor(r/this.page_size);else var r=e.indexOf(this.match_set.cids,t),i=this.match_set.cids.length,s=Math.floor(r/this.page_size);r>=0&&(this.current_page=s,n||this.trigger("pageChange"))},setPage:function(e){e<0&&(e=0),e>Math.ceil(this.match_set.length()/this.page_size-1)&&(e=Math.ceil(this.match_set.length()/this.page_size-1)),this.current_page=e,this.trigger("pageChange")},setPageSize:function(e){this.page_size=e,this.trigger("pageChange")},render:function(){}}),t.MatchSet=function(e,t,n){this.cids=e,this.collection=t,this.stack=n,this.initialize.apply(this,arguments)},e.extend(t.MatchSet.prototype,t.Events,{initialize:function(){},refresh:function(n,r){if(typeof n=="undefined")var n=this.stack||[];if(n.length<1&&r)return this.cids=r.cids,this;if(n.length<1)return this.cids=!1,this;var i=n[0],s=i[0],o=function(t){return e.isString(t)&&t.match(/^(or|and|not)$/)};if(typeof s=="object")return r=s.getFn(i[1]),this.refresh(e.rest(n),r);if(s==="all"||i==="all"){var u=e.pluck(this.collection.items,"cid");return r=new t.MatchSet(u,this,["all"]),this.refresh(e.rest(n),r)}if(o(s))var a=r[s](this.refresh(i[1]));else var a=this.refresh(i[1]);return this.refresh(e.rest(n),a)},and:function(e){if(this.stack.length<1&&e)return e;if(!e)return this;var n=t.intersectSort(this.cids,e.cids);return new t.MatchSet(n,this.collection,this.stack.concat([["and",e.stack]]))},or:function(e){if(this.stack.length<1&&e)return e;if(!e)return this;var n=t.unionSort(this.cids,e.cids);return new t.MatchSet(n,this.collection,this.stack.concat([["or",e.stack]]))},not:function(e){if(this.stack.length<1||!e)return this;var n=t.subtractSort(this.cids,e.cids);return new t.MatchSet(n,this.collection,this.stack.concat([["not",e.stack]]))},all:function(){return this.collection.get(this.cids)},slice:function(e,t){return this.collection.get(this.cids.slice(e,t))},all_sorted:function(e){return n("all_sorted","allSorted"),this.allSorted(e)},allSorted:function(e){var t=this.all();return e?e.sort(t):t},all_sorted_cids:function(e){return n("all_sorted_cids","allSortedCids"),this.allSortedCids(e)},allSortedCids:function(e){var t=this.cids;return e?e.sort(t):t},length:function(){return this.cids.length}}),t.UI={},t.UI.Element=function(t){if(typeof t=="undefined")var t={};e.extend(this,t),this.initialize.apply(this,arguments)},e.extend(t.UI.Element.prototype,t.Events,{initialize:function(){},getMatchSet:function(){throw"No get match set function specified"},getFilterState:function(){throw"No get filter state specified"},template:function(){throw"No template specified"},render:function(){var e=this.getFilterState(),t=this.template({state:e});return t},getSimpleSelectState:function(t,n,r){if(typeof t=="undefined"||!t||!t.stack)return!1;typeof n=="undefined"&&(n=t.stack),typeof r=="undefined"&&(r=[]);if(n.length<1)return r;if(typeof n[0][0]=="object")return r.push(n[0][1]),this.getSimpleSelectState(t,e.rest(n),r);if(n[0][0]==="or")return r=r.concat(this.getSimpleSelectState(t,n[0][1])),this.getSimpleSelectState(t,e.rest(n),r);throw"This does not appear to be a valid, simple selectElement stack."},getIntersectedSelectState:function(t,n,r){if(typeof t=="undefined"||!t||!t.stack)return!1;typeof n=="undefined"&&(n=t.stack),typeof r=="undefined"&&(r=[]);if(n.length<1)return r;if(typeof n[0][0]=="object")return r.push(n[0][1]),this.getIntersectedSelectState(t,e.rest(n),r);if(n[0][0]==="and")return r=r.concat(this.getIntersectedSelectState(t,n[0][1])),this.getIntersectedSelectState(t,e.rest(n),r);throw"This does not appear to be a valid, simple selectElement stack."},getSimpleRangeState:function(e){if(typeof e=="undefined"||!e||!e.stack)return!1;stack=e.stack;if(stack.length!==1||stack[0][1].length!==2)throw"The filter specified does not appear to have a simple range; stack.";return stack[0][1]}}),t.extend=function(t,n){var r=this,i;t&&e.has(t,"constructor")?i=t.constructor:i=function(){return r.apply(this,arguments)},e.extend(i,r,n);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,t&&e.extend(i.prototype,t),i.__super__=r.prototype,i},t.Collection.extend=t.View.extend=t.Filter.extend=t.Sort.extend=t.MatchSet.extend=t.UI.Element.extend=t.extend,t.BufferedCollection=t.Collection.extend({initialize:function(){this.buffered_items={}},stripFutures:function(t){return e.reduce(t,function(e,t,n){return typeof t!="undefined"&&(e[n]=t),e},{})},get:function(n,r){typeof r=="undefined"&&(r=!1);var i=t.Collection.prototype.get.call(this,n),s=this;return r?i:e.map(i,function(t){var n=t.guid,r;return s.buffered_items.hasOwnProperty(n)?e.extend(s.buffered_items[n],s.stripFutures(t)):t})},getBy:function(n,r,i,s){typeof s=="undefined"&&(s=!1);var o=t.Collection.prototype.getBy.call(this,n,r,i),u=this;return s?o:e.map(o,function(t){var n=t.guid,r;return u.buffered_items.hasOwnProperty(n)?e.extend(u.buffered_items[n],u.stripFutures(t)):t})},getBufferedValue:function(e,t){return this.buffered_items.hasOwnProperty(e)?this.buffered_items[e][t]||!1:!1},clearBufferedItems:function(){var e=this.buffered_items;for(var t in e)e.hasOwnProperty(t)&&delete e[t]},getBufferUrl:function(e){throw"You must override getBufferUrl"},preprocessItem:function(e){return[e.guid,e]},bufferGuids:function(t){var n=this;t=e.select(t,function(e){return e&&!n.buffered_items.hasOwnProperty(e)});var r=this.getBufferUrl(t),i=r[0],s=r[1];return t.length>0?$.ajax({url:i,dataType:"jsonp",cache:!0}).always(function(t){e.isArray(t)&&(items=e.map(t,n.preprocessItem,n),e.each(items,function(e){n.buffered_items[e[0]]=e[1]}))}):$.Deferred().resolve(!1)}}),t.BufferedView=t.View.extend({buffer_pages:1,bufferAroundCurrentPage:function(){var t=this.current_page,n=t-this.buffer_pages>0?t-this.buffer_pages:0,r=t+this.buffer_pages,i=e.range(n,r+1),s=this;i=e.map(i,function(t){return e.pluck(s.getCurrentItems(t),"guid")});var o=e.flatten(i);buffer_deferred=this.collection.bufferGuids(o),buffer_deferred.done(function(e){e&&s.render()})},bufferRender:function(){var t=e.pluck(this.getCurrentItems(),"guid"),n=this.collection.bufferGuids(t);n.done(e.bind(function(){this.render()},this))},page:function(e){t.View.prototype.page.call(this,e),this.bufferAroundCurrentPage()},pageTo:function(e,n){typeof n=="undefined"&&(n=!1),t.View.prototype.pageTo.call(this,e,n),this.bufferAroundCurrentPage()}}),t.manualFilter=t.Filter.extend({cacheResults:function(){return!1},addCacheResults:function(){return!1},getFn:function(n){if(e.isArray(n))return n=n.sort(function(e,t){return e-t}),new t.MatchSet(n,this.getCollection(),[[this,n]]);if(typeof n=="number")return new t.MatchSet([n],this.getCollection(),[[this,n]]);throw"Manual filters only support querying by one or more cids"},addItems:function(n){e.isArray(n)||(n=[n]),n=n.sort(function(e,t){return e-t});if(this.current_query)var r=this.current_query.cids,i=t.unionSort(r,n);else var i=n;this.query(i)},removeItems:function(n){e.isArray(n)||(n=[n]),n=n.sort(function(e,t){return e-t});var r=this.current_query.cids,i=t.subtractSort(r,n);this.query(i)}}),t.makeManualFilter=function(e){var n=new t.manualFilter(e,[]);return n},t.exactFilter=t.Filter.extend({cacheResults:t.cacheMethods.exactCache,addCacheResults:t.cacheMethods.exactAddCache,getFn:function(n){var r=this;if(e.isArray(n)){var i=e.reduce(n,function(e,t){return e?e.or(r.getFn(t)):r.getFn(t)},!1);return i}var s=this.possibilities[n];if(e.isUndefined(s))throw"The filter "+this.name+" does not have a match for the query '"+n+"'.";return new t.MatchSet(s.matching_cids,this.getCollection(),[[this,n]])}}),t.makeExactFilter=function(n,r,i){typeof i=="undefined"&&(i={});var s=i.attr||n;return r=e.map(r,function(e){return{value:e}}),i=e.extend({associated_attrs:[s]},i),new t.exactFilter(n,r,i)},t.inclusionFilter=t.exactFilter.extend({cacheResults:t.cacheMethods.inclusionCache,addCacheResults:t.cacheMethods.inclusionAddCache}),t.makeInclusionFilter=function(n,r,i){typeof i=="undefined"&&(i={});var s=i.attr||n;return r=e.map(r,function(e){return{value:e}}),i=e.extend({associated_attrs:[s]},i),new t.inclusionFilter(n,r,i)},t.rangeFilter=t.Filter.extend({cacheResults:t.cacheMethods.defaultCache,addCacheResults:t.cacheMethods.defaultAddCache,fn:function(e,t){var n=this.attr||this.name;return e.low<=t[n]&&e.high>=t[n]},getFn:function(n){var r=this.possibilities[n.join("-")];if(e.isUndefined(r))throw"The filter "+this.name+" does not have a match for the query '"+n+"'.";return new t.MatchSet(r.matching_cids,this.getCollection(),[[this,n]])}}),t.makeRangeFilter=function(n,r,i){typeof i=="undefined"&&(i={});var s=e.map(r,function(e){return{low:e[0],high:e[1],value:e.join("-")}}),o=i.attr||n,u=e.extend({associated_attrs:[o]},i),a=new t.rangeFilter(n,s,u);return a},t.dvrangeFilter=t.Filter.extend({cacheResults:t.cacheMethods.exactCache,addCacheResults:t.cacheMethods.exactAddCache,getFn:function(n){if(!n[0]||!n[1])return new t.MatchSet([],this.getCollection(),[[this,n]]);var r,i,s,o,u;return r=e.indexOf(this.values,n[0]),i=e.indexOf(this.values,n[1]),s=this,o=e.map(this.values.slice(r,i+1),function(e){return s.possibilities[e]}),u=e.reduce(o,function(e,n){return t.unionSort(e,n.matching_cids)},[]),new t.MatchSet(u,this.getCollection(),[[this,n]])}}),t.makeDVrangeFilter=function(n,r,i){typeof i=="undefined"&&(i={});var s=e.map(r,function(e){return{value:e}}),o=i.attr||n,u=e.extend({associated_attrs:[o]},i),a=new t.dvrangeFilter(n,s,u);return a},t.continuousRangeFilter=t.Filter.extend({cacheResults:function(t){this.values=e.map(t,function(e){return{cid:e.cid,val:e[this.name]}},this),this.values.sort(function(e,t){return e.val-t.val})},addCacheResults:function(e){this.values=this.values.concat(e),this.values.sort(function(e,t){return e.val-t.val})},getFn:function(n){var r,i,s=this.values.length,o=t.bisectBy(function(e){return e.val});if(e.isArray(n)){if(e.isUndefined(n[0])||e.isUndefined(n[1]))return new t.MatchSet([],this.getCollection(),[[this,n]]);r=o.left(this.values,n[0],0,s),i=o.left(this.values,n[1],0,s)}else{if(e.isUndefined(n))return new t.MatchSet([],this.getCollection(),[[this,n]]);r=o.left(this.values,n,0,s),i=o.right(this.values,n,0,s)}var u=[],a=r;while(a<i)u.push(this.values[a].cid),++a;return u.sort(function(e,t){return e-t}),new t.MatchSet(u,this.getCollection(),[[this,n]])}}),t.makeContinuousRangeFilter=function(n,r){typeof r=="undefined"&&(r={});var i=r.attr||n,s=e.extend({associated_attrs:[i]},r),o=new t.continuousRangeFilter(n,s);return o},t.explicitSort=t.Sort.extend({fn:function(t,n){var r=e.indexOf(this.order,t[this.attr]),i=e.indexOf(this.order,n[this.attr]);return r===-1&&(r=1/0),i===-1&&(i=1/0),r-i},reset:function(t){this.order=e.pluck(t,this.attr),this.rebuildSort()},insert:function(t,n){typeof n=="undefined"&&(n=this.order.length),e.isArray(t)||(t=[t]);var r=e.pluck(t,this.attr),i=[n,0].concat(r);this.order.splice.apply(this.order,i),this.rebuildSort()},remove:function(t){e.isArray(t)||(t=[t]);var n=e.pluck(t,this.attr);this.order=e.difference(this.order,n),this.rebuildSort()},move:function(t,n){e.isArray(t)||(t=[t]);var r=e.pluck(t,this.attr);this.order=e.map(this.order,function(t){return e.include(r,t)?null:t}),this.insert(t,n),this.order=e.compact(this.order)}}),t.makeExplicitSort=function(e,n,r,i,s){var o=new t.explicitSort(e,s);return o.associated_attrs=[r],o.order=i,o},t.reverseCidSort=t.Sort.extend({fn:function(e,t){return t.cid-e.cid}}),t.makeReverseCidSort=function(e,n){var r=new t.reverseCidSort(e);return r.associated_attrs=["cid"],r},t.UI.SimpleSelectElement=t.UI.Element.extend({initialize:function(e){if(!e.filter)throw"A simple select element must have a filter specified";this.filter=e.filter},getMatchSet:function(){return this.filter.current_query},getFilterState:function(){var e=this.getMatchSet();return this.getSimpleSelectState(e)}}),t.UI.SimpleDVRangeElement=t.UI.Element.extend({initialize:function(e){if(!e.filter)throw"A simple dv range element must have a filter specified";this.filter=e.filter},getMatchSet:function(){return this.filter.current_query},getFilterState:function(){var e=this.getMatchSet();return this.getSimpleRangeState(e)}}),t}();return t}),function(e,t){typeof define=="function"&&define.amd?define(["pusher"],function(){return e.Pusher=t()}):typeof exports=="object"?module.exports=t():e.Pusher=t()}(this,function(){return function(){function e(t,r){n(t),r=r||{};var i=this;this.key=t,this.config=e.Util.extend(e.getGlobalConfig(),r.cluster?e.getClusterConfig(r.cluster):{},r),this.channels=new e.Channels,this.global_emitter=new e.EventsDispatcher,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new e.Timeline(this.key,this.sessionID,{cluster:this.config.cluster,features:e.Util.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:e.Timeline.INFO,version:e.VERSION}),this.config.disableStats||(this.timelineSender=new e.TimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/jsonp"}));var s=function(t){var n=e.Util.extend({},i.config,t);return e.StrategyBuilder.build(e.getDefaultStrategy(n),n)};this.connection=new e.ConnectionManager(this.key,e.Util.extend({getStrategy:s,timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){i.subscribeAll(),i.timelineSender&&i.timelineSender.send(i.connection.isEncrypted())}),this.connection.bind("message",function(e){var t=e.event.indexOf("pusher_internal:")===0;if(e.channel){var n=i.channel(e.channel);n&&n.handleEvent(e.event,e.data)}t||i.global_emitter.emit(e.event,e.data)}),this.connection.bind("disconnected",function(){i.channels.disconnect()}),this.connection.bind("error",function(t){e.warn("Error",t)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&i.connect()}function n(t){(t===null||t===undefined)&&e.warn("Warning","You must pass your app key when you instantiate Pusher.")}var t=e.prototype;e.instances=[],e.isReady=!1,e.debug=function(){if(!e.log)return;e.log(e.Util.stringify.apply(this,arguments))},e.warn=function(){var t=e.Util.stringify.apply(this,arguments);window.console&&(window.console.warn?window.console.warn(t):window.console.log&&window.console.log(t)),e.log&&e.log(t)},e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},t.channel=function(e){return this.channels.find(e)},t.allChannels=function(){return this.channels.all()},t.connect=function(){this.connection.connect();if(this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),n=this.timelineSender;this.timelineSenderTimer=new e.PeriodicTimer(6e4,function(){n.send(t)})}},t.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.bind=function(e,t){return this.global_emitter.bind(e,t),this},t.bind_all=function(e){return this.global_emitter.bind_all(e),this},t.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},t.subscribe=function(e){var t=this.channels.add(e,this);return this.connection.state==="connected"&&t.subscribe(),t},t.unsubscribe=function(e){var t=this.channels.remove(e);t&&this.connection.state==="connected"&&t.unsubscribe()},t.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},t.isEncrypted=function(){return e.Util.getDocument().location.protocol==="https:"?!0:Boolean(this.config.encrypted)},e.HTTP={},this.Pusher=e}.call(this),function(){function e(e){window.clearTimeout(e)}function t(e){window.clearInterval(e)}function n(e,t,n,r){var i=this;this.clear=t,this.timer=e(function(){i.timer!==null&&(i.timer=r(i.timer))},n)}var r=n.prototype;r.isRunning=function(){return this.timer!==null},r.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},Pusher.Timer=function(t,r){return new n(setTimeout,e,t,function(e){return r(),null})},Pusher.PeriodicTimer=function(e,r){return new n(setInterval,t,e,function(e){return r(),e})}}.call(this),function(){Pusher.Util={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new Pusher.Timer(0,e)},extend:function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n[r]&&n[r].constructor&&n[r].constructor===Object?e[r]=Pusher.Util.extend(e[r]||{},n[r]):e[r]=n[r]}return e},stringify:function(){var e=["Pusher"];for(var t=0;t<arguments.length;t++)typeof arguments[t]=="string"?e.push(arguments[t]):window.JSON===undefined?e.push(arguments[t].toString()):e.push(JSON.stringify(arguments[t]));return e.join(" : ")},arrayIndexOf:function(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},objectApply:function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)},keys:function(e){var t=[];return Pusher.Util.objectApply(e,function(e,n){t.push(n)}),t},values:function(e){var t=[];return Pusher.Util.objectApply(e,function(e){t.push(e)}),t},apply:function(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)},map:function(e,t){var n=[];for(var r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n},mapObject:function(e,t){var n={};return Pusher.Util.objectApply(e,function(e,r){n[r]=t(e)}),n},filter:function(e,t){t=t||function(e){return!!e};var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n},filterObject:function(e,t){var n={};return Pusher.Util.objectApply(e,function(r,i){if(t&&t(r,i,e,n)||Boolean(r))n[i]=r}),n},flatten:function(e){var t=[];return Pusher.Util.objectApply(e,function(e,n){t.push([n,e])}),t},any:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},all:function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},method:function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t.concat(arguments))}},getWindow:function(){return window},getDocument:function(){return document},getLocalStorage:function(){try{return window.localStorage}catch(e){return undefined}},getClientFeatures:function(){return Pusher.Util.keys(Pusher.Util.filterObject({ws:Pusher.WSTransport},function(e){return e.isSupported({})}))},addWindowListener:function(e,t){var n=Pusher.Util.getWindow();n.addEventListener!==undefined?n.addEventListener(e,t,!1):n.attachEvent("on"+e,t)},removeWindowListener:function(e,t){var n=Pusher.Util.getWindow();n.addEventListener!==undefined?n.removeEventListener(e,t,!1):n.detachEvent("on"+e,t)},isXHRSupported:function(){var e=window.XMLHttpRequest;return Boolean(e)&&(new e).withCredentials!==undefined},isXDRSupported:function(e){var t=e?"https:":"http:",n=Pusher.Util.getDocument().location.protocol;return Boolean(window.XDomainRequest)&&n===t}}}.call(this),function(){Pusher.VERSION="3.0.0",Pusher.PROTOCOL=7,Pusher.host="ws.pusherapp.com",Pusher.ws_port=80,Pusher.wss_port=443,Pusher.sockjs_host="sockjs.pusher.com",Pusher.sockjs_http_port=80,Pusher.sockjs_https_port=443,Pusher.sockjs_path="/pusher",Pusher.stats_host="stats.pusher.com",Pusher.channel_auth_endpoint="/pusher/auth",Pusher.channel_auth_transport="ajax",Pusher.activity_timeout=12e4,Pusher.pong_timeout=3e4,Pusher.unavailable_timeout=1e4,Pusher.cdn_http="http://js.pusher.com/",Pusher.cdn_https="https://js.pusher.com/",Pusher.dependency_suffix="",Pusher.getDefaultStrategy=function(e){var t;return e.encrypted?t=[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:t=[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:e.wsHost+":"+e.wsPort,hostEncrypted:e.wsHost+":"+e.wssPort}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:e.httpHost+":"+e.httpPort,hostEncrypted:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],t,":http_fallback_loop"]]]]]}}.call(this),function(){Pusher.getGlobalConfig=function(){return{wsHost:Pusher.host,wsPort:Pusher.ws_port,wssPort:Pusher.wss_port,httpHost:Pusher.sockjs_host,httpPort:Pusher.sockjs_http_port,httpsPort:Pusher.sockjs_https_port,httpPath:Pusher.sockjs_path,statsHost:Pusher.stats_host,authEndpoint:Pusher.channel_auth_endpoint,authTransport:Pusher.channel_auth_transport,activity_timeout:Pusher.activity_timeout,pong_timeout:Pusher.pong_timeout,unavailable_timeout:Pusher.unavailable_timeout}},Pusher.getClusterConfig=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}}}.call(this),function(){function e(e){var t=function(t){Error.call(this,t),this.name=e};return Pusher.Util.extend(t.prototype,Error.prototype),t}Pusher.Errors={BadEventName:e("BadEventName"),RequestTimedOut:e("RequestTimedOut"),TransportPriorityTooLow:e("TransportPriorityTooLow"),TransportClosed:e("TransportClosed"),UnsupportedTransport:e("UnsupportedTransport"),UnsupportedStrategy:e("UnsupportedStrategy")}}.call(this),function(){function e(e){this.callbacks=new n,this.global_callbacks=[],this.failThrough=e}function n(){this._callbacks={}}function r(e){return"_"+e}var t=e.prototype;t.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},t.bind_all=function(e){return this.global_callbacks.push(e),this},t.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},t.unbind_all=function(e,t){return this.callbacks.remove(e,t),this},t.emit=function(e,t){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var r=this.callbacks.get(e);if(r&&r.length>0)for(n=0;n<r.length;n++)r[n].fn.call(r[n].context||window,t);else this.failThrough&&this.failThrough(e,t);return this},n.prototype.get=function(e){return this._callbacks[r(e)]},n.prototype.add=function(e,t,n){var i=r(e);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:t,context:n})},n.prototype.remove=function(e,t,n){if(!e&&!t&&!n){this._callbacks={};return}var i=e?[r(e)]:Pusher.Util.keys(this._callbacks);t||n?Pusher.Util.apply(i,function(e){this._callbacks[e]=Pusher.Util.filter(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),this._callbacks[e].length===0&&delete this._callbacks[e]},this):Pusher.Util.apply(i,function(e){delete this._callbacks[e]},this)},Pusher.EventsDispatcher=e}.call(this),function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}var t=e.prototype;t.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+"["+t+"]",i=!1,s=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=s,{number:t,id:n,name:r,callback:s}},t.remove=function(e){delete this[e.number]},Pusher.ScriptReceiverFactory=e,Pusher.ScriptReceivers=new e("_pusher_script_","Pusher.ScriptReceivers")}.call(this),function(){function e(e){this.src=e}var t=e.prototype;t.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){(t.script.readyState==="loaded"||t.script.readyState==="complete")&&e.callback(null)},t.script.async===undefined&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)},t.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},Pusher.ScriptRequest=e}.call(this),function(){function e(e){this.options=e,this.receivers=e.receivers||Pusher.ScriptReceivers,this.loading={}}var t=e.prototype;t.load=function(e,t,n){var r=this;if(r.loading[e]&&r.loading[e].length>0)r.loading[e].push(n);else{r.loading[e]=[n];var i=new Pusher.ScriptRequest(r.getPath(e,t)),s=r.receivers.create(function(t){r.receivers.remove(s);if(r.loading[e]){var n=r.loading[e];delete r.loading[e];var o=function(e){e||i.cleanup()};for(var u=0;u<n.length;u++)n[u](t,o)}});i.send(s)}},t.getRoot=function(e){var t,n=Pusher.Util.getDocument().location.protocol;return e&&e.encrypted||n==="https:"?t=this.options.cdn_https:t=this.options.cdn_http,t.replace(/\/*$/,"")+"/"+this.options.version},t.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},Pusher.DependencyLoader=e}.call(this),function(){function e(){Pusher.ready()}function t(e){document.body?e():setTimeout(function(){t(e)},0)}function n(){t(e)}Pusher.DependenciesReceivers=new Pusher.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),Pusher.Dependencies=new Pusher.DependencyLoader({cdn_http:Pusher.cdn_http,cdn_https:Pusher.cdn_https,version:Pusher.VERSION,suffix:Pusher.dependency_suffix,receivers:Pusher.DependenciesReceivers}),window.JSON?n():Pusher.Dependencies.load("json2",{},n)}(),function(){var e={encode:function(e){return f(u(e))}},t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={};for(var i=0,s=n.length;i<s;i++)r[n.charAt(i)]=i;var o=function(e){var n=e.charCodeAt(0);return n<128?e:n<2048?t(192|n>>>6)+t(128|n&63):t(224|n>>>12&15)+t(128|n>>>6&63)+t(128|n&63)},u=function(e){return e.replace(/[^\x00-\x7F]/g,o)},a=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),i=[n.charAt(r>>>18),n.charAt(r>>>12&63),t>=2?"=":n.charAt(r>>>6&63),t>=1?"=":n.charAt(r&63)];return i.join("")},f=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,a)};Pusher.Base64=e}.call(this),function(){function e(e,t){this.url=e,this.data=t}function n(e){return Pusher.Util.mapObject(e,function(e){return typeof e=="object"&&(e=JSON.stringify(e)),encodeURIComponent(Pusher.Base64.encode(e.toString()))})}var t=e.prototype;t.send=function(e){if(this.request)return;var t=Pusher.Util.filterObject(this.data,function(e){return e!==undefined}),r=Pusher.Util.map(Pusher.Util.flatten(n(t)),Pusher.Util.method("join","=")).join("&"),i=this.url+"/"+e.number+"?"+r;this.request=new Pusher.ScriptRequest(i),this.request.send(e)},t.cleanup=function(){this.request&&this.request.cleanup()},Pusher.JSONPRequest=e}.call(this),function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}var t=e.prototype;e.ERROR=3,e.INFO=6,e.DEBUG=7,t.log=function(e,t){e<=this.options.level&&(this.events.push(Pusher.Util.extend({},t,{timestamp:Pusher.Util.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.error=function(t){this.log(e.ERROR,t)},t.info=function(t){this.log(e.INFO,t)},t.debug=function(t){this.log(e.DEBUG,t)},t.isEmpty=function(){return this.events.length===0},t.send=function(e,t){var n=this,r=Pusher.Util.extend({session:n.session,bundle:n.sent+1,key:n.key,lib:"js",version:n.options.version,cluster:n.options.cluster,features:n.options.features,timeline:n.events},n.options.params);return n.events=[],e(r,function(e,r){e||n.sent++,t&&t(e,r)}),!0},t.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},Pusher.Timeline=e}.call(this),function(){function e(e,t){this.timeline=e,this.options=t||{}}var t=e.prototype;t.send=function(e,t){var n=this;if(n.timeline.isEmpty())return;var r=function(t,r){var i="http"+(e?"s":"")+"://",s=i+(n.host||n.options.host)+n.options.path,o=new Pusher.JSONPRequest(s,t),u=Pusher.ScriptReceivers.create(function(e,t){Pusher.ScriptReceivers.remove(u),o.cleanup(),t&&t.host&&(n.host=t.host),r&&r(e,t)});o.send(u)};n.timeline.send(r,t)},Pusher.TimelineSender=e}.call(this),function(){function e(e){this.strategies=e}function n(e,t,n){var r=Pusher.Util.map(e,function(e,r,i,s){return e.connect(t,n(r,s))});return{abort:function(){Pusher.Util.apply(r,i)},forceMinPriority:function(e){Pusher.Util.apply(r,function(t){t.forceMinPriority(e)})}}}function r(e){return Pusher.Util.all(e,function(e){return Boolean(e.error)})}function i(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}var t=e.prototype;t.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},t.connect=function(e,t){return n(this.strategies,e,function(e,n){return function(i,s){n[e].error=i;if(i){r(n)&&t(!0);return}Pusher.Util.apply(n,function(e){e.forceMinPriority(s.transport.priority)}),t(null,s)}})},Pusher.BestConnectedEverStrategy=e}.call(this),function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}function n(e){return"pusherTransport"+(e?"Encrypted":"Unencrypted")}function r(e){var t=Pusher.Util.getLocalStorage();if(t)try{var r=t[n(e)];if(r)return JSON.parse(r)}catch(i){s(e)}return null}function i(e,t,r){var i=Pusher.Util.getLocalStorage();if(i)try{i[n(e)]=JSON.stringify({timestamp:Pusher.Util.now(),transport:t,latency:r})}catch(s){}}function s(e){var t=Pusher.Util.getLocalStorage();if(t)try{delete t[n(e)]}catch(r){}}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.encrypted,o=r(n),u=[this.strategy];if(o&&o.timestamp+this.ttl>=Pusher.Util.now()){var a=this.transports[o.transport];a&&(this.timeline.info({cached:!0,transport:o.transport,latency:o.latency}),u.push(new Pusher.SequentialStrategy([a],{timeout:o.latency*2+1e3,failFast:!0})))}var f=Pusher.Util.now(),l=u.pop().connect(e,function c(r,o){r?(s(n),u.length>0?(f=Pusher.Util.now(),l=u.pop().connect(e,c)):t(r)):(i(n,o.transport.name,Pusher.Util.now()-f),t(null,o))});return{abort:function(){l.abort()},forceMinPriority:function(t){e=t,l&&l.forceMinPriority(t)}}},Pusher.CachedStrategy=e}.call(this),function(){function e(e,t){this.strategy=e,this.options={delay:t.delay}}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.strategy,r,i=new Pusher.Timer(this.options.delay,function(){r=n.connect(e,t)});return{abort:function(){i.ensureAborted(),r&&r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}},Pusher.DelayedStrategy=e}.call(this),function(){function e(e){this.strategy=e}var t=e.prototype;t.isSupported=function(){return this.strategy.isSupported()},t.connect=function(e,t){var n=this.strategy.connect(e,function(e,r){r&&n.abort(),t(e,r)});return n},Pusher.FirstConnectedStrategy=e}.call(this),function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}var t=e.prototype;t.isSupported=function(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()},t.connect=function(e,t){var n=this.test()?this.trueBranch:this.falseBranch;return n.connect(e,t)},Pusher.IfStrategy=e}.call(this),function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}var t=e.prototype;t.isSupported=function(){return Pusher.Util.any(this.strategies,Pusher.Util.method("isSupported"))},t.connect=function(e,t){var n=this,r=this.strategies,i=0,s=this.timeout,o=null,u=function(a,f){f?t(null,f):(i+=1,n.loop&&(i%=r.length),i<r.length?(s&&(s*=2,n.timeoutLimit&&(s=Math.min(s,n.timeoutLimit))),o=n.tryStrategy(r[i],e,{timeout:s,failFast:n.failFast},u)):t(!0))};return o=this.tryStrategy(r[i],e,{timeout:s,failFast:this.failFast},u),{abort:function(){o.abort()},forceMinPriority:function(t){e=t,o&&o.forceMinPriority(t)}}},t.tryStrategy=function(e,t,n,r){var i=null,s=null;return n.timeout>0&&(i=new Pusher.Timer(n.timeout,function(){s.abort(),r(!0)})),s=e.connect(t,function(e,t){if(e&&i&&i.isRunning()&&!n.failFast)return;i&&i.ensureAborted(),r(e,t)}),{abort:function(){i&&i.ensureAborted(),s.abort()},forceMinPriority:function(e){s.forceMinPriority(e)}}},Pusher.SequentialStrategy=e}.call(this),function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}function n(e,t){return Pusher.Util.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var t=e.prototype;t.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},t.connect=function(e,t){if(!this.isSupported())return n(new Pusher.Errors.UnsupportedStrategy,t);if(this.priority<e)return n(new Pusher.Errors.TransportPriorityTooLow,t);var r=this,i=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,u=function(){s.unbind("initialized",u),s.connect()},a=function(){o=new Pusher.Handshake(s,function(e){i=!0,c(),t(null,e)})},f=function(e){c(),t(e)},l=function(){c(),t(new Pusher.Errors.TransportClosed(s))},c=function(){s.unbind("initialized",u),s.unbind("open",a),s.unbind("error",f),s.unbind("closed",l)};return s.bind("initialized",u),s.bind("open",a),s.bind("error",f),s.bind("closed",l),s.initialize(),{abort:function(){if(i)return;c(),o?o.close():s.close()},forceMinPriority:function(e){if(i)return;r.priority<e&&(o?o.close():s.close())}}},Pusher.TransportStrategy=e}.call(this),function(){function e(e,t,n){var r=e+(t.encrypted?"s":""),i=t.encrypted?t.hostEncrypted:t.hostUnencrypted;return r+"://"+i+n}function t(e,t){var n="/app/"+e,r="?protocol="+Pusher.PROTOCOL+"&client=js"+"&version="+Pusher.VERSION+(t?"&"+t:"");return n+r}Pusher.URLSchemes={ws:{getInitial:function(n,r){return e("ws",r,t(n,"flash=false"))}},sockjs:{getInitial:function(t,n){return e("http",n,n.httpPath||"/pusher","")},getPath:function(e,n){return t(e)}},http:{getInitial:function(n,r){var i=(r.httpPath||"/pusher")+t(n);return e("http",r,i)}}}}.call(this),function(){function e(e,t,n,r,i){Pusher.EventsDispatcher.call(this),this.hooks=e,this.name=t,this.priority=n,this.key=r,this.options=i,this.state="new",this.timeline=i.timeline,this.activityTimeout=i.activityTimeout,this.id=this.timeline.generateUniqueID()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.initialize=function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.encrypted?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),Pusher.Dependencies.load(e.hooks.file,{encrypted:e.options.encrypted},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},t.connect=function(){var e=this;if(e.socket||e.state!=="initialized")return!1;var t=e.hooks.urls.getInitial(e.key,e.options);try{e.socket=e.hooks.getSocket(t,e.options)}catch(n){return Pusher.Util.defer(function(){e.onError(n),e.changeState("closed")}),!1}return e.bindListeners(),Pusher.debug("Connecting",{transport:e.name,url:t}),e.changeState("connecting"),!0},t.close=function(){return this.socket?(this.socket.close(),!0):!1},t.send=function(e){var t=this;return t.state==="open"?(Pusher.Util.defer(function(){t.socket&&t.socket.send(e)}),!0):!1},t.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},t.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=undefined},t.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=undefined},t.onMessage=function(e){this.emit("message",e)},t.onActivity=function(){this.emit("activity")},t.bindListeners=function(){var e=this;e.socket.onopen=function(){e.onOpen()},e.socket.onerror=function(t){e.onError(t)},e.socket.onclose=function(t){e.onClose(t)},e.socket.onmessage=function(t){e.onMessage(t)},e.supportsPing()&&(e.socket.onactivity=function(){e.onActivity()})},t.unbindListeners=function(){this.socket&&(this.socket.onopen=undefined,this.socket.onerror=undefined,this.socket.onclose=undefined,this.socket.onmessage=undefined,this.supportsPing()&&(this.socket.onactivity=undefined))},t.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.buildTimelineMessage=function(e){return Pusher.Util.extend({cid:this.id},e)},Pusher.TransportConnection=e}.call(this),function(){function e(e){this.hooks=e}var t=e.prototype;t.isSupported=function(e){return this.hooks.isSupported(e)},t.createConnection=function(e,t,n,r){return new Pusher.TransportConnection(this.hooks,e,t,n,r)},Pusher.Transport=e}.call(this),function(){Pusher.WSTransport=new Pusher.Transport({urls:Pusher.URLSchemes.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(window.WebSocket||window.MozWebSocket)},isSupported:function(){return Boolean(window.WebSocket||window.MozWebSocket)},getSocket:function(e){var t=window.WebSocket||window.MozWebSocket;return new t(e)}}),Pusher.SockJSTransport=new Pusher.Transport({file:"sockjs",urls:Pusher.URLSchemes.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==undefined},getSocket:function(e,t){return new SockJS(e,null,{js_path:Pusher.Dependencies.getPath("sockjs",{encrypted:t.encrypted}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}});var e={urls:Pusher.URLSchemes.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return Boolean(Pusher.HTTP.Socket)}},t=Pusher.Util.extend({getSocket:function(e){return Pusher.HTTP.getStreamingSocket(e)}},e),n=Pusher.Util.extend({getSocket:function(e){return Pusher.HTTP.getPollingSocket(e)}},e),r={file:"xhr",isSupported:Pusher.Util.isXHRSupported},i={file:"xdr",isSupported:function(e){return Pusher.Util.isXDRSupported(e.encrypted)}};Pusher.XHRStreamingTransport=new Pusher.Transport(Pusher.Util.extend({},t,r)),Pusher.XDRStreamingTransport=new Pusher.Transport(Pusher.Util.extend({},t,i)),Pusher.XHRPollingTransport=new Pusher.Transport(Pusher.Util.extend({},n,r)),Pusher.XDRPollingTransport=new Pusher.Transport(Pusher.Util.extend({},n,i))}.call(this),function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=undefined}var t=e.prototype;t.createConnection=function(e,t,n,r){var i=this;r=Pusher.Util.extend({},r,{activityTimeout:i.pingDelay});var s=i.transport.createConnection(e,t,n,r),o=null,u=function(){s.unbind("open",u),s.bind("closed",a),o=Pusher.Util.now()},a=function(e){s.unbind("closed",a);if(e.code===1002||e.code===1003)i.manager.reportDeath();else if(!e.wasClean&&o){var t=Pusher.Util.now()-o;t<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(t/2,i.minPingDelay))}};return s.bind("open",u),s},t.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},Pusher.AssistantToTheTransportManager=e}.call(this),function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||Infinity}var t=e.prototype;t.getAssistant=function(e){return new Pusher.AssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.isAlive=function(){return this.livesLeft>0},t.reportDeath=function(){this.livesLeft-=1},Pusher.TransportManager=e}.call(this),function(){function r(e){return function(t){return[e.apply(this,arguments),t]}}function s(e){return typeof e=="string"&&e.charAt(0)===":"}function o(e,t){return t[e.slice(1)]}function u(e,t){if(e.length===0)return[[],t];var n=l(e[0],t),r=u(e.slice(1),n[1]);return[[n[0]].concat(r[0]),r[1]]}function a(e,t){if(!s(e))return[e,t];var n=o(e,t);if(n===undefined)throw"Undefined symbol "+e;return[n,t]}function f(e,t){if(s(e[0])){var n=o(e[0],t);if(e.length>1){if(typeof n!="function")throw"Calling non-function "+e[0];var r=[Pusher.Util.extend({},t)].concat(Pusher.Util.map(e.slice(1),function(e){return l(e,Pusher.Util.extend({},t))[0]}));return n.apply(this,r)}return[n,t]}return u(e,t)}function l(e,t){var n=typeof e;return typeof e=="string"?a(e,t):typeof e=="object"&&e instanceof Array&&e.length>0?f(e,t):[e,t]}var e={build:function(e,t){var n=Pusher.Util.extend({},i,t);return l(e,n)[1].strategy}},t={ws:Pusher.WSTransport,sockjs:Pusher.SockJSTransport,xhr_streaming:Pusher.XHRStreamingTransport,xdr_streaming:Pusher.XDRStreamingTransport,xhr_polling:Pusher.XHRPollingTransport,xdr_polling:Pusher.XDRPollingTransport},n={isSupported:function(){return!1},connect:function(e,t){var n=Pusher.Util.defer(function(){t(new Pusher.Errors.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},i={extend:function(e,t,n){return[Pusher.Util.extend({},t,n),e]},def:function(e,t,n){if(e[t]!==undefined)throw"Redefining symbol "+t;return e[t]=n,[undefined,e]},def_transport:function(e,r,i,s,o,u){var a=t[i];if(!a)throw new Pusher.Errors.UnsupportedTransport(i);var f=(!e.enabledTransports||Pusher.Util.arrayIndexOf(e.enabledTransports,r)!==-1)&&(!e.disabledTransports||Pusher.Util.arrayIndexOf(e.disabledTransports,r)===-1),l;f?l=new Pusher.TransportStrategy(r,s,u?u.getAssistant(a):a,Pusher.Util.extend({key:e.key,encrypted:e.encrypted,timeline:e.timeline,ignoreNullOrigin:e.ignoreNullOrigin},o)):l=n;var c=e.def(e,r,l)[1];return c.transports=e.transports||{},c.transports[r]=l,[undefined,c]},transport_manager:r(function(e,t){return new Pusher.TransportManager(t)}),sequential:r(function(e,t){var n=Array.prototype.slice.call(arguments,2);return new Pusher.SequentialStrategy(n,t)}),cached:r(function(e,t,n){return new Pusher.CachedStrategy(n,e.transports,{ttl:t,timeline:e.timeline,encrypted:e.encrypted})}),first_connected:r(function(e,t){return new Pusher.FirstConnectedStrategy(t)}),best_connected_ever:r(function(){var e=Array.prototype.slice.call(arguments,1);return new Pusher.BestConnectedEverStrategy(e)}),delayed:r(function(e,t,n){return new Pusher.DelayedStrategy(n,{delay:t})}),"if":r(function(e,t,n,r){return new Pusher.IfStrategy(t,n,r)}),is_supported:r(function(e,t){return function(){return t.isSupported()}})};Pusher.StrategyBuilder=e}.call(this),function(){var e={};e.decodeMessage=function(e){try{var t=JSON.parse(e.data);if(typeof t.data=="string")try{t.data=JSON.parse(t.data)}catch(n){if(!(n instanceof SyntaxError))throw n}return t}catch(n){throw{type:"MessageParseError",error:n,data:e.data}}},e.encodeMessage=function(e){return JSON.stringify(e)},e.processHandshake=function(e){e=this.decodeMessage(e);if(e.event==="pusher:connection_established"){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:e.data.activity_timeout*1e3}}if(e.event==="pusher:error")return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"},e.getCloseAction=function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:e.code===4e3?"ssl_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},e.getCloseError=function(e){return e.code!==1e3&&e.code!==1001?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null},Pusher.Protocol=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.send=function(e){return this.transport.send(e)},t.send_event=function(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),Pusher.debug("Event sent",r),this.send(Pusher.Protocol.encodeMessage(r))},t.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.close=function(){this.transport.close()},t.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=Pusher.Protocol.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(n!==undefined){Pusher.debug("Event recd",n);switch(n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){Pusher.Util.objectApply(t,function(t,n){e.transport.unbind(n,t)})};Pusher.Util.objectApply(t,function(t,n){e.transport.bind(n,t)})},t.handleCloseEvent=function(e){var t=Pusher.Protocol.getCloseAction(e),n=Pusher.Protocol.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t)},Pusher.Connection=e}.call(this),function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}var t=e.prototype;t.close=function(){this.unbindListeners(),this.transport.close()},t.bindListeners=function(){var e=this;e.onMessage=function(t){e.unbindListeners();try{var n=Pusher.Protocol.processHandshake(t);n.action==="connected"?e.finish("connected",{connection:new Pusher.Connection(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())}catch(r){e.finish("error",{error:r}),e.transport.close()}},e.onClosed=function(t){e.unbindListeners();var n=Pusher.Protocol.getCloseAction(t)||"backoff",r=Pusher.Protocol.getCloseError(t);e.finish(n,{error:r})},e.transport.bind("message",e.onMessage),e.transport.bind("closed",e.onClosed)},t.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.finish=function(e,t){this.callback(Pusher.Util.extend({transport:this.transport,action:e},t))},Pusher.Handshake=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this),this.key=e,this.options=t||{},this.state="initialized",this.connection=null,this.encrypted=!!t.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=this;Pusher.Network.bind("online",function(){n.timeline.info({netinfo:"online"}),(n.state==="connecting"||n.state==="unavailable")&&n.retryIn(0)}),Pusher.Network.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.connection&&n.sendActivityCheck()}),this.updateStrategy()}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.connect=function(){if(this.connection||this.runner)return;if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()},t.send=function(e){return this.connection?this.connection.send(e):!1},t.send_event=function(e,t,n){return this.connection?this.connection.send_event(e,t,n):!1},t.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.isEncrypted=function(){return this.encrypted},t.startConnecting=function(){var e=this,t=function(n,r){n?e.runner=e.strategy.connect(0,t):r.action==="error"?(e.emit("error",{type:"HandshakeError",error:r.error}),e.timeline.error({handshakeError:r.error})):(e.abortConnecting(),e.handshakeCallbacks[r.action](r))};e.runner=e.strategy.connect(0,t)},t.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer();if(this.connection){var e=this.abandonConnection();e.close()}},t.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},t.retryIn=function(e){var t=this;t.timeline.info({action:"retry",delay:e}),e>0&&t.emit("connecting_in",Math.round(e/1e3)),t.retryTimer=new Pusher.Timer(e||0,function(){t.disconnectInternally(),t.connect()})},t.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.setUnavailableTimer=function(){var e=this;e.unavailableTimer=new Pusher.Timer(e.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.sendActivityCheck=function(){var e=this;e.stopActivityCheck(),e.connection.ping(),e.activityTimer=new Pusher.Timer(e.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)})},t.resetActivityCheck=function(){var e=this;e.stopActivityCheck(),e.connection.handlesActivityChecks()||(e.activityTimer=new Pusher.Timer(e.activityTimeout,function(){e.sendActivityCheck()}))},t.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.buildConnectionCallbacks=function(){var e=this;return{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}}},t.buildHandshakeCallbacks=function(e){var t=this;return Pusher.Util.extend({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||Infinity),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.buildErrorCallbacks=function(){function t(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}}var e=this;return{ssl_only:t(function(){e.encrypted=!0,e.updateStrategy(),e.retryIn(0)}),refused:t(function(){e.disconnect()}),backoff:t(function(){e.retryIn(1e3)}),retry:t(function(){e.retryIn(0)})}},t.setConnection=function(e){this.connection=e;for(var t in this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.abandonConnection=function(){if(!this.connection)return;this.stopActivityCheck();for(var e in this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t},t.updateState=function(e,t){var n=this.state;this.state=e,n!==e&&(Pusher.debug("State changed",n+" -> "+e),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t))},t.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},Pusher.ConnectionManager=e}.call(this),function(){function e(){Pusher.EventsDispatcher.call(this);var e=this;window.addEventListener!==undefined&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}Pusher.Util.extend(e.prototype,Pusher.EventsDispatcher.prototype);var t=e.prototype;t.isOnline=function(){return window.navigator.onLine===undefined?!0:window.navigator.onLine},Pusher.NetInfo=e,Pusher.Network=new e}.call(this),function(){function e(){this.reset()}var t=e.prototype;t.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},t.each=function(e){var t=this;Pusher.Util.objectApply(t.members,function(n,r){e(t.get(r))})},t.setMyID=function(e){this.myID=e},t.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},t.addMember=function(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},t.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},t.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},Pusher.Members=e}.call(this),function(){function e(e,t){Pusher.EventsDispatcher.call(this,function(t,n){Pusher.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1}var t=e.prototype;Pusher.Util.extend(t,Pusher.EventsDispatcher.prototype),t.authorize=function(e,t){return t(!1,{})},t.trigger=function(e,t){if(e.indexOf("client-")!==0)throw new Pusher.Errors.BadEventName("Event '"+e+"' does not start with 'client-'");return this.pusher.send_event(e,t,this.name)},t.disconnect=function(){this.subscribed=!1},t.handleEvent=function(e,t){e.indexOf("pusher_internal:")===0?e==="pusher_internal:subscription_succeeded"&&(this.subscribed=!0,this.emit("pusher:subscription_succeeded",t)):this.emit(e,t)},t.subscribe=function(){var e=this;e.authorize(e.pusher.connection.socket_id,function(t,n){t?e.handleEvent("pusher:subscription_error",n):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})},t.unsubscribe=function(){this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Pusher.Channel=e}.call(this),function(){function e(e,t){Pusher.Channel.call(this,e,t)}var t=e.prototype;Pusher.Util.extend(t,Pusher.Channel.prototype),t.authorize=function(e,t){var n=new Pusher.Channel.Authorizer(this,this.pusher.config);return n.authorize(e,t)},Pusher.PrivateChannel=e}.call(this),function(){function e(e,t){Pusher.PrivateChannel.call(this,e,t),this.members=new Pusher.Members}var t=e.prototype;Pusher.Util.extend(t,Pusher.PrivateChannel.prototype),t.authorize=function(e,t){var n=Pusher.PrivateChannel.prototype.authorize,r=this;n.call(r,e,function(e,n){if(!e){if(n.channel_data===undefined){Pusher.warn("Invalid auth response for channel '"+r.name+"', expected 'channel_data' field"),t("Invalid auth response");return}var i=JSON.parse(n.channel_data);r.members.setMyID(i.user_id)}t(e,n)})},t.handleEvent=function(e,t){switch(e){case"pusher_internal:subscription_succeeded":this.members.onSubscription(t),this.subscribed=!0,this.emit("pusher:subscription_succeeded",this.members);break;case"pusher_internal:member_added":var n=this.members.addMember(t);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var r=this.members.removeMember(t);r&&this.emit("pusher:member_removed",r);break;default:Pusher.PrivateChannel.prototype.handleEvent.call(this,e,t)}},t.disconnect=function(){this.members.reset(),Pusher.PrivateChannel.prototype.disconnect.call(this)},Pusher.PresenceChannel=e}.call(this),function(){function e(){this.channels={}}function n(e,t){return e.indexOf("private-")===0?new Pusher.PrivateChannel(e,t):e.indexOf("presence-")===0?new Pusher.PresenceChannel(e,t):new Pusher.Channel(e,t)}var t=e.prototype;t.add=function(e,t){return this.channels[e]||(this.channels[e]=n(e,t)),this.channels[e]},t.all=function(e){return Pusher.Util.values(this.channels)},t.find=function(e){return this.channels[e]},t.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},t.disconnect=function(){Pusher.Util.objectApply(this.channels,function(e){e.disconnect()})},Pusher.Channels=e}.call(this),function(){Pusher.Channel.Authorizer=function(e,t){this.channel=e,this.type=t.authTransport,this.options=t,this.authOptions=(t||{}).auth||{}},Pusher.Channel.Authorizer.prototype={composeQuery:function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},authorize:function(e,t){return Pusher.authorizers[this.type].call(this,e,t)}};var e=1;Pusher.auth_callbacks={},Pusher.authorizers={ajax:function(e,t){var n=this,r;Pusher.XHR?r=new Pusher.XHR:r=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.open("POST",n.options.authEndpoint,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var i in this.authOptions.headers)r.setRequestHeader(i,this.authOptions.headers[i]);return r.onreadystatechange=function(){if(r.readyState===4)if(r.status===200){var e,n=!1;try{e=JSON.parse(r.responseText),n=!0}catch(i){t(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+r.responseText)}n&&t(!1,e)}else Pusher.warn("Couldn't get auth info from your webapp",r.status),t(!0,r.status)},r.send(this.composeQuery(e)),r},jsonp:function(t,n){this.authOptions.headers!==undefined&&Pusher.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=e.toString();e++;var i=Pusher.Util.getDocument(),s=i.createElement("script");Pusher.auth_callbacks[r]=function(e){n(!1,e)};var o="Pusher.auth_callbacks['"+r+"']";s.src=this.options.authEndpoint+"?callback="+encodeURIComponent(o)+"&"+this.composeQuery(t);var u=i.getElementsByTagName("head")[0]||i.documentElement;u.insertBefore(s,u.firstChild)}}}.call(this),Pusher}),define("ads",["jquery/nyt","interactive/instances/ad-manager"],function(e,t){function n(){var n=window.innerWidth<765,r=window.innerWidth>=765&&window.innerWidth<1080,i={},s={};s.top=n?[[320,50]]:r?["fluid",[728,90],[1605,300]]:["fluid",[728,90],[970,90],[970,250],[1605,300]],s.middle=n?[[320,50],[300,250]]:s.top,s.bottom=s.top.slice(0),n&&window.innerWidth>=414&&s.bottom.push([414,457]),e(".eln-ad-wrapper").each(function(t,r){if(n&&e(r).hasClass("eln-ad-wrapper-desktop")||!n&&e(r).hasClass("eln-ad-wrapper-mobile"))return;var o=e(r).data("position"),u=n?"MobileBanner"+t:"TopAd"+t;e(this).find(".ad").attr("id",u),i[u]=s[o]}),t.addPlacement(i),t.scan()}n()}),define("vendor/chosenScript",["jquery/nyt"],function(e){(function(){var t,n,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return e.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),s=e.childNodes,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){if(e.nodeName.toUpperCase()==="OPTION")return e.text!==""?(t!=null&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e.prototype.escapeExpression=function(e){var t,n;return e==null||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(n,function(e){return t[e]||"&amp;"})):e},e}(),r.select_to_array=function(e){var t,n,i,s,o;n=new r,o=e.childNodes;for(i=0,s=o.length;i<s;i++)t=o[i],n.add_node(t);return n.parsed},t=function(){function e(t,n){this.form_field=t,this.options=n!=null?n:{};if(!e.browser_is_supported())return;this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers()}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.group_search=this.options.group_search!=null?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:!0,this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:!0},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},e.prototype.results_option_build=function(e){var t,n,r,i,s;t="",s=this.results_data;for(r=0,i=s.length;r<i;r++){n=s[r],n.group?t+=this.result_add_group(n):t+=this.result_add_option(n);if(e!=null?e.first:void 0)n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text)}return t},e.prototype.result_add_option=function(e){var t,n;return e.search_match?this.include_option_in_results(e)?(t=[],!e.disabled&&(!e.selected||!this.is_multiple)&&t.push("active-result"),e.disabled&&(!e.selected||!this.is_multiple)&&t.push("disabled-result"),e.selected&&t.push("result-selected"),e.group_array_index!=null&&t.push("group-option"),e.classes!==""&&t.push(e.classes),n=document.createElement("li"),n.className=t.join(" "),n.style.cssText=e.style,n.setAttribute("data-option-array-index",e.array_index),n.innerHTML=e.search_text,this.outerHTML(n)):"":""},e.prototype.result_add_group=function(e){var t;return!e.search_match&&!e.group_match?"":e.active_options>0?(t=document.createElement("li"),t.className="group-result",t.innerHTML=e.search_text,this.outerHTML(t)):""},e.prototype.results_update_field=function(){this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build();if(this.results_showing)return this.winnow_results()},e.prototype.reset_single_select_options=function(){var e,t,n,r,i;r=this.results_data,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.selected?i.push(e.selected=!1):i.push(void 0);return i},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,n,r,i,s,o,u,a,f,l,c;this.no_results_clear(),r=0,s=this.get_search_text(),e=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),a=new RegExp(e,"i"),n=this.get_search_regex(e),c=this.results_data;for(f=0,l=c.length;f<l;f++){t=c[f],t.search_match=!1,i=null;if(this.include_option_in_results(t)){t.group&&(t.group_match=!1,t.active_options=0),t.group_array_index!=null&&this.results_data[t.group_array_index]&&(i=this.results_data[t.group_array_index],i.active_options===0&&i.search_match&&(r+=1),i.active_options+=1);if(!t.group||!!this.group_search)t.search_text=t.group?t.label:t.text,t.search_match=this.search_string_match(t.search_text,n),t.search_match&&!t.group&&(r+=1),t.search_match?(s.length&&(o=t.search_text.search(a),u=t.search_text.substr(0,o+s.length)+"</em>"+t.search_text.substr(o+s.length),t.search_text=u.substr(0,o)+"<em>"+u.substr(o)),i!=null&&(i.group_match=!0)):t.group_array_index!=null&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)}}return this.result_clear_highlight(),r<1&&s.length?(this.update_results_content(""),this.no_results(s)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.get_search_regex=function(e){var t;return t=this.search_contains?"":"^",new RegExp(t+e,"i")},e.prototype.search_string_match=function(e,t){var n,r,i,s;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||e.indexOf("[")===0)){r=e.replace(/\[|\]/g,"").split(" ");if(r.length)for(i=0,s=r.length;i<s;i++){n=r[i];if(t.test(n))return!0}}},e.prototype.choices_count=function(){var e,t,n,r;if(this.selected_option_count!=null)return this.selected_option_count;this.selected_option_count=0,r=this.form_field.options;for(t=0,n=r.length;t<n;t++)e=r[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){e.preventDefault();if(!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keyup_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale();switch(t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:e.preventDefault();if(this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(e){var t=this;return setTimeout(function(){return t.results_search()},50)},e.prototype.container_width=function(){return this.options.width!=null?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){if(this.touch_started)return this.search_results_mouseup(e)},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return window.navigator.appName==="Microsoft Internet Explorer"?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e.fn.extend({chosen:function(r){return t.browser_is_supported()?this.each(function(t){var i,s;i=e(this),s=i.data("chosen"),r==="destroy"&&s instanceof n?s.destroy():s instanceof n||i.data("chosen",new n(this,r))}):this}}),n=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return o(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var t,n;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),n={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",n),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var e=this;return this.container.bind("touchstart.chosen",function(t){e.container_mousedown(t)}),this.container.bind("touchend.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},n.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field();this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus.chosen",this.activate_action)},n.prototype.container_mousedown=function(t){if(!this.is_disabled){t&&t.type==="mousedown"&&!this.results_showing&&t.preventDefault();if(t==null||!e(t.target).hasClass("search-choice-close"))return this.active_field?!this.is_multiple&&t&&(e(t.target)[0]===this.selected_item[0]||e(t.target).parents("a.chosen-single").length)&&(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()}},n.prototype.container_mouseup=function(e){if(e.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(e)},n.prototype.search_results_mousewheel=function(e){var t;e.originalEvent&&(t=e.originalEvent.deltaY||-e.originalEvent.wheelDelta||e.originalEvent.detail);if(t!=null)return e.preventDefault(),e.type==="DOMMouseScroll"&&(t*=40),this.search_results.scrollTop(t+this.search_results.scrollTop())},n.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},n.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){var n;return n=e(t.target).closest(".chosen-container"),n.length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight();if(t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(n<s)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(e){return this.search_results.html(e)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(e){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},n.prototype.set_label_behavior=function(){var t=this;this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']"));if(this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()})},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n.length)return this.result_highlight=n,this.result_select(t),this.search_field.focus()},n.prototype.search_results_mouseover=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n)return this.result_do_highlight(n)},n.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},n.prototype.choice_build=function(t){var n,r,i=this;return n=e("<li />",{"class":"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?n.addClass("search-choice-disabled"):(r=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),r.bind("click.chosen",function(e){return i.choice_destroy_link_click(e)}),n.append(r)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(t){t.preventDefault(),t.stopPropagation();if(!this.is_disabled)return this.choice_destroy(e(t.target))},n.prototype.choice_destroy=function(e){if(this.result_deselect(e[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()},n.prototype.results_reset=function(){this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(e){var t,n;if(this.result_highlight)return t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),n=this.results_data[t[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text),(!e.metaKey&&!e.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},n.prototype.single_set_selected_text=function(e){return e==null&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(e)},n.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect)return;return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var e,t;t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first();if(e!=null)return this.result_do_highlight(e)},n.prototype.no_results=function(t){var n;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var e;if(!this.results_showing||!this.result_highlight)return this.results_show();e=this.result_highlight.nextAll("li.active-result").first();if(e)return this.result_do_highlight(e)},n.prototype.keyup_arrow=function(){var e;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())},n.prototype.keydown_backstroke=function(){var e;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();e=this.search_container.siblings("li.search-choice").last();if(e.length&&!e.hasClass("search-choice-disabled"))return this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale(),t!==8&&this.pending_backstroke&&this.clear_backstroke();switch(t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:this.results_showing&&e.preventDefault();break;case 32:this.disable_search&&e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,a,f;if(this.is_multiple){r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(a=0,f=o.length;a<f;a++)i=o[a],s+=i+":"+this.search_field.css(i)+";";return t=e("<div />",{style:s}),t.text(this.search_field.val()),e("body").append(t),u=t.width()+25,t.remove(),n=this.container.outerWidth(),u>n-10&&(u=n-10),this.search_field.css({width:u+"px"})}},n}(t)}).call(this)}),define("masthead",["jquery/nyt","vendor/chosenScript"],function(e,t){function u(){o=n.height(),a()}function a(){e(window).scrollTop()>i.offset().top?(n.addClass("eln-fixed").width(s.width()),r.addClass("eln-fixed").width(s.width()-30),i.height(o)):(n.removeClass("eln-fixed").width("100%"),r.removeClass("eln-fixed"),i.height(0))}var n=e(".eln-mobile-navigation"),r=e(".eln-masthead-navigation-states-mobile"),i=e(".eln-mobile-placeholder"),s=e(".eln-shell"),o=n.outerHeight();e(window).on("scroll",a),e(window).on("resize",u),u(),a();var f=e(".eln-navigation-states");e(".eln-nav-state-results.eln-nav-item, .eln-nav-more.eln-nav-item").on("mouseover",function(){f.addClass("eln-visible")}).on("mouseout",function(){f.removeClass("eln-visible")}).on("click",function(e){e.preventDefault(),u()}),f.on("mouseover",function(){e(this).addClass("eln-visible")}).on("mouseout",function(){e(this).removeClass("eln-visible")}),e(".eln-nav-more.eln-mobile-nav-item").on("click",function(t){var n=e(this);t.preventDefault(),r.toggleClass("eln-visible"),r.hasClass("eln-visible")?(n.text("Close").addClass("eln-is-close"),e("#eln-state-select").chosen({width:"100%"}).change(function(e,t){window.location=this.value})):n.text("More").removeClass("eln-is-close"),a()}),e(".eln-masthead-navigation-states-mobile .eln-close").on("click",function(t){t.preventDefault(),e(this).parent().removeClass("eln-visible")})}),define("templates",[],function(){var templates={};return templates.templates={},templates.ads=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",options.desktop&&(__p+='\n<div class="eln-ad-wrapper eln-ad-wrapper-desktop" data-position="'+((__t=options.position)==null?"":__t)+'">\n    <div class="ad eln-ad eln-top-ad"></div>\n</div>\n'),__p+="\n",options.mobile&&(__p+='\n<div class="eln-ad-wrapper eln-ad-wrapper-mobile" data-position="'+((__t=options.position)==null?"":__t)+'">\n    <div class="ad eln-ad eln-mobilebanner-ad"></div>\n</div>\n'),__p+="";return __p},templates["balance-of-power"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var control=office.control;__p+='\n<div class="eln-bop eln-office-'+((__t=office.race_type)==null?"":__t)+'" data-race-type="'+((__t=office.race_type)==null?"":__t)+'">\n  <div class="eln-groups eln-groups-above">\n  ',_.each(control,function(e,t){if(t=="other"&&!e.count)return;__p+='\n    <div class="eln-group eln-'+((__t=t)==null?"":__t)+" "+((__t=e.winner?"eln-winner":"")==null?"":__t)+'">\n      <div class="eln-count">'+((__t=e.count)==null?"":__t)+'</div>\n      <div class="eln-label">\n        <span class="eln-full">'+((__t=e.name_display)==null?"":__t)+'</span>\n        <span class="eln-abbr">'+((__t=e.name_abbr)==null?"":__t)+"</span>\n        ",e.winner&&(__p+='\n        <div class="eln-winner-icon eln-swatch eln-'+((__t=t)==null?"":__t)+'">\n          <span class="eln-sprite eln-icon-checkmark"></span>\n          <span class="eln-sprite eln-icon-checkmark-reverse"></span>\n        </div>\n        '),__p+="\n      </div>\n    </div>\n  "}),__p+='\n  </div>\n\n  <div class="eln-bars">\n    ',office.to_win&&(__p+=' \n    <div class="eln-to-win">\n      <div class="eln-to-win-label">'+((__t=office.to_win)==null?"":__t)+" ",office.race_type!="senate"&&(__p+='<span class="eln-to-win-suffix">to win</span>'),__p+="</div>\n    </div>\n    "),__p+="\n  ",_.each(control,function(e,t){if(t=="other"&&!e.count)return;__p+='\n    <div class="eln-bar eln-'+((__t=t)==null?"":__t)+'" style="width: '+((__t=e.count_percent)==null?"":__t)+"%;\n    ",t=="other"&&(__p+="left: "+((__t=e.left_pos)==null?"":__t)+"%;"),__p+='"></div>\n    ',office.no_election[t]&&(__p+='\n    <div class="eln-bar eln-no-election eln-'+((__t=t)==null?"":__t)+'" style="width: '+((__t=office.no_election[t].count_percent)==null?"":__t)+'%;"></div>\n    '),__p+="\n  "}),__p+='\n  </div>\n\n  <div class="eln-groups eln-groups-below eln-labels">\n  ',_.each(control,function(e,t){if(t=="other")return;__p+='\n    <div class="eln-group eln-'+((__t=t)==null?"":__t)+" "+((__t=e.winner?"eln-winner":"")==null?"":__t)+'">\n      <div class="eln-label">\n        <span class="eln-full">'+((__t=e.name_display)==null?"":__t)+'</span>\n        <span class="eln-abbr">'+((__t=e.name_abbr)==null?"":__t)+"</span>\n        ",e.winner&&(__p+='\n        <div class="eln-winner-icon eln-swatch eln-'+((__t=t)==null?"":__t)+'">\n          <span class="eln-sprite eln-icon-checkmark"></span>\n          <span class="eln-sprite eln-icon-checkmark-reverse"></span>\n        </div>\n        '),__p+="\n      </div>\n    </div>\n  "}),__p+='\n  </div>\n\n  <div class="eln-groups eln-groups-below eln-no-election-note">\n  ',_.each(control,function(e,t){if(t=="other"||!office.no_election[t])return;__p+='\n    <div class="eln-group eln-'+((__t=t)==null?"":__t)+'">\n      '+((__t=office.no_election[t].count)==null?"":__t)+' <span class="eln-full">'+((__t=e.name_display)==null?"":__t)+"</span> not up for election\n    </div>\n  "}),__p+='\n  </div>\n\n  <div class="eln-groups eln-groups-below eln-change">\n  ',_.each(control,function(e,t){if(t=="other")return;__p+='\n    <div class="eln-group eln-'+((__t=t)==null?"":__t)+'">\n      ',e.change&&(__p+='\n      <span class="eln-full">'+((__t=e.change_full)==null?"":__t)+'</span>\n      <span class="eln-abbr">'+((__t=e.change_abbr)==null?"":__t)+"</span>\n      "),__p+="\n    </div>\n  "}),__p+='\n  </div>\n\n  <div class="eln-groups eln-groups-below eln-popular-vote">\n    <p class="eln-popular-vote-label">Popular Vote</p>\n  ',_.each(control,function(e,t){if(t=="other"&&!e.count)return;__p+='\n    <div class="eln-group eln-'+((__t=t)==null?"":__t)+'">\n      <div class="eln-value">\n        <span class="eln-popular-vote-count">'+((__t=Helpers.votesFormat(e.votes))==null?"":__t)+" votes</span>\n        ",e.votes&&(__p+='<span class="eln-popular-vote-percent">('+((__t=Helpers.pollFormat(e.percent))==null?"":__t)+"%)</span>"),__p+="\n      </div>\n    </div>\n  "}),__p+='\n  </div>\n\n  <div class="eln-gain-summary">\n    ',office.gain?__p+='\n    <span class="eln-gain-label">Net change</span>\n    '+((__t=office.gain)==null?"":__t)+"\n    ":office.race_type!="senate"&&(__p+="\n    "+((__t=office.to_win)==null?"":__t)+" to win\n    "),__p+="\n  </div>\n\n</div>"}return __p},templates["big-board-cell"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<td class="eln-cell eln-candidate eln-'+((__t=candidate.party_id)==null?"":__t)+"\n"+((__t=leader&&candidate.candidate_id==leader.candidate_id&&!candidate.winner?"eln-leader eln-swatch-light":"")==null?"":__t)+"\n"+((__t=candidate.runoff?"eln-runoff":"")==null?"":__t)+"\n"+((__t=candidate.winner?"eln-winner eln-swatch":"")==null?"":__t)+'\n">\n  <a href="'+((__t=url)==null?"":__t)+'">\n  ',race.uncontested&&candidate.winner?__p+="Unc.\n  ":candidate.votes||race.result&&candidate.candidate_id?__p+=""+((__t=Math.round(candidate.percent||0))==null?"":__t)+"%\n  ":__p+='<span class="eln-no-votes">—</span>',__p+="\n  </a>\n</td>";return __p},templates["big-board-key"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-map-keys eln-big-board-key">\n	<div class="eln-map-key-results eln-active lead-win-gain">\n		<div class="eln-map-key eln-map-key-lead-win-gain" data-template="map-key-lead-win">\n			<div class="eln-key-group">\n				<p class="eln-candidate eln-democrat">\n					<span class="eln-leader">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Lead</span>\n					</span><!-- \n				--><span class="eln-winner">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Win</span>\n					</span><!-- \n				--><span class="eln-gain">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Flip</span>\n					</span>\n					<span class="eln-last-name">Dem.</span>\n				</p>\n				<p class="eln-candidate eln-republican">\n					<span class="eln-leader">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Lead</span>\n					</span><!-- \n				--><span class="eln-winner">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Win</span>\n					</span><!-- \n				--><span class="eln-gain">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Flip</span>\n					</span>\n					<span class="eln-last-name">Rep.</span>\n				</p>\n				<p class="eln-candidate eln-other">\n					<span class="eln-leader">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Lead</span>\n					</span><!-- \n				--><span class="eln-winner">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Win</span>\n					</span><!-- \n				--><span class="eln-gain">\n						<span class="eln-swatch"></span>\n						<span class="eln-text">Flip</span>\n					</span>\n					<span class="eln-last-name">Other</span>\n				</p>\n			</div>\n		</div>\n	</div>\n</div>';return __p},templates["big-board"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var meta=races[0],header=meta.race_type=="house"?"District":"State",urlSuffix="/"+meta.race_type,labels=["Democrats expected to win easily","Democrats expected to win narrowly","Tossup seats","Republicans expected to win narrowly","Republicans expected to win easily"];meta.race_type=="president"&&(labels=["Much more Democratic","Somewhat more Democratic","Like the country as a whole","Somewhat more Republican","Much more Republican"]),__p+='\n<div class="eln-big-board">\n  <div class="eln-big-board-groups eln-big-board-header">\n    ',_.each(labels,function(e){__p+='\n    <div class="eln-big-board-group">\n      <h3>'+((__t=e)==null?"":__t)+"</h3>\n    </div>\n    "}),__p+='\n  </div>\n  <div class="eln-big-board-groups">\n    ',_.each(labels,function(e,t){__p+="\n    ";var n=_.chain(races).where({nyt_rating:t+1}).sortBy("report").sortBy("state_slug").sortBy(function(e){return e.report?"":new Date(e.poll_time)}).value();__p+="\n    ";var r=_.where(n,{report:!0}).length;__p+='\n    <div class="eln-big-board-group">\n      <h3 class="eln-tablet-header">'+((__t=e)==null?"":__t)+"</h3>\n      ",n.length?(__p+='\n      <table class="eln-big-board-table">\n        <thead>\n          <tr>\n            <th class="eln-header eln-name">'+((__t=header)==null?"":__t)+"</th>\n            ",r?__p+='\n            <th class="eln-header eln-democrat">Dem.</th>\n            <th class="eln-header eln-republican">Rep.</th>\n            <th class="eln-header eln-other">Oth.</th>\n            <th class="eln-header eln-reporting">% Rpt.</th>\n            ':__p+='\n            <th class="eln-header" colspan="4"></th>\n            ',__p+="\n          </tr>\n        </thead>\n        <tbody>\n          ",_.each(n,function(e){__p+="\n          ";var t=Helpers.getStateFromPostal(e.state_id);__p+="\n          ";var n="http://www.nytimes.com/elections/results/"+t.slug;__p+="\n          ";var r=Helpers.getCandidate(e,"democrat");__p+="\n          ";var i=Helpers.getCandidate(e,"republican");__p+="\n          ";var s=Helpers.getCandidate(e,"other",!0);__p+="\n          ";var o=Helpers.getLeader(e);__p+='\n          <tr class="eln-row '+((__t=e.votes?"eln-has-votes":"")==null?"":__t)+" "+((__t=e.gain?"eln-result-gain":"")==null?"":__t)+'">\n            <td class="eln-cell eln-name">\n              <a href="'+((__t=n)==null?"":__t)+'">\n              '+((__t=t.nyt_abbrev)==null?"":__t)+""+((__t=e.race_type=="house"&&e.seat_name!="At-Large"?" "+e.seat:"")==null?"":__t)+""+((__t=e.runoff?"*":"")==null?"":__t)+"\n              </a>\n            </td>\n            ",e.report?__p+="\n            "+((__t=partials["big-board-cell"]({race:e,candidate:r,url:n,leader:o}))==null?"":__t)+"\n            "+((__t=partials["big-board-cell"]({race:e,candidate:i,url:n,leader:o}))==null?"":__t)+"\n            "+((__t=partials["big-board-cell"]({race:e,candidate:s,url:n,leader:o}))==null?"":__t)+'\n            <td class="eln-cell eln-reporting">\n              <a href="'+((__t=n)==null?"":__t)+'">\n              '+((__t=e.reporting_display.replace("% reporting","%"))==null?"":__t)+"\n              </a>\n            </td>\n            ":__p+='\n            <td class="eln-cell eln-poll-display" colspan="4">\n              <a href="'+((__t=n)==null?"":__t)+'">\n              '+((__t=e.poll_display.replace(" at "," at <strong>").replace(" ET"," ET</strong>"))==null?"":__t)+"\n              </a>\n            </td>\n            ",__p+="\n          </tr>\n          "}),__p+="\n        </tbody>\n      </table>\n      "):__p+='<p class="eln-note">No races</p>\n      ',__p+="\n      ",_.where(n,{runoff:!0}).length&&(__p+='\n      <p class="eln-note">*Runoff</p>\n      '),__p+="\n    </div>\n    "}),__p+="\n  </div>\n</div>"}return __p},templates["chat-sentence"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-race-chat">\n  <img class="eln-race-chat-image" src="https://int.nyt.com/newsgraphics/2015/09/15/live-blog-avatars/'+((__t=author_slug)==null?"":__t)+'.png">\n  <div class="eln-race-chat-text">\n    <p class="eln-race-chat-author">'+((__t=author)==null?"":__t)+'</p>\n    <p class="eln-race-chat-body">'+((__t=text)==null?"":__t)+' <a class="eln-race-chat-link" href="'+((__t=live_updates_url)==null?"":__t)+'">Analysis »</a></p>\n  </div>\n</div>';return __p},templates["county-table"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var sum=function(e){return _.reduce(e,function(e,t){return e+t},0)},max_candidates=Helpers.countyTableMaxCandidates(race),yes_no=Helpers.yesNoRace(race),candidates=_.sortBy(race.candidates,"votes").reverse().slice(0,max_candidates);yes_no&&(candidates=[Helpers.getCandidate(race,"yes"),Helpers.getCandidate(race,"no")]);var geographyType="counties",geographyLabel="county";race.townships&&race.townships.length>0&&(geographyType="townships",geographyLabel="town");var geographies=_.sortBy(race[geographyType],function(e){return-sum(e.results)}),show_est_votes=_.filter(geographies,function(e){return e.est_votes_remaining>0}).length;if(show_est_votes){var max_est_votes=_.max(_.pluck(geographies,"est_votes_remaining"));geographies=_.sortBy(geographies,function(e){return-e.votes-e.est_votes_remaining})}show_est_votes=!1,__p+='\n<div class="eln-county-table-container '+((__t=show_est_votes?"eln-showing-estimates":"")==null?"":__t)+"\" data-options='"+((__t=JSON.stringify(options))==null?"":__t)+'\'>\n  <table class="eln-county-table">\n    <thead>\n      <tr>\n        <th class="eln-header eln-name">Vote by '+((__t=geographyLabel)==null?"":__t)+"</th>\n        ",_.each(candidates,function(e,t){__p+='\n        <th class="eln-header eln-candidate '+((__t=show_est_votes&&t==candidates.length-1?"eln-last-candidate":"")==null?"":__t)+'">\n        '+((__t=e.last_name)==null?"":__t)+"\n        </th>\n        "}),__p+='\n        <!-- <th class="eln-header eln-reporting">Rpt.</th> -->\n        ',show_est_votes&&(__p+='<th class="eln-header eln-votes-remaining" colspan="2">Approx. votes left</th>'),__p+="\n      </tr>\n    </thead>\n    <tbody>\n      ",_.each(geographies,function(e,t){__p+="\n      ";var n=_.max(e.results);__p+="\n      ";var r=Helpers.getGeoLeader(e,n);__p+='\n      <tr class="eln-row '+((__t=options&&options.rows_to_display&&t>=options.rows_to_display?"eln-hidden":"")==null?"":__t)+'">\n        <td class="eln-cell eln-name">'+((__t=e.name)==null?"":__t)+"</td>\n        ",_.each(candidates,function(t,n){__p+="\n        ";var i=e.results[t.candidate_key];__p+='\n        <td class="eln-cell eln-candidate '+((__t=n==candidates.length-1?"eln-last-candidate":"")==null?"":__t)+'">\n          <div class="eln-vote-count ',r==t.candidate_key&&(__p+="eln-swatch-light "+((__t=Helpers.getSwatchClass(race,t))==null?"":__t)+""),__p+='">\n            '+((__t=Helpers.votesFormat(i))==null?"":__t)+"\n          </div>\n        </td>\n        "}),__p+='\n        <!-- <td class="eln-cell eln-reporting">'+((__t=Helpers.getGeoReportingDisplay(e))==null?"":__t)+"</td> -->\n        ";if(show_est_votes){__p+='\n        <td class="eln-cell eln-votes-remaining">\n          <span class="eln-vote-count">'+((__t=Helpers.estVotesFormat(e.est_votes_remaining))==null?"":__t)+'</span>\n        </td>\n        <td class="eln-cell eln-bar-wrap">\n          ';if(e.votes){__p+='\n          <div class="eln-vote-bars">\n          ';var i=e.est_votes_remaining/max_est_votes*100;__p+="\n          ",_.each(candidates,function(t){__p+="\n            ";var r=e.results[t.candidate_key]/n;__p+='\n            <div class="eln-vote-bar eln-swatch-light '+((__t=Helpers.getSwatchClass(race,t))==null?"":__t)+'" style="width: '+((__t=i*r)==null?"":__t)+'%;"></div>\n          '}),__p+="\n          </div>\n          "}__p+="\n        </td>\n        "}__p+="\n      </tr>\n      "}),__p+="\n      <tr></tr>\n    </tbody>\n  </table>\n  ",options&&options.rows_to_display&&geographies.length>options.rows_to_display&&(__p+='\n  <div class="eln-toggle">\n    <a href="#" class="eln-toggle-counties">\n      <span class="eln-button-show">+ Show all '+((__t=geographyType)==null?"":__t)+'</span>\n      <span class="eln-button-hide">– Hide smaller '+((__t=geographyType)==null?"":__t)+"</span>\n    </a>\n  </div>\n  "),__p+="\n</div>"}return __p},templates.datetime=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";if(page.date){__p+="\n";var date=Helpers.dateFormat(page.date);__p+="\n";var time=Helpers.timeFormat(page.date);__p+="\n";var string=Helpers.formatISOString(page.date);__p+='\n<span class="eln-live-datetime"></span>\n<time class="eln-datetime" datetime="'+((__t=string)==null?"":__t)+'" itemprop="dateModified" content="'+((__t=string)==null?"":__t)+'">\n  <span class="eln-date">'+((__t=date)==null?"":__t)+"</span>",time&&(__p+=', <span class="eln-timestamp">'+((__t=time)==null?"":__t)+"</span>"),__p+="\n</time>\n"}__p+=""}return __p},templates["elex-portal"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-portal-container">\n  <div class="eln-posts-wrapper">\n    <div class="eln-posts-header">More Election Coverage from The Times</div>\n    <div class="eln-posts">\n      ',_.each(posts,function(e){__p+='\n      <article class="eln-post">\n        <a href="'+((__t=e.link)==null?"":__t)+'">\n          <h3>'+((__t=e.text)==null?"":__t)+"</h3>\n        </a>\n      </article>\n      "}),__p+="\n    </div>\n  </div>\n</div>";return __p},templates["email-signup"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<h3 class="eln-email-signup-title">'+((__t=title)==null?"":__t)+'</h3>\n<div class="eln-email-content">\n  <p class="eln-email-signup-instructions">'+((__t=text)==null?"":__t)+"</p>\n  ",slug=="results-alerts"?__p+='\n  <div id="eln-notification-widget" class="eln-notification-widget"></div>\n  ':__p+='\n  <a href="'+((__t=link)==null?"":__t)+'" class="button">Sign up</a>\n  ',__p+="\n</div>";return __p},templates.footer=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<footer id="page-footer" class="page-footer clearfix" role="contentinfo">\n    <nav class="eln-mobile">\n       <ul>\n           <li>\n            <a href="http://www.nytco.com" itemprop="copyrightNotice">\n                &copy; <span itemprop="copyrightYear">'+((__t=(new Date).getFullYear())==null?"":__t)+'</span><span itemprop="copyrightHolder provider sourceOrganization" itemscope itemtype="http://schema.org/Organization" itemid="http://www.nytimes.com"><span itemprop="name"> The New York Times Company</span><meta itemprop="tickerSymbol" content="NYSE NYT"/></span>\n            </a>\n        </li>\n    </ul>\n</nav>\n<nav class="eln-desktop">\n   <ul>\n       <li>\n        <a href="http://www.nytco.com" itemprop="copyrightNotice">\n            &copy; <span itemprop="copyrightYear">'+((__t=(new Date).getFullYear())==null?"":__t)+'</span><span itemprop="copyrightHolder provider sourceOrganization" itemscope itemtype="http://schema.org/Organization" itemid="http://www.nytimes.com"><span itemprop="name"> The New York Times Company</span><meta itemprop="tickerSymbol" content="NYSE NYT"/></span>\n        </a>\n    </li>\n    <li><a href="http://www.nytimes.com/ref/membercenter/help/infoservdirectory.html">Contact Us</a></li>\n    <li><a href="http://www.nytco.com/careers">Work With Us</a></li>\n    <li><a href="http://www.nytimes.whsites.net/mediakit">Advertise</a></li>\n    <li><a href="http://www.nytimes.com/content/help/rights/privacy/policy/privacy-policy.html#pp">Your Ad Choices</a></li>\n    <li><a href="http://www.nytimes.com/privacy">Privacy</a></li>\n    <li><a href="http://www.nytimes.com/ref/membercenter/help/agree.html" itemprop="usageTerms">Terms of Service</a></li>\n    <li class="last-item"><a href="http://www.nytimes.com/content/help/rights/sale/terms-of-sale.html">Terms of Sale</a></li>\n</ul>\n</nav>\n<nav class="last-nav">\n    <ul>\n        <li><a href="http://spiderbites.nytimes.com">Site Map</a></li>\n        <li><a href="http://www.nytimes.com/membercenter/sitehelp.html">Help</a></li>\n        <li><a href="https://myaccount.nytimes.com/membercenter/feedback.html">Site Feedback</a></li>\n        <li class="last-item"><a href="http://www.nytimes.com/subscriptions/Multiproduct/lp5558.html?campaignId=37WXW">Subscriptions</a></li>\n    </ul>\n</nav>\n        </footer><!-- close .page-footer -->';return __p},templates["forecast-datetime"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";if(page.date){__p+="\n",page.date="2016-11-10",__p+="\n";var date=Helpers.dateFormat(page.date);__p+="\n";var time=!1;__p+="\n";var string=Helpers.formatISOString(page.date);__p+='\n<span class="eln-live-datetime"></span>\n<time class="eln-datetime" datetime="'+((__t=string)==null?"":__t)+'" itemprop="dateModified" content="'+((__t=string)==null?"":__t)+'">\n  Updated <span class="eln-date">'+((__t=date)==null?"":__t)+"</span>",time&&(__p+=', <span class="eln-timestamp">'+((__t=time)==null?"":__t)+"</span>"),__p+="\n</time>\n"}__p+="\n"}return __p},templates["forecast-fine-print-house"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n<div class="g-fine-print">\n	<p class="note">Our estimates are based on Cook ratings and House races that have already been called. We expect the distribution to be fairly wide, but should provide a sense of where things stand as the night goes on.</p>\n</div>';return __p},templates["forecast-fine-print-president"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="g-fine-print">\n	<p class="note">This is a projection of the final vote based on historical voting patterns, county demographics and turnout estimates. It uses the latest voting results in completed counties to adjust the expected vote in incomplete counties. It does not include any exit poll data.</p>\n</div>\n\n';return __p},templates["forecast-fine-print-senate"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="g-fine-print">\n\n	<p class="note">* The Vice President breaks ties in the Senate.</p>\n\n	<p class="note"><strong>Where\'s Louisiana?</strong>The Senate election in Louisiana includes multiple Democrats and multiple Republicans. If no one receives a majority of votes, the state will hold a run-off between the top two candidates in December. If a run-off is necessary, and if it includes a Democrat and a Republican, our forecast heavily favorites the Republican, based on pre-election polling.</p>\n\n	<p class="note"><strong>Where\'s California?</strong>Democrats are guaranteed to win the seat in California. Two Democrats — Kamala Harris and Loretta Sanchez — won the top two spots in an open primary.</p>\n\n	<p class="note">Democratic total includes two independents who caucus with the Democrats.</p>\n\n</div>';return __p},templates["forecast-gauges"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div style="columns:3;column-gap: 55px; margin: 2em 0 3em">\n    <div class="eln-forecast-widget"\n        data-widget="gauge"\n        data-race="'+((__t=config.race_type)==null?"":__t)+'"\n        data-state="'+((__t=config.state)==null?"":__t)+'"\n        data-initial="0.5"\n        data-type="win_prob">\n        <div class="eln-forecast-widget"\n            data-widget="number"\n            data-title="Win presidency"\n            data-initial="0.5"\n            data-race="'+((__t=config.race_type)==null?"":__t)+'"\n            data-state="'+((__t=config.state)==null?"":__t)+'"\n            data-type="win_prob">\n        </div>\n    </div>\n\n    <div class="eln-forecast-widget"\n        data-widget="gauge"\n        data-race="'+((__t=config.race_type)==null?"":__t)+'"\n        data-state="'+((__t=config.state)==null?"":__t)+'"\n        data-initial="0"\n        data-type="vote_margin">\n        <div class="eln-forecast-widget"\n            data-widget="number"\n            data-initial="0"\n            data-title="Popular vote margin"\n            data-race="'+((__t=config.race_type)==null?"":__t)+'"\n            data-state="'+((__t=config.state)==null?"":__t)+'"\n            data-type="vote_margin">\n        </div>\n    </div>\n    <div class="eln-forecast-widget"\n        data-widget="gauge"\n        data-race="'+((__t=config.race_type)==null?"":__t)+'"\n        data-state="'+((__t=config.state)==null?"":__t)+'"\n        data-initial="270"\n        data-type="e_votes">\n        <div class="eln-forecast-widget"\n            data-widget="number"\n            data-title="Electoral votes"\n            data-race="'+((__t=config.race_type)==null?"":__t)+'"\n            data-state="'+((__t=config.state)==null?"":__t)+'"\n            data-initial="270"\n            data-type="e_votes">\n        </div>\n    </div>\n\n</div>\n';return __p},templates["forecast-header"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-forecast-header">\n    <span class="eln-forecast-header-intro">View forecast</span>\n    <a class="eln-forecast-widget"\n        data-widget="number"\n        data-race="president"\n        data-title="President<span class=\'g-forecast-word\'>ial</span> <span class=\'g-forecast-word\'>Forecast</span>"\n        data-decimals="0"\n        data-initial="0.5"\n        data-state=""\n        href="/elections/forecast/president"\n        data-type="win_prob">\n    </a><a class="eln-forecast-widget"\n        data-widget="number"\n        data-race="senate"\n        data-title="Senate <span class=\'g-forecast-word\'>Forecast</span>"\n        data-decimals="0"\n        data-initial="0.5"\n        href="/elections/forecast/senate"\n        data-state=""\n        data-type="win_prob">\n    </a><a class="eln-forecast-widget"\n        data-widget="number"\n        data-race="house"\n        data-title="House <span class=\'g-forecast-word\'>Forecast</span>"\n        data-decimals="0"\n        data-initial="0.5"\n        data-state=""\n        href="/elections/forecast/house"\n        data-type="win_prob">\n    </a>\n\n    '+((__t=partials["forecast-state-selector"]({page:page,Helpers:Helpers,config:config}))==null?"":__t)+"\n</div>\n";return __p},templates["forecast-state-nav"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",page.forecast_states.length&&(__p+='\n<div class="eln-forecast-chart-caption">See Forecasts in Other States</div>\n\n<div class="eln-forecast-state-nav">\n    ',_.each(page.forecast_states,function(e){var t=Helpers.expectedVoteMargin(e,page.forecast_candidates),n={democrat:"D",republican:"R",independent:"Ind."}[t.party]||t.party;vm_t=" +"+(100*t.margin).toFixed(0)+"%";var r=Helpers.getStateFromPostal(e.state.toUpperCase());__p+='\n    <a class="eln-state" href="/elections/forecast/'+((__t=e.type)==null?"":__t)+"/"+((__t=r.slug)==null?"":__t)+'">\n        <span class="state-long">'+((__t=r.name)==null?"":__t)+" <span class='g-nyt-rating g-lead-"+((__t=n)==null?"":__t)+"'>"+((__t=n)==null?"":__t)+""+((__t=vm_t)==null?"":__t)+'</span></span>\n        <span class="state-abbr">'+((__t=r.nyt_abbrev)==null?"":__t)+" <span class='g-nyt-rating g-lead-"+((__t=n)==null?"":__t)+"'>"+((__t=n)==null?"":__t)+""+((__t=vm_t)==null?"":__t)+"</span>\n    </a>\n    "}),__p+="\n</div>\n"),__p+="\n";return __p},templates["forecast-state-president-history-table"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-historical-presidential-vote-history-c">\n  <h5 class="g-table-intro-hed">Previous '+((__t=stateName)==null?"":__t)+' margins </h5>\n  <div class="g-historical-vote-ledger">   \n    ',data.forEach(function(e){__p+='\n      <div class="g-state-hist-presidential-result">\n        <span class="g-hist-election-year">'+((__t=e.year)==null?"":__t)+'</span>\n        <span class="g-winner-party-margin g-'+((__t=e.winner)==null?"":__t)+'-winner">'+((__t=e.margin_str)==null?"":__t)+"</span>\n      </div>\n    "}),__p+="\n  </div>\n</div>";return __p},templates["forecast-state-selector"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",page.forecast_states.length&&(__p+='\n\n<select class="eln-forecast-state-nav-selector">\n    <option value="">Jump to a '+((__t=config.race_type=="president"?"state":"race")==null?"":__t)+" </option>\n    ",_.each(page.forecast_states,function(e){var t=Helpers.expectedVoteMargin(e,page.forecast_candidates),n={democrat:"D",republican:"R",independent:"Ind."}[t.party]||t.party;vm_t=" +"+(100*t.margin).toFixed(0)+"%";var r=Helpers.getStateFromPostal(e.state.toUpperCase());__p+='\n    <option value="'+((__t=config.race_type+"/"+r.slug)==null?"":__t)+'">'+((__t=r.name)==null?"":__t)+"</option>\n    "}),__p+="\n\n\n    ",config.race_type=="president"&&(__p+='\n        <option value="president/map">Map of remaining votes</option>\n    '),__p+="\n        \n\n</select>\n\n"),__p+="\n";return __p},templates["forecast-state-table-intro-copy"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<p class="copy">The projections for each '+((__t=type=="senate"?"race":"state")==null?"":__t)+" are based on the votes reported so far and how those places have voted in previous elections.</p>\n\n<p class='copy'>We’re showing the closest "+((__t=type=="senate"?"races":"states")==null?"":__t)+' by default. <a class="g-show-all-states-toggle">Show all states</a></p>';return __p},templates["forecast-states-table-key"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-forecast-key-container">\n  <div class="eln-forecast-key">\n    <h5>Estimated vote margin</h5>\n    <div class="fc-key-container">\n      <div class="g-key-bar g-90-pct-bar"></div>\n      <div class="g-key-bar g-50-pct-bar"></div>\n      <div class="g-key-marker"></div>\n      <div class="g-key-marker-line"></div>\n      <div class="g-key-marker-label">Best guess</div>\n      <div class="g-key-marker-outcomes-label outcomes-10">5%</div>\n      <div class="g-key-marker-outcomes-label outcomes-50">50% of outcomes</div>\n      <div class="g-key-marker-outcomes-label outcomes-90">95%</div>\n    </div>\n  </div>\n</div>';return __p},templates["forecast-time-series-key"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n<div class="eln-forecast-time-series-key-container">\n  <div class="eln-forecast-key">\n    <h5>'+((__t=key_title)==null?"":__t)+'</h5>\n    <div class="fc-key-container">\n      <div class="g-key-bar g-90-pct-bar"></div>\n      <div class="g-key-bar g-50-pct-bar"></div>\n      <div class="g-key-marker"></div>\n      <div class="g-key-marker-line"></div>\n      <div class="g-key-marker-label">Best guess</div>\n      <div class="g-key-marker-outcomes-label outcomes-10">5%</div>\n      <div class="g-key-marker-outcomes-label outcomes-50">50% of outcomes</div>\n      <div class="g-key-marker-outcomes-label outcomes-90">95%</div>\n    </div>\n  </div>\n</div>';return __p},templates["forecast-yellow-box-for-results"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<p class="copy yellow-box">\n  Heads-up: Forecasts may be volatile early in the night. These numbers will become more trustworthy once more votes have been counted.\n</p>\n';return __p},templates["forecast-yellow-box"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<p class="copy yellow-box">\n	<span class="numbers-turned-on">\n		Heads-up: Forecasts may be volatile early in the night. These numbers will become more trustworthy once more votes have been counted.</span>\n	<span class="numbers-turned-off">\n		Hello there! These dials will spring to life around 7:15 PM ET.\n	</span>\n</p>\n';return __p},templates["general-forecast-footer"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var total=Math.ceil(states.length/4)*4,stateGroups=_.groupBy(states,function(e,t){return Math.floor(t/total*4)});__p+='\n<div class="eln-results-footer">\n  <h3><a href="https://www.nytimes.com/elections/results/president">President</a></h3>\n  <h3><a href="https://www.nytimes.com/elections/results/senate">Senate</a></h3>\n  <h3><a href="https://www.nytimes.com/elections/results/house">House</a></h3>\n  <div class="eln-states eln-desktop">\n  ',_.each(stateGroups,function(e){__p+='\n    <ul class="eln-page-list">\n    ',_.each(e,function(e){__p+='\n      <li class="eln-page">\n        <a href="https://www.nytimes.com/elections/results/'+((__t=e.slug)==null?"":__t)+'">'+((__t=e.name)==null?"":__t)+"</a>\n      </li>\n    "}),__p+="\n    </ul>\n  "}),__p+='\n  </div>\n  <div class="eln-states eln-mobile">\n    <ul class="eln-page-list">\n    ',_.each(states,function(e){__p+='\n      <li class="eln-page">\n        <a href="https://www.nytimes.com/elections/results/'+((__t=e.slug)==null?"":__t)+'">'+((__t=e.name)==null?"":__t)+"</a>\n      </li>\n    "}),__p+="\n    </ul>\n  </div>\n</div>\n"}return __p},templates["general-navigation"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var columns=5,total=Math.ceil(states.length/columns)*columns;stateGroups=_.groupBy(states,function(e,t){return Math.floor(t/total*columns)}),__p+='\n<nav class="eln-general-navigation">\n  <div class="eln-inner">\n    ',_.each(page.nav_data,function(e){__p+="\n    ",e.label==="More"&&!e.mobile?__p+='\n    <a class="eln-nav-item eln-nav-'+((__t=Helpers.slugify(e.label))==null?"":__t)+" "+((__t=e.url==page.url?"eln-current-page":"")==null?"":__t)+'" title="'+((__t=e.text)==null?"":__t)+'" href="'+((__t=e.full_url==true?"":config.base_url)==null?"":__t)+""+((__t=e.url)==null?"":__t)+'">State Results</a>\n    ':__p+='\n    <a class="eln-nav-item eln-nav-'+((__t=Helpers.slugify(e.label))==null?"":__t)+" "+((__t=e.url==page.url?"eln-current-page":"")==null?"":__t)+'" title="'+((__t=e.text)==null?"":__t)+'" href="'+((__t=e.full_url==true?"":config.base_url)==null?"":__t)+""+((__t=e.url)==null?"":__t)+'">'+((__t=e.label)==null?"":__t)+"</a>\n    ",__p+="\n    "}),__p+='\n  </div>\n  <nav class="eln-navigation-states">\n    <div class="eln-inner">\n    ',_.each(stateGroups,function(e){__p+='\n      <ul class="eln-page-list">\n      ',_.each(e,function(e){__p+='\n        <li class="eln-page">\n          <a href="'+((__t=config.base_url)==null?"":__t)+"/results/"+((__t=e.slug)==null?"":__t)+'" title="'+((__t=e.name)==null?"":__t)+'">'+((__t=e.nyt_abbrev)==null?"":__t)+"</a>\n        </li>\n      "}),__p+="\n      </ul>\n    "}),__p+="\n    </div>\n  </nav>\n</nav>"}return __p},templates["general-results-dashboard-table"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var group=Helpers.dashboardRacesGeneral({races:races,candidates:options.candidates,max_races:options.max_races,pollsSort:!0});__p+='\n<table class="eln-general-results-dashboard-table" data-options=\''+((__t=JSON.stringify(options))==null?"":__t)+'\'>\n  <thead>\n    <tr>\n      <th class="eln-header eln-title">\n        Key States\n        <span class="eln-subheader">\n          <span class="eln-full">Electoral votes</span>\n          <span class="eln-abbr">Elec. votes</span>\n        </span>\n      </th>\n    ',_.each(group.races,function(e,t){__p+='\n      <th class="eln-header eln-state">\n        <a class="eln-state-name" href="http://www.nytimes.com/elections/results/'+((__t=e.state_slug)==null?"":__t)+'">\n          '+((__t=group.races.length==1?e.state_name:e.state_abbrev)==null?"":__t)+'\n        </a>\n        <span class="eln-subheader">'+((__t=e.electoral_votes)==null?"":__t)+"</span>\n      </th>\n    "}),__p+="\n    </tr>\n  </thead>\n  <tbody>\n    ",_.each(group.candidates,function(e){__p+='\n    <tr class="eln-row eln-'+((__t=Helpers.slugifyName(e))==null?"":__t)+'">\n      <td class="eln-cell eln-name">\n        <span class="eln-last-name">'+((__t=e.last_name)==null?"":__t)+'</span>\n        <span class="eln-name-display">'+((__t=e.name_display)==null?"":__t)+"</span>\n      </td>\n      ",_.each(group.races,function(t){var n=Helpers.getLeader(t),r=_.findWhere(t.candidates,{candidate_id:e.candidate_id});__p+="\n      ",r?__p+='\n        <td class="eln-cell eln-percent eln-'+((__t=r.party_id)==null?"":__t)+"\n          "+((__t=n&&n.candidate_id==r.candidate_id&&!r.winner?"eln-leader eln-swatch-light":"")==null?"":__t)+"\n          "+((__t=r.winner?"eln-winner eln-swatch":"")==null?"":__t)+'">\n          <span class="eln-value">'+((__t=Math.round(r.percent_display))==null?"":__t)+'</span>%\n          <span class="eln-sprite eln-icon-checkmark-small"></span>\n        </td>\n      ':__p+='\n        <td class="eln-cell eln-percent">—</td>\n      ',__p+="\n      "}),__p+="\n    </tr>\n    "}),__p+='\n    <tr class="eln-row eln-reporting">\n      <td class="eln-cell eln-label">\n        <span class="eln-reporting-title">Reporting</span>\n        <span class="eln-reporting-title-small">% Rpt.</span>\n      </td>\n      ',_.each(group.races,function(e,t){__p+='\n        <td class="eln-cell eln-race">'+((__t=Helpers.getReportingForDashboard(e))==null?"":__t)+"</td>\n      "}),__p+="\n    </tr>\n  </tbody>\n</table>"}return __p},templates["general-results-footer"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var total=Math.ceil(states.length/4)*4,stateGroups=_.groupBy(states,function(e,t){return Math.floor(t/total*4)});__p+='\n<div class="eln-results-footer">\n  <h3 class="eln-branch-title"><a href="'+((__t=config.base_url)==null?"":__t)+'/results/president">President</a></h3>\n  <h3 class="eln-branch-title"><a href="'+((__t=config.base_url)==null?"":__t)+'/results/senate">Senate</a></h3>\n  <h3 class="eln-branch-title"><a href="'+((__t=config.base_url)==null?"":__t)+'/results/house">House</a></h3>\n  <h3 class="eln-footer-title">State Results</h3>\n  <div class="eln-states eln-desktop">\n  ',_.each(stateGroups,function(e){__p+='\n    <ul class="eln-page-list">\n    ',_.each(e,function(e){__p+='\n      <li class="eln-page">\n        <a href="'+((__t=config.base_url)==null?"":__t)+"/results/"+((__t=e.slug)==null?"":__t)+'">'+((__t=e.name)==null?"":__t)+"</a>\n      </li>\n    "}),__p+="\n    </ul>\n  "}),__p+='\n  </div>\n  <div class="eln-states eln-mobile">\n    <ul class="eln-page-list">\n    ',_.each(states,function(e){__p+='\n      <li class="eln-page">\n        <a href="'+((__t=config.base_url)==null?"":__t)+"/results/"+((__t=e.slug)==null?"":__t)+'">'+((__t=e.name)==null?"":__t)+"</a>\n      </li>\n    "}),__p+="\n    </ul>\n  </div>\n</div>"}return __p},templates["general-state-model"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-state-model">\n  <div class="eln-state-model-header">\n    <h2 class="eln-race-title">\n      <a href="#">\n        <span class="eln-sprite eln-icon-upshot-small"></span><span class="eln-sprite eln-icon-upshot"></span><span class="eln-hed">Live Results Forecast</span>\n      </a>\n    </h2>\n    <p class="eln-model-sentence">We think Hillary Clinton is up in '+((__t=state.name)==null?"":__t)+' by around 1 point. <a href="#">See why →</a></p>\n  </div>\n  <div class="eln-state-model-chart">\n    <p>Here’s how the leads have changed:</p>\n    <div class="eln-model-chart" data-race-id="'+((__t=race.race_id)==null?"":__t)+'"></div>\n  </div>\n</div>';return __p},templates["general-state-results-president"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var state=config.state;__p+='\n<div id="'+((__t=race.race_id)==null?"":__t)+'" class="eln-race">\n\n  <div class="eln-race-content">\n    <div class="eln-race-results" data-race-id="'+((__t=race.race_id)==null?"":__t)+'">\n\n      '+((__t=partials["results-table"]({Helpers:Helpers,race:race,options:{max_candidates:4,show_more:true,show_precinct_count:true}}))==null?"":__t)+'\n\n      <div class="eln-race-best-sentence-container">\n      ',config.ic_config.on&&race.race_best_sentence&&(__p+="\n        "+((__t=partials["race-best-sentence"]({race:race}))==null?"":__t)+"\n      "),__p+='\n      </div>\n\n      <div class="eln-race-text">\n        ',race.state_id=="NC"&&(__p+='\n        <p><a href="http://www.nytimes.com/interactive/2016/11/08/us/elections/north-carolina-presidential-election-precinct-maps.html">Precinct maps: The most detailed maps of North Carolina results »</a></p>\n        '),__p+="\n        ",_.each(race.preview_text,function(e,t){__p+='\n        <p itemprop="articleBody">',t==0&&(__p+='<span class="eln-preview-label">Race Preview:</span> '),__p+=""+((__t=e)==null?"":__t)+"</p>\n        "}),__p+="\n      </div>\n\n      ",__p+="\n\n    </div>\n\n    ";if(race.state_id!="DC"&&race.state_id!="AK"){__p+='\n    <div class="eln-race-map">\n      <div class="eln-results-map eln-map-'+((__t=race.state_slug)==null?"":__t)+'" data-race-id="'+((__t=race.race_id)==null?"":__t)+'" data-map-type="leader-pct"></div>\n      <div class="eln-map-keys">\n        <div class="eln-map-key-results">'+((__t=partials["map-key-vote-share"]({Helpers:Helpers}))==null?"":__t)+"</div>\n      </div>\n      ",race.votes&&(__p+="\n      "+((__t=partials["votes-remaining-menu"]({race:race}))==null?"":__t)+"\n      "),__p+="\n\n      ";if(race.votes&&(race.counties&&race.counties.length)>1||race.townships&&race.townships.length>1)__p+='\n      <div class="eln-table-container">\n        '+((__t=partials["county-table"]({Helpers:Helpers,race:race,options:{rows_to_display:10}}))==null?"":__t)+"\n      </div>\n      ";__p+="\n    </div>\n    "}__p+="\n  </div>\n</div>"}return __p},templates["group-table-candidates"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var leader=Helpers.getLeader(race);candidates.length==1&&candidates.push({}),__p+="\n",_.each(candidates,function(e,t){__p+='\n<td class="eln-cell eln-candidate eln-'+((__t=e.party_id)==null?"":__t)+"\n  "+((__t=leader&&e.candidate_id==leader.candidate_id?"eln-leader eln-swatch-light":"")==null?"":__t)+"\n  "+((__t=e.runoff?"eln-runoff":"")==null?"":__t)+"\n  "+((__t=e.winner?"eln-winner eln-swatch":"")==null?"":__t)+'">\n  <a href="'+((__t=url)==null?"":__t)+'">\n  ',e&&e.last_name?(__p+="\n    ",e.winner||e.runoff?__p+='<span class="eln-sprite eln-icon-checkmark-small"></span>\n    ':__p+='<span class="eln-sprite eln-icon-checkmark-small eln-placeholder"></span>',__p+='\n      <span class="eln-percent">'+((__t=Math.round(e.percent))==null?"":__t)+'%</span><!-- \n   --><span class="eln-name">'+((__t=e.last_name)==null?"":__t)+"",e.incumbent&&(__p+="*"),__p+="</span>\n      ",options.has_parties&&!options.show_parties&&(__p+='<span class="eln-party">'+((__t=Helpers.partyAbbreviation(e.party_id))==null?"":__t)+"</span>"),__p+="\n    </span>\n  "):(__p+="\n    ",race.uncontested&&t<2?__p+='<span class="eln-uncontested-label">Uncontested</span>\n    ':__p+="&nbsp;",__p+="\n  "),__p+="\n  </a>\n</td>\n"}),__p+=""}return __p},templates["group-table-row"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var multiple_winners=_.where(race.candidates,{winner:!0}).length>1;__p+="\n";var candidate=multiple_winners?race.candidates[0]:!1;__p+='\n<tr data-race-id="'+((__t=race.race_id)==null?"":__t)+"\" data-options='"+((__t=JSON.stringify(options))==null?"":__t)+"' class=\"eln-group-row \n"+((__t=race.result?"eln-result-"+race.result:"")==null?"":__t)+"\n"+((__t=race.votes>0?"eln-has-votes":"")==null?"":__t)+"\n"+((__t=race.uncontested?"eln-uncontested":"")==null?"":__t)+"\n"+((__t=options.hidden?"eln-row-hidden":"")==null?"":__t)+"\n"+((__t=options.multiple_winners_possible?"eln-multiple-winners-possible":"")==null?"":__t)+'">\n  \n  ';if(race.race_type=="ballot-measure")__p+='\n  <td class="eln-cell eln-name-cell"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.race_name)==null?"":__t)+"</a></td>\n  ";else if(options.national){__p+="\n  ";var nyt_abbrev=Helpers.getStateFromPostal(race.state_id).nyt_abbrev;__p+='\n  <td class="eln-cell eln-name-cell">\n    <a href="'+((__t=url)==null?"":__t)+'">\n    '+((__t=nyt_abbrev)==null?"":__t)+"\n    ",race.race_type=="house"&&(__p+=""+((__t=race.seat)==null?"":__t)+""),__p+="\n    </a>\n  </td>\n  "}else race.seat&&race.race_type=="york-county-commissioner"?__p+='\n  <td class="eln-cell eln-name-cell eln-seat"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.seat)==null?"":__t)+"</a></td>\n  ":race.seat?(__p+='\n  <td class="eln-cell eln-name-cell eln-seat">\n    <a href="'+((__t=url)==null?"":__t)+'">\n      '+((__t=race.seat)==null?"":__t)+"",race.election_type=="special-general"&&(__p+='<span class="eln-cross-symbol">†</span>'),__p+="\n    </a>\n  </td>\n  "):race.race_type=="regional-transportation-district"?__p+='\n  <td class="eln-cell eln-name-cell eln-seat"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.seat_name)==null?"":__t)+"</a></td>\n  ":race.race_type=="los-angeles-county-board-of-supervisors"?__p+='\n  <td class="eln-cell eln-name-cell eln-seat"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.seat_name.replace(" LA",""))==null?"":__t)+"</a></td>\n  ":race.race_id=="ar-6482-2016-11-08"?__p+='\n  <td class="eln-cell eln-name-cell eln-seat"><a href="'+((__t=url)==null?"":__t)+'">12, Div. 3</a></td>\n  ':race.race_id=="ar-6484-2016-11-08"?__p+='\n  <td class="eln-cell eln-name-cell eln-seat"><a href="'+((__t=url)==null?"":__t)+'">11 West, Div. 1</td>\n  ':race.seat_name&&race.seat_name.indexOf("District")>-1?__p+='\n  <td class="eln-cell eln-name-cell"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.seat_name.replace("District ",""))==null?"":__t)+"</a></td>\n  ":race.seat_name&&race.seat_name.indexOf("Position")==0?__p+='\n  <td class="eln-cell eln-name-cell"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.seat_name.replace("Position ",""))==null?"":__t)+"</a></td>\n  ":race.seat_name&&race.seat_name.indexOf("Seat")==0?__p+='\n  <td class="eln-cell eln-name-cell"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.seat_name.replace("Seat ",""))==null?"":__t)+"</a></td>\n  ":race.race_type=="appeals-court"&&race.state_id=="NC"?__p+='\n  <td class="eln-cell eln-name-cell"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.seat_name.replace(" Seat",""))==null?"":__t)+"</a></td>\n  ":__p+='\n  <td class="eln-cell eln-name-cell"><a href="'+((__t=url)==null?"":__t)+'">'+((__t=race.seat_name)==null?"":__t)+"</a></td>\n  ";__p+="\n\n  ";if(!race.report&&options.national)__p+='\n  <td class="eln-cell eln-cell-note" colspan="'+((__t=options.show_parties?3:2)==null?"":__t)+'">\n  '+((__t=race.reporting_display.replace("% reporting","%"))==null?"":__t)+"\n  </td>\n  ";else if(candidate)__p+="\n  "+((__t=partials["group-table-candidates"]({race:race,url:url,Helpers:Helpers,candidates:[candidate]||race.candidates[0],options:options}))==null?"":__t)+"\n  ";else if(race.votes==0&&!race.uncontested&&(options.multiple_winners_possible||!options.show_parties))__p+='\n  <td class="eln-cell eln-cell-note" colspan="2">\n    <a href="'+((__t=url)==null?"":__t)+'">No votes reported yet</a>\n  </td>\n  ';else{__p+="\n  ";var candidates=Helpers.getGroupCandidates({race:race,options:options});__p+="\n  "+((__t=partials["group-table-candidates"]({race:race,url:url,Helpers:Helpers,candidates:candidates,options:options}))==null?"":__t)+"\n  "}__p+='\n\n  <td class="eln-cell eln-reporting">\n    <a href="'+((__t=url)==null?"":__t)+'">\n    '+((__t=race.report&&!race.uncontested?race.reporting_display.replace("% reporting","%"):"")==null?"":__t)+'\n    </a>\n  </td>\n  <td class="eln-cell eln-link"><a href="'+((__t=url)==null?"":__t)+'"><span class="eln-sprite eln-icon-caret"></span></a></td>\n</tr>\n\n',__p+="\n",multiple_winners&&(__p+="\n  ",_.each(race.candidates,function(e,t){if(!e.winner||t==0)return;__p+='\n  \n  <tr class="eln-group-row-child \n  eln-group-child-'+((__t=race.race_id)==null?"":__t)+"\n  "+((__t=race.result?"eln-result-"+race.result:"")==null?"":__t)+"\n  "+((__t=race.votes>0?"eln-has-votes":"")==null?"":__t)+"\n  "+((__t=options.hidden?"eln-row-hidden":"")==null?"":__t)+"\n  "+((__t=options.multiple_winners_possible?"eln-multiple-winners-possible":"")==null?"":__t)+'">\n\n    <td class="eln-cell eln-name-cell"><a href="'+((__t=url)==null?"":__t)+'">&nbsp;</a></td>\n    '+((__t=partials["group-table-candidates"]({race:race,url:url,Helpers:Helpers,candidates:[e]||race.candidates[0],options:options}))==null?"":__t)+'\n    <td class="eln-cell eln-reporting"><a href="'+((__t=url)==null?"":__t)+'">&nbsp;</a></td>\n    <td class="eln-cell eln-link"></td>\n  </tr>\n\n  '}),__p+="\n"),__p+=""}return __p},templates["group-table"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var meta=races[0],other_cand_important=!1,show_parties=!1,has_parties=!1,multiple_winners_possible=multipleWinnersPossible(races,Helpers),other_cand_exists=!1,has_incumbent=_.where(races,{has_incumbent:!0}).length,has_special_election=_.where(races,{election_type:"special-general"}).length,has_notes=has_incumbent||has_special_election,has_runoff=_.where(races,{result:"runoff"}).length,races_are_reporting=_.where(races,{report:!0}).length,yes_no=Helpers.yesNoRace(meta),seat_description="";meta.seat&&meta.seat_name&&(meta.seat!=meta.seat_name?seat_description=meta.seat_name.replace(" "+String(meta.seat),""):seat_description=meta.race_type.indexOf("senate")>-1?"Seat":"District"),meta.seat_name&&meta.seat_name.indexOf("Position")==0?seat_description="Position":meta.seat_name&&meta.seat_name.indexOf("Seat")==0&&(seat_description="Seat");if(meta.race_type=="state-house"&&meta.state_id=="NH"||meta.race_type=="state-house"&&meta.state_id=="MN"||meta.race_type=="state-house"&&meta.state_id=="MA"||meta.race_type=="state-house"&&meta.state_id=="VT"||meta.race_type=="state-house"&&meta.state_id=="WA"||meta.race_type==="regional-transportation-district"||meta.race_type=="york-county-commissioner"||meta.race_type==="los-angeles-county-board-of-supervisors"||meta.race_type==="circuit-court")seat_description="District";if(meta.race_type.indexOf("civil-court")>=0&&meta.state_id=="NY"||meta.race_type=="appeals-court"&&meta.state_id=="NC")seat_description="Seat";var seat_name=seat_description,seat_name_abbr=seat_description=="District"?"Dist.":seat_description;_.each(races,function(e){_.each(e.candidates,function(e,t){e.party_id!="republican"&&e.party_id!="democrat"?(other_cand_exists=!0,t<2&&(other_cand_important=!0)):(has_parties=!0,show_parties=!0)})});function multipleWinnersPossible(e,t){var n=_.filter(e,t.openElection);return n.length||meta.state_id=="NH"&&meta.race_type=="state-house"||meta.state_id=="AZ"&&meta.race_type=="state-house"||meta.state_id=="NY"&&meta.race_type.indexOf("court")>=0}multiple_winners_possible&&(show_parties=!1),meta.race_type=="president"?show_parties=!0:show_parties=!1,__p+='\n<div class="eln-group-results" data-race-type="'+((__t=meta.race_type)==null?"":__t)+'">\n  <table class="eln-group-table '+((__t=other_cand_important?"eln-third-party-important":"")==null?"":__t)+" "+((__t=!other_cand_exists?"eln-no-third-party":"")==null?"":__t)+'">\n    <thead>\n      <tr>\n        ',seat_description&&meta.race_type!="ballot-measure"?__p+='\n        <th class="eln-header eln-name-cell '+((__t=meta.seat||_.last(races).seat?"eln-seat":"")==null?"":__t)+'">\n          <span class="eln-name-full">'+((__t=seat_name)==null?"":__t)+'</span>\n          <span class="eln-name-abbr">'+((__t=seat_name_abbr)==null?"":__t)+"</span>\n        </th>\n        ":options.national?__p+='\n        <th class="eln-header eln-name-cell">State</th>\n        ':yes_no?__p+='\n        <th class="eln-header eln-name-cell">Question</th>\n        ':__p+='\n        <th class="eln-header eln-name-cell">Race</th>\n        ',__p+="\n\n        ",!races_are_reporting&&options.national?__p+='\n        <th class="eln-header" colspan="4"></th>\n        ':meta.race_type=="president"?__p+='\n        <th class="eln-header eln-candidate eln-democrat">Clinton</th>\n        <th class="eln-header eln-candidate eln-republican">Trump</th>\n        <th class="eln-header eln-candidate eln-other">Other</th>\n        ':show_parties?__p+='\n        <th class="eln-header eln-candidate eln-democrat">Democrat</th>\n        <th class="eln-header eln-candidate eln-republican">Republican</th>\n        <th class="eln-header eln-candidate eln-other">Other</th>\n        ':yes_no?__p+='\n        <th class="eln-header eln-candidate eln-yes">Yes</th>\n        <th class="eln-header eln-candidate eln-no">No</th>\n        ':__p+='\n        <th class="eln-header eln-candidate">Leader</th>\n        <th class="eln-header eln-candidate"></th>\n        ',__p+="\n        ",races_are_reporting&&(__p+='\n        <th class="eln-header eln-reporting">Rpt.</th>\n        '),__p+='\n        <th class="eln-header eln-link"></th>\n      </tr>\n    </thead>\n    <tbody>\n    ',options.national&&(races=_.chain(races).sortBy("report").sortBy("state_slug").sortBy(function(e){return e.report?"":new Date(e.poll_time)}).value()),__p+="\n    ",_.each(races,function(e,t){__p+="\n      ";var n=config.base_url+"/"+(e.race_type=="president"?"results/"+e.state_slug:e.path);__p+="\n      ",e.runoff&&(n=""),__p+="\n      "+((__t=partials["group-table-row"]({race:e,Helpers:Helpers,partials:partials,url:n,options:{national:options.national,multiple_winners_possible:multiple_winners_possible,show_parties:show_parties,has_parties:has_parties,hidden:options.max_rows&&options.max_rows<t+1}}))==null?"":__t)+"\n    "}),__p+="\n    </tbody>\n  </table>\n  ",has_notes&&(__p+='\n  <p class="eln-note">\n  ',has_incumbent&&(__p+="*&thinsp;Incumbent"),__p+="&nbsp;\n  ",has_special_election&&(__p+="†&thinsp;Special Election"),__p+="\n  </p>\n  "),__p+="\n  ",has_runoff&&(__p+='\n  <p class="eln-runoff-key eln-note">\n    <span class="eln-sprite eln-icon-checkmark-small"></span>\n    Runoff\n  </p>\n  '),__p+="\n  ";if(options.max_rows&&options.max_rows<races.length){__p+='\n  <p class="eln-note eln-note-link">\n    ';var button_text=meta.race_type=="president"?"states":"races";__p+='\n    <a href="#" class="eln-show-all-group-races"><span class="eln-show">+ Show all '+((__t=button_text)==null?"":__t)+'</span><span class="eln-hide">– Show less '+((__t=button_text)==null?"":__t)+"</span></a>\n  </p>\n  ",meta.race_type=="house"&&(__p+='<p class="eln-note eln-note-link"><a href="http://www.nytimes.com/elections/results/house">U.S. House Map »</a></p>'),__p+=" \n  "}__p+="\n</div>"}return __p},templates["homepage-promos"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-homepage-promos">\n  <span class="eln-promo">\n    <img src="_assets/img/promo-ia-results.png">\n    <a href="http://www.nytimes.com/elections/2016/primaries/iowa" class="eln-text">Full<br>Results</a>\n  </span>\n  <span class="eln-promo">\n    <img src="_assets/img/promo-ia-precincts.png">\n    <span class="eln-text">\n      <span class="eln-kicker">Precinct-By-Precinct Maps</span>\n      <a href="http://www.nytimes.com/interactive/2016/02/01/us/iowa-caucus-republican-precinct-results.html">Republicans</a>\n      <a href="http://www.nytimes.com/interactive/2016/02/01/us/iowa-caucus-democratic-precinct-results.html">Democrats</a>\n    </span>\n  </span>\n  <span class="eln-promo">\n    <img src="_assets/img/promo-ia-exitpolls.png">\n    <span class="eln-text">\n      <span class="eln-kicker">Entrance Polls</span>\n      <a href="http://www.nytimes.com/interactive/2016/02/01/us/elections/iowa-republican-poll.html">Republicans</a>\n      <a href="http://www.nytimes.com/interactive/2016/02/01/us/elections/iowa-democrat-poll.html">Democrats</a>\n    </span>\n  </span>\n</div>';return __p},templates["map-key-lead-win-gain"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";if(party_id){__p+="\n";var leaders=Helpers.getMapLeaders({races:races,party_id:party_id,type:"lead-win"});__p+='\n<div class="eln-map-key eln-map-key-lead-win-gain" data-party-id="'+((__t=party_id)==null?"":__t)+'" data-template="map-key-lead-win">\n  ',leaders&&(__p+="\n    ",_.each(leaders,function(e){__p+='\n    <div class="eln-key-group">\n    ',_.each(e,function(e,t){__p+='\n      <p class="eln-candidate eln-'+((__t=Helpers.slugifyName(e))==null?"":__t)+" "+((__t=e.not_a_candidate?"eln-not-a-candidate":"")==null?"":__t)+'">\n        ',e.party_id&&(__p+='\n        <span class="eln-leader">\n          <span class="eln-swatch"></span>\n          <span class="eln-text">Lead</span>\n        </span>'),__p+='<!-- \n     --><span class="eln-winner">\n          <span class="eln-swatch"></span>\n          <span class="eln-text">Win</span>\n        </span>',e.party_id&&(__p+='<span class="eln-gain">\n          <span class="eln-swatch"></span>\n          <span class="eln-text">Flip</span>\n        </span>'),__p+='\n        <span class="eln-last-name">'+((__t=e.last_name)==null?"":__t)+"</span>\n      </p>\n    "}),__p+="\n    </div>\n    "}),__p+="\n  "),__p+="\n</div>\n"}else{__p+="\n";var parties=["democrat","republican","other"];__p+='\n<div class="eln-map-key eln-map-key-lead-win-gain" data-template="map-key-lead-win">\n  <div class="eln-key-group">\n  ',_.each(parties,function(e,t){__p+='\n    <p class="eln-candidate eln-'+((__t=e)==null?"":__t)+'">\n      <span class="eln-leader">\n        <span class="eln-swatch"></span>\n        <span class="eln-text">Lead</span>\n      </span><!-- \n   --><span class="eln-winner">\n        <span class="eln-swatch"></span>\n        <span class="eln-text">Win</span>\n      </span><!-- \n   --><span class="eln-gain">\n        <span class="eln-swatch"></span>\n        <span class="eln-text">Flip</span>\n      </span>\n      <span class="eln-last-name">'+((__t=e=="other"?"Other":Helpers.partyAbbreviation(e))==null?"":__t)+"</span>\n    </p>\n  "}),__p+='\n  </div>\n  <div class="eln-key-group eln-no-results">\n     <p class="eln-candidate eln-not-a-candidate eln-runoff">\n       <span class="eln-leader">\n         <span class="eln-swatch"></span>\n       </span>\n       <span class="eln-last-name">Runoff</span>\n     </p>\n     <p class="eln-candidate eln-not-a-candidate eln-no-election">\n       <span class="eln-leader">\n         <span class="eln-swatch"></span>\n       </span>\n       <span class="eln-last-name">No election</span>\n     </p>\n     <p class="eln-candidate eln-not-a-candidate eln-no-results">\n       <span class="eln-leader">\n         <span class="eln-swatch"></span>\n       </span>\n       <span class="eln-last-name">No results</span>\n     </p>\n  </div>\n</div>\n'}__p+=""}return __p},templates["map-key-lead-win"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var leaders=Helpers.getMapLeaders({races:races,party_id:party_id,type:"lead-win"});__p+='\n<div class="eln-map-key eln-map-key-lead-win" data-party-id="'+((__t=party_id)==null?"":__t)+'" data-template="map-key-lead-win">\n  ',leaders&&(__p+="\n    ",_.each(leaders,function(e){__p+='\n    <div class="eln-key-group">\n    ',_.each(e,function(e,t){__p+='\n      <p class="eln-candidate eln-'+((__t=Helpers.slugifyName(e))==null?"":__t)+" "+((__t=e.not_a_candidate?"eln-not-a-candidate":"")==null?"":__t)+'">\n        ',e.party_id&&(__p+='\n        <span class="eln-leader">\n          <span class="eln-swatch"></span>\n          <span class="eln-text">Lead</span>\n        </span>'),__p+='<!-- \n     --><span class="eln-winner">\n          <span class="eln-swatch"></span>\n          <span class="eln-text">Win</span>\n        </span>\n        <span class="eln-last-name">'+((__t=e.last_name)==null?"":__t)+"</span>\n      </p>\n    "}),__p+="\n    </div>\n    "}),__p+="\n  "),__p+="\n</div>"}return __p},templates["map-key-margin"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var parties=["democrat","republican","other"];__p+="\n";var breaks=[10,20,30];__p+='\n<div class="eln-map-key eln-map-key-vote-share">\n  <p class="eln-label">Vote margin</p>\n  <div class="eln-key-group">\n    ',_.each(parties,function(e){__p+='\n    <div class="eln-key-party">\n      <span class="eln-key-label">'+((__t=e=="other"?"Other":Helpers.partyAbbreviation(e))==null?"":__t)+'</span>\n      <span class="eln-swatches eln-'+((__t=e)==null?"":__t)+'">\n        ',_.each(breaks,function(e,t){__p+='\n        <span class="eln-swatch eln-swatch-'+((__t=t+1)==null?"":__t)+'">\n          <span class="eln-swatch-label">'+((__t=e)==null?"":__t)+"</span>\n        </span>\n        "}),__p+='\n        <span class="eln-swatch eln-swatch-4"></span>\n      </span>\n    </div>\n    '}),__p+='\n  </div>\n  <div class="eln-key-group">\n    <div class="eln-key-party eln-no-results">\n      <span class="eln-swatches">\n        <span class="eln-swatch"></span>\n      </span>\n      <span class="eln-key-label">No results</span>\n    </div>\n  </div>\n</div>'}return __p},templates["map-key-results"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var leaders=Helpers.getMapLeaders({races:[race],type:"results"});__p+='\n<div class="eln-map-key '+((__t=Helpers.openElection(race)?"eln-open-race":"")==null?"":__t)+'" data-race-id="'+((__t=race.race_id)==null?"":__t)+'">\n	',leaders&&leaders.length>0&&leaders[0]&&(__p+="\n	  ",leaders[0].votes>0&&(__p+='<p class="eln-label">Leader</p>'),__p+="\n		",_.each(leaders,function(e){__p+="\n			",e&&(__p+='\n		  <p class="eln-candidate eln-'+((__t=e.party_id)==null?"":__t)+"-"+((__t=e.order)==null?"":__t)+" eln-"+((__t=Helpers.slugifyName(e))==null?"":__t)+'">\n        <span class="eln-swatch"></span>\n        <span class="eln-last-name">'+((__t=e.last_name)==null?"":__t)+"</span>\n      </p>\n      "),__p+="\n		"}),__p+="\n	"),__p+="\n</div>"}return __p},templates["map-key-vote-share"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var parties=["democrat","republican","other"];__p+="\n";var breaks=[40,50,60];__p+='\n<div class="eln-map-key eln-map-key-vote-share">\n  <p class="eln-label">Vote share</p>\n  <div class="eln-key-group">\n    ',_.each(parties,function(e){__p+='\n    <div class="eln-key-party">\n      <span class="eln-key-label">'+((__t=e=="other"?"Other":Helpers.partyAbbreviation(e))==null?"":__t)+'</span>\n      <span class="eln-swatches eln-'+((__t=e)==null?"":__t)+'">\n        ',_.each(breaks,function(e,t){__p+='\n        <span class="eln-swatch eln-swatch-'+((__t=t+1)==null?"":__t)+'">\n          <span class="eln-swatch-label">'+((__t=e)==null?"":__t)+"</span>\n        </span>\n        "}),__p+='\n        <span class="eln-swatch eln-swatch-4"></span>\n      </span>\n    </div>\n    '}),__p+='\n  </div>\n  <div class="eln-key-group">\n    <div class="eln-key-party eln-no-results">\n      <span class="eln-swatches">\n        <span class="eln-swatch"></span>\n      </span>\n      <span class="eln-key-label">No results</span>\n    </div>\n  </div>\n</div>'}return __p},templates["map-key-votepct"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-map-key">\n  <p class="eln-label">'+((__t=name)==null?"":__t)+'’s vote share</p>\n  <div class="eln-map-key-ramp">\n  ',_.each(colors,function(e,t){__p+='\n    <span class="eln-map-key-break">\n      <span class="eln-map-key-color" style="background-color: '+((__t=e)==null?"":__t)+'"></span>\n      <p class="eln-map-key-value">'+((__t=breaks[t])==null?"":__t)+""+((__t=t==breaks.length-1?"%":"")==null?"":__t)+"</p>\n    </span>\n  "}),__p+="\n  </div>\n</div>";return __p},templates["map-keys"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-map-key-results eln-active">\n  '+((__t=partials["map-key-results"]({Helpers:Helpers,race:race}))==null?"":__t)+'\n</div>\n<div class="eln-map-key-bubbles">\n  '+((__t=partials["map-key-results"]({Helpers:Helpers,race:race}))==null?"":__t)+"\n  <p>Circle size is proportional to the size of a candidate's lead.</p>\n</div>\n",show_leaders&&(__p+="\n",_.each(Helpers.getLeadersForMenu(race),function(e){if(!e.votes)return;__p+='\n<div class="eln-map-key-candidate eln-map-key-'+((__t=e.candidate_id)==null?"":__t)+'" data-race-id="'+((__t=race.race_id)==null?"":__t)+'" data-candidate-id="'+((__t=e.candidate_id)==null?"":__t)+'"></div>\n'}),__p+="\n"),__p+="";return __p},templates["map-menu"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-map-menu">\n  <span class="eln-item eln-active" data-key="results" data-map-type="leader">Results</span><!--\n   --><span class="eln-item" data-key="margin" data-map-type="leader-bubbles">Size of Lead</span><!--\n   -->',show_leaders&&(__p+="",_.each(Helpers.getLeadersForMenu(race),function(e){if(!e.votes)return;__p+='<!--\n   --><span class="eln-item" data-key="'+((__t=e.candidate_id)==null?"":__t)+'" data-map-type="votepct-'+((__t=e.candidate_id)==null?"":__t)+'">'+((__t=e.last_name)==null?"":__t)+"</span><!--\n   -->"}),__p+=""),__p+="\n</div>";return __p},templates["masthead-general"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var keyStates=["FL","OH","NC","PA","VA","NV","NH","IA","CO","AZ"],mobileStateGroups=_.groupBy(states,function(e){return _.indexOf(keyStates,e.postal)>-1?"key":"other"});__p+='\n\n<header id="masthead" class="eln-masthead '+((__t=page.universal_alert_note?"eln-masthead-alert":"")==null?"":__t)+'">\n  <div class="eln-masthead-inner">\n    <nav class="eln-masthead-navigation">\n\n      <div class="eln-logos">\n        <a class="eln-logo" href="//www.nytimes.com" title="The New York Times">\n          <span class="eln-sprite eln-icon-nyt-small"></span>\n        </a>\n\n        <a class="eln-title-button" href="//elections.nytimes.com" title="Election 2016">\n          <span class="eln-sprite eln-icon-ballot"></span>\n          <span class="eln-election-title">Election 2016</span>\n        </a>\n      </div>\n\n      <div class="eln-ad-share">\n        <div id="Bar1" class="ad bar1-ad nocontent robots-nocontent eln-bar1-ad"></div>\n\n        <div class="eln-nav-share" data-url="'+((__t=config.base_url+page.url)==null?"":__t)+'" data-title="'+((__t=page.share_text||page.headline)==null?"":__t)+'"></div>\n\n        <a class="eln-home-button" href="//www.nytimes.com" title="The New York Times">\n          <span class="eln-sprite eln-icon-times-t"></span>\n          <span class="eln-home-button-text">Home</span>\n        </a>\n      </div>\n\n    </nav>\n    <div class="eln-mobile-placeholder"></div>\n    <nav class="eln-mobile-navigation">\n      ',_.each(page.nav_data,function(e){if(!e.mobile||e.hide)return;__p+='\n      <a class="eln-mobile-nav-item eln-nav-'+((__t=Helpers.slugify(e.label))==null?"":__t)+'" title="'+((__t=e.text)==null?"":__t)+'" href="'+((__t=e.full_url==true?"":config.base_url)==null?"":__t)+""+((__t=e.url)==null?"":__t)+'">'+((__t=e.label)==null?"":__t)+"</a>\n      "}),__p+='\n    </nav>\n    <div class="eln-masthead-navigation-states-mobile"><!-- eln-visible -->\n      <button class="eln-close eln-button">\n        Close <span class="eln-sprite eln-icon-close-gray"></span>\n      </button>\n\n      \n      <div class="eln-posts-nav">\n        <div class="eln-posts-wrapper">\n          <div class="eln-posts-header">Forecast</div>\n          <div class="eln-posts">\n            <article class="eln-post">\n              <a href="http://www.nytimes.com/elections/forecast/president">\n                <h3>Election Night Estimates from The Upshot</h3>\n              </a>\n            </article>\n          </div>\n        </div>\n      </div>\n\n      <!-- <div class="eln-posts-nav">\n        <div class="eln-posts-wrapper">\n          <div class="eln-posts-header">Live Chat</div>\n          <div class="eln-posts">\n            <article class="eln-post">\n              <a href="http://www.nytimes.com/interactive/2016/11/08/us/elections/trump-clinton-election-night-live.html">\n                <h3>Real-time Discussion from Times Reporters</h3>\n              </a>\n            </article>\n          </div>\n        </div>\n      </div> -->\n\n      <!-- NAV : HEADLINES -->\n      ',page.elex_portal&&(__p+='\n      <div class="eln-posts-nav">\n        '+((__t=partials["elex-portal"]({posts:page.elex_portal.posts,Helpers:Helpers}))==null?"":__t)+"\n      </div>\n      "),__p+='\n\n\n      <div class="eln-posts-nav eln-key-states-nav">\n        <div class="eln-posts-header eln-label">Key States</div>\n        <div class="eln-posts">\n          ',_.each(mobileStateGroups.key,function(e){__p+='\n          <a href="http://www.nytimes.com/elections/results/'+((__t=e.slug)==null?"":__t)+'">'+((__t=e.name)==null?"":__t)+"</a>\n          "}),__p+='\n        </div>\n      </div>\n      <div class="eln-posts-nav eln-all-states-nav">\n        <div class="eln-posts-header eln-label">All States</div>\n        <div class="eln-posts">\n          <div class="eln-all-states-dropdown-form">\n            <select id="eln-state-select" class="eln-all-states-dropdown-select" name="eln-all-states-dropdown">\n              ',_.each(states,function(e){__p+='\n              <option value="'+((__t=config.base_url)==null?"":__t)+"/results/"+((__t=e.slug)==null?"":__t)+'">'+((__t=e.name)==null?"":__t)+"</option>\n              "}),__p+="\n            </select>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n  ",page.universal_alert_note&&(__p+='\n  <div class="eln-universal-alert-note">\n    <div class="eln-alert-inner">\n      '+((__t=page.universal_alert_note)==null?"":__t)+"\n    </div>\n  </div>\n  "),__p+="\n</header>"}return __p},templates.masthead=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='        <header id="masthead" class="eln-masthead">\n            <nav class="eln-masthead-navigation">\n\n                <div class="eln-nav-share" data-url="'+((__t=page.url)==null?"":__t)+'" data-title="'+((__t=page.share_text||page.headline)==null?"":__t)+'"></div>\n\n                <a class="eln-home-button" href="//www.nytimes.com" title="The New York Times">\n                  <span class="eln-sprite eln-icon-times-t"></span>\n                  <span class="eln-sprite eln-icon-times-t-large"></span>\n                  <span class="eln-home-button-text">Home</span>\n                </a>\n\n                <a class="eln-logo" href="//www.nytimes.com" title="The New York Times">\n                  <span class="eln-sprite eln-icon-nyt"></span>\n                </a>\n\n                <a class="eln-title-button" href="//elections.nytimes.com" title="Election 2016">\n                  <span class="eln-sprite eln-icon-ballot"></span>\n                  <span class="eln-election-title">Election 2016</span>\n                </a>\n\n                <div id="Bar1" class="ad bar1-ad nocontent robots-nocontent eln-bar1-ad"></div>\n            </nav>\n        </header>';return __p},templates["mobile-dashboard"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-results-dashboard-row" data-template="mobile-dashboard" data-load-id="'+((__t=Helpers.getLoadId(_.values(racesByParty)))==null?"":__t)+'">\n',_.each(racesByParty,function(e){__p+='\n<h2 class="eln-party-title">'+((__t=Helpers.partyTitle(e.party_id))==null?"":__t)+' Results</h2>\n<h2 class="eln-party-plural">'+((__t=Helpers.partyPlural(e.party_id))==null?"":__t)+'</h2>\n<table class="eln-mobile-dashboard">\n  <thead>\n    <th class="eln-header eln-key">\n      <div class="eln-key">\n        <div class="eln-item">\n          <span class="eln-leader"></span>\n          Lead\n        </div>\n        <div class="eln-item">\n          <span class="eln-winner">\n            <span class="eln-sprite eln-icon-checkmark-small"></span>\n          </span>\n          Win\n        </div>\n      </div>\n    </th>\n  ',_.each(e.candidates,function(e){var t=Helpers.candidateImage(e.last_name);__p+='\n    <th class="eln-header eln-candidate eln-'+((__t=Helpers.slugifyName(e))==null?"":__t)+'">\n      ',t&&(__p+='<div class="eln-image eln-candidates-sprite '+((__t=Helpers.slugify(e.last_name))==null?"":__t)+'"></div>'),__p+='\n      <span class="eln-last-name">'+((__t=e.last_name)==null?"":__t)+"</span>\n    </th>\n  "}),__p+='\n    <th class="eln-header eln-reporting">Reporting</th>\n  </thead>\n  <tbody>\n\n    ',_.each(e.races,function(t,n){__p+='\n    <tr class="eln-row ',n==0?"eln-first-row":"",__p+='">\n\n      <td class="eln-cell eln-state">\n        <a href="http://www.nytimes.com/elections/results/'+((__t=t.state_slug)==null?"":__t)+'">\n          <span class="eln-abbrev">'+((__t=t.state_abbrev)==null?"":__t)+'</span>\n          <span class="eln-name">'+((__t=Helpers.getStateFromPostal(t.state_id).name)==null?"":__t)+"</span>\n        </a>\n      </td>\n\n      ",t.report?(__p+="\n\n        ",_.each(e.candidates,function(n){var r=Helpers.getLeader(t),i=_.findWhere(t.candidates,{candidate_id:n.candidate_id});__p+="\n        ",i?__p+='\n          <td class="eln-cell \n            eln-percent \n            eln-'+((__t=Helpers.slugifyName(n))==null?"":__t)+" \n            "+((__t=i.winner?"eln-winner":"")==null?"":__t)+"\n            "+((__t=r&&r.candidate_id==i.candidate_id?"eln-leader":"")==null?"":__t)+'">\n            <span class="eln-sprite eln-icon-checkmark-small"></span>\n            '+((__t=e.candidates.length>3?Math.round(i.percent_display):i.percent_display)==null?"":__t)+"\n          </td>\n        ":__p+='\n          <td class="eln-cell eln-percent">—</td>\n        ',__p+="\n        "}),__p+='\n        <td class="eln-cell eln-reporting">'+((__t=Helpers.getReportingForDashboard(t))==null?"":__t)+"</td>\n\n      "):__p+='\n\n        <td class="eln-cell eln-polls-close" colspan="'+((__t=e.candidates.length+1)==null?"":__t)+'">'+((__t=t.poll_display)==null?"":__t)+"</td>\n\n      ",__p+="\n\n    </tr>\n    "}),__p+="\n\n  </tbody>\n</table>\n"}),__p+="\n</div>";return __p},templates["model-sentence"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-model-sentence eln-'+((__t=data.slug)==null?"":__t)+'">\n  <div class="eln-image eln-candidates-sprite '+((__t=data.last_name.toLowerCase())==null?"":__t)+'"></div>\n  <div class="eln-text">\n    <p class="eln-sentence" itemprop="articleBody">'+((__t=data.sentence)==null?"":__t)+" ",data.url&&(__p+='<a href="'+((__t=data.url)==null?"":__t)+'">MORE »</a>'),__p+='</p>\n    <p class="eln-note">Updated at <span class="eln-updated">'+((__t=Helpers.timeFormat(data.updated))==null?"":__t)+"</span> with "+((__t=data.reporting)==null?"":__t)+" of precincts reporting</p>\n  </div>\n</div>";return __p},templates.navigation=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<nav class="eln-navigation eln-desktop">\n\n    <a class="eln-title-button" href="//elections.nytimes.com" title="Election 2016">\n      <span class="eln-sprite eln-icon-ballot"></span>\n      <span class="eln-election-title">Election 2016</span>\n    </a>\n\n    <div class="eln-nav-items clearfix">\n      <a class="eln-nav-item" href="http://www.nytimes.com/interactive/2016/upshot/presidential-polls-forecast.html">Who Will Win?</a>\n      <a class="eln-nav-item" href="http://www.nytimes.com/interactive/2016/upshot/senate-election-forecast.html">Senate Forecast</a>\n      <a class="eln-nav-item" href="http://www.nytimes.com/interactive/2016/us/elections/polls.html">Latest Polls</a>\n      <a class="eln-nav-item" href="http://www.nytimes.com/elections/results">Primary Results</a>\n    </div>\n\n</nav>\n\n<nav class="eln-navigation eln-mobile">\n\n    <div class="eln-nav-items clearfix">\n      <a class="eln-nav-item" href="http://www.nytimes.com/interactive/2016/upshot/presidential-polls-forecast.html">Who Will Win?</a>\n      <a class="eln-nav-item" href="http://www.nytimes.com/interactive/2016/upshot/senate-election-forecast.html">Senate Forecast</a>\n      <a class="eln-nav-item" href="http://www.nytimes.com/interactive/2016/us/elections/polls.html">Latest Polls</a>\n    </div>\n\n</nav>';return __p},templates["newsletter-signup"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="nythp-newsletter-buffet-email-promo notification-widget">\n         \n    <div id="newsletter-buffet-widget">\n        <h2 class="headline">Get The Times Delivered to Your Inbox for Free</h2>\n        <div class="left-side">\n            <form class="email">\n                <input class="email-input" required="" type="email" placeholder="Enter your email address" />\n                <button class="sign-up button">Sign Up</button>\n            </form>\n            <div class="registered hidden">\n                <button class="sign-up button">Sign Up</button>\n                <div class="registered-text">Select the newsletters you&rsquo;d like to receive at the right</div>\n            </div>\n            <div class="success hidden"><span class="strong">Thanks!</span> You&rsquo;ll start to receive emails shortly.</div>\n        </div>\n        <div class="right-side">\n            <div class="newsletters"></div>\n        </div>\n        <div class="form-errors">\n            <p class="error invalid-email-error hidden">Invalid email address. Please re-enter.</p>\n            <p class="error buffet-error hidden">You must select a newsletter to subscribe.</p>\n            <p class="error submit-error hidden">An error has occurred. Please try again later.</p>\n        </div>\n    </div>\n\n</div>';return __p},templates.newsletter=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="    ",_.each(productInfo,function(e){__p+='  \n            <input class="newsletter-checkbox" id="checkbox-'+((__t=e.productCode)==null?"":__t)+'" type="checkbox" name="'+((__t=e.title)==null?"":__t)+'" value="'+((__t=e.productCode)==null?"":__t)+'" ',e.checked&&(__p+=" checked=true "),__p+='>\n            <label for="checkbox-'+((__t=e.productCode)==null?"":__t)+'" class="label">\n                <div class="newsletter newsletter-'+((__t=e.productCode)==null?"":__t)+'">\n                    <svg class="custom-unchecked" version="1.2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                         x="0px" y="0px" viewBox="0 0 24 24" xml:space="preserve">\n                        <path d="M18,6v12H6V6H18 M19,4H5C4.4,4,4,4.4,4,5v14c0,0.5,0.4,1,1,1h14c0.5,0,1-0.5,1-1V5C20,4.4,19.5,4,19,4L19,4z"/>\n                    </svg>\n                    <svg class="custom-checked custom-checked-'+((__t=e.productCode)==null?"":__t)+'" version="1.2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                         x="0px" y="0px" viewBox="0 0 24 24" xml:space="preserve">\n                        <path d="M18,13.2V18H6V6h10.8l2-2H5C4.5,4,4,4.5,4,5v14c0,0.5,0.5,1,1,1h14c0.5,0,1-0.5,1-1v-7.8L18,13.2z"/>\n                        <polygon points="13,16.1 7.9,11.1 10.1,8.9 13,11.9 20.9,3.9 23.1,6.1    "/>\n                    </svg>\n                    <div class="newsletter-information">\n                        <div class="title title-'+((__t=e.productCode)==null?"":__t)+'">'+((__t=e.title)==null?"":__t)+'</div>\n                        <div class="description description-'+((__t=e.productCode)==null?"":__t)+'">'+((__t=e.description)==null?"":__t)+'</div>\n                        <div class="subscribed subscribed-'+((__t=e.productCode)==null?"":__t)+' hidden">Already subscribed</div>\n                    </div>\n                </div>\n            </label>\n    '}),__p+="";return __p},templates["nyc-maps-promo"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var abbrev=race.party_id=="democrat"?"dem":"rep";__p+='\n<p class="eln-race-sentence eln-nyc-map-promo">\n  <img class="eln-sentence-map" \n       src="https://static01.nyt.com/newsgraphics/2014/04/19/nyc-primary-map/5f45086c72f2cb563ecd68dc57a3d318a1afcc97/maps/tinyMap_all_'+((__t=abbrev)==null?"":__t)+'.png">  \n  <a href="http://www.nytimes.com/interactive/2016/04/19/us/elections/new-york-city-'+((__t=race.party_id=="democrat"?"democratic":race.party_id)==null?"":__t)+'-primary-results.html">\n    New York City '+((__t=Helpers.partyTitle(race.party_id))==null?"":__t)+" Maps »\n  </a>\n</p>"}return __p},templates["office-summary"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var control=office.control;__p+='\n<div class="eln-office-summary">\n  <div class="eln-groups '+((__t=office.winner?"eln-has-winner":"")==null?"":__t)+'">\n  ',_.each(control,function(e,t){__p+='\n    <div class="eln-group eln-'+((__t=t)==null?"":__t)+" "+((__t=e.count?"eln-has-count":"")==null?"":__t)+" "+((__t=e.winner?"eln-winner":"")==null?"":__t)+'">\n      <span class="eln-label eln-label-before">'+((__t=e.name_abbr)==null?"":__t)+'</span>\n      <span class="eln-count">'+((__t=e.count)==null?"":__t)+"</span><!-- \n   -->",e.winner&&(__p+='<!-- \n     --><span class="eln-winner-icon eln-swatch eln-'+((__t=t)==null?"":__t)+'">\n        <span class="eln-sprite eln-icon-checkmark-reverse"></span>\n        <span class="eln-sprite eln-icon-checkmark-small"></span>\n      </span>\n      '),__p+='\n      <span class="eln-label eln-label-after">'+((__t=e.name_abbr)==null?"":__t)+"</span>\n    </div>\n  "}),__p+='\n  </div>\n  <div class="eln-gain-summary">\n    ',office.gain?__p+='\n    <span class="eln-gain-label">Net change</span>\n    '+((__t=office.gain)==null?"":__t)+"\n    ":__p+="\n    No net change\n    ",__p+="\n  </div>\n</div>"}return __p},templates["poll-table"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var sorted=_.sortBy(_.filter(candidates,function(e){return e.polling>0}),function(e){return-+e.polling}),max_candidates=4;__p+='\n<table class="eln-table">\n  <thead>\n    <tr>\n      <th class="eln-header eln-candidates"><h3><a href="http://www.nytimes.com/interactive/2016/us/elections/presidential-candidates-dashboard.html">Who’s Ahead</a></h3></th>\n      <th class="eln-header" colspan="2">Polling Average</th>\n    </tr>\n  </thead>\n    ',_.each(sorted,function(e,t){__p+='\n    <tr class="eln-row \n      eln-party-'+((__t=e.party)==null?"":__t)+'">\n      <td class="eln-cell eln-name">\n        ',e.image&&(__p+='<img class="eln-image" src="'+((__t=e.image)==null?"":__t)+'">'),__p+='\n        <span class="eln-name-display">'+((__t=e.name)==null?"":__t)+'</span>\n      </td>\n      <td class="eln-cell eln-percent">'+((__t=e.polling||"—")==null?"":__t)+'</td>\n      <td class="eln-cell eln-percent-wrap">\n        ',e.polling&&(__p+='\n        <span class="eln-percent-bar" style="width: '+((__t=+e.polling/state_max_value*100)==null?"":__t)+'%"></span>\n        '),__p+="\n      </td>\n    </tr>\n    "}),__p+='\n  </tbody>\n</table>\n<p class="eln-note">Source: Polling data from HuffPost Pollster, based on the average of the five most recent polls by unique pollsters.</p>\n\n<table class="eln-table eln-poll-table eln-party-'+((__t=party)==null?"":__t)+'">\n  <thead>\n    <tr class="eln-row">\n      <th class="eln-header"><h3>Latest Polls</h3></th>\n      <th class="eln-header eln-date">Dates</th>\n      ',_.each(sorted.slice(0,max_candidates),function(e){__p+='\n      <th class="eln-header eln-poll-value">'+((__t=e.last_name)==null?"":__t)+"</th>\n      "}),__p+="\n    </tr>\n  </thead>\n  <tbody>\n    ",_.each(poll.recent,function(e){var t=_.pluck(sorted.slice(0,max_candidates),"last_name"),n=_.max(t,function(t){return+e[t]});__p+='\n    <tr class="eln-row eln">\n      <td class="eln-cell eln-poll-name">'+((__t=e.display_name)==null?"":__t)+'</td>\n      <td class="eln-cell eln-date">'+((__t=e.date)==null?"":__t)+"</td>\n      ",_.each(sorted.slice(0,max_candidates),function(t){__p+='\n      <td class="eln-cell eln-poll-value '+((__t=t.last_name==n?"eln-winner":"")==null?"":__t)+'">'+((__t=e[t.last_name]?e[t.last_name]+"%":"—")==null?"":__t)+"</td>\n      "}),__p+="\n    </tr>\n    "}),__p+="\n  </tbody>\n</table>"}return __p},templates.popup=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var electoral_votes=race&&race.electoral_votes?race.electoral_votes:"";__p+='\n<div class="eln-popup-content '+((__t=electoral_votes?"eln-has-electoral-votes":"")==null?"":__t)+'">\n  <div class="eln-close">\n    <div class="eln-sprite eln-icon-close-gray"></div>\n  </div>\n  <div class="eln-title">\n    '+((__t=title)==null?"":__t)+"\n    ",electoral_votes&&(__p+='<span class="eln-default-subtitle">'+((__t=subtitle)==null?"":__t)+"</span>"),__p+="\n  </div>\n  ",race.runoff&&(__p+='\n  <div class="eln-subtitle eln-overlay-subtitle">Runoff election</div>\n  '),__p+="\n  ",subtitle&&(__p+='\n  <div class="eln-subtitle">\n    ',electoral_votes?__p+="\n    "+((__t=race.electoral_votes)==null?"":__t)+" electoral votes\n    ":__p+='\n    <span class="eln-default-subtitle">'+((__t=subtitle)==null?"":__t)+"</span>\n    ",__p+=" \n  </div>\n  "),__p+="\n  ",options.special_election&&(__p+='\n  <!-- <div class="eln-election-link">\n    <a href="#" data-election="regular" data-state_id="'+((__t=state_id)==null?"":__t)+'">Regular<span class="eln-election-text"> Election</span></a>\n    <a href="#" data-election="special" data-state_id="'+((__t=state_id)==null?"":__t)+'">Special<span class="eln-election-text"> Election</span></a>\n  </div> -->\n  '),__p+="\n  ",race&&race.candidates&&race.candidates.length&&(__p+="\n  \n    "+((__t=partials["results-table"]({Helpers:Helpers,race:race,partials:partials,options:options}))==null?"":__t)+"\n  "),__p+="\n  ",note&&(__p+='\n  <div class="eln-note">'+((__t=note)==null?"":__t)+"</div>\n  "),__p+="\n</div>"}return __p},templates["primary-guide"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-promos">\n  \n  <h3 class="eln-title">Election Guide</h3>\n\n  <div class="eln-promo-list">\n    <div class="eln-promo clearfix">\n      <a href="http://www.nytimes.com/interactive/2016/upshot/presidential-polls-forecast.html">\n        <div class="eln-sprite eln-icon-candidates"></div>\n        <div class="eln-text">\n          <div class="eln-promo-kicker">Who’s Winning</div>\n          <h3 class="eln-promo-hed">The Upshot presidential forecast, updated daily.</h3>\n        </div>\n      </a>\n    </div>\n\n    <div class="eln-promo clearfix">\n      <a href="http://www.nytimes.com/interactive/2016/us/elections/polls.html">\n        <div class="eln-sprite eln-icon-winning"></div>\n        <div class="eln-text">\n          <div class="eln-promo-kicker">Latest Polling</div>\n          <h3 class="eln-promo-hed">Averages of the national and swing state polls.</h3>\n        </div>\n      </a>\n    </div>\n\n    <div class="eln-promo-list">\n    <div class="eln-promo clearfix">\n      <a href="http://www.nytimes.com/interactive/2015/us/elections/primary-calendar-and-results.html">\n        <div class="eln-sprite eln-icon-calendar"></div>\n        <div class="eln-text">\n          <div class="eln-promo-kicker">Delegates</div>\n          <h3 class="eln-promo-hed">The full delegate count.</h3>\n        </div>\n      </a>\n    </div>\n\n    <div class="eln-promo clearfix">\n      <a href="http://www.nytimes.com/interactive/2016/04/04/us/politics/how-election-results-work.html">\n        <div class="eln-sprite eln-icon-faq"></div>\n        <div class="eln-text">\n          <div class="eln-promo-kicker">Answering Your Questions</div>\n          <h3 class="eln-promo-hed">How election results really work.</h3>\n        </div>\n      </a>\n    </div>\n\n    <div class="eln-promo clearfix">\n      <a href="http://www.nytimes.com/interactive/2016/us/elections/candidates-on-the-issues.html">\n        <div class="eln-sprite eln-icon-issues"></div>\n        <div class="eln-text">\n          <div class="eln-promo-kicker">Candidates on the Issues</div>\n          <h3 class="eln-promo-hed">What they’re saying about 2016’s biggest issues.</h3>\n        </div>\n      </a>\n    </div>\n\n    <div class="eln-promo clearfix">\n      <a href="http://www.nytimes.com/interactive/2016/us/elections/fact-check.html">\n        <div class="eln-sprite eln-icon-factcheck"></div>\n        <div class="eln-text">\n          <div class="eln-promo-kicker">Fact Checking the Candidates</div>\n          <h3 class="eln-promo-hed">Who’s telling the truth?</h3>\n        </div>\n      </a>\n    </div>\n  </div>\n</div>';return __p},templates["primary-state-results-president"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";if(presidentialRaces.length>1){var multiple_dates=eln_race_dates.length>1,presidential_different_dates=_.uniq(_.pluck(presidentialRaces,"election_date")).length!=1;__p+='\n\n  <h2 class="eln-president-title">\n    President\n    ',multiple_dates&&!presidential_different_dates&&(__p+='\n    <span class="eln-race-date">\n      '+((__t=Helpers.formatElectionDate(presidentialRaces[0].election_date))==null?"":__t)+"\n    </span>\n    "),__p+="\n  </h2>\n\n  <!-- mobile results summary -->\n  ";var multipleStates=_.uniq(_.pluck(presidentialRaces,"state_slug")).length!=1;__p+='\n  <div class="eln-mobile-table eln-races-'+((__t=presidentialRaces.length)==null?"":__t)+" "+((__t=multipleStates?"eln-multiple-states":"")==null?"":__t)+'">\n  ',_.each(presidentialRaces,function(e){__p+='\n    <div class="eln-race">\n      <h2 class="eln-race-title">'+((__t=Helpers.partyDisplay(e.party_id))==null?"":__t)+'s</h2>\n      <div class="eln-race-results" data-race-id="'+((__t=e.race_id)==null?"":__t)+'" data-updated="'+((__t=e.load_id)==null?"":__t)+'">\n        '+((__t=partials["results-table"]({Helpers:Helpers,race:e,options:{max_candidates:3}}))==null?"":__t)+"\n      </div>\n    </div>\n  "}),__p+="\n  </div>\n  "}__p+='\n\n  <!-- full results -->\n  <div class="eln-races eln-presidential-races">\n  ',_.each(presidentialRaces,function(e,t){__p+='\n    <div id="'+((__t=e.race_id)==null?"":__t)+'" class="eln-race">\n      <h3 class="eln-race-title eln-mobile">\n        '+((__t=Helpers.partyTitle(e.party_id))==null?"":__t)+" Results\n        ",presidential_different_dates&&(__p+='\n        <span class="eln-race-date">\n          '+((__t=Helpers.formatElectionDate(e.election_date))==null?"":__t)+"\n        </span>\n        "),__p+='\n      </h3>\n      <h3 class="eln-race-title eln-desktop">\n        '+((__t=Helpers.simpleRaceTitle(e))==null?"":__t)+"\n        ",presidential_different_dates&&(__p+='<span class="eln-race-date">'+((__t=Helpers.formatElectionDate(e.election_date))==null?"":__t)+"</span>"),__p+="\n      </h3>\n      ",e.race_description&&(__p+='<p itemprop="articleBody" class="eln-race-description">'+((__t=e.race_description)==null?"":__t)+"</p>"),__p+='\n      \n      <div class="eln-race-best-sentence-container">\n      ',config.ic_config.on&&e.race_best_sentence&&(__p+="\n        "+((__t=partials["race-best-sentence"]({race:e}))==null?"":__t)+"\n      "),__p+='\n      </div>\n      \n      <div class="eln-race-content">\n        <div class="eln-race-results" data-race-id="'+((__t=e.race_id)==null?"":__t)+'" data-load-id="'+((__t=e.load_id)==null?"":__t)+'">\n          '+((__t=partials["results-table"]({Helpers:Helpers,race:e,options:{max_candidates:6,show_more:true,show_precinct_count:true}}))==null?"":__t)+"\n        </div>\n        ",admin["note_"+e.party_id]&&(__p+='<p class="eln-note eln-table-note">'+((__t=admin["note_"+e.party_id])==null?"":__t)+"</p>"),__p+='\n\n        <div class="eln-race-map eln-mobile">\n        \n          ',config.state.slug=="new-york"&&(__p+="\n          "+((__t=partials["nyc-maps-promo"]({Helpers:Helpers,race:e}))==null?"":__t)+"\n          "),__p+='\n\n          <div class="eln-results-map eln-map-'+((__t=e.state_slug)==null?"":__t)+'" data-race-id="'+((__t=e.race_id)==null?"":__t)+'"></div>\n          <div class="eln-map-keys">\n            <div class="eln-map-key-results">\n              '+((__t=partials["map-key-results"]({Helpers:Helpers,race:e}))==null?"":__t)+"\n            </div>\n          </div>\n          "+((__t=partials["votes-remaining-menu"]({race:e}))==null?"":__t)+'\n          <div class="eln-race-chat-container" data-state="'+((__t=e.state_id)==null?"":__t)+'" data-party="'+((__t=e.party_id)==null?"":__t)+'"></div>\n        </div>\n      </div>\n\n    </div>\n  '}),__p+='\n  </div>\n\n  <!-- desktop maps -->\n  <div class="eln-races eln-maps-desktop eln-presidential-races">\n  ',_.each(presidentialRaces,function(e){__p+="\n  ";var t=e.party_id=="republican"?e.candidates.slice(0,3):e.candidates.slice(0,2);__p+='\n    <div class="eln-race">\n      ',config.state.slug=="new-york"&&(__p+="\n      "+((__t=partials["nyc-maps-promo"]({Helpers:Helpers,race:e}))==null?"":__t)+"\n      "),__p+='\n      <div class="eln-race-content">\n        <div class="eln-race-map eln-map-'+((__t=e.state_slug)==null?"":__t)+'">\n          <div class="eln-results-map" data-race-id="'+((__t=e.race_id)==null?"":__t)+'"></div>\n          <div class="eln-map-keys">\n            <div class="eln-map-key-results">\n              '+((__t=partials["map-key-results"]({Helpers:Helpers,race:e}))==null?"":__t)+"\n            </div>\n          </div>\n          "+((__t=partials["votes-remaining-menu"]({race:e}))==null?"":__t)+'\n        </div>\n      </div>\n      <div class="eln-race-chat-container" data-state="'+((__t=e.state_id)==null?"":__t)+'" data-party="'+((__t=e.party_id)==null?"":__t)+'"></div>\n    </div>\n  '}),__p+='\n  </div>\n\n  <div class="eln-email-signup"></div>\n\n  <!-- upshot model -->\n  ';if(model_sentences&&presidentialRaces.length){__p+="\n  ";var meta=_.findWhere(model_sentences,{state:presidentialRaces[0].state_id});__p+='\n  <div class="eln-model-container">\n    <h2 class="eln-race-title">\n      <a href="'+((__t=meta.url)==null?"":__t)+'">\n        <span class="eln-sprite eln-icon-upshot-small"></span><span class="eln-sprite eln-icon-upshot"></span><span class="eln-hed">Live Results Model</span>\n      </a>\n    </h2>\n    <p class="eln-model-description" itemprop="articleBody">The Upshot’s estimates of election results include the parts of a state that have not yet reported their votes.</p>\n    <div class="eln-races">\n    ',_.each(presidentialRaces,function(e){var t=_.findWhere(model_sentences,{race_id:e.race_id});__p+='\n      <div class="eln-race eln-model-race" data-json="'+((__t=admin.model_json)==null?"":__t)+'">\n      '+((__t=partials["model-sentence"]({Helpers:Helpers,data:t}))==null?"":__t)+"\n      </div>\n    "}),__p+="\n    </div>\n  </div>\n  "}else __p+='\n  <hr class="eln-border eln-email-signup-border">\n  ';__p+="\n\n  <!-- demographic maps -->\n  ";var filter_table_options={max_candidates:3};__p+='\n  <div class="eln-races eln-filter-maps">\n    ',_.each(presidentialRaces,function(e){__p+='\n    <div class="eln-race">\n      <h2>How '+((__t=Helpers.partyDisplay(e.party_id))==null?"":__t)+"s Voted</h2>\n\n      <!-- leaders -->\n      ";var t=Helpers.getLeadersForMenu(e);__p+="\n      ",t&&(__p+='\n      <div class="eln-map-row eln-leaders eln-leaders-'+((__t=t.length)==null?"":__t)+'">\n        <div class="eln-race-view">\n          <h4 class="eln-view-title">Size of lead</h4>\n          <div class="eln-results-map eln-map-'+((__t=e.state_slug)==null?"":__t)+'" \n               data-key="eln-map-key-bubbles" \n               data-race-id="'+((__t=e.race_id)==null?"":__t)+'" \n               data-map-type="leader-bubbles">\n          </div>\n          <div class="eln-map-keys">\n            <div class="eln-map-key-bubbles">\n              '+((__t=partials["map-key-results"]({Helpers:Helpers,race:e}))==null?"":__t)+'\n            </div>\n            <p class="eln-circle-label">Circle size is proportional to the size of a candidate\'s lead.</p>\n          </div>\n        </div>\n\n      ',t.length==2&&(__p+="\n      ",__p+='\n        <div class="eln-race-view eln-placeholder"></div>\n      '),__p+="\n\n      ",_.each(t,function(t){if(!t.votes)return;__p+='\n        <div class="eln-race-view">\n          <h4 class="eln-view-title">'+((__t=t.last_name)==null?"":__t)+'</h4>\n          <div class="eln-results-map eln-map-'+((__t=e.state_slug)==null?"":__t)+'" \n               data-key="eln-map-key-'+((__t=t.candidate_id)==null?"":__t)+'" \n               data-race-id="'+((__t=e.race_id)==null?"":__t)+'" \n               data-map-type="votepct-'+((__t=t.candidate_id)==null?"":__t)+'">\n          </div>\n          <div class="eln-map-keys">\n            <div class="eln-map-key-candidate eln-map-key-'+((__t=t.candidate_id)==null?"":__t)+'" \n                 data-race-id="'+((__t=e.race_id)==null?"":__t)+'" \n                 data-candidate-id="'+((__t=t.candidate_id)==null?"":__t)+'">\n            </div>\n          </div>\n        </div>\n      '}),__p+="\n      </div>\n      "),__p+="\n\n      <!-- filters -->\n      ";var n=admin.filters[e.party_id];__p+="\n      ",n&&(__p+="\n      ",_.each(n,function(t,n){__p+='\n      <div class="eln-map-row">\n        ',_.each(t,function(t){var n=e.townships&&e.townships.length?t.label.replace("counties","towns"):t.label;__p+='\n        <div class="eln-race-view">\n          <h4 class="eln-view-title">'+((__t=n)==null?"":__t)+'</h4>\n          <div class="eln-results-map eln-map-'+((__t=e.state_slug)==null?"":__t)+'" \n                data-key="eln-map-key-bubbles" \n                data-race-id="'+((__t=e.race_id)==null?"":__t)+'" \n                data-map-type="leader-bubbles" \n                data-filter="'+((__t=t.slug)==null?"":__t)+'">\n          </div>\n        </div>\n        '}),__p+='\n        <div class="eln-map-keys">\n          <div class="eln-map-key-bubbles">\n            '+((__t=partials["map-key-results"]({Helpers:Helpers,race:e}))==null?"":__t)+"\n          </div>\n        </div>\n      </div>\n      "}),__p+="\n      "),__p+="\n\n    </div>\n    "}),__p+="\n  </div>\n\n  ",presidentialRaces.length&&(__p+='\n  <div class="eln-timeseries-container">\n    ',_.each(presidentialRaces,function(e){__p+='\n      <div class="eln-timeseries" data-race-id="'+((__t=e.race_id)==null?"":__t)+'"></div>\n    '}),__p+="\n  </div>\n  "),__p+='\n\n  <!-- delegate summary -->\n  <div class="eln-races eln-delegate-summary">\n    ';var summaries=presidentialRaces.slice(0);summaries.length==1&&summaries.push({election_type:summaries[0].election_type,party_id:summaries[0].party_id=="democrat"?"republican":"democrat"}),__p+="\n    ",_.each(summaries,function(e,t){var n=_.findWhere(races_info,{party_id:e.party_id});if(!n)return;__p+='\n    <div class="eln-race">\n      <h2 class="eln-race-title">'+((__t=Helpers.partyPlural(e.party_id))==null?"":__t)+"</h2>\n      ",admin.links[e.party_id]&&(__p+='\n      <p class="eln-race-links">\n        ',_.each(admin.links[e.party_id],function(e){__p+='\n        <a href="'+((__t=e.url)==null?"":__t)+'">'+((__t=e.text)==null?"":__t)+"</a>\n        "}),__p+="\n      </p>\n      "),__p+="\n\n      ",n.delegates&&(__p+="\n      <h4>\n        "+((__t=n.delegates)==null?"":__t)+" delegates\n        ",presidentialRaces.length==1&&t>0&&(__p+='<span class="eln-election-date">'+((__t=n.date)==null?"":__t)+"</span>"),__p+="\n      </h4>\n      "),__p+='\n      <p itemprop="articleBody">'+((__t=e.delegate_allocation)==null?"":__t)+"</p>\n      ",n.winners&&n.winners[0].candidate&&(__p+='\n      <div class="eln-past-winners">\n        <h4>Past Winners</h4>\n        <p>\n          ',_.each(n.winners,function(e){__p+="\n            ",e.candidate&&(__p+='\n            <a href="'+((__t=e.url)==null?"":__t)+'" class="eln-past-winner">\n            <span class="eln-name">'+((__t=e.candidate.name)==null?"":__t)+'</span>\n            <span class="eln-year">'+((__t=e.year)==null?"":__t)+"</span></a>\n            "),__p+="\n          "}),__p+="\n        </p>\n      </div>\n      "),__p+="\n    </div>\n    "}),__p+="\n  </div>"}return __p},templates["race-best-sentence"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<p class="eln-race-sentence '+((__t=race.race_best_sentence_is_fresh?"eln-race-sentence-fresh":"")==null?"":__t)+'" itemprop="articleBody">'+((__t=race.race_best_sentence)==null?"":__t)+". ",race.path&&race.race_type!="president"&&(__p+='<a class="eln-sentence-more-link" href="https://www.nytimes.com/elections/'+((__t=race.path)==null?"":__t)+'">More</a>'),__p+="</p>";return __p},templates["races-table"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var racesByState=Helpers.racesTable(races,{max_races:6,adminSort:!0});__p+="\n";var racesReporting=!!_.where(races,{report:!0}).length;__p+='\n<div class="eln-races-table '+((__t=racesReporting?"eln-races-reporting":"")==null?"":__t)+'" data-load-id="'+((__t=Helpers.getLoadId(races))==null?"":__t)+'">\n  <table class="eln-races-table-table">\n    <thead>\n      <tr>\n        <th class="eln-header eln-state">State</th>\n        <th class="eln-header eln-candidate eln-party-republican">Republicans</th>\n        <th class="eln-header eln-spacer"></th>\n        <th class="eln-header eln-candidate eln-party-democrat">Democrats</th>\n      </tr>\n    </thead>\n    <tbody>\n    ',_.each(racesByState,function(e){__p+='\n      <tr class="eln-row">\n        <td class="eln-cell eln-state">\n          <a class="eln-link" href="http://www.nytimes.com/elections/results/'+((__t=e[0].state_slug)==null?"":__t)+'" target="_top">\n            <span class="eln-state-name">'+((__t=Helpers.getStateFromPostal(e[0].state_id).name)==null?"":__t)+'</span>\n            <span class="eln-state-abbrev">'+((__t=Helpers.getStateFromPostal(e[0].state_id).nyt_abbrev)==null?"":__t)+"</span>\n          </a>\n        </td>\n        ",_.each(e,function(t,n){__p+="\n        ",!t.report&&n==0&&(__p+='\n        <td class="eln-cell eln-polls-closing" colspan="3">'+((__t=t.poll_display)==null?"":__t)+"</td>\n        "),__p+="\n        ";if(!t.report)return;__p+="\n        ";var r=Helpers.getLeader(t);!r&&t.votes&&(r={last_name:"Tied"}),r||(r={}),__p+="\n        ",e.length==1&&t.party_id!="republican"&&(__p+='\n        <td class="eln-cell eln-candidate eln-party-republican eln-no-election">—</td>\n        <td class="eln-cell eln-spacer"></td>\n        '),__p+='\n        <td class="eln-cell \n                  eln-candidate \n                  eln-party-'+((__t=t.party_id)==null?"":__t)+" \n                  eln-"+((__t=Helpers.slugifyName(r))==null?"":__t)+"\n                  "+((__t=t.votes===0?"eln-no-results-yet":"")==null?"":__t)+"\n                  "+((__t=r.winner?"eln-winner":"")==null?"":__t)+'\n                  clearfix">\n          <a class="eln-link" href="http://www.nytimes.com/elections/results/'+((__t=t.state_slug)==null?"":__t)+'" target="_top">\n            ',r.last_name?(__p+='\n            <span class="eln-sprite eln-icon-checkmark"></span>\n            <div class="eln-image eln-candidates-sprite '+((__t=Helpers.slugify(r.last_name))==null?"":__t)+'"></div>\n            <span class="eln-name">'+((__t=r.last_name)==null?"":__t)+"</span>\n            ",r.percent&&(__p+='\n            <span class="eln-percent">\n              '+((__t=Math.round(r.percent))==null?"":__t)+'<span class="eln-percent-sign">%</span>\n            </span>\n            '),__p+="\n            "):t.votes===0&&(__p+='\n               <span class="eln-no-results-yet-text">No results yet</span>\n            '),__p+="\n          </a>\n        </td>\n        ",n==0&&e.length==2&&(__p+='<td class="eln-cell eln-spacer"></td>'),__p+="\n        ",e.length==1&&t.party_id!="democrat"&&(__p+='\n        <td class="eln-cell eln-spacer"></td>\n        <td class="eln-cell eln-candidate eln-party-democrat eln-no-election">—</td>\n        '),__p+="\n        "}),__p+="\n      </tr>\n    "}),__p+="\n    </tbody>\n  </table>\n\n  ";var winnerCount=_.where(races,{result:"winner"}).length;__p+="\n  ";var apCount=_.where(races,{result:"winner",result_source:"AP"}).length;__p+="\n  ";if(winnerCount&&apCount){__p+="\n    ";var winnerLabel=winnerCount>1?"Winners":"Winner";__p+='\n    <div class="eln-note eln-race-calls eln-race-calls-custom">'+((__t=winnerLabel)==null?"":__t)+" called by A.P.</div>\n  "}__p+='\n\n  <div class="eln-key">\n    <!-- <div class="eln-item">\n      <span class="eln-swatch eln-leader"></span>\n      Lead\n    </div> -->\n    <div class="eln-item">\n      <span class="eln-swatch eln-winner">\n        <span class="eln-sprite eln-icon-checkmark"></span>\n      </span>\n      <span class="eln-label">Winner</span>\n    </div>\n  </div>\n</div>'}return __p},templates["reader-survey"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="'+((__t=url)==null?"":__t)+'" class="eln-reader-survey" target="_blank">\n    <p>We’re interested in your feedback on this page.</p>\n    <p><strong>Tell us what you think →</strong></p>\n</a>';return __p},templates["related-coverage"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<section class="eln-related-coverage">\n  <header>\n    <h2 class="eln-section-heading">Related Stories</h2>\n  </header>\n  <ul class="eln-related-coverage-menu">\n    <li>\n      <article class="eln-story clearfix">\n        <a href="http://www.nytimes.com/interactive/2016/us/elections/election-2016.html">\n          <div class="eln-thumb">\n            <img src="http://static01.nyt.com/images/2015/04/16/us/elections/election-2016-1429214083979/election-2016-1429214083979-mediumThreeByTwo225-v5.png" alt="Election 2016: What to Know About the Presidential Race Today">\n          </div>\n          <h2 class="eln-story-heading">Election 2016: What to Know About the Presidential Race Today</h2>\n        </a>\n      </article>\n    </li>\n\n    <li>\n      <article class="eln-story clearfix">\n        <a href="http://www.nytimes.com/interactive/2016/us/elections/2016-presidential-candidates.html">\n          <div class="eln-thumb">\n            <img src="http://static01.nyt.com/images/2015/01/30/us/politics/presidential-candidate-tracker-1422646394170/presidential-candidate-tracker-1422646394170-mediumThreeByTwo225-v7.png" alt="Who Is Running for President?">\n          </div>\n          <h2 class="eln-story-heading">Who Is Running for President?</h2>\n        </a>\n      </article>\n    </li>\n\n    <li>\n      <article class="eln-story clearfix">\n        <a href="http://www.nytimes.com/interactive/2016/us/elections/primary-calendar-and-results.html">\n          <div class="eln-thumb">\n            <img src="http://static01.nyt.com/images/2015/04/14/us/elections/primary-calendar-and-results-1429026715315/primary-calendar-and-results-1429026715315-mediumThreeByTwo225-v4.png" alt="2016 Primary Calendar and Results">\n          </div>\n          <h2 class="eln-story-heading">2016 Primary Calendar and Results</h2>\n        </a>\n      </article>\n    </li>\n\n    <li>\n      <article class="eln-story clearfix">\n        <a href="http://www.nytimes.com/interactive/2016/us/elections/presidential-candidates-dashboard.html">\n\n          <div class="eln-thumb">\n            <img src="http://static01.nyt.com/images/2015/09/16/us/elections/presidential-candidates-dashboard-1442376909418/presidential-candidates-dashboard-1442376909418-mediumThreeByTwo225-v7.png" alt="Who’s Winning the Presidential Campaign?">\n          </div>\n          <h2 class="eln-story-heading">Who’s Winning the Presidential Campaign?</h2>\n        </a>\n      </article>\n    </li>\n\n    <li>\n      <article class="eln-story clearfix">\n        <a href="http://www.nytimes.com/interactive/2016/us/elections/election-2016-campaign-money-race.html">\n\n          <div class="eln-thumb">\n            <img src="http://static01.nyt.com/images/2015/08/01/us/elections/election-2016-campaign-money-race-1438468879112/election-2016-campaign-money-race-1438468879112-mediumThreeByTwo225-v5.png" alt="Which Presidential Candidates Are Winning the Money Race">\n          </div>\n          <h2 class="eln-story-heading">Which Presidential Candidates Are Winning the Money Race</h2>\n\n        </a>\n      </article>\n    </li>\n  </ul><!-- end menu -->\n</section>';return __p},templates["results-banner"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var president=_.findWhere(key_races,{race_type:"president"}),senate=_.findWhere(key_races,{race_type:"senate"}),house=_.findWhere(key_races,{race_type:"house"}),presidentRaces=president.races,presidentialCandidates=["clinton","trump"];__p+='\n<div class="eln-results-banner">\n  <div class="eln-president">\n    <p class="eln-title"><a href="'+((__t=config.base_url)==null?"":__t)+'/results/president">President</a></p>\n    <a href="'+((__t=config.base_url)==null?"":__t)+'/results/president" class="eln-president-control">\n      '+((__t=partials["balance-of-power"]({office:president,Helpers:Helpers}))==null?"":__t)+'\n    </a>\n    <span class="eln-timestamp">'+((__t=Helpers.timeFormat(new Date))==null?"":__t)+'</span>\n    <a class="eln-full-results-link" href="'+((__t=config.base_url)==null?"":__t)+'/results/president">Full Results</a>\n  </div>\n  ',options.show_map&&(__p+='\n  <div class="eln-president-map">\n    <a href="'+((__t=config.base_url)==null?"":__t)+'/results/president">\n      <div class="eln-president-map-image">\n        <img src="'+((__t=config.screenshot_asset_path)==null?"":__t)+'screenshots/president-lead-win-600.png">\n      </div>\n      <span class="eln-button">View Full Results</span>\n      <div class="eln-mobile-map-key">\n        <div class="eln-key">\n          <div class="eln-swatch-light eln-democrat"></div>\n          <div class="eln-swatch-light eln-republican"></div>\n          Lead\n        </div>\n        <div class="eln-key">\n          <div class="eln-swatch eln-democrat"></div>\n          <div class="eln-swatch eln-republican"></div>\n          Win\n        </div>\n      </div>\n    </a>\n  </div>\n  '),__p+='\n  <div class="eln-key-presidential-races">\n    '+((__t=partials["general-results-dashboard-table"]({races:presidentRaces,Helpers:Helpers,options:{max_races:options.max_races||10,candidates:presidentialCandidates}}))==null?"":__t)+'\n  </div>\n  <div class="eln-congressional-control">\n    <div class="eln-branch">\n      <p class="eln-title"><a href="'+((__t=config.base_url)==null?"":__t)+'/results/senate">Senate</a></p>\n      <a class="eln-banner-summary eln-senate-control" href="'+((__t=config.base_url)==null?"":__t)+'/results/senate" data-race-type="senate">\n        '+((__t=partials["office-summary"]({office:senate,Helpers:Helpers}))==null?"":__t)+'\n      </a>\n    </div>\n    <div class="eln-branch">\n      <p class="eln-title"><a href="'+((__t=config.base_url)==null?"":__t)+'/results/house">House</a></p>\n      <a class="eln-banner-summary eln-house-control" href="'+((__t=config.base_url)==null?"":__t)+'/results/house" data-race-type="house">\n        '+((__t=partials["office-summary"]({office:house,Helpers:Helpers}))==null?"":__t)+'\n      </a>\n    </div>\n  </div>\n  <div class="eln-congress-bop">\n    <div class="eln-branch">\n      <p class="eln-title"><a href="'+((__t=config.base_url)==null?"":__t)+'/results/senate">Senate</a></p>\n      <a class="eln-senate-bop" href="'+((__t=config.base_url)==null?"":__t)+'/results/senate" data-race-type="senate">\n        '+((__t=partials["balance-of-power"]({office:senate,Helpers:Helpers}))==null?"":__t)+'\n      </a>\n    </div>\n    <div class="eln-branch">\n      <p class="eln-title"><a href="'+((__t=config.base_url)==null?"":__t)+'/results/house">House</a></p>\n      <a class="eln-house-bop" href="'+((__t=config.base_url)==null?"":__t)+'/results/house" data-race-type="house">\n        '+((__t=partials["balance-of-power"]({office:house,Helpers:Helpers}))==null?"":__t)+"\n      </a>\n    </div>\n  </div>\n</div>"}return __p},templates["results-dashboard-table"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<table class="eln-results-dashboard-table">\n  <thead>\n    <tr>\n      <th class="eln-header eln-party-title">\n        '+((__t=Helpers.partyPlural(group.party_id))==null?"":__t)+'\n        <span class="eln-subheader">Percent of vote</span>\n      </th>\n    ',_.each(group.races,function(e,t){__p+='\n      <th class="eln-header eln-state">\n        <a class="eln-state-name" href="http://www.nytimes.com/elections/results/'+((__t=e.state_slug)==null?"":__t)+'">\n          '+((__t=group.races.length==1?e.state_name:e.state_abbrev)==null?"":__t)+'\n        </a>\n        <span class="eln-subheader">\n          '+((__t=e.pledged_delegates||e.delegates)==null?"":__t)+" \n          "+((__t=group.races.length==1?"delegates":t==0?"del.":"")==null?"":__t)+"\n        </span>\n      </th>\n    "}),__p+='\n      <th class="eln-header eln-delegates">\n        <a href="http://www.nytimes.com/interactive/2016/us/elections/primary-calendar-and-results.html">Delegates</a>\n        <span class="eln-delegates-wrap">\n          <span class="eln-delegates-date">'+((__t=Helpers.formatElectionDate(group.races[0].election_date))==null?"":__t)+'</span>\n          <span class="eln-delegates-total">Total</span>\n        </span>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    ',_.each(group.candidates,function(e){var t=Helpers.candidateImage(e.last_name);__p+='\n    <tr class="eln-row eln-'+((__t=Helpers.slugifyName(e))==null?"":__t)+'">\n      <td class="eln-cell eln-name">\n        ',t&&(__p+='<div class="eln-image eln-candidates-sprite '+((__t=Helpers.slugify(e.last_name))==null?"":__t)+'"></div>'),__p+='\n        <span class="eln-last-name">'+((__t=e.last_name)==null?"":__t)+'</span>\n        <span class="eln-name-display">'+((__t=e.name_display)==null?"":__t)+"</span>\n      </td>\n      ",_.each(group.races,function(t){var n=Helpers.getLeader(t),r=_.findWhere(t.candidates,{candidate_id:e.candidate_id});__p+="\n      ",r?__p+='\n        <td class="eln-cell \n          eln-percent \n          '+((__t=r.winner?"eln-winner":"")==null?"":__t)+"\n          "+((__t=n&&n.candidate_id==r.candidate_id?"eln-leader":"")==null?"":__t)+'">\n          <span class="eln-swatch">\n            <span class="eln-sprite eln-icon-checkmark"></span>\n            <span class="eln-sprite eln-icon-checkmark-small"></span>\n            <span class="eln-value">\n              '+((__t=group.candidates.length>3?Math.round(r.percent_display):r.percent_display)==null?"":__t)+'</span><span class="eln-percent-sign"></span>\n          </span>\n        </td>\n      ':__p+='\n        <td class="eln-cell eln-percent">—</td>\n      ',__p+="\n      "}),__p+='\n      <td class="eln-cell eln-delegates">\n        <span class="eln-delegates-wrap">\n          <span class="eln-delegates-date">'+((__t=e.date_delegates?Helpers.votesFormat(e.date_delegates):"—")==null?"":__t)+'</span>\n          <span class="eln-delegates-total">'+((__t=Helpers.votesFormat(e.total_delegates))==null?"":__t)+"</span>\n        </span>\n      </td>\n    </tr>\n    "}),__p+='\n    <tr class="eln-row eln-reporting">\n      <td class="eln-cell eln-label">\n        <span class="eln-reporting-title">Reporting</span>\n        <span class="eln-reporting-title-small">% Rpt.</span>\n      </td>\n      ',_.each(group.races,function(e,t){__p+='\n        <td class="eln-cell eln-race">'+((__t=Helpers.getReportingForDashboard(e))==null?"":__t)+"</td>\n      "}),__p+='\n      <td class="eln-cell eln-delegates eln-total-delegates">'+((__t=Helpers.delegates_to_win(group.party_id))==null?"":__t)+" to win</td>\n    </tr>\n  </tbody>\n</table>";return __p},templates["results-dashboard"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="eln-results-dashboard-row" data-load-id="'+((__t=Helpers.getLoadId(_.values(racesByParty)))==null?"":__t)+'">\n',_.each(racesByParty,function(e){__p+='\n<div class="eln-results-dashboard eln-party-'+((__t=e.party_id)==null?"":__t)+'">\n  \n  <table class="eln-results-dashboard-table">\n    <thead>\n      <tr>\n        <th class="eln-header eln-party-title">\n          '+((__t=Helpers.partyPlural(e.party_id))==null?"":__t)+'\n          <span class="eln-subheader">Percent of vote</span>\n        </th>\n      ',_.each(e.races,function(t,n){__p+='\n        <th class="eln-header eln-state">\n          <a class="eln-state-name" href="http://www.nytimes.com/elections/results/'+((__t=t.state_slug)==null?"":__t)+'">\n            '+((__t=e.races.length==1?t.state_name:t.state_abbrev)==null?"":__t)+'\n          </a>\n          <span class="eln-subheader">\n            '+((__t=t.pledged_delegates||t.delegates)==null?"":__t)+" \n            "+((__t=e.races.length==1?"delegates":n==0?"del.":"")==null?"":__t)+"\n          </span>\n        </th>\n      "}),__p+='\n        <th class="eln-header eln-delegates">\n          <a href="http://www.nytimes.com/interactive/2016/us/elections/primary-calendar-and-results.html">Delegates</a>\n          <span class="eln-delegates-wrap">\n            <span class="eln-delegates-date">'+((__t=Helpers.formatElectionDate(e.races[0].election_date))==null?"":__t)+'</span>\n            <span class="eln-delegates-total">Total</span>\n          </span>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      ',_.each(e.candidates,function(t){var n=Helpers.candidateImage(t.last_name);__p+='\n      <tr class="eln-row eln-'+((__t=Helpers.slugifyName(t))==null?"":__t)+'">\n        <td class="eln-cell eln-name">\n          ',n&&(__p+='<div class="eln-image eln-candidates-sprite '+((__t=Helpers.slugify(t.last_name))==null?"":__t)+'"></div>'),__p+='\n          <span class="eln-last-name">'+((__t=t.last_name)==null?"":__t)+'</span>\n          <span class="eln-name-display">'+((__t=t.name_display)==null?"":__t)+"</span>\n        </td>\n        ",_.each(e.races,function(n){var r=Helpers.getLeader(n),i=_.findWhere(n.candidates,{candidate_id:t.candidate_id});__p+="\n        ",i?__p+='\n          <td class="eln-cell \n            eln-percent \n            '+((__t=i.winner?"eln-winner":"")==null?"":__t)+"\n            "+((__t=r&&r.candidate_id==i.candidate_id?"eln-leader":"")==null?"":__t)+'">\n            <span class="eln-swatch">\n              <span class="eln-sprite eln-icon-checkmark"></span>\n              <span class="eln-sprite eln-icon-checkmark-small"></span>\n              <span class="eln-value">\n                '+((__t=e.candidates.length>3?Math.round(i.percent_display):i.percent_display)==null?"":__t)+'</span><span class="eln-percent-sign"></span>\n            </span>\n          </td>\n        ':__p+='\n          <td class="eln-cell eln-percent">—</td>\n        ',__p+="\n        "}),__p+='\n        <td class="eln-cell eln-delegates">\n          <span class="eln-delegates-wrap">\n            <span class="eln-delegates-date">'+((__t=t.date_delegates?Helpers.votesFormat(t.date_delegates):"—")==null?"":__t)+'</span>\n            <span class="eln-delegates-total">'+((__t=Helpers.votesFormat(t.total_delegates))==null?"":__t)+"</span>\n          </span>\n        </td>\n      </tr>\n      "}),__p+='\n      <tr class="eln-row eln-reporting">\n        <td class="eln-cell eln-label">\n          <span class="eln-reporting-title">Reporting</span>\n          <span class="eln-reporting-title-small">% Rpt.</span>\n        </td>\n        ',_.each(e.races,function(e,t){__p+='\n          <td class="eln-cell eln-race">'+((__t=Helpers.getReportingForDashboard(e))==null?"":__t)+"</td>\n        "}),__p+='\n        <td class="eln-cell eln-delegates eln-total-delegates">'+((__t=Helpers.delegates_to_win(e.party_id))==null?"":__t)+' to win</td>\n      </tr>\n    </tbody>\n  </table>\n  \n  <p class="eln-note eln-total-delegates">'+((__t=Helpers.delegates_to_win(e.party_id))==null?"":__t)+' needed to win</p>\n  <p class="eln-note eln-link"><a href="http://www.nytimes.com/elections/results">Full Results »</a></p>\n  <p class="eln-note eln-timestamp">'+((__t=Helpers.timeFormat(new Date))==null?"":__t)+"</p>\n  ",e.party_id=="democrat"&&(__p+='<p class="eln-note eln-delegates-note">Democratic delegates only include <a href="http://www.nytimes.com/interactive/2016/us/elections/primary-calendar-and-results.html">pledged delegates</a>.</p>'),__p+='\n  <div class="eln-key">\n    <div class="eln-item">\n      <span class="eln-leader"></span>\n      Lead\n    </div>\n    <div class="eln-item">\n      <span class="eln-winner">\n        <span class="eln-sprite eln-icon-checkmark-small"></span>\n      </span>\n      Win\n    </div>\n  </div>\n</div>\n'}),__p+="\n</div>";return __p},templates["results-footer"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var total=Math.ceil(past_races.length/4)*4,raceGroups=_.groupBy(past_races,function(e,t){return Math.floor(t/total*4)});__p+='\n<div class="eln-results-footer">\n  <h3><a href="https://www.nytimes.com/elections/results">Full Results</h3>\n  <div class="eln-races eln-desktop">\n  ',_.each(raceGroups,function(e){__p+='\n    <ul class="eln-page-list">\n    ',_.each(e,function(e){__p+='\n      <li class="eln-page">\n        <a href="https://www.nytimes.com/elections/results/'+((__t=e.slug)==null?"":__t)+'">'+((__t=e.name)==null?"":__t)+"</a>\n      </li>\n    "}),__p+="\n    </ul>\n  "}),__p+='\n  </div>\n  <div class="eln-races eln-mobile">\n    <ul class="eln-page-list">\n    ',_.each(past_races,function(e){__p+='\n      <li class="eln-page">\n        <a href="https://www.nytimes.com/elections/results/'+((__t=e.slug)==null?"":__t)+'">'+((__t=e.name)==null?"":__t)+"</a>\n      </li>\n    "}),__p+="\n    </ul>\n  </div>\n</div>"}return __p},templates["results-table"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var candidates=race.candidates.slice(0),winners=_.where(candidates,{winner:!0}).length,max_candidates=winners>options.max_candidates?winners:options.max_candidates||null,show_more=options.show_more&&candidates.length-1>max_candidates,candidate_rollup=show_more?Helpers.getRollup(race,max_candidates):null,has_delegates=!!_.filter(candidates,function(e){return e.delegates>0}).length,show_precinct_count=options.show_precinct_count||!1,yes_no=Helpers.yesNoRace(race),candidate_label=yes_no?"Answer":"Candidate",candidates_have_parties=race.race_type!="ballot-measure"&&candidates[0].party_id!="yes"&&candidates[0].party_id!="no"&&candidates[0].party_id!="nonpartisan",general_election=race.election_type=="general"||race.election_type=="special-general"||race.election_type=="general-election-runoff"||race.election_type=="general-runoff",show_party=candidates_have_parties&&(general_election||race.election_type=="open-primary"),has_images=race.race_type=="president"||(race.race_type=="senate"||race.race_type=="governor")&&general_election,show_electoral_votes=race.race_type=="president"&&_.filter(race.candidates,function(e){return e.electoral_votes}).length,show_delegates=race.race_type=="president"&&race.election_type!="general";yes_no&&(candidates=[Helpers.getCandidate(race,"yes"),Helpers.getCandidate(race,"no")]),options.show_more&&max_candidates==candidates.length-1&&(max_candidates=candidates.length),show_more&&candidates.push(candidate_rollup),options.start_index&&(candidates=candidates.slice(options.start_index));var max_percent=_.max(candidates,function(e){return e.percent}).percent;__p+='\n<div class="eln-results-container eln-results-row-'+((__t=race.race_type)==null?"":__t)+"\n"+((__t=options&&options.show_pct_change?"eln-pct-change":"")==null?"":__t)+"\n"+((__t=has_delegates?"eln-has-delegates":"")==null?"":__t)+"\n"+((__t=has_images?"eln-has-images":"")==null?"":__t)+"\n"+((__t=race.report?"eln-race-report":"")==null?"":__t)+"\n"+((__t=race.result?"eln-result-"+race.result:"")==null?"":__t)+"\n"+((__t=Helpers.openElection(race)?"eln-race-open":"")==null?"":__t)+"\n"+((__t=race.uncontested?"eln-race-uncontested":"")==null?"":__t)+'"\n    data-race-id="'+((__t=race.race_id||race.race_type)==null?"":__t)+"\"\n    data-options='"+((__t=JSON.stringify(options))==null?"":__t)+'\'>\n  <table class="eln-table eln-results-table">\n    <thead>\n      <tr>\n        ',has_images?__p+='\n        <th class="eln-header eln-name" colspan="2">'+((__t=candidate_label)==null?"":__t)+"</th>\n        ":__p+='\n        <th class="eln-header eln-name">'+((__t=candidate_label)==null?"":__t)+"</th>\n        ",__p+="\n        ",show_party&&(__p+='<th class="eln-header eln-party">Party</th>'),__p+="\n      ",options&&options.show_pct_change?__p+='\n        <th class="eln-header eln-percent-change" colspan="2">Vote in 2016</th>\n        <th class="eln-header eln-percent-change" colspan="2">Vote in '+((__t=options.show_pct_change_year)==null?"":__t)+"</th>\n      ":(__p+='\n        <th class="eln-header eln-votes">Vote'+((__t=general_election?"s":"")==null?"":__t)+'</th>\n        <th class="eln-header eln-percent">Pct.</th>\n        ',race.votes&&(__p+='<th class="eln-header eln-percent-wrap"></th>'),__p+="\n        ",show_delegates?__p+='<th class="eln-header eln-delegates">Delegates</th>\n        ':show_electoral_votes&&(__p+='<th class="eln-header eln-electoral-votes">E.V.</th>'),__p+="\n      "),__p+="\n      </tr>\n    </thead>\n    <tbody>\n      ",_.each(candidates,function(e,t){if(max_candidates&&max_candidates<=t&&!show_more)return;var n=has_images&&(race.race_type=="president"||e.party_id=="democrat"||e.party_id=="republican");__p+='\n      <tr class="eln-row\n        eln-'+((__t=e.candidate_id)==null?"":__t)+"\n        eln-"+((__t=e.party_id)==null?"":__t)+"-"+((__t=e.order)==null?"":__t)+"\n        eln-"+((__t=Helpers.slugifyName(e))==null?"":__t)+"\n        eln-party-"+((__t=e.party_id)==null?"":__t)+"\n        "+((__t=n?"eln-has-image":"eln-no-image")==null?"":__t)+"\n        "+((__t=show_more&&max_candidates<=t?"eln-row-hidden":"")==null?"":__t)+"\n        "+((__t=!show_more&&t==candidates.length-1||show_more&&t==candidates.length-2?"eln-last-candidate":"")==null?"":__t)+"\n        "+((__t=e.runoff?"eln-runoff":"")==null?"":__t)+"\n        "+((__t=e.winner?"eln-winner":"")==null?"":__t)+'">\n        ',has_images&&(__p+='\n        <td class="eln-cell eln-image-cell">\n          ',n&&(__p+='<div class="eln-image eln-candidates-sprite '+((__t=Helpers.spriteName(e,race.race_type,general_election))==null?"":__t)+'"></div>'),__p+="\n        </td>\n        "),__p+='\n        <td class="eln-cell eln-name">\n          <span class="eln-name-wrap">\n            ',race.result&&(__p+='\n            <span class="eln-sprite eln-icon-checkmark"></span>\n            <span class="eln-sprite eln-icon-checkmark-small"></span>\n            '),__p+='\n            <span class="eln-last-name">\n              '+((__t=e.last_name)==null?"":__t)+"",e.incumbent&&(__p+='<span class="eln-incumbent-label">*</span>'),__p+='\n            </span>\n            <span class="eln-name-display">\n              '+((__t=e.name_display)==null?"":__t)+"",e.incumbent&&(__p+='<span class="eln-incumbent-label">*</span>'),__p+="\n            </span>\n            ",race.uncontested&&(__p+='<span class="eln-uncontested-label">Uncontested</span>'),__p+="\n          </span>\n        </td>\n        ",show_party&&(__p+='\n        <td class="eln-cell eln-party">\n          <span class="eln-party-display">'+((__t=Helpers.partyDisplay(e.party_id))==null?"":__t)+'</span>\n          <span class="eln-party-abbr">'+((__t=Helpers.partyAbbreviation(e.party_id))==null?"":__t)+"</span>\n        </td>\n        "),__p+="\n      ",options.show_pct_change?(__p+='\n        <td class="eln-cell eln-votes">'+((__t=Helpers.votesFormat(e.votes))==null?"":__t)+'</td>\n        <td class="eln-cell eln-percent">\n          ',race.report||e.percent_display?__p+="\n          "+((__t=e.percent_display)==null?"":__t)+'<span class="eln-percent-sign">%</span>\n          ':__p+='\n          <span class="eln-no-votes">—</span>\n          ',__p+='\n        </td><td class="eln-cell eln-votes">'+((__t=Helpers.votesFormat(e.votes_past))==null?"":__t)+'</td>\n        <td class="eln-cell eln-percent">\n          ',race.report||e.percent_display_past?__p+="\n          "+((__t=e.percent_display_past)==null?"":__t)+'<span class="eln-percent-sign">%</span>\n          ':__p+='\n          <span class="eln-no-votes">—</span>\n          ',__p+="\n        </td>\n      "):(__p+='\n        <td class="eln-cell eln-votes">'+((__t=Helpers.votesFormat(e.votes))==null?"":__t)+'</td>\n        <td class="eln-cell eln-percent">\n          ',race.report||e.percent_display?__p+="\n          "+((__t=e.percent_display)==null?"":__t)+'<span class="eln-percent-sign">%</span>\n          ':__p+='\n          <span class="eln-no-votes">—</span>\n          ',__p+="\n        </td>\n        ",race.votes&&(__p+='\n        <td class="eln-cell eln-percent-wrap">\n          <span class="eln-percent-bar" style="width: '+((__t=e.percent/max_percent*100)==null?"":__t)+'%"></span>\n        </td>\n        '),__p+="\n        ",show_delegates?__p+='\n        <td class="eln-cell eln-delegates '+((__t=e.delegates?"eln-has-delegates":"")==null?"":__t)+'">'+((__t=e.delegates||"—")==null?"":__t)+"</td>\n        ":show_electoral_votes&&(__p+='\n        <td class="eln-cell eln-electoral-votes">\n          '+((__t=e.electoral_votes||'<span class="eln-no-votes">—</span>')==null?"":__t)+"\n        </td>\n        "),__p+="\n      "),__p+="\n      </tr>\n      "}),__p+="\n    </tbody>\n  </table>\n  ";var state=Helpers.getStateFromPostal(race.state_id);__p+="\n  ",state&&(__p+='\n  <div class="eln-popup-link">\n    <a href="https://www.nytimes.com/elections/results/'+((__t=race.state_slug)==null?"":__t)+'">Full '+((__t=state.nyt_abbrev)==null?"":__t)+" Results &raquo;</a>\n  </div>\n  "),__p+='\n  <p class="eln-note eln-precincts-reporting">\n    ',race.votes&&race.report&&(__p+='<span class="eln-total-votes">'+((__t=Helpers.votesFormat(race.votes))==null?"":__t)+" votes, </span>"),__p+="\n    ",!race.report&&options.time_only_polls_display?__p+="\n    "+((__t=Helpers.getPollTime(race.poll_display))==null?"":__t)+"\n    ":__p+="\n    "+((__t=race.reporting_display)==null?"":__t)+"\n    ",__p+="\n    ",show_precinct_count&&race.report&&(__p+='\n      <span class="g-precinct-count"> ('+((__t=Helpers.getPrecinctCountDisplay(race))==null?"":__t)+")</span>\n    "),__p+="\n  </p>\n  ",show_more&&(__p+='\n  <p class="eln-note eln-collapse-candidates"><a class="eln-collapse" href="#">– Show fewer candidates</a></p>\n  '),__p+="\n  ",race.result=="runoff"&&(__p+='\n  <p class="eln-runoff-key eln-note eln-note-inline">\n    <span class="eln-sprite eln-icon-checkmark-small"></span>\n    Runoff\n  </p>\n  '),__p+="\n  ",race.has_incumbent&&(__p+='\n  <p class="eln-note eln-incumbent-note eln-note-inline">*&thinsp;Incumbent</p>\n  '),__p+="\n  ",race.updated_at&&(__p+='\n  <div class="eln-note eln-updated">\n    <span class="eln-updated-label">Last updated </span>\n    <span class="eln-updated-time">'+((__t=Helpers.timeFormat(race.updated_at*1e3))==null?"":__t)+"</span>\n  </div>\n  "),__p+="\n  ",race.race_call_note&&(__p+='\n  <p class="eln-note eln-race-calls">'+((__t=race.race_call_note)==null?"":__t)+"</p>\n  "),__p+="\n  ",options.link_to_race?__p+='\n    <p class="eln-note eln-map-link"><a href="http://www.nytimes.com/elections/'+((__t=race.path)==null?"":__t)+'">'+((__t=Helpers.simpleResultsTitle(race))==null?"":__t)+" »</a></p>\n  ":general_election&&(race.race_type=="president"||race.race_type=="senate"||race.race_type=="house")&&(__p+='\n    <p class="eln-note eln-map-link"><a href="http://www.nytimes.com/elections/results/'+((__t=race.race_type)==null?"":__t)+'">'+((__t=race.office)==null?"":__t)+" Map »</a></p>\n  "),__p+="\n</div>\n"}return __p},templates["state-navigation"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var show_results_for_type=["president","senate","governor"],races=_.sortBy(races,function(e){return _.indexOf(show_results_for_type,e.race_type)}),races_show_results=_.filter(races,function(e){return _.indexOf(show_results_for_type,e.race_type)>-1}),house_races=_.where(races,{race_type:"house"});house_races&&races[0].state_id=="LA"&&(house_races=_.filter(house_races,function(e){return e.runoff&&(e.seat==3||e.seat==4)||e.seat!=3&&e.seat!=4}));var house_groups=Helpers.getPartyTotals(house_races),house_has_calls=_.filter(house_groups,function(e){return e.count}).length,has_ballot_measures=_.filter(races,function(e){return e.race_type=="ballot-measure"}).length;__p+='\n<div class="eln-state-navigation">\n  ',_.each(races_show_results,function(e){if(e.state_id=="LA"&&e.race_type=="senate"&&!e.runoff)return;__p+='\n  <a href="#'+((__t=e.race_type)==null?"":__t)+'" class="eln-item">\n    <span class="eln-race-name">\n      <span class="eln-name-full">'+((__t=e.race_name.replace("U.S.",""))==null?"":__t)+'</span>\n      <span class="eln-name-abbr">'+((__t=Helpers.officeAbbrev(e))==null?"":__t)+"</span>\n    </span>\n    ";var t=Helpers.getLeader(e);__p+="\n    ",t&&(__p+='\n    <span class="eln-leader eln-'+((__t=t.party_id)==null?"":__t)+'">\n      ',t.winner&&(__p+='\n      <span class="eln-sprite eln-icon-checkmark-reverse eln-swatch eln-'+((__t=t.party_id)==null?"":__t)+'"></span>\n      '),__p+='\n      <span class="eln-name">'+((__t=t.last_name)==null?"":__t)+"</span>\n      ",t.winner||(__p+='\n      <span class="eln-margin">'+((__t=Helpers.getLeaderMargin(e))==null?"":__t)+"</span>\n      "),__p+="\n    </span>\n    "),__p+="\n  </a>\n  "}),__p+='\n  <a href="#house" class="eln-item">\n    <span class="eln-race-name">House</span>\n    ';var total_remaining=house_races.length;__p+="\n    ",house_has_calls&&(__p+="\n    ",_.each(house_groups,function(e){if(e.party_id=="other"&&!e.count)return;__p+="\n    ",total_remaining-=e.count,__p+='\n    <span class="eln-leader eln-'+((__t=e.party_id)==null?"":__t)+'">\n      <span class="eln-count">'+((__t=e.count)==null?"":__t)+'</span>\n      <span class="eln-name">'+((__t=e.name_display.substr(0,1))==null?"":__t)+"</span>\n    </span>\n    "}),__p+="\n    "),__p+="\n    <!-- ",total_remaining&&(__p+='\n    <span class="eln-leader">'+((__t=total_remaining)==null?"":__t)+" remain"+((__t=total_remaining==1?"s":"")==null?"":__t)+"</span>\n    "),__p+=' -->\n  </a>\n  <a href="#state-legislature" class="eln-item"><span class="eln-race-name">State Legislature</span></a>\n  ',has_ballot_measures&&(__p+='\n  <a href="#ballot-measure" class="eln-item"><span class="eln-race-name">Ballot Measures</span></a>\n  '),__p+="\n  ",races.length&&(__p+='\n  <a href="http://www.nytimes.com/elections/2016/results/primaries/'+((__t=races[0].state_slug)==null?"":__t)+'" class="eln-item eln-external-link"><span class="eln-race-name">Primary Results</span></a>\n  '),__p+="\n</div>"}return __p},templates["state-race-results"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var state=config.state;__p+="\n",_.each(races,function(e){__p+='\n<div id="'+((__t=e.race_id)==null?"":__t)+'" class="eln-race">\n  ',e.race_type=="ballot-measure"&&races.length>1&&(__p+='\n  <h3 class="eln-race-title"><a href="'+((__t=config.base_url)==null?"":__t)+"/"+((__t=e.path)==null?"":__t)+'">'+((__t=Helpers.ballotMeasureTitle(e.race_name))==null?"":__t)+"</a></h3>\n  "),__p+='\n  <div class="eln-race-content">\n    <div class="eln-race-results" data-race-id="'+((__t=e.race_id)==null?"":__t)+'">\n    \n      <div class="eln-race-best-sentence-container">\n      ',config.ic_config.on&&e.race_best_sentence&&(__p+="\n        "+((__t=partials["race-best-sentence"]({race:e}))==null?"":__t)+"\n      "),__p+="\n      </div>\n\n      "+((__t=partials["results-table"]({Helpers:Helpers,race:e,options:{max_candidates:3,show_more:true,show_precinct_count:true}}))==null?"":__t)+"\n\n      ",e.preview_text&&(__p+='\n      <div class="eln-race-text">\n        ',_.each(e.preview_text,function(e){__p+='\n        <p itemprop="articleBody">'+((__t=e)==null?"":__t)+"</p>\n        "}),__p+="\n      </div>\n      "),__p+="\n      \n    </div>\n\n    ",has_map&&state.postal!="AK"&&state.postal!="DC"&&(__p+='\n    <div class="eln-race-map">\n      <div class="eln-results-map eln-map-'+((__t=e.state_slug)==null?"":__t)+'" data-race-id="'+((__t=e.race_id)==null?"":__t)+'" data-map-type="leader-pct"></div>\n      <div class="eln-map-keys">\n        <div class="eln-map-key-results">'+((__t=partials["map-key-vote-share"]({Helpers:Helpers}))==null?"":__t)+"</div>\n      </div>\n\n      ",e.race_type=="senate"&&e.votes&&((e.counties&&e.counties.length)>1||e.townships&&e.townships.length>1)&&(__p+='\n      <div class="eln-table-container">\n        '+((__t=partials["county-table"]({Helpers:Helpers,race:e,options:{rows_to_display:10}}))==null?"":__t)+"\n      </div>\n      "),__p+="\n    </div>\n    "),__p+="\n  </div>\n</div>\n"}),__p+=""}return __p},templates["votes-remaining-menu"]=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var hasEstimates=_.filter(race.counties,function(e){return e.est_votes_remaining}).length;__p+="\n",hasEstimates&&race.precincts_reporting!=race.precincts_total&&(__p+='\n<div class="eln-map-menu eln-map-menu-remaining-votes">\n  <span class="eln-item eln-button eln-toggle-item" data-show_remaining_votes="true">\n    <svg class="eln-circle"><circle r="5" cx="7" cy="7"></circle></svg><!-- \n     --><span class="eln-hidden-label">Show approximate votes left</span><!-- \n     --><span class="eln-visible-label">Hide approximate votes left</span>\n  </span>\n</div>\n'),__p+=""}return __p},templates});var raceExternal,raceData;if(typeof define=="function"&&define.amd)require(["underscore/nyt","d3/3","moment/elections","moment-timezone/elections"],function(e,t,n,r){define("lib/helpers",[],function(){return initializeHelpers(e,t,r)})});else if(typeof module=="object"&&module.exports){var _=require("underscore"),d3=require("d3"),moment=require("moment-timezone"),fs=require("fs"),raceExternal=JSON.parse(fs.readFileSync("data/race-name-text.json")),raceData=JSON.parse(fs.readFileSync("data/race-articles.json"));module.exports=initializeHelpers(_,d3,moment)}define("etagx",[],function(){function t(t,n,r,i){if(!t||!n||!r)return;if(!("TAGX"in window))return;if(n==="Hover | Tooltip"){if(e)return;e=!0;try{document.documentElement.className.indexOf("app-homepage")>-1&&(t=t.replace("Interactive","Homepage"))}catch(s){}}var o="",u="",a="";try{var f=n.split("|");o=f[1].trim(),a=f[0].toLowerCase().trim(),u=o.toLowerCase().replace(/\s+/g,"-")+"-"+a}catch(s){}TAGX.Utils.sendGA({hit:{hitType:"event",eventCategory:t,eventAction:n,eventLabel:r},nonInteraction:i}),o&&a&&u&&TAGX.EventProxy.trigger("interactive-maps",{module:t,region:o,pgtype:"interactive-map",action:a,version:"origin",eventName:u},["interaction","interactive-maps"])}var e=!1;return{track:t}}),define("results",["jquery/nyt","underscore/nyt","d3/3","templates","lib/helpers","etagx"],function(e,t,n,r,i,s){function a(){var t=e("meta[name='hdl']").attr("content");if(!t||u)return;var n="🔔"+t;e("title").text(n),setTimeout(function(){e("title").text(t)},1e4)}var o={},u=e("html").hasClass("app-homepage");return e(".eln-race-results").on("click",".eln-candidate-rollup .eln-name-display",function(){s.track("Navigation | Interactive","Click | Expand Results",e(this).text(),!1),e(this).closest(".eln-race-results").addClass("eln-show-hidden")}),e(".eln-race-results").on("click",".eln-collapse",function(t){t.preventDefault(),e(this).closest(".eln-race-results").removeClass("eln-show-hidden")}),e(".eln-content").on("click",".eln-show-all-group-races",function(t){t.preventDefault(),e(this).parent().parent(".eln-group-results").toggleClass("eln-show-all-rows")}),o.render=function(n,s){n&&console.log(n);var o=s.races,u=s.all_races,a=(new Date).getTime();e(".eln-race-results").each(function(){var n=e(this).data("race-id"),s=t.findWhere(o,{race_id:n}),u=e(this).find(".eln-results-container").data("options");if(!s)return;e(this).data("updated-at",a).children(".eln-results-container").replaceWith(r["results-table"]({Helpers:i,race:s,options:u}))}),e(".eln-group-row").each(function(){var n=e(this).data("race-id"),s=t.findWhere(o,{race_id:n});if(!s)return;var u=eln_config.base_url+"/"+s.path,a=e(this).data("options");e(this).siblings(".eln-group-child-"+n).remove(),e(this).replaceWith(r["group-table-row"]({race:s,Helpers:i,partials:r,url:u,options:a}))});if(!u)return;e(".eln-big-board").each(function(){e(this).replaceWith(r["big-board"]({races:u,Helpers:i,partials:r}))}),e(".eln-office-summary-container").each(function(){var n=e(this).data("race-type"),s=t.where(u,{race_type:n}),o={control:i.getPartyTotals(s)};e(this).html(r["office-summary"]({office:o,Helpers:i}))}),e(".eln-results-dashboard-row").each(function(){var t=e(this).parent(),n=eln_dashboard_options||{},s=i.dashboardRaces(u,n),o=e(this).data("template")||"results-dashboard";if(!s)return;t.html(r[o]({Helpers:i,racesByParty:s}))}),e(".eln-races-table").each(function(){var t=e(this).parent();t.html(r["races-table"]({Helpers:i,races:u}))}),e(".eln-state-navigation").each(function(){if(!o)return;e(this).replaceWith(r["state-navigation"]({Helpers:i,races:u}))})},o}),define("results-banner",["jquery/nyt","underscore/nyt","templates","lib/helpers","ic"],function(e,t,n,r,i){function f(i){if(!i||!i.length||!u)return;a=e(".eln-results-banner"),a.find(".eln-timestamp").html(r.timeFormat(new Date));var s=t.findWhere(i,{race_type:"president"});a.find(".eln-general-results-dashboard-table").each(function(){if(!s)return;var t=e(this).data("options"),i=s.races;if(!i)return;e(this).replaceWith(n["general-results-dashboard-table"]({Helpers:r,races:i,options:t}))}),a.find(".eln-bop").each(function(){var s=e(this).data("race-type"),o=t.findWhere(i,{race_type:s});e(this).replaceWith(n["balance-of-power"]({Helpers:r,office:o}))}),a.find(".eln-banner-summary").each(function(){var s=e(this).data("race-type"),o=t.findWhere(i,{race_type:s});e(this).html(n["office-summary"]({office:o,Helpers:r}))}),a.find(".eln-president-map-image").each(function(){var t=e(this).find("img").attr("src");t=t+"#"+(new Date).getTime();var n=e(this);setTimeout(function(){var r=e("<img />").attr("src",t).on("load",function(){!!this.complete&&typeof this.naturalWidth!="undefined"&&this.naturalWidth!=0&&(console.info("Update map thumb",new Date),n.find("img").remove(),n.html(r))})},Math.random()*1e4)})}var s={},o=eln_config.ic_config.stream_name+":"+eln_election_date+":key-races",u=!1,a;return s.getStreamName=function(){return o},window.eln_banner_url?e.get(window.eln_banner_url,function(t){t&&e("#eln-general-banner").html(t),a=e(".eln-results-banner"),u=!0}):u=!0,s.init=function(e){var t=e.callback||f;if(!e.broker)return console.info("No broker defined for banner");var n=new i.Consumer(o);n.on("update",function(t,n){e.callback&&e.callback(n),f(n)}),e.broker.register(n)},s}),function(){function i(e,n){var r=n[1],i=n[2],s=n[3]?parseInt(n[3].substr(1)):void 0,o=n[4],u=o=="s",a=o=="x"||o=="X",f=o=="d"||o=="i",l=o=="f",c=!u,h="",p=0,d=!1,v=!1,m;if(u)m=String(e);else if(a)m=e.toString(16),o=="X"&&(m=m.toUpperCase());else if(c){m=t.numToStr(e,f?0:s),m[0]=="-"&&(v=!0,m=m.substr(1)),d=parseFloat(m)==0;if(r.indexOf("'")!=-1||r.indexOf(",")!=-1)m=t.addThousandsSep(m);d||(v?h="−":r.indexOf("+")!=-1&&(h="+"))}if(i){var g=m.length+h.length,y=parseInt(i,10);if(g<y){p=y-g;var b=r.indexOf("0")==-1?" ":"0",w=t.repeatString(b,p)}}return p==0?m=h+m:b=="0"?m=h+w+m:m=w+h+m,m}function s(e,t,n,r,i){this.type=e,this.callback=n,this.listener=r||null,this.priority=i||0,this.target=t}function o(e,n,r){this.type=e,this.target=n,r&&(t.defaults(this,r),this.data=r)}function u(){}function a(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(e){setTimeout(e,25)}}function f(){function o(e){n=!0,r=e,a()(u)}function u(){var u=+(new Date),a=u-i,f=Math.min((a+10)/s,1),l=f>=1;if(!t){n=!1;return}l&&(t=!1),e.dispatchEvent("tick",{elapsed:a,pct:f,done:l,time:u,tickTime:u-r}),n=!1,t&&o(u)}var e=this,t=!1,n=!1,r,i,s;this.start=function(e){var r=+(new Date);s=e,i=r,t=!0,n||o(r)},this.stop=function(){t=!1}}function l(e){function s(n){var s=e?e(n.pct):n.pct,o=i*s+r*(1-s);t.dispatchEvent("change",{value:o})}var t=this,n=new f,r,i;n.on("tick",s),this.start=function(e,t,s){r=e,i=t,n.start(s||500)}}var e=function(){var e=t.toArray(arguments).join(" ");throw new Error(e)},t={getUniqueName:function(e){var n=t.__uniqcount||0;return t.__uniqcount=n+1,(e||"__id_")+n},isFunction:function(e){return typeof e=="function"},isObject:function(e){return e===Object(e)},clamp:function(e,t,n){return e<t?t:e>n?n:e},interpolate:function(e,t,n){return e*(1-n)+t*n},isArray:function(e){return Array.isArray(e)},isNumber:function(e){return e!=null&&e.constructor==Number},isInteger:function(e){return t.isNumber(e)&&(e|0)===e},isString:function(e){return e!=null&&e.toString===String.prototype.toString},isBoolean:function(e){return e===!0||e===!1},toArray:function(n){var r;t.isArrayLike(n)||e("Utils.toArray() requires an array-like object");try{r=Array.prototype.slice.call(n,0)}catch(i){r=[];for(var s=0,o=n.length;s<o;s++)r[s]=n[s]}return r},isArrayLike:function(e){return e?t.isArray(e)?!0:t.isString(e)?!1:e.length===0?!0:e.length>0?!0:!1:!1},addslashes:function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},regexEscape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},defaults:function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t]||{};for(var i in r)i in e==0&&r.hasOwnProperty(i)&&(e[i]=r[i])}return e},extend:function(e){var t=e||{},n=arguments.length,r,i,s;for(i=1;i<n;i++){s=arguments[i]||{};for(r in s)s.hasOwnProperty(r)&&(t[r]=s[r])}return t},inherit:function(e,n){var r=function(){this.__super__==r&&(this.__super__=n.prototype.__super__,n.apply(this,arguments),delete this.__super__)};r.prototype=n.prototype||n,e.prototype=t.extend(new r,e.prototype),e.prototype.constructor=e,e.prototype.__super__=r},subclass:function(e){var n=function(){this.__super__.apply(this,t.toArray(arguments))};t.inherit(n,e);for(var r=1;r<arguments.length;r++)t.extend(n.prototype,arguments[r]);return n}};t.repeatString=function(e,t){var n="";for(var r=0;r<t;r++)n+=e;return n},t.pluralSuffix=function(e){return e!=1?"s":""},t.endsWith=function(e,t){return e.indexOf(t,e.length-t.length)!==-1},t.lpad=function(e,n,r){return r=r||" ",e=String(e),t.repeatString(r,n-e.length)+e},t.rpad=function(e,n,r){return r=r||" ",e=String(e),e+t.repeatString(r,n-e.length)},t.trim=function(e){return t.ltrim(t.rtrim(e))};var n=/^\s+/;t.ltrim=function(e){return e.replace(n,"")};var r=/\s+$/;t.rtrim=function(e){return e.replace(r,"")},t.addThousandsSep=function(e){var t="",n=e[0]=="-"?1:0,r=e.indexOf("."),i=e.length,s=(r==-1?i:r)-3;while(s>n)t=","+e.substring(s,i)+t,i=s,s-=3;return e.substring(0,i)+t},t.numToStr=function(e,t){return t>=0?e.toFixed(t):String(e)},t.formatNumber=function(e,n,r,i){var s;return isNaN(e)?s=r||"-":(s=t.numToStr(e,n),s=t.addThousandsSep(s),i&&parseFloat(s)>0&&(s="+"+s)),s},t.format=function(e){var n=t.formatter(e),r=n.apply(null,Array.prototype.slice.call(arguments,1));return r},t.formatter=function(t){var n=/%([\',+0]*)([1-9]?)((?:\.[1-9])?)([sdifxX%])/g,r=[],s=[],o=0,u="",a,f;while(f=n.exec(t))a=t.substring(o,n.lastIndex-f[0].length),f[0]=="%%"?u+=a+"%":(r.push(u+a),u="",s.push(f)),o=n.lastIndex;return r.push(u+t.substr(o)),function(){var n=r[0],o=arguments.length;o!=s.length&&e("[format()] Data does not match format string; format:",t,"data:",arguments);for(var u=0;u<o;u++)n+=i(arguments[u],s[u])+r[u+1];return n}},s.prototype.trigger=function(t){t?(t.target!=this.target||t.type!=this.type)&&e("[Handler] event target/type have changed."):(t=new o(this.type),t.target=this.target),this.callback.call(this.listener,t)},o.prototype.stopPropagation=function(){this.__stop__=!0},u.prototype.dispatchEvent=function(e,t,n){var r,i=this._handlers;if(i)for(var s=0,u=i.length;s<u;s++){var a=i[s];if(a.type==e&&(!n||n==a.listener)){if(!r)r=new o(e,this,t);else if(r.__stop__)break;a.trigger(r)}}},u.prototype.addEventListener=u.prototype.on=function(e,t,n,r){n=n||this,r=r||0;var i=new s(e,this,t,n,r),o=this._handlers||(this._handlers=[]),u=o.length;while(--u>=0&&o[u].priority<i.priority);return o.splice(u+1,0,i),this},u.prototype.removeEventListener=function(e,t,n){n=n||this;var r=this.removeEventListeners(e,t,n);return r},u.prototype.removeEventListeners=function(e,t,n){var r=this._handlers,i=[],s=0;for(var o=0;r&&o<r.length;o++){var u=r[o];!!e&&e!=u.type||!!t&&t!=u.callback||!!n&&n!=u.listener?i.push(u):s+=1}return this._handlers=i,s},u.prototype.countEventListeners=function(e){var t=this._handlers,n=t&&t.length||0,r=0;if(!e)return n;for(var i=0;i<n;i++)t[i].type===e&&r++;return r},t.getClassId=function(e,t){var n=-1;if(!isNaN(e)){n=0;for(var r=0,i=t.length;r<i;r++){var s=t[r];if(e<s)break;n=r+1}}return n},t.getInnerBreaks=function(e,n,r){var i=t.getClassId(e,r),s=t.getClassId(n,r),o=[];if(i==s)return o;if(i<s)var u=i,a=s,f=!1;else u=s,a=i,f=!0;for(var l=u;l<a;l++)o.push(r[l]);return f&&o.reverse(),o},t.inherit(f,u),t.inherit(l,u),l.sineInOut=function(e){return.5-Math.cos(e*Math.PI)/2},l.quadraticOut=function(e){return 1-Math.pow(1-e,2)};var c={utils:t,error:e,EventDispatcher:u,Timer:f,Tween:l};typeof define=="function"&&define.amd?define("nytg-vote-map/lib/mbloch-utils",[],function(){return c}):window.mbloch=c}(),define("nytg-vote-map/lib/vmap-utils",["underscore/nyt","./mbloch-utils","d3/3"],function(e,t,n){function u(e,t){var n=t;if(e<t||isNaN(t))n=e;return n}function a(e,t){var n=t;if(e>t||isNaN(t))n=e;return n}var r={},i=n.format(".1f"),s=n.format(",d"),o=n.geo.path().projection(null);e.extend(r,t),e.extend(r,t.utils),r.limitScaleDomain=function(e,t){var n=[e(t[0]),e(t[1])];return e.copy().domain(t).range(n)},r.formatVoteCount=function(e){throw"TODO: Implement formatVoteCount()"},r.formatVotePercent=function(e){return i(e||0)+"%"},r.calcVoteMargin=function(t,n,i){var s=e.without(i,n),o=r.indexOfLeader(t,s),u=t[n],a;return o==-1?a=u:a=(u||0)-t[s[o]],a},r.findLeader=function(e,t){var n=r.indexOfLeader(e,t);return n==-1?"":t[n]},r.indexOfLeader=function(e,t){var n=-1,r=-Infinity,i;for(var s=0;s<t.length;s++)i=e[t[s]],i>r?(r=i,n=s):i===r&&(n=-1);return n},r.pointInBBox=function(e,t,n,r){return r=r||0,e>=n[0]-r&&e<=n[2]+r&&t>=n[1]-r&&t<=n[3]+r},r.getHatchWidths=function(e){return e.widths||(e.width?[e.width,e.width]:[2,2])},r.getHatchId=function(e){if(e.colors.length!=2)throw new Error("Invalid hash style; need two colors");var t=e.colors.join("_").replace(/#/g,""),n="_h_"+t+"_"+r.getHatchWidths(e).join(",");return n},r.getFeatures=function(t){var n=null;return e.isArray(t)?n=t:t.type=="FeatureCollection"?n=t.features:t.type=="GeometryCollection"?n=t.geometries:t.type&&(n=[t]),n||[]},r.convertBounds=function(e){if(e.length!=4){if(e.length!=2)throw"Illegal bounds: "+JSON.stringify(e);e=[e[0][0],e[0][1],e[1][0],e[1][1]]}return e},r.mergePoint=function(e,t){var n=t[0],i=t[1],s=[n,i,n,i];return e?r.mergeBounds(e,s):s},r.mergeBounds=function(e,t){var n;return t?n=[u(e[0],t[0]),u(e[1],t[1]),a(e[2],t[2]),a(e[3],t[3])]:n=e,n},r.fadeIn=function(e,t,n){return 1-r.fadeOut(e,t,n)},r.fadeOut=function(e,t,n){var r=1;return e>t&&e<=n?r=(n-e)/(n-t):e>n&&(r=0),r},r.boundsWidth=function(e){return e[2]-e[0]},r.aspectRatio=function(e){return r.boundsWidth(e)/r.boundsHeight(e)},r.boundsHeight=function(e){return e[3]-e[1]},r.boundsCenter=function(e){return[(e[0]+e[2])/2,(e[3]+e[1])/2]},r.isValidBounds=function(e){return e&&e.length==4&&r.boundsWidth(e)>0&&r.boundsHeight(e)>0},r.shiftBounds=function(e,t,n){return[e[0]+t,e[1]+n,e[2]+t,e[3]+n]},r.scaleBounds=function(e,t){var n=r.boundsWidth(e),i=r.boundsHeight(e),s=(n*t-n)/2,o=(i*t-i)/2;return[e[0]-s,e[1]-o,e[2]+s,e[3]+o]},r.boundsAreEqual=function(e,t){return JSON.stringify(e||null)==JSON.stringify(t||null)},r.expandBoundsByPct=function(e,t){var n=r.boundsWidth(e),i=r.boundsHeight(e);return[e[0]-t[0]*n,e[1]-t[1]*i,e[2]+t[2]*n,e[3]+t[3]*i]},r.cloneBounds=function(e){return[e[0],e[1],e[2],e[3]]},r.interpolateBounds=function(e,t,n){return[r.interpolate(t[0],n[0],e),r.interpolate(t[1],n[1],e),r.interpolate(t[2],n[2],e),r.interpolate(t[3],n[3],e)]},r.easeOutQuadratic=function(e){return 1-Math.pow(1-e,2)},r.easeInOutSine=function(e){return.5-Math.cos(e*Math.PI)/2},r.ease=function(e){return r.easeOutQuadratic(r.easeInOutSine(e))},r.viewportWidth=function(){return document.documentElement.clientWidth||0},r.viewportHeight=function(){return document.documentElement.clientHeight||0},r.distance2D=function(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},r.midpoint2D=function(e,t){var n=(e[0]+t[0])/2,r=(e[1]+t[1])/2;return{x:n,y:r}},r.testBoundsIntersection=function(e,t){var n=r.getFeatureBounds(t);return n[0]<=e[2]&&n[2]>=e[0]&&n[3]>=e[1]&&n[1]<=e[3]},r.getFeatureBounds=function(e){return e.bbox||(e.bbox=r.convertBounds(o.bounds(e))),e.bbox},r.getFeatureCollectionBounds=function(e){var t=r.getFeatures(e),n=t.reduce(function(e,t){var n=r.getFeatureBounds(t);return r.mergeBounds(n,e)},null);return n},r.debounce=function(e,t){function r(){n=setTimeout(i,5)}function i(){n=null,e()}var n;return function(){n&&clearTimeout(n),n=setTimeout(r,t)}};var f=0;return r.startTimer=function(e,t,r,i){var s=++f;return t=t>=0==0?750:t,r=r>0?r:0,n.timer(function(n){if(s!=f)return!0;var r=t>0?n/t:1;i&&(r=i(r));if(r>=.999||n>t)f+=5,r=1;e({pct:r})},r),{}},r}),define("nytg-vote-map/lib/vmap-pointer",["d3/3","./vmap-utils"],function(e,t){var n={},r=!1,i=new t.EventDispatcher;return e.select(window.document.documentElement).on("touchstart.vmap",function(){r=!0,i.dispatchEvent("touchstart",{touches:e.event.touches})}).on("mouseup.vmap",function(){i.dispatchEvent("mouseup")}).on("mousemove.vmap",function(){i.dispatchEvent("mousemove")}),n.isTouchEnabled=function(){return!!r},n.create=function(s){function v(){var r,i,s;return n.isTouchEnabled()?(r=f,i=m(e.event.changedTouches[0])):(r=a,i=o),!r||!i?(console.error("Missing pointer position",r,i),!1):(s=t.distance2D([r.x,r.y],[i.x,i.y]),s<8&&i.time-r.time<500)}function m(e){return{time:+(new Date),x:e.screenX,y:e.screenY}}function g(){var e;p&&(v()&&l.dispatchEvent("click",o),p=!1,l.dispatchEvent("up",o))}function y(){p=!0,a=o,l.dispatchEvent("down",o)}function b(){d||(d=!0,l.dispatchEvent("enter"))}function w(){d&&(d=!1,l.dispatchEvent("leave"))}function E(){d&&l.dispatchEvent("move",o)}function S(){var t=e.mouse(s.node()),n=e.mouse(document.documentElement||document.body);u=o,o={time:+(new Date),x:t[0],y:t[1],pageX:n[0],pageY:n[1]}}function x(){var e,t;p&&u&&o&&(e=o.x-u.x,t=o.y-u.y,l.dispatchEvent("drag",{dx:e,dy:t}))}var o,u,a,f,l=new t.EventDispatcher,c=[],h=s.node().parentNode,p=!1,d=!1;return l.isOver=function(){return d},l.position=function(){return o},i.on("touchstart",function(e){var t=e.touches[0].target;t&&t!=s.node()&&e.pointer!=l&&(p=!1,w())}),s.on("touchstart",function(){var t=e.event.touches;r=!0,e.event.stopPropagation(),b(),S(),t.length==1&&c.length===0?(y(),f=m(t[0])):p=!1,i.dispatchEvent("touchstart",{touches:t,pointer:l})}),s.on("touchend",function(){var t=e.event.touches;c=[],t.length===0&&g(),p=!1}),s.on("touchmove",function(){var n=e.touches(s.node());if(c.length==2&&n.length==2){var r=t.distance2D(c[0],c[1]),i=t.distance2D(n[0],n[1]),o=t.midpoint2D(n[0],n[1]);o.dz=i/r||1,l.dispatchEvent("pinch",o)}n.length==1&&(S(),x()),c=n}),i.on("mousemove",function(){if(n.isTouchEnabled())return;S(),x(),E()}),i.addEventListener("mouseup",function(){n.isTouchEnabled()||g()}),s.on("mousedown",function(){n.isTouchEnabled()||y()}),s.on("mousemove",function(){b()}),s.on("mouseleave",w),s.on("dblclick",function(){S(),l.dispatchEvent("dblclick",o)}),l},n}),define("nytg-vote-map/lib/vmap-transform",["d3/3","underscore/nyt","./vmap-utils","./vmap-pointer"],function(e,t,n,r){function s(s){function N(){return!!(p&&v&&l)}function C(){return!!y&&!!b}function L(e,t){y=O(e,t)}function A(e,t){b=O(e,t)}function O(t,n){return e.scale.linear().range(n).domain(t)}function M(t){var n=e.scale.linear().range([5e3,1e4]).domain([500,1e3]).clamp(!0);i=Math.round(n(p))/(p*t)}function D(e){if(!n.isValidBounds(e))throw new Error("[initContentBounds()] Content bounds are invalid: "+e);if(l)throw new Error("[initContentBounds()] TODO: support setting more than once");l=e,p&&T.updateDisplaySize(p,v)}function P(){if(!l)throw new Error("[getContentBounds()] Content bounds are undefined");return l}function H(e,t){return d(e,t,P(),s)}function B(e,t,r){return Math.max(n.boundsWidth(e)/t,n.boundsHeight(e)/r)}function j(e){var t=H(p,v),n=B(t,p,v),r=B(e,p,v);return n/r}function F(e,t){var r=j(e);return r>t&&(e=n.scaleBounds(e,r/t)),e}function I(e){e=F(e,s.maxZoom||Infinity);var t=H(p,v),n=e[0],r=e[1],i=e[2],o=e[3],u=i-n,a=o-r;return!t||!w?e:(n<t[0]&&(n=t[0],i=n+u),i>t[2]&&(i=t[2],n=i-u),o>t[3]&&(o=t[3],r=o-a),r<t[1]&&(r=t[1],o=r+a),[n,r,i,o])}function q(e,t,n){z({center:t,zoom:e,duration:n>=0?n:600})}function R(){var e=V()/f,t=T.getMinZoom();return e/t<1.5&&(e=t),e}function U(){var e=V()*f;return e>s.maxZoom&&(e=s.maxZoom),e}function z(e){var t=T.getMinZoom(),r,i,f,c;if(!N()){x=e;return}if(e.bounds)r=d(p,v,e.bounds,e);else{if(!e.zoom)throw new Error("Invalid zoom params: "+JSON.stringify(e));e.zoom<=t&&w?r=d(p,v,l,s):(i=d(p,v,l,s),r=n.scaleBounds(i,1/e.zoom),h?(f=o(p,v,e.center||null),c=u(h,f),r=a(r,c,f)):e.zoom>1&&e.center&&console.error("Warning: unable to calculate center for zoom; opts:",e))}W(r,e)}function W(e,t){var i=I(e),s=g,o=j(i),u=t.duration,a=C()&&u>0&&!r.isTouchEnabled()?u:0;if(!S&&!t.size_update)return;if(a>0)var f=n.cloneBounds(h),l=n.startTimer(function(e){var t=n.interpolateBounds(e.pct,f,i),r=2.5,u=s<o?Math.pow(e.pct,r):Math.pow(e.pct,1/r);M(u*o+(1-u)*s),$(t)},a,0,n.ease);else M(o),$(i)}function X(){if(!h)throw new Error("[getCurrentBounds()] Display needs to be inialized using updateDisplaySize()");return h}function V(){return h?j(h):1}function $(e){var t=s.maxZoom||Infinity,r=I(e),i=h,o=j(r),u=g,a=n.boundsCenter(r),f=i?n.boundsCenter(i):[],l=T.getMinZoom()*1.01,c=u<=l&&o>l,d=u>=l&&o<l,m=u<t&&o>=t,y=u>=t&&o<t,b=f[0]!=a[0]||f[1]!=a[1],w=u!=o,S=!n.boundsAreEqual(r,h)||E;if(!(p>0&&v>0))throw new Error("[updateBounds()] invalid width or height:",p,v);L([r[0],r[2]],[0,p]),A([r[1],r[3]],[v,0]),g=o,h=r,(c||y)&&T.dispatchEvent("zoom-in"),d&&T.dispatchEvent("zoom-out"),m&&T.dispatchEvent("zoom-max"),!!i&&(b||w)&&T.dispatchEvent("navigate"),E&&(E=!1,T.dispatchEvent("resize")),S&&T.dispatchEvent("change")}s=s||{};var f=s.zoomFactor||2.7,l,h,p=0,v=0,g=1,y,b,w=!s.infinitePan,E=!1,S=!0,x,T=e.geo.transform({point:function(e,t,n){e=y(e),t=b(t),(!n||n>=i)&&this.stream.point(e,t)}});return t.extend(T,n.EventDispatcher.prototype),T.allowNavigation=function(e){if(!(arguments.length>0))return S;S=!!e},T.xscale=function(){return y},T.yscale=function(){return b},T.initContentBounds=D,T.updateDisplaySize=function(e,t,n){var r;e=Math.floor(e),E=E||e!=p||n,p=e,v=t;if(e>0==0)return;if(!l)return;v=m(p,v,l,s),C()?r={zoom:V()}:(r=x||{zoom:1},x=null),r.size_update=!0,z(r)},T.getDisplayWidth=function(){return p||0},T.getDisplayHeight=function(){return v||0},T.project=function(e){return[y(e[0]),b(e[1])]},T.projectX=function(e){return y(e)},T.projectY=function(e){return b(e)},T.invertX=function(e){return y.invert(e)},T.invertY=function(e){return b.invert(e)},T.projectInterval=function(e){var t=Math.abs(T.projectX(0)-T.projectX(1))*e;return t},T.invertInterval=function(e){return Math.abs(T.invertX(0)-T.invertX(1))*e},T.zoomToFeature=function(e,t){var r=n.getFeatureCollectionBounds(e),i={bounds:r,duration:600},s=n.extend(i,t);c(s)||(s.spacing="5%"),z(s)},T.panBy=function(e,t){var r=y.invert(0)-y.invert(e),i=b.invert(0)-b.invert(t);(!w||!T.isFullExtent())&&W(n.shiftBounds(X(),r,i),{})},T.zoomToFullExtent=function(e){z({zoom:1,duration:e})},T.zoomIn=function(){q(U())},T.zoomOut=function(){q(R())},T.zoomInTo=function(e){q(U(),e)},T.zoomOutTo=function(e){q(R(),e)},T.zoom=z,T.zoomTo=q,T.getCurrentBounds=X,T.isFullExtent=function(){return V()<=T.getMinZoom()*1.0001},T.getZoom=function(){return V()},T.getMinZoom=function(){return s.minZoom<1?s.minZoom:1},T}function o(e,t,n){var r=n?n.x/e:.5,i=n?1-n.y/t:.5;return[r,i]}function u(e,t){return[e[0]+n.boundsWidth(e)*t[0],e[1]+n.boundsHeight(e)*t[1]]}function a(e,t,r){var i=t[0],s=t[1],o=r[0],u=r[1],a=e[0]+n.boundsWidth(e)*o,f=e[1]+n.boundsHeight(e)*u,l=i-a;return dy=s-f,n.shiftBounds(e,l,dy)}function f(e){return e.type=="chart"}function l(e,t,n){e.forEach(function(e,r){e>=1?n[r]+=e:e>0&&(t[r]+=e)})}function c(e){return e.spacing||e.padding||e.margin}function h(e){var t=[0,0,0,0],n=[0,0,0,0];return e.spacing&&l(g(e.spacing),t,n),e.padding&&l(y(e.padding),t,n),e.margin&&l(y(e.margin),t,n),{pct:t,px:n}}function p(e,t,r){var i=n.boundsWidth(e),s=n.boundsHeight(e),o=i/s,u=0,a=0,f=e[0],l=e[1],c=r.alignment||"";return t>o?(u=s*t-i,c.indexOf("right")>-1?f-=u:c.indexOf("left")==-1&&(f-=u/2)):(a=i/t-s,c.indexOf("top")>-1?l-=a:c.indexOf("bottom")==-1&&(l-=a/2)),[f,l,f+i+u,l+s+a]}function d(e,t,r,i){var s=h(i),o=s.px,u=s.pct,a=e*u[0]+o[0],l=t*u[1]+o[1],c=e*u[2]+o[2],d=t*u[3]+o[3],v=e-a-c,m=t-d-l,g=f(i)?r:p(r,v/m,i),y=n.boundsWidth(g)/v,b=n.boundsHeight(g)/m;return[g[0]-a*y,g[1]-l*b,g[2]+c*y,g[3]+d*b]}function v(e,t,r){var i=h(r),s=i.px,o=i.pct,u=e-s[0]-s[2]-(o[0]+o[2])*e,a=u*n.boundsHeight(t)/n.boundsWidth(t),f=(a+s[1]+s[3])/(1-o[1]-o[3]);return Math.round(f)}function m(e,t,n,r){var i;return r.height=="auto"?i=t:r.aspectRatio?i=e/r.aspectRatio:f(r)?i=e/1.6:i=v(e,n,r),r.minAspectRatio&&e/i<r.minAspectRatio&&(i=e/r.minAspectRatio),r.maxAspectRatio&&e/i>r.maxAspectRatio&&(i=e/r.maxAspectRatio),i}function g(e){return b(e)}function y(e){var t=g(e);return t.reverse()}function b(e){var n;t.isString(e)?n=e.split(/,? +/):t.isNumber(e)?n=[e]:t.isArray(e)&&(n=e),n&&(n=n.reduce(function(e,t){var n=w(t);return e&&!isNaN(n)?e.push(n):e=null,e},[]));if(!n)throw new Error("Invalid spacing parameters: "+e);return n.length==1?n=[n[0],n[0],n[0],n[0]]:n.length==2?n=[n[0],n[1],n[0],n[1]]:n.length==3&&n.push(n[2]),n}function w(e){var n=e;if(t.isString(e)){n=parseFloat(e);if(/%/.test(e)){if(n>=100)throw new Error("Invalid percentage value: "+e);n/=100}}return isNaN(n)&&(n=NaN),n}var i=1e4;return{internal:{parseSpacing:g,parsePadding:y,getSpacing:h,calcDisplayHeight:v,getDisplayHeight:m,getPaddedBounds:p},create:s}}),define("nytg-vote-map/lib/vmap-canvas",["underscore/nyt","d3/3","./vmap-utils"],function(e,t,n){function i(e,r,i,o){function a(e){var i=document.createElement("canvas"),o=t.select(i);o.style({position:"absolute","z-index":1,top:0,left:0});var u=new s(i,r);return n.extend(e,u),i}var u=a(this);i>0&&o>0&&this.setSize(i,o),e.node().appendChild(u),this.reset=function(){var e=u;u=a(this),e.parentNode.replaceChild(u,e)}}function s(r,i){function a(e,t){var n=window.devicePixelRatio||window.webkitDevicePixelRatio||1,r=screen.width<1100&&e*t>2e5,i=n>1&&!r?2:1;return i}function f(){var e=i.getCurrentBounds();return function(t){var r=n.testBoundsIntersection(e,t);return r}}function l(e,n){if(n>1==0)return e;var r=e.stream(),i=0,s=0,o={stream:{point:function(e,t){i=e,s=t}}},u=t.geo.transform({point:function(e,t,u){r.point.call(o,e,t,u),this.stream.point(i*n,s*n)}});return u.projectX=function(t){return e.projectX(t)*n},u.projectY=function(t){return e.projectY(t)*n},u}function c(e,t,n,r){var i=e&&e.__id||e;return i+"~"+t+"~"+n+"~"+r}function h(e,t,n){var r;s.beginPath(),n.strokeWidth>0&&(s.lineWidth=n.strokeWidth,s.strokeStyle=n.stroke,s.lineCap="round",s.lineJoin="round"),n.alpha<1&&(s.globalAlpha=n.alpha),n.fill&&(s.fillStyle=n.fill);for(var i=0;i<e.length;i++)r=e[i],t(r);n.fill&&s.fill(),n.strokeWidth>0&&s.stroke(),s.closePath(),n.alpha<1&&(s.globalAlpha=1)}function p(t){var n,r;return e.isFunction(t)?n=function(e){return d(t(e))}:(r=d(t),n=function(){return r}),n}function v(e){var t=n.getHatchWidths(e),r=t[0]+t[1],i=t[1]/r,s=Math.round(r*Math.sqrt(2)*u),o=i*s*Math.sqrt(2)/2,a=document.createElement("canvas"),f=a.getContext("2d");return a.setAttribute("width",s),a.setAttribute("height",s),f.lineWidth=o,f.fillStyle=e.colors[0],f.fillRect(0,0,s,s),f.strokeStyle=e.colors[1],f.moveTo(-s*.5,s),f.lineTo(s,-s*.5),f.moveTo(0,s*1.5),f.lineTo(s*1.5,0),f.stroke(),f.createPattern(a,"repeat")}var s=r.getContext("2d"),u=1;this.height=function(e){return+r.getAttribute("height")},this.width=function(e){return+r.getAttribute("width")},this.clear=function(){s.clearRect(0,0,this.width(),this.height())},this.setSize=function(e,n){var i=a(e,n),s=e*i,o=n*i;return e>0&&n>0&&(u=i,t.select(r).attr("width",s).attr("height",o).style({width:e+"px",height:n+"px"})),this},this.getContext=function(){return s},this.getPixelRatio=function(){return u},this.getProjection=function(){return l(i,u)},this.drawCircles=function(e,t,n,i){var o=r.width,a=r.height,f=this.getProjection(),l=function(e){var t=n(e),r=f.projectX(t[0]),l=f.projectY(t[1]),c=i(e)*u;r+c<0||r-c>o||l+c<0||l-c>a||s.arc(r,l,c,0,Math.PI*2,!0)};this.drawFeatures(e,t,l,null,!1)},this.drawPaths=function(e,n){var r=this.getProjection(),i=t.geo.path().projection(r).context(s),o=!0;this.drawFeatures(e,n,i,f(),o)},this.drawImage=function(e,t,n){var r=this.getProjection(),i=r.projectX(t[0]),o=r.projectY(t[3]),u=r.projectX(t[2])-i,a=r.projectY(t[1])-o,f;n<1&&(f=s.globalAlpha,s.globalAlpha=n),s.drawImage(e,i,o,u,a),f&&(s.globalAlpha=f)},this.drawFeatures=function(t,n,r,i,s){var a=n.stroke?p(n.stroke):null,f=n.fill?p(n.fill):null,l=null,d=o(n.strokeWidth),v={},m=1,g=0,y="",b="";d||(a=null),e.isFunction(n.opacity)?l=n.opacity:n.opacity&&(m=n.opacity),t.forEach(function(e,t){var n;if(i&&!i(e))return;if(l){m=l(e);if(!m)return}f&&(b=f(e)),a&&(y=a(e),g=d(e)*u),n=c(b,y,g,m),n in v==0&&(v[n]={style:{fill:b,stroke:y,strokeWidth:g,alpha:m},features:[]}),s?v[n].features.push(e):h([e],r,v[n].style)}),s&&Object.keys(v).forEach(function(e){var t=v[e];h(t.features,r,t.style)})};var d=function(){var t={};return function(r){var i,s;return e.isString(r)?i=r:r&&r.colors?(s=n.getHatchId(r)+"_"+u,s in t==0&&(t[s]=v(r),t[s].__id=s),i=t[s]):i="#ffcccc",i}}()}function o(t){var n=1,r=null;return e.isFunction(t)?r=t:t>0?r=function(){return t}:t===undefined&&(r=function(){return n}),r}var r={};return r.MapCanvas=s,r.create=function(e,t,n,r){return new i(e,t,n,r)},r}),define("nytg-vote-map/lib/vmap-svg",["./vmap-utils"],function(e){function i(e,t,n){e[n]=t[n]}function s(e,t){var n;return _.isFunction(e)?n=function(n){return s(e(n),t)}:_.isString(e)?n=e:_.isObject(e)&&(n=o(e,t)),n}function o(n,r){var i=e.getHatchId(n);return i+="_svg"+u(r),i in t==0&&(t[i]=f(n,i,r)),t[i]}function u(e){var t=e.node(),r=n.indexOf(t);return r==-1&&(r=n.length,n.push(t)),r}function a(e){var t=e.select("defs");return t.size()<1&&(t=e.append("defs")),t}function f(t,n,r){var i=e.getHatchWidths(t),s=Math.round(i[0]+i[1]),o=s/2,u=Math.round(i[1]),f=u-(u%2==0?0:.5),l="M "+ -o+","+f+" l "+2*s+",0",c=a(r).append("pattern");return c.attr("id",n).attr({id:n,patternUnits:"userSpaceOnUse",width:String(s),height:String(s),patternTransform:"rotate(-45 "+[o,o].join(" ")+")"}),c.append("rect").attr({x:0,y:0,width:s,height:s,fill:t.colors[0]}),c.append("path").attr({stroke:t.colors[1],"stroke-width":String(u),d:l}),"url(#"+n+")"}var t={},n=[],r={};return r.parseAttr=function(e){return Object.keys(e).reduce(function(t,n){if(n=="classname"||n=="class")t["class"]=e[n];return t},{})},r.parseStyle=function(e,t){var n=Object.keys(e).reduce(function(n,r){var i=e[r];return r=="strokeWidth"?n["stroke-width"]=i:r!="classname"&&(r=="fill"?n.fill=s(i,t):r=="radius"?n.r=i:r!="dx"&&r!="dy"&&(n[r]=i)),n},{});return n},r}),define("nytg-vote-map/lib/vmap-hit-test",["./vmap-utils"],function(e){function n(e,t,n,r){var i,s,u=Infinity,a;for(var f=1;f<n.length;f++)i=n[f-1],s=n[f],a=o()}function r(e,t,n){var r=!1;return n.forEach(function(n){var i=a(e,t,n);r=r?!i:i}),r?1:0}function n(e,t,n){var r=i([e,t],n);return r?1/r:Infinity}function i(e,t){var n=t[0],r=s(e,n),i=r,o,a,f;for(var l=1;l<t.length;l++)f=t[l],o=s(e,f),a=s(n,f),i=Math.min(i,u(r,o,a)),n=f,r=o;return Math.sqrt(i)}function s(e,t){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function o(e,t,n,r,i,o){var a=s(e,t,n,r),f=s(e,t,i,o),l=s(n,r,i,o);return u(a,f,l)}function u(e,t,n){var r;if(n===0)r=e;else if(e>=t+n)r=t;else if(t>=e+n)r=e;else{var i=e+n-t;r=e-i*i/n*.25}return r<0&&(r=0),r}function a(e,t,n){var r,i,s,o,u=!1;for(s=0,j=n.length-1;s<n.length;j=s++)r=n[s][0],yi=n[s][1],i=n[j][0],yj=n[j][1],o=yi>t!=yj>t&&e<(i-r)*(t-yi)/(yj-yi)+r,o&&(u=!u);return u}var t={};return t.findHitShape=function(t,i,s,o){var u=o?o.invertInterval(1):0,a=null,f=0,l=0,c=e.getFeatures(s),h,p,d,v,m,g,y;for(var b=0;b<c.length;b++){d=c[b],v=e.getFeatureBounds(d),g=d.geometry&&d.geometry.type;if(g=="LineString"||g=="MultiLineString")y=n,l=u*20;else{if(g!="Polygon"&&g!="MultiPolygon")continue;y=r,l=0}if(!e.pointInBBox(t,i,v,l))continue;p=d.geometry.coordinates;if(g=="Polygon"||g=="LineString")p=[p];for(var w=0;w<p.length;w++)h=y(t,i,p[w],u),h>0&&h>f&&(a=d,f=h)}return a},t}),define("nytg-vote-map/lib/vmap-hit",["underscore/nyt","./vmap-utils","./vmap-hit-test"],function(e,t,n){function i(e){function i(){n&&(n._out(),n=null,r=null)}function a(e){f(e),n&&r&&n._click(r,e)}function f(e){var s,o;for(var u=t.length-1;u>=0;u--){s=t[u],o=s._test(e.x,e.y);if(o)break}if(n==s&&o==r)return;n&&i(),o&&(n=s,r=o,s._over(o,e))}var t=[],n,r;e.on("move",f),e.on("leave",i),e.on("click",a),this.clear=function(){i(),r=null,t=[]},this.addLayer=function(e,n){var r;if(e.type=="circle")r=u(e,n);else{if(e.type!="path"&&e.type!="arrow")throw console.error(e),"Layer does not support hit detection";r=o(e,n)}e.events=new s(r),t.push(e.events)},this.removeLayer=function(e){t=t.reduce(function(t,n){return n!==e.events&&t.push(n),t},[])}}function s(e){var t={};this._out=function(){t.mouseout&&t.mouseout()},this._over=function(e,n){t.mouseover&&t.mouseover(e)},this._test=function(t,n){return e(t,n)},this.on=function(e,n){t[e]=n},this._click=function(e){t.click&&t.click(e)}}function o(e,t){return function(r,i){var s=t.invertX(r),o=t.invertY(i);return e.visible()?n.findHitShape(s,o,e.features,t):null}}function u(t,n){function o(e,t,i){var o=r(i),u=n.projectX(o[0]),a=n.projectY(o[1]),f=10,l=1e5,c=(u-e)*(u-e)+(a-t)*(a-t);if(c>l)return 0;var h=s(i)||0,p=(h+f)*(h+f);return h<=0||c>p?0:c>h*h?(p-c)*.01:1e3-h}var r=t.point,i=t.style.radius,s=e.isFunction(i)?i:function(){return i||0};return function(e,n){var r=null,i=0,s;return t.visible()?(t.features.forEach(function(t){var s=o(e,n,t);s>i&&(r=t,i=s)}),r):null}}var r={};return r.create=function(e){return new i(e)},r}),define("nytg-vote-map/lib/vmap-surface",["d3/3","underscore/nyt","./vmap-utils","./vmap-canvas","./vmap-svg","./vmap-hit"],function(e,t,n,r,i,s){function u(e,t){var r;n.isArray(t.renderers)?t.draw||(r="Missing draw function"):r="Missing array of render types";if(r)throw new Error("[addLayerType() "+r);o[e]=t}function a(e,i,o){function S(){return y||(y=r.create(e,o,b,w)),y}function x(t){var n=o.getDisplayWidth(),r=o.getDisplayHeight(),i=n!=b||r!=w;i&&(b=n,w=r,e.attr("width",n).attr("height",r),a.attr("width",n).attr("height",r)),y&&(i||t)&&y.setSize(n,r)}function T(e){e.visible()?(e.onDraw&&e.onDraw(e),d(e).draw(e,o),A(e)):L(e)}function N(e){l=l.reduce(function(t,n){return n!==e&&t.push(n),t},[])}function C(e){g.removeLayer(e),e.hover&&(C(e.hover),N(e.hover),e.hover=null),e.container&&(e.container.remove(),e.container=null)}function k(r,i,s){var u=t.extend({},r),v;return u.features&&(u.features=n.getFeatures(u.features).concat()),u.i=s,h(u),p(u,i),v=d(u),u.renderer=="canvas"?u.canvas=S():u.renderer=="svg"?(u.svg=a,u.container=u.container||c.append("g")):u.renderer=="html"&&(u.container=u.container||e.append("div").style({position:"absolute","z-index":3,top:0,left:0})),u.classname&&u.container&&u.container.attr("class",u.classname),v.init&&v.init(u,o),f(u)?O(u):u.container&&u.container.attr("pointer-events","none"),u.visible=function(){var e=o.getZoom(),t=o.getDisplayWidth(),n=o.getDisplayHeight(),r=t>0&&n>0;if(u.minZoom&&e<u.minZoom||u.maxZoom&&e>u.maxZoom)r=!1;return r},u.redraw=function(){T(u)},u.replace=function(e){var t=l.indexOf(u),n;return t==-1?console.error("layer#replace() failed"):(C(u),n=l[t]=k(e)),n},u}function L(e){e.container&&e.container.attr("display","none")}function A(e){e.container&&e.container.attr("display","block")}function O(e){var t,n;e.events||g.addLayer(e,o);if(e.onHover||e.hoverStyle)t=M(e,e.hoverStyle,e.onHover),e.events.on("mouseover",function(e){t(e,i.position())}),e.events.on("mouseout",function(e){t(null,i.position())});e.onSelect&&e.events.on("click",function(t){e.onSelect(t,i.position())})}function M(e,t,n){if(!t)return n;e.style.radius&&!t.radius&&(t.radius=e.style.radius);var r={features:[],renderer:"svg",style:t,container:m.append("g"),point:e.point,type:e.type,length:e.length,dy:e.dy},i=k(r);l.push(i),e.hover=i;var s=function(e){if(!i.container)return;i.container.selectAll("*").remove(),i.features=e?[e]:[],d(i).init(i),T(i),n&&n(e)};return s}var u=new n.EventDispatcher,a=e.append("svg").style({position:"relative",overflow:"hidden","z-index":2,"stroke-linecap":"round","stroke-linejoin":"round"}),l=[];a.append("defs");var c=a.append("g").attr("pointer-events","none"),m=a.append("g").attr("pointer-events","none"),g=s.create(i),y,b,w,E;return u.svg=function(){return a},u.getLayer=function(e){return l.reduce(function(t,n){if(n.id===e||n.i===e)t=t||n;return t},null)},u.initLayers=function(e,t){var n;g.clear(),c.selectAll("g").remove(),l=[],e.forEach(function(e,n){e=k(e,t,n),l.push(e)});if(!E){E=t.bbox||v(l);if(!E)throw new Error("Couldn't determine bounding box of layer content.");o.initContentBounds(E)}return this.refreshLayers(),l},u.refreshLayers=function(e){y&&(e?y.reset():y.clear()),x(e),l.forEach(T),u.dispatchEvent("refresh")},u}function f(e){return!!(e.onHover||e.hoverStyle||e.onSelect)}function l(e){return!!e.onHover||!!e.onSelect}function c(e){if(!e.features)throw new Error('A layer is missing a "features" property.')}function h(e){var t=e.type;t||(e.image||e.tfw?t="image":e.text?t="label":e.style&&e.style.radius?t="circle":t="path"),e.type=t}function p(e,n){var r=d(e).renderers,i=t.contains(r,e.renderer)?e.renderer:r[0],s=n&&n.no_canvas||/no_canvas/.test(window.location.href);i=="canvas"&&s&&(i=t.find(r,function(e){return e!="canvas"})||"canvas"),e.renderer=i}function d(e){var t=o[e.type];if(!t)throw new Error("Missing definition for layer type: "+(e.type||"[undefined]"));return t}function v(e){return e.reduce(function(e,t){var r=g(t);return r?n.mergeBounds(r,e):e},null)}function m(e){var t=e.features.map(e.point);return t.reduce(n.mergePoint,null)}function g(e){var t=null;return e.point?t=m(e):e.features?t=n.getFeatureCollectionBounds(e.features):e.bbox&&(t=e.bbox),t}var o={};return{addLayerType:u,create:a}}),define("nytg-vote-map/lib/vmap-wheel",["./vmap-utils"],function(e){function t(t,n){function f(e){var f=1,l=+(new Date);if(e.wheelDelta)f=e.wheelDelta>0?1:-1;else{if(!e.detail)return;f=e.detail>0?-1:1}if(t&&!t()&&f==1||n&&!n()&&f==-1){l-i<900&&e.preventDefault();return}e.preventDefault(),i=l,s||r.dispatchEvent("mousewheelstart"),s=f,o.start(u+a)}function l(t){var n=t.time-i,o=n-u,f=t.tickTime/25;t.done?s=0:(o>0&&(f*=e.Tween.quadraticOut((a-o)/a)),r.dispatchEvent("mousewheel",{direction:s,k:f}))}var r=this,i=0,s=0,o=(new e.Timer).addEventListener("tick",l),u=60,a=80;window.onmousewheel!==undefined?window.addEventListener("mousewheel",f):window.addEventListener("DOMMouseScroll",f)}return e.inherit(t,e.EventDispatcher),t}),define("nytg-vote-map/lib/vmap-navigation",["d3/3","./vmap-wheel"],function(e,t){var n={};return n.init=function(n,r,i){function a(){s=n.allowNavigation()&&n.getZoom()>n.getMinZoom()}function f(){return!i.maxZoom||i.maxZoom>1}function l(){return n.getZoom()>1}var s=!0,o=function(){return r.isOver()&&n.getZoom()>n.getMinZoom()},u=r.isOver;f()&&(r.on("dblclick",function(e){n.zoomInTo(e)}),i.scrolling&&(new t(u,o)).on("mousewheel",function(e){var t=n.getZoom(),s=1+e.k*.08*(i.scrollFactor||1),o=e.direction>0?t*s:t/s;n.zoomTo(o,r.position(),0)}),r.on("pinch",function(e){var t=n.getZoom()*(e.dz||1);n.zoomTo(t,e,0)}),n.on("change",a),r.on("drag",function(t){s&&(e.event&&(e.event.stopPropagation(),e.event.preventDefault()),n.panBy(t.dx,t.dy))}))},n}),define("nytg-vote-map/lib/vmap-popup",["d3/3","./mbloch-utils"],function(e,t){var n={},r=30,i=30;return n.create=function(n){function a(e){var t=e.trim().split(/[\s]+/);t.indexOf("g-popup")==-1&&t.unshift("g-popup");var n="."+t.join(".");return n}function f(){e.event.stopPropagation()}function l(e){var t=u.node();return o||(o={viewportWidth:document.documentElement.clientWidth,viewportHeight:document.documentElement.clientHeight,parentLeft:t.parentElement.getBoundingClientRect().left,width:t.offsetWidth,height:t.offsetHeight}),t.parentElement==document.body?(o.x=e.pageX,o.y=e.pageY):(o.x=e.x,o.y=e.y),o}function c(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.pageY+r+t.height,s=t.viewportHeight-n.top;return s<i}var s=!0,o=null,u;n=n||{};if(n.div)u=e.select(n.div);else{n.classname&&(u=e.select("body > "+a(n.classname)));if(!u||u.empty())u=e.select("body").append("div").style("pointer-events","none").style("position","absolute").classed("g-popup",!0).on("touchstart",f).on("touchend",f)}return n.classname&&u.classed(n.classname,!0),u.hide=function(){s=!0,setTimeout(function(){s&&(u.style("visibility","hidden"),u.style("display","none"))},10)},u.show=function(e,n){s=!1,u.style({display:"block"}),o=null,t.utils.isString(e)&&u.html(e),n&&u.update(n),u.style("visibility","visible")},u.onHover=function(e,t){return e=e||function(){return"TBD"},function(n,r){n?u.show(e(n),r):(t&&t(),u.hide())}},u.update=function(e){var t=l(e),n=t.y+r,s=Math.round(t.x-t.width*.5+3),o=t.viewportWidth-t.parentLeft-s-t.width,a=t.parentLeft+s;c(e,t)&&(n=t.y-i-t.height),a<=0?s+=1-a:o<0&&(s+=o-1),u.style({left:s+"px",top:n+"px"})},u.hide(),u},n}),define("nytg-vote-map/lib/vmap-layer-types",["underscore/nyt","./vmap-surface","./vmap-utils","./vmap-svg"],function(e,t,n,r){function i(e){m(e),e.renderer=="svg"?(b(e,"text"),e.symbols.text(e.text)):e.renderer=="html"&&(b(e,"div"),e.symbols.append("div").html(e.html||e.text))}function s(e,t){var n=N([-50,-10,50,10],t),r=w(e,t,n)}function o(e){e.renderer=="svg"&&(b(e,"path"),e.container.attr("fill","none"))}function u(e,t){if(e.renderer=="canvas")e.canvas.drawPaths(e.features,e.style);else if(e.renderer=="svg"){var n=d3.geo.path().projection(t);e.symbols.attr(r.parseStyle(e.style,e.svg)),e.symbols.attr("d",n)}}function a(e){e.style.radius||n.error("Circle layer missing required style.radius property"),m(e),f(e),e.renderer=="svg"&&(b(e,"circle"),e.container.attr("fill","none"))}function f(e){var t=l(e);e.features.sort(function(e,n){return t(n)-t(e)})}function l(e){return e.sortKey||h(e.style.radius)}function c(e){var t=l(e),n=Infinity,r;for(var i=0,s=e.features.length;i<s;i++){r=t(e.features[i]);if(r>n)return!1;n=r}return!0}function h(t){return e.isFunction(t)?t:function(e){return t}}function p(e,t){c(e)||(console.log("Out-of-order circles; re-initializing"),a(e)),e.renderer=="svg"?e.symbols.each(function(n,r){var i=t.project(e.point(n));this.setAttribute("cx",i[0]),this.setAttribute("cy",i[1])}).attr(r.parseStyle(e.style,e.svg)):e.renderer=="canvas"&&e.canvas.drawCircles(e.features,e.style,e.point,h(e.style.radius))}function d(e){if(e.type=="Point")return e.coordinates;if(e.type=="MultiPoint")return e.coordinates[0];throw new Error("Expected GeoJSON Point, found: "+JSON.stringify(e))}function v(t,n){return e.isFunction(t[n])?t[n]:function(){return t[n]||0}}function m(e){e.point||(e.point=function(e){var t;return e.type=="Feature"?t=e.geometry?d(e.geometry):null:t=d(e),t})}function g(e){return e.trim().split(/\s+/).map(Number)}function y(e,t,r,i,s){var o=n.isString(e)?g(e):e,u=o[0],a=Math.abs(o[3]),f=o[4]+(i||0)*u,l=o[5]+(s||0)*a,c=[f,l-a*r,f+u*t,l];if(!n.isValidBounds(c))throw new Error("Invalid image bounds:",c);if(o[1]||o[2])throw new Error("World file data is rotated -- not supported");return c}function b(e,t){e.symbols&&e.symbols.remove();var n=e.container.selectAll(t).data(e.features).enter().append(t);e.renderer=="html"&&n.style("position","absolute"),e.symbols=n}function w(e,t,n){var r="dx"in e.style||"dy"in e.style,i=v(e.style,"dx"),s=v(e.style,"dy"),o=e.type=="label"&&e.renderer=="svg";return e.symbols.filter(function(u,a){var f=t.project(e.point(u)),l=f[0],c=f[1],h=!0,p=0,d=0,v=l,m=c;return r&&(p=i(u),d=s(u),v+=p,m+=d),n&&(h=n(v,m)),h?(e.renderer=="html"?(this.style.left=l+"px",this.style.top=c+"px"):o?(this.setAttribute("x",l),this.setAttribute("y",c),this.setAttribute("dx",p),this.setAttribute("dy",d)):(this.setAttribute("x",v),this.setAttribute("y",m)),this.style.display="block"):this.style.display="none",h}).style(S(e)).attr(E(e))}function E(e){if(e.renderer=="svg"||e.renderer=="html")return r.parseAttr(e.style)}function S(e){var t;return e.renderer=="svg"?t=r.parseStyle(e.style,e.svg):t=e.style,t}function x(t,n){function i(e){var n=e.width,r=e.height;t.tfw&&(t.bbox=y(t.tfw,n,r,t.dx,t.dy))}t.style=e.extend({opacity:1},t.style);if(t.image)i(t.image);else if(t.url){var r=new Image;r.onload=function(){t.image=r,i(r),n.dispatchEvent("change")},r.src=t.url}}function T(t){var n=t.style.opacity,r=e.isFunction(n)?n():n||1;t.image&&t.canvas.drawImage(t.image,t.bbox,r)}function N(e,t){var r=t.getDisplayWidth(),i=t.getDisplayHeight(),s=[e[0],e[1],e[2]+r,e[3]+i];return function(e,t){return n.pointInBBox(e,t,s)}}return t.addLayerType("path",{init:o,draw:u,renderers:["canvas","svg"]}),t.addLayerType("circle",{init:a,draw:p,renderers:["canvas","svg"]}),t.addLayerType("label",{draw:s,init:i,renderers:["svg","html"]}),t.addLayerType("image",{draw:T,init:x,renderers:["canvas"]}),{addLayerType:t.addLayerType,initImageLayer:x,drawImageLayer:T,initPointLayer:m,initPathLayer:o,drawPathLayer:u,initDOMSymbols:b}}),define("nytg-vote-map/lib/vmap-page",["d3/3","./vmap-utils"],function(e,t){function r(){var n=0,r={height:function(){return window.innerHeight||document.documentElement.clientHeight},width:function(){return window.innerWidth||document.documentElement.clientWidth},isPortraitMode:function(){return this.width()>this.height()}},i=t.debounce(function(){var e=r.width();e!=n&&(n=e,r.dispatchEvent("resize"))},80);return e.select(window).on("resize.vmap",i).on("orientationchange.vmap",i),"hidden"in document&&e.select(document).on("visibilitychange",function(){r.dispatchEvent(document.hidden?"blur":"focus")}),_.extend(r,t.EventDispatcher.prototype),r}var n;return{window:function(){return n||(n=r()),n}}}),define("nytg-vote-map/lib/vmap",["d3/3","underscore/nyt","./vmap-utils","./vmap-transform","./vmap-surface","./vmap-pointer","./vmap-navigation","./vmap-popup","./vmap-layer-types","./vmap-page"],function(e,t,n,r,i,s,o,u,a,f){function l(t,a){function g(){var e=c.node().getBoundingClientRect();p.updateDisplaySize(e.width,e.height,m)}function y(){p.zoomInTo(w())}function b(){var e=p.getZoom();e>1&&(e<4?E():p.zoomOutTo(w()))}function w(){var e=h.node().getBoundingClientRect(),t=n.viewportWidth(),r=n.viewportHeight(),i=Math.max(-e.left,0),s=Math.min(e.right,t)-e.left,o=Math.max(-e.top,0),u=Math.min(e.bottom,r)-e.top,a=(i+s)/2,f=(o+u)/2;return{x:a,y:f}}function E(){p.zoomToFullExtent()}var l=this,c=e.select(t).style("position","relative");c.node()||n.error("[vmap] Expected a DOM element or valid selector; received:",t),a||(a={});var h=c.append("div").style({"-webkit-tap-highlight-color":"rgba(0,0,0,0)",overflow:"hidden",position:"relative"}),p=r.create(a),d=s.create(h),v=i.create(h,d,p),m=!1;o.init(p,d,a),g(),v.on("refresh",function(){l.dispatchEvent("refresh")}),f.window().on("resize",g),f.window().on("focus",function(){m=!0,setTimeout(function(){m&&(m=!1,v.refreshLayers(!0))},50)}),d.on("enter",function(e){l.dispatchEvent("enter")}),d.on("leave",function(e){l.dispatchEvent("leave")}),d.on("click",function(e){l.dispatchEvent("click",e.data)}),p.on("change",function(){l.dispatchEvent("resize"),v.refreshLayers(m),m=!1}),p.on("navigate",function(){l.dispatchEvent("navigate")}),p.on("zoom-in",function(){l.dispatchEvent("zoom-in")}),p.on("zoom-out",function(){l.dispatchEvent("zoom-out")}),p.on("zoom-max",function(){l.dispatchEvent("zoom-max")}),this.isTouchEnabled=s.isTouchEnabled,this.getBounds=p.getCurrentBounds,this.getZoom=p.getZoom,this.zoomIn=y,this.zoomOut=b,this.zoom=p.zoom,this.zoomReset=E,this.refresh=v.refreshLayers,this.width=p.getDisplayWidth,this.height=p.getDisplayHeight,this.zoomToFeature=p.zoomToFeature,this.svg=v.svg,this.xscale=p.xscale,this.yscale=p.yscale,this.allowNavigation=p.allowNavigation,this.setLayers=function(e){return v.initLayers(e,a)},this.getLayer=v.getLayer,this.append=function(e){c.node().appendChild(e.node?e.node():e)},this.popup=function(e){var t=u.create(e);return d.on("move",t.update),d.on("click",t.update),t},this.container=function(){return c}}return n.inherit(l,n.EventDispatcher),{utils:n,create:function(e,t){return new l(e,t)}}}),define("nytg-vote-map/lib/topojson-utils",[],function(e){function n(e,t,r){var i;for(var s=0,o=e.length;s<o;s++)i=e[s],i instanceof Array?n(i,t,r):r(i,t)}function r(e){var t;return e.type=="GeometryCollection"?t=e.geometries:e.type&&(t=[e]),t||[]}function i(e,t){var n={type:e.type,coordinates:null},r={type:"Feature",properties:e.properties||{},geometry:n};return"id"in e&&(r.id=e.id),e.type=="Point"||e.type=="MultiPoint"?n.coordinates=e.coordinates:e.arcs?n.coordinates=o(e.type,e.arcs,t):r.geometry=null,r}function s(e,t,n){var r=[];for(var i=0;i<e.length;i++)r.push(n(e[i],t));return r}function o(e,t,n){var r=c[e];return r?r(t,n):null}function u(e,t){return e.reduce(function(e,n){var r=n<0,i=e.length===0,s=t[r?~n:n],o=s.length,u;if(r)for(u=i?o-1:o-2;u>=0;u--)e.push(s[u]);else for(u=i?0:1;u<o;u++)e.push(s[u]);return e},[])}function a(e,t){return s(e,t,u)}function f(e,t){return s(e,t,u)}function l(e,t){return s(e,t,a)}function h(e){if(!e.transform)return;(e.arcs||[]).forEach(function(t){var n=e.transform,r=n.scale[0],i=n.scale[1],s=n.translate[0],o=n.translate[1],u=0,a=0,f;for(var l=0,c=t.length;l<c;l++)f=t[l],u+=f[0],a+=f[1],f[0]=u*r+s,f[1]=a*i+o}),e.transform=null}var t={};t.feature=function(e,t){if(!e||e.type!="Topology"||!t||!t.type)throw new Error("Invalid call to topology.feature(<topology>, <object>)");h(e);var n={type:"FeatureCollection",features:[]};return t.bbox&&(n.bbox=t.bbox),n.features=r(t).map(function(t){return i(t,e.arcs)}),n},t.meshes=function(e,n,r){var i=t.mesh(e,n,r);return i.coordinates?{type:"GeometryCollection",geometries:i.coordinates.map(function(e){return{type:"LineString",coordinates:e}})}:i},t.mesh=function(e,t,i){function p(e,t){e<0?(a[~e]=t,f[~e]|=2):f[e]|=1}function d(e,t){var n=e<0?~e:e,r=f[n]|0,s;r==1||r==2?i?s=i(u[t],u[t]):s=!0:r==3&&e>=0&&(i?s=i(u[t],u[a[n]]):s=!0),s&&(f[n]=0,l[s]||(l[s]=[]),l[s].push(o[n]))}var s=typeof Int32Array!="undefined",o=e.arcs,u=r(t),a=s?new Int32Array(o.length):[],f=s?new Uint8Array(o.length):[],l={},c;return h(e),u.forEach(function(e,t){if(!e.arcs)return;n(e.arcs,t,p)}),u.forEach(function(e,t){if(!e.arcs)return;n(e.arcs,t,d)}),c=Object.keys(l).map(function(e){var t={type:"MultiLineString",coordinates:l[e]};return{type:"Feature",id:e,properties:null,geometry:t}}),c.length==1&&c[0].id=="true"?c[0].geometry:{type:"FeatureCollection",features:c}};var c={LineString:u,MultiLineString:f,Polygon:a,MultiPolygon:l};return t}),define("map2016/map-utils",[],function(){var e={};e.getGeoType=function(t){var n=t.properties||{},r=e.getGeoField(t),i=n[r]||"",s;r=="ST"?s="states":/^[0-9]+$/.test(i)?i.length==5?s="counties":/^11.+/.test(i)?s="wards":i.length>5&&(s="townships"):/^[A-Z]{2,2}[0-9]+$/.test(i)?i.length==4?s="house-districts":i.length==5&&(s="state-house-districts"):/^[A-Z]{3,3}[0-9]{2,2}$/&&(s="convention-districts");if(!s)throw console.error(t),"Unknown feature type";return s},e.getGeoField=function(e){var t=e.properties||{};if("GEOID"in t)return"GEOID";if("NYTID"in t)return"NYTID";if("ST"in t)return"ST";throw console.error(e),"Unknown feature"},e.mapShouldZoom=function(e){return e.map_extent=="national"||"AK,FL,MA,NY,NJ,VA,NC,CA,TX,ME,ND".indexOf(e.state_id)>=0},e.getStateName=function(){var e={AK:"Alaska",HI:"Hawaii",AL:"Alabama",AR:"Arkansas",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",GA:"Georgia",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"};return function(t){return e[t]||""}}();var t={AL:"Ala.",AK:"Alaska",AZ:"Ariz.",AR:"Ark.",CA:"Calif.",CO:"Colo.",CT:"Conn.",DE:"Del.",DC:"D.C.",FL:"Fla.",GA:"Ga.",HI:"Hawaii",ID:"Idaho",IL:"Ill.",IN:"Ind.",IA:"Iowa",KS:"Kan.",KY:"Ky.",LA:"La.",ME:"Me.",MD:"Md.",MA:"Mass.",MI:"Mich.",MN:"Minn.",MS:"Miss.",MO:"Mo.",MT:"Mont.",NE:"Neb.",NV:"Nev.",NH:"N.H.",NJ:"N.J.",NM:"N.M.",NY:"N.Y.",NC:"N.C.",ND:"N.D.",OH:"Ohio",OK:"Okla.",OR:"Ore.",PA:"Pa.",PR:"P.R.",RI:"R.I.",SC:"S.C.",SD:"S.D.",TN:"Tenn.",TX:"Tex.",UT:"Utah",VT:"Vt.",VA:"Va.",WA:"Wash.",WV:"W.Va.",WI:"Wis.",WY:"Wyo."},n={NH:2,VT:1,RI:3,CT:2,DE:3,DC:Infinity,MD:2,MA:1,NJ:1};return e.getStateLabel=function(e,r,i){var s=n[e]||0;i&&(s=0);var o=!0;return r>300&&s<1&&(o=!1),r>350&&s<2&&(o=!1),r>600&&s<3&&(o=!1),r>1e4&&(o=!0),o?"":t[e]},e.getDistrict=function(n){var r=e.getGeoField(n),i=n.properties[r],s=i.substr(0,2),o=i.substr(2);return"AK,DE,MT,ND,SD,VT,WY".indexOf(s)>=0?t[s]+" At-Large District":t[s]+" District "+ +o},e}),define("map2016/map-simple-states",["../nytg-vote-map/lib/topojson-utils"],function(e){var t,n='{"type":"Topology","bbox":[-2458234.7838402214,-1330026.2002867549,2255905.7913145656,1565781.6600397765],"transform":{"scale":[174.74665734346988,163.5310515205857],"translate":[-2458234.7838402214,-1330026.2002867549]},"arcs":[[[20046,4062],[-482,-62],[-339,-38],[-337,-30],[-249,-26],[-12,-91],[62,-78],[73,-39],[10,-29],[-23,-73],[16,-81],[-42,-90]],[[18723,3425],[-74,-28],[-56,23],[-49,53],[-40,19],[-21,49],[15,38],[-17,74],[-49,21],[-33,-80],[-3,-133],[-43,-14],[-85,21],[-29,-26]],[[18239,3442],[-120,1030],[9,380],[15,871],[19,806],[-31,18],[-28,48]],[[18103,6595],[-2,8],[400,34],[293,22],[648,66]],[[19442,6725],[39,-157],[77,-281],[255,-978],[58,-141],[64,-82],[21,-46],[-7,-84],[38,-12],[8,-53],[-64,-67],[13,-82],[-35,-109],[20,-110],[42,-47],[15,-51],[-11,-51],[-8,-141],[14,-66],[39,-34],[26,-71]],[[4477,7430],[48,86],[12,127],[-21,119],[27,79],[-13,31],[26,169],[-11,54],[7,75],[69,26],[62,-8],[30,-23],[38,4],[51,-100],[53,5],[66,95],[95,543]],[[5016,8712],[537,-107],[547,-101],[365,-65],[316,-50],[14,-7],[422,-67],[290,-43]],[[7507,8272],[-371,-2860],[-128,-975]],[[7008,4437],[-510,78],[-577,95],[-1023,629],[-827,531],[19,65],[58,75]],[[4148,5910],[106,4],[41,53],[10,45],[-14,84],[-78,22],[-12,44],[24,40],[14,72],[-8,91],[59,28],[63,53],[17,90],[16,4],[9,158],[61,54],[22,55],[91,27],[54,41],[21,33],[-86,122],[-30,107],[-4,82],[-35,45],[-27,75],[15,91]],[[17269,7219],[42,-49],[-54,-27],[-19,-92],[-69,-19],[13,-53],[39,-15],[-90,-65],[-3,-30],[-59,-61],[50,-22],[-38,-86],[43,-21],[-19,-29],[28,-34],[-54,-15],[-15,-64],[-43,7],[-7,-32]],[[17014,6512],[34,-58],[-83,-57],[-37,18],[21,-77],[-29,-81],[-36,-13],[24,-52],[-21,-38],[14,-37],[-23,-28],[-73,-20],[10,-41],[-47,-29],[-6,-43],[-48,-69],[41,-16],[-8,-36],[-51,-11],[-51,-32],[42,-32],[-30,-42],[41,-65],[-71,6],[-4,-39],[-37,-46],[48,-40],[-50,-27],[35,-74],[-19,-35],[37,-35],[30,-86],[5,-52],[-51,-5],[34,-51],[-20,-42]],[[16635,5127],[-561,-24],[-967,-24]],[[15107,5079],[-7,364],[-21,15],[-76,-17],[-86,-6],[-32,60],[-19,2]],[[14866,5497],[6,860],[4,340],[-89,620],[-18,136]],[[14769,7453],[258,4],[500,13],[394,15],[479,21],[635,38],[13,-57],[37,-19],[3,-54],[-37,-54],[-72,-83],[-39,-84],[329,26]],[[4148,5910],[-1281,162],[-3,97],[-41,30],[26,116],[5,95],[-9,79],[-62,163],[-113,174],[-64,62],[-65,103],[-35,32],[-71,-23],[-61,65],[28,35],[-12,88],[-48,73],[-84,15],[-43,-12],[-186,152],[-13,89],[-49,49],[-27,47],[-46,41],[-86,10],[-74,28],[-57,53],[-138,44],[-98,13],[-8,56],[-58,54],[43,78],[-7,46],[25,47],[-20,47],[46,101],[7,42],[-24,40],[-42,17],[-44,62],[40,99],[-12,35],[-45,22],[-35,72],[-17,66],[-42,33],[-19,40],[3,49],[-47,89],[-3,84],[-28,22],[-13,69],[-28,64],[-46,47],[-15,74],[-1,107],[34,94],[23,-30],[31,28],[44,92],[-15,95],[-24,40],[-72,1],[-63,74],[-58,138],[31,108],[-5,96],[-22,27],[38,106],[9,65],[56,5],[10,-62],[-21,-9],[-5,-81],[44,-26],[61,-71],[4,118],[-62,100],[26,81],[-31,11],[-2,39],[73,21],[5,56],[-37,39],[-48,-6],[-35,-126],[16,-34],[-61,-13],[-34,54],[-30,6],[-38,86],[-50,40],[-40,-8],[59,97],[6,60],[-40,155],[-78,111],[-25,99],[-70,127],[-18,85],[35,56],[-11,107],[2,109],[23,62],[43,63],[13,94],[-1,104],[-52,145],[-17,70],[-31,30],[-57,112],[18,32],[-4,94],[69,101],[127,144],[50,92],[-13,38],[53,94],[59,131],[11,74],[-1,138],[-34,38],[29,40],[32,98]],[[980,13306],[390,-125],[440,-129],[170,-55],[436,-136],[472,-132]],[[2888,12729],[-326,-1352],[-121,-484],[-33,-150],[793,-1269],[827,-1325],[449,-719]],[[2239,6891],[30,-11],[74,-64],[26,-59],[-70,6],[-19,28],[10,46],[-36,20],[-15,34]],[[2169,6596],[16,-3],[31,-85],[47,-72],[-36,-17],[-31,44],[-27,133]],[[1653,7457],[86,-24],[31,-36],[-24,-35],[-77,35],[-16,60]],[[1481,7464],[110,-7],[24,-45],[-17,-23],[-69,-13],[-48,88]],[[10227,10706],[565,-47],[388,-28],[-41,-683]],[[11139,9948],[-90,-1589],[-28,-470]],[[11021,7889],[-330,25],[-153,16]],[[10538,7930],[-673,53],[-392,40],[-543,58],[-335,39],[-3,6],[-687,89],[-398,57]],[[7507,8272],[104,791],[0,76],[40,302],[39,275],[165,1272]],[[7855,10988],[379,-54],[296,-39],[899,-112],[416,-42],[382,-35]],[[24641,11856],[-50,68],[96,104],[-44,47],[-83,509]],[[24560,12584],[199,45],[574,144],[3,-10]],[[25336,12763],[63,-231],[34,-160],[-20,-13],[6,-59]],[[25419,12300],[-42,1],[-80,-50],[-24,10],[-32,-37],[-55,-29],[-33,3],[-106,-53],[-33,7],[-61,-24],[-92,-101],[-36,-2],[-81,-72],[-10,-24],[-93,-73]],[[23285,10098],[30,49],[77,-55],[-50,-82]],[[23342,10010],[-4,41],[-53,47]],[[20046,4062],[44,-74],[22,-87],[30,-25],[948,69],[502,38],[16,-97],[27,-40],[66,13],[6,78],[-8,80],[-26,38],[-3,63],[41,61],[132,-35],[89,-9],[64,9]],[[21996,4144],[11,-72],[67,-226],[67,-186],[24,-41],[25,-83],[71,-140],[149,-255],[181,-237],[92,-101],[40,-79],[-30,-41],[2,-76],[38,-120],[50,-88],[93,-141],[104,-218],[134,-233],[59,-141],[17,-129],[11,-232],[2,-115],[21,-218],[-57,-35],[-32,-181],[27,-61],[36,-15],[-60,-169],[-38,10],[-11,52],[-67,-13],[-53,-34],[-227,-78],[-36,22],[-25,40],[2,70],[16,12],[-39,82],[-92,132],[-61,50],[-139,56],[-44,-34],[-87,148],[-37,132],[-28,53],[-94,82],[-67,13],[-19,57],[-26,22],[60,50],[-7,87],[-42,56],[-32,-34],[32,-85],[-57,-26],[-138,181],[-58,105],[-94,111],[-36,55],[37,22],[55,131],[40,46],[16,53],[-18,40],[-83,33],[-72,15],[-19,-50],[44,-11],[39,-49],[-17,-89],[-56,-6],[-60,70],[-19,40],[22,86],[-4,82],[-17,30],[22,39],[31,216],[-24,76],[-28,46],[8,43],[-29,20],[20,58],[-50,57],[-52,99],[-92,-1],[-29,-34],[-29,89],[-47,9],[-38,84],[-41,5],[-65,52],[-16,82],[-82,42],[-31,58],[-60,62],[-143,57],[-60,39],[-70,-30],[-45,3],[-65,-62],[21,-72],[-61,13],[-45,-19],[-177,-143],[-21,31],[-30,-46],[-185,-50],[1,80],[-67,88],[-59,15],[-53,48],[-206,112],[-82,28],[-154,31],[-144,0],[-62,-9],[-224,-68],[-86,-13],[-110,-38]],[[20022,3156],[59,14],[-11,-39],[-48,25]],[[22372,12],[50,38],[-23,29],[165,134],[45,-16],[37,-45],[-1,-43],[-102,-7],[0,-19],[-95,-61],[-76,-10]],[[19442,6725],[114,12],[546,73]],[[20102,6810],[361,48],[262,47]],[[20725,6905],[-5,-37],[-88,-122],[2,-76],[61,-38],[27,1],[103,-78],[51,17],[25,-18],[20,-58],[55,-61],[25,-76],[74,-72],[28,-54],[119,-59],[55,-43],[42,-82],[85,-33],[39,-47],[33,-11],[5,-57],[109,-135],[83,-31],[74,-49],[1,-46],[62,-100],[12,-102],[71,-39],[61,-50],[1,-30],[59,-84],[18,-115],[61,-1],[71,-34]],[[22164,5085],[26,-11],[-37,-78],[-88,-143],[10,-61],[-14,-82],[-49,-109],[22,-67],[-60,-110],[5,-71],[19,-75],[-14,-66],[12,-68]],[[8747,884],[7,34],[60,45],[56,82],[4,35],[-36,49],[-14,57],[36,48],[144,-90],[86,-13],[135,-72],[72,-83],[-1,-65],[49,4],[16,-63],[46,-42],[53,-24],[-4,-31],[-82,-88],[-122,-66],[-58,2],[-29,-33],[-86,-56],[-51,-110],[-31,-31],[-86,53],[-45,13],[-24,52],[13,149],[-40,89],[-19,78],[-31,29],[-18,48]],[[6642,2315],[32,70],[82,53],[98,5],[35,-15],[26,-41],[-22,-59],[2,-58],[-64,-58],[-90,20],[-33,34],[-50,17],[-16,32]],[[6388,2190],[12,38],[96,64],[-13,-62],[-46,-18],[-25,-55],[-24,33]],[[8365,1630],[18,57],[57,8],[47,-73],[109,35],[100,-74],[56,-15],[16,-48],[-34,-45],[-51,-24],[-29,5],[-101,-38],[-38,17],[-15,111],[-43,-4],[-46,20],[-46,68]],[[8371,1382],[72,50],[15,-58],[-68,-9],[-19,17]],[[8163,1615],[40,18],[59,-14],[44,-51],[-12,-36],[-74,-24],[-26,74],[-31,33]],[[8238,1787],[99,6],[16,-18],[-49,-51],[-40,-15],[-124,34],[-87,-13],[-33,8],[39,76],[179,-27]],[[7478,2031],[86,5],[61,76],[52,-33],[46,-121],[74,-47],[31,-51],[-80,-28],[-51,30],[-125,-5],[-17,47],[-51,67],[-26,60]],[[7014,11815],[-524,89],[-9,5],[-789,144],[-68,18]],[[5624,12071],[-257,54],[-95,25],[-105,19],[-616,138],[-302,74]],[[4249,12381],[254,1206],[71,131],[-10,48],[47,41],[-62,64],[-15,38],[-48,17],[18,30],[-15,45],[20,53],[45,36],[72,121],[54,15],[65,93],[6,56],[68,66],[50,114],[77,111],[55,63],[-34,121],[-40,39],[-36,12],[-34,126]],[[4857,15027],[-5,73],[25,38],[-9,93],[-23,43],[18,51],[235,1121],[125,573]],[[5223,17019],[407,-95]],[[5630,16924],[-135,-673],[39,-92],[25,-26],[1,-52],[36,-48],[1,-70],[-33,-28],[30,-67],[-42,0],[72,-79],[3,-36],[83,-48],[20,-77],[20,-18],[41,-121],[38,-58],[-2,-48],[59,-60],[40,-22],[3,-56],[69,-33],[51,15],[14,-18],[-30,-90],[-23,-2],[-2,-58],[-51,-108],[-7,-50],[-34,-72],[1,-43],[24,-80],[-57,-14],[-34,-42],[16,-77],[-36,-50],[34,-22],[44,-81],[51,34],[53,12],[66,56],[16,30],[70,-100],[6,-44],[-16,-42],[15,-46],[-10,-41],[15,-56],[33,-57],[7,-47],[40,-47],[-8,-67],[-25,-4],[10,-59],[38,-38],[49,-8],[54,-75],[19,-144],[-7,-51],[56,-74],[21,53],[56,32],[23,-16],[84,-21],[35,-28],[22,52],[37,20],[75,-47],[36,12],[76,-3],[12,-38],[113,16],[61,60],[-1,29],[72,4],[38,-82],[-8,-30],[70,-83]],[[7262,13482],[-174,-1180],[-74,-487]],[[17530,7912],[-35,18],[-46,-17],[-45,29],[-1,32],[-81,131],[39,43],[5,37],[-54,91],[-4,103],[-37,16],[-83,86],[-55,36],[-27,-26],[-121,124],[-58,31],[-59,65],[-12,46],[8,67],[25,35],[13,70],[31,51],[-14,77],[40,61],[3,36],[-70,43],[-100,27],[-43,-66],[-59,31],[-30,88],[14,23],[-28,110],[-58,58],[-100,68],[-34,60],[-71,59],[-66,67],[2,36],[-34,34],[2,53],[-40,82],[-12,136],[19,74],[19,26]],[[16273,10163],[21,10],[-1,83],[-19,19],[26,48],[76,23],[30,23],[8,98],[60,81],[2,118],[-84,95],[25,117],[56,11],[33,23],[95,12],[27,35],[63,13],[54,47],[7,101],[58,51],[14,138],[-15,77],[-23,23],[-88,44],[-15,66],[-31,40],[-86,59],[4,21]],[[16570,11639],[265,17],[601,33],[313,30],[146,10]],[[17895,11729],[5,-69],[-10,-62],[21,-62],[63,-85],[43,-138],[52,-106]],[[18069,11207],[68,-830],[32,-415],[31,-360],[-34,-52],[21,-44],[-37,-60],[47,-50],[1,-49],[33,-17],[-12,-68],[29,-45],[-5,-64],[-37,-28],[-15,-102],[-45,-30],[2,-47],[-27,-34],[-18,-63],[-43,9],[-19,-59],[39,-26],[-49,-50],[9,-33],[-18,-112],[20,-62]],[[18042,8516],[-15,-42],[-43,-55],[17,-61],[35,-30],[-4,-37],[-98,-22],[-38,-38],[-57,-16],[-14,-72],[53,-86],[-14,-55],[-31,-8],[-47,28],[-63,17],[-96,47],[-56,-13],[-57,-89],[-12,-36],[28,-36]],[[19536,9578],[-33,-41],[34,-40],[-15,-49],[48,-32],[-46,-55],[-41,-15],[-97,-75],[-37,30],[-74,-10],[-18,-21],[22,-125],[-28,-42],[-57,-38],[-10,-67],[-38,-44],[-27,10],[-49,-94],[6,-51],[-17,-57],[-113,-9],[-46,27],[-8,54],[-41,36],[-9,-46],[-33,-59],[-32,-9],[0,-86],[-29,-37],[-46,26],[-33,-3],[-26,49],[-30,-4],[-29,-38],[-54,-26],[-13,-73],[-77,24],[-84,52],[-84,-15],[-27,-67],[-28,-5],[-10,50],[-71,-25],[-55,5],[20,-55],[-16,-24],[-43,12]],[[18069,11207],[78,-46],[70,3],[55,24],[123,87]],[[18395,11275],[486,53],[462,56],[5,-43]],[[19348,11341],[69,-609],[36,-334],[33,-338],[50,-482]],[[16273,10163],[-29,0],[-102,113],[-25,40],[-176,-16],[-558,-35],[-393,-16],[-197,-5],[-241,0],[-372,4]],[[14180,10248],[-12,50],[-47,50],[25,31],[-6,60],[17,13],[-24,78],[0,62],[-30,74],[-4,183],[-34,6],[-41,42],[-12,110],[23,75],[-44,67],[15,48],[-66,50],[2,45],[-38,38],[12,43],[-40,74],[13,75],[-30,30]],[[13859,11552],[-32,96],[-58,73],[53,105],[8,91],[35,66],[-22,70],[-40,11],[22,50],[1,56],[-33,27],[-1,45],[67,0]],[[13859,12242],[432,-1],[711,10],[544,16],[724,34]],[[16270,12301],[12,-103],[34,-14],[35,-48],[-51,-88],[22,-149],[22,-17],[28,-98],[47,-32],[110,-25],[41,-88]],[[11139,9948],[310,-20],[455,-26],[317,-15],[534,-19],[422,-11],[287,-5],[529,-5],[409,1]],[[14402,9848],[51,-63],[60,-31],[59,28],[36,-46],[-39,-97],[-29,-19],[-35,-91],[88,-101],[12,-58],[38,-61],[43,-27],[24,10],[40,-45],[6,-617],[2,-304],[7,-531]],[[14765,7795],[-399,-4],[-551,-1],[-485,6],[-450,9],[-653,23],[-824,39],[-382,22]],[[19536,9578],[29,32],[65,-40],[88,37],[12,-37],[65,-27],[43,-73],[18,-58],[71,-15],[44,18],[61,-13],[51,-61],[53,-13],[16,37],[50,24],[79,-20],[41,-37],[24,26],[48,4],[45,75],[65,32],[37,-106],[63,-16],[62,-48],[14,-35]],[[20680,9264],[24,-106],[-20,-89],[49,-40],[23,-44],[28,-9],[-6,-46],[98,-95],[18,-47],[90,-51],[9,-26],[77,2]],[[21070,8713],[-165,-214],[-70,-38],[-101,-90],[5,-42],[-66,-68],[3,-58],[-43,-28],[-51,-10],[-51,-87],[-109,-65],[-54,-10],[-67,-53]],[[20301,7950],[-6,-14],[-430,-48],[-152,-13],[-179,-9],[-147,-25],[-174,-15],[-254,-10],[-130,-11],[-264,-35],[-372,-42],[0,21],[-113,0],[27,-92],[-8,-31],[-539,-40],[-152,-15]],[[17408,7571],[16,81],[24,13],[53,-39],[30,69],[-23,33],[7,63],[18,29],[14,81],[-17,11]],[[17374,7567],[-28,-1]],[[17346,7566],[-10,53],[35,-1],[3,-51]],[[16635,5127],[-22,-57],[29,-14],[36,54],[12,-59],[-38,-33],[-8,-63],[56,-14],[-46,-61],[20,-37],[69,-49],[-52,-37],[69,-13],[-18,-46],[51,-16],[-62,-71],[-69,-34],[3,-44],[59,-2],[-22,-53],[14,-21],[-59,-41],[-5,-36],[-35,-33],[-37,-10],[-51,-215],[-35,-8],[6,-174],[-64,-8],[28,-49],[-18,-53],[36,-52],[-32,-28],[303,15],[381,24],[335,23],[-9,-125],[-25,-39],[-4,-64],[50,-102],[49,-40],[34,-74],[-8,-33],[47,-72],[25,2]],[[17628,3265],[-53,-20],[-50,-64],[-52,-19],[-20,-30],[13,-39],[76,-43],[60,8],[4,76],[47,35],[65,-60],[36,-12],[20,49],[28,-14],[-44,-61],[-37,-31],[-22,-69],[-52,-55],[-78,-32],[3,-61],[61,-38],[37,-60],[22,15],[100,-16],[35,-40],[17,28],[52,-58],[-2,-35],[59,-12],[-23,-60],[-44,-17],[-4,-34],[-91,17],[19,81],[-66,-39],[-51,58],[-70,21],[-20,24],[-114,11],[84,33],[-116,51],[-43,-12],[-70,-118],[35,-50],[-92,-75],[-54,121],[-39,13],[-38,36],[-19,-40],[-60,-18],[-11,-39],[-43,-64],[-16,7],[-69,-46],[-64,72],[-59,-5],[-37,23],[-89,19],[9,72],[79,-72],[-5,63],[-72,61],[-41,-33],[-17,81],[-56,-32],[-38,50],[-19,60],[-39,-7],[-4,76],[-81,-1],[-42,-27],[-20,85],[-127,-70],[-46,-12],[71,-93],[-38,0],[-97,-41],[-167,31],[-66,21],[-127,60],[-117,32],[-163,-5],[-148,-27],[-54,-32]],[[15264,2817],[-48,86],[36,31],[36,87],[36,43],[12,68],[-14,38],[7,55],[-33,36],[33,79],[-23,55],[29,69],[34,37],[34,96],[14,158],[-10,63],[-28,4],[-55,103],[9,32],[-15,51],[-32,18],[-50,88],[23,70],[-50,108],[-50,39],[-38,52],[-14,696]],[[16267,2775],[69,44],[108,-51],[-29,-45],[-43,-10],[-105,62]],[[17734,3190],[60,31],[28,-42],[-88,11]],[[25658,13599],[-67,28],[-14,74],[-78,46],[-27,49],[-7,94],[-12,10],[-206,707],[-131,421]],[[25116,15028],[52,38],[46,-60],[21,53],[-9,89],[66,-19],[7,22],[-55,44],[12,86],[60,87],[26,17],[-20,48],[44,67],[7,52],[-32,6],[-18,78],[16,46],[-31,26],[13,102],[50,73],[-23,191],[192,596],[86,-5],[28,-110],[67,-22],[69,61],[43,17],[7,32],[82,25],[8,55],[48,4],[140,-60],[42,-47],[49,-13],[213,-728],[1,-42],[39,-133],[96,-20],[81,11],[17,-50],[-28,-29],[48,-46],[1,-82],[79,-77],[17,47],[62,1],[29,-25],[66,-100],[27,-11],[20,-65],[-58,-138],[-73,-29],[-10,-36],[-66,2],[8,-65],[-123,-43],[5,-84],[-50,-14],[-4,-50],[-41,28],[-14,43],[-47,22],[-4,-63],[48,-47],[-12,-43],[-91,-23],[5,88],[-56,-22],[-20,-106],[-79,14],[-29,23],[-25,52],[-64,-46],[35,-59],[-22,-71],[3,-83],[18,-27],[-47,-111],[-72,21],[-30,-23],[-5,-99],[-64,-21],[-30,-74],[-31,-28],[-55,30],[-21,40],[-30,-2],[-61,-93],[-11,-54],[44,-69],[-67,-46],[15,-59],[-53,-83],[-18,-72],[13,-16],[-18,-113],[-12,-10]],[[26271,14519],[43,28],[21,-20],[-30,-48],[-34,40]],[[26327,14625],[22,42],[54,-29],[-25,-41],[-29,-10],[-22,38]],[[23819,10768],[27,-114],[190,-720],[129,25],[183,42]],[[24348,10001],[-20,-254],[-14,-52]],[[24314,9695],[-181,-66],[-8,-21]],[[24125,9608],[-67,-11],[-45,-50],[-8,54],[42,58],[-36,35],[-57,83],[-32,-4],[-32,-35],[-29,38],[-66,45],[-16,-13],[-56,70],[36,37],[-26,55],[78,25],[-72,48],[-55,13],[23,78],[38,-27],[-23,94],[15,42],[-23,63],[-51,23],[21,126],[81,100],[-10,83],[-57,-27],[-7,-35],[35,-20],[-41,-40],[-46,-69],[-29,6],[-31,-103],[12,-47],[-2,-106],[18,-24],[-20,-67],[13,-23],[-19,-53],[39,-82],[26,-87],[66,-53],[21,-113],[42,-46],[-5,-61],[-40,28],[-56,7],[-40,47],[-164,16],[-36,30],[-37,64],[-82,-77],[-23,11],[-24,64],[50,118]],[[23318,9896],[-6,26],[37,44],[-7,44]],[[23285,10098],[-66,19],[-5,26],[-51,19],[-61,-4],[-39,41],[23,60],[-62,43],[-75,-5]],[[22949,10297],[-29,65],[-54,42],[-33,75],[-59,-21],[-39,38],[-48,9],[-37,-61],[-43,6],[-38,-42],[-3,-53],[-47,-7],[-133,22],[-45,-112],[-65,9],[-80,-135],[-20,-3],[-64,-78],[-52,349]],[[22060,10400],[449,87],[510,103],[228,49],[572,129]],[[23958,9561],[-25,-6]],[[23933,9555],[25,6]],[[25730,12513],[-33,106],[-31,1]],[[25666,12620],[-19,20]],[[25647,12640],[-59,33],[-43,67],[-20,84],[-189,-61]],[[24560,12584],[-16,22],[12,467]],[[24556,13073],[367,84]],[[24923,13157],[218,50],[312,76],[52,103],[80,68],[53,6]],[[25638,13460],[49,-114],[86,-15],[-7,-26],[-92,-67],[14,-31],[-50,-76],[-6,-76],[48,-20],[30,25],[45,-4],[95,-89],[-10,-75],[81,-20],[20,-72],[41,-27],[48,-2],[72,24],[79,56],[-15,79],[41,-30],[34,-109],[-114,-55],[-103,-61],[-16,-43],[-77,-36],[-8,115],[-49,12],[-4,-60],[-72,-49],[9,-43],[-41,-48],[-36,-10]],[[26172,12491],[67,30],[16,54],[43,-51],[-18,-34],[-48,-11],[-60,12]],[[25884,12451],[31,13],[18,62],[36,45],[37,-36],[44,16],[12,-44],[-128,-50],[-50,-6]],[[17846,13506],[-32,7],[-37,44],[30,113],[-107,6],[27,71],[9,95],[-23,73],[-32,27],[-97,12],[4,53],[-36,47],[-121,16],[-43,26],[-46,-25],[-74,13],[-143,72],[-462,101],[-23,65],[-33,49],[-84,33]],[[16523,14404],[108,61],[59,23],[74,88],[75,30],[27,-7],[85,23],[79,53],[44,58],[72,19],[23,61],[95,92],[33,16],[60,89],[101,69],[104,25],[60,1],[39,-19],[-40,-42],[-62,-3],[11,-30],[-48,-34],[-74,-83],[-48,-117],[-31,-35],[-9,-100],[23,-20],[75,99],[28,-15],[44,15],[81,0],[101,-40],[38,-39],[48,-82],[50,-38],[21,-53],[107,5],[45,30],[33,-40],[57,-15],[25,31],[55,-41],[33,61],[169,139],[23,-9],[90,34],[128,4],[45,9],[93,61],[112,26],[-7,-51],[1,-125],[20,-21],[109,-4],[59,29],[43,-38],[48,60],[72,10],[10,24],[52,-14],[-8,-59],[25,-63],[0,-63],[-39,6],[-25,-34],[26,-22],[32,15],[55,-23],[-15,-31],[75,-75],[-41,-12],[-46,11],[-83,-25],[-24,-19],[-36,41],[-100,18],[-28,-76],[22,-64],[-53,7],[-90,83],[-148,39],[-87,-10],[-48,-79],[-72,-11],[-47,-38],[-63,15],[-59,-7],[-53,-45],[-5,-74],[-32,-9],[-61,-58],[-13,-68],[-48,28],[51,82],[22,54],[-27,26],[-32,-46],[-47,-20],[-36,-73],[-52,-8],[-16,82],[-22,-13],[-1,-64],[-39,-41],[-32,-70],[-25,-96],[-82,-169],[-25,-32],[7,-38]],[[19979,11451],[-423,-76],[-208,-34]],[[18395,11275],[87,100],[50,161],[51,99],[36,166],[4,151],[-27,189],[-20,63],[-95,184],[-36,98],[-34,66],[1,42],[26,50],[6,75],[-21,77],[-29,57],[41,59],[52,148],[4,171],[-20,45],[9,30],[62,31],[0,112],[38,5],[18,45],[57,-7],[23,75],[51,56],[18,-37],[0,-91],[-15,-39],[10,-73],[53,-13],[46,131],[1,124],[-16,53],[2,54],[68,71],[71,8],[55,29],[-57,21],[-29,29],[-18,57],[16,43],[52,61],[70,64],[101,-42],[61,-36],[43,19],[53,-13],[40,-37],[16,-42],[92,-3],[34,-30],[115,-41],[26,8],[77,-50],[-11,-22],[49,-66],[34,-71],[-54,29],[-30,-40],[11,-48],[64,-40],[32,-110],[-8,-83],[8,-35],[6,-138],[-37,-52],[-37,-4],[-15,-34],[1,-122],[-44,-16],[1,-32],[-67,-10],[-28,-54],[5,-71],[-12,-36],[25,-54],[118,-44],[55,95],[18,1],[26,91],[53,100],[81,29],[20,34],[42,23],[93,-42],[62,-99],[48,-191],[32,-72],[25,-139],[28,-81],[45,-79],[-15,-37],[-2,-82],[11,-31],[-12,-109],[-25,-42],[-35,7],[3,74],[-32,5],[-47,-41],[19,-43],[-37,-40],[9,-47],[-17,-73],[-62,-33],[-22,-58],[10,-102],[-13,-52],[-61,-66],[-46,-92],[0,-52]],[[19135,14141],[36,4],[70,-19],[-24,-37],[-37,6],[-45,46]],[[18690,13942],[5,56],[38,54],[17,-99],[-28,-27],[-32,16]],[[19434,14292],[12,37],[74,30],[17,34],[77,-69],[-19,-49],[-48,11],[-67,-16],[-46,22]],[[16972,15318],[33,47],[118,73],[142,110],[54,2],[-59,-57],[-40,-59],[-76,-38],[-22,-51],[-105,-54],[-45,27]],[[13547,15973],[432,-4],[447,1],[-2,259],[40,-21],[43,12],[56,-50],[33,-130],[30,-145],[-3,-68],[45,-43],[64,-14],[75,4],[9,-30],[171,-13],[22,-75],[64,2],[76,21],[0,31],[49,25],[155,3],[111,-53],[40,4],[-7,-72],[64,10],[18,-64],[46,-87],[37,18],[-5,66],[53,16],[71,-25],[-2,-37],[63,-37],[64,-2],[4,-57],[62,-11],[61,-28],[76,28],[69,69],[82,49],[58,-96],[167,5],[103,21],[48,-15],[15,-37],[43,-25],[69,28],[51,-14],[-72,-76],[-75,-46],[-238,-102],[-136,-104],[-109,-115],[-49,-81],[-88,-106],[-48,-32],[-68,-76],[-151,-139],[37,-54]],[[15817,14461],[-34,28],[-51,-70],[-36,10],[14,-401],[-28,-43],[-122,-60],[-29,-26],[-31,-90],[-37,-33],[-4,-97],[51,-4],[58,-83],[0,-29],[-47,-75],[-1,-72],[12,-52],[-21,-20],[22,-97],[-22,-127],[135,-115],[78,-9],[63,-78],[74,-23],[60,-43],[27,-90],[77,-51],[61,-60],[66,-14],[76,-102],[21,-48],[-7,-109],[28,-77]],[[13859,12242],[4,830],[1,395],[-16,40],[-85,37],[-38,75],[-41,58],[8,27],[85,68],[32,54],[8,74]],[[13817,13900],[5,101],[-15,62],[-5,104],[-29,31],[-31,75],[-3,62],[-23,53],[2,105],[12,46],[-27,90],[5,111],[-15,178],[3,117],[-83,228],[-8,72],[-30,62],[14,91],[-17,71],[7,143],[19,56],[-51,215]],[[17014,6512],[595,41],[494,42]],[[18239,3442],[-57,-39],[-14,14],[-76,7],[-45,-13],[-37,29],[-103,-13],[-224,-108],[-14,-37],[-41,-17]],[[14402,9848],[-51,26],[7,60],[-38,38],[0,42],[-65,48],[-40,106],[-31,39],[-4,41]],[[17408,7571],[-34,-4]],[[17346,7566],[11,-108],[-39,-24],[15,-47],[-53,-13],[46,-34],[9,-30],[-42,-33],[-24,-58]],[[14769,7453],[-4,342]],[[5630,16924],[349,-79],[630,-133],[285,-56],[630,-117],[557,-92],[492,-76],[655,-91],[586,-71],[496,-53],[349,-33]],[[10659,16123],[-57,-763],[-30,-349],[-75,-944]],[[10497,14067],[-48,-639],[-8,-2]],[[10441,13426],[-318,31],[-515,56],[-7,-5],[-518,64],[-21,5],[-509,67],[-362,52],[-9,6],[-289,41],[-160,26],[-41,2],[-225,34],[-35,13],[-120,19],[-50,-355]],[[10227,10706],[108,1363]],[[10335,12069],[583,-49],[500,-38],[501,-28],[432,-20],[557,-19],[14,-35],[155,-91],[43,-40],[40,3],[50,66],[73,-19],[39,10],[75,-9],[63,14],[41,-16],[40,-51],[69,-9],[137,-74],[-11,-31],[97,-86],[26,5]],[[25658,13599],[-21,-91],[1,-48]],[[24923,13157],[-64,72],[26,118],[-27,88],[-30,297],[15,18],[-3,72],[36,82],[-10,33],[20,50],[-10,50],[24,69],[-46,120],[7,37],[91,52],[38,48],[47,137],[-65,92],[29,121],[-29,48],[11,23]],[[24983,14784],[-8,38],[23,122],[32,57],[33,-28],[42,8],[11,47]],[[24105,11984],[209,-79],[211,-70],[3,-75],[-18,-131]],[[24510,11629],[-23,-49],[-30,-10]],[[24457,11570],[-1,0]],[[24456,11570],[-17,-15],[4,-45],[-17,-16],[9,-56],[59,9],[84,-15],[15,-71],[1,-124],[21,-245],[-62,-248],[-34,-66],[-28,-25],[-46,-71],[-18,-50],[-32,-140],[-58,-58],[-20,3],[9,156],[-77,24],[-69,-6],[-122,58],[-46,46],[-37,6],[-30,95]],[[23945,10716],[-5,16]],[[23940,10732],[16,43]],[[23956,10775],[29,88]],[[23985,10863],[34,41],[50,21],[37,36],[-7,39],[124,149],[40,22],[-31,41],[-39,16],[-58,47],[-19,36],[-47,3],[-23,83],[-64,9],[-20,76],[3,61],[27,16],[14,61],[-52,70],[42,44],[11,51],[36,60],[7,69],[30,55],[25,15]],[[10538,7930],[-24,-342]],[[10514,7588],[-20,2],[-20,-304],[-99,-1400],[-59,-683],[-47,-679],[-679,58],[-612,62],[-613,70],[-19,-90],[52,-63]],[[8398,4561],[-479,59],[-421,57],[-37,-304],[-453,64]],[[24105,11984],[-25,22],[-130,45],[-43,67],[-23,89],[-27,9],[-14,45],[-73,11],[-16,35],[-46,32],[-453,-105],[-686,-148],[-483,-98],[-411,-76],[-30,182]],[[21645,12094],[127,122],[53,73],[72,49],[31,102],[74,70],[-5,47],[-47,71],[-39,13],[-8,54],[-32,2],[7,47],[-18,73],[86,57],[94,50],[64,25],[174,36],[160,9],[95,-49],[71,33],[117,39],[92,7],[107,76],[20,51],[85,96],[55,6],[32,49],[-9,60],[-33,91],[4,43],[29,30],[-46,53],[-20,-21],[-70,81],[13,69],[61,42],[-4,28],[99,83],[32,52],[13,61],[90,153],[70,108],[65,58],[62,75],[56,35],[68,6],[237,53],[350,103]],[[24179,14565],[15,-57],[-7,-57],[26,-22],[4,-130],[61,-83],[1,-73],[25,-62],[-23,-66],[1,-100],[80,-171],[-14,-100],[58,7],[40,-58],[90,-464],[20,-56]],[[24641,11856],[-52,-111],[137,105],[126,4],[74,61],[127,35],[62,28],[92,105],[13,35],[59,-53],[44,19],[41,-32],[50,70],[40,-5],[-96,-80],[-144,-131],[-126,-91],[-101,-85],[-84,-56],[-55,-13],[-97,-59],[-106,-23],[-71,-52],[-60,43],[-4,59]],[[24457,11570],[-1,0]],[[24432,11467],[13,41],[-5,48],[50,25],[23,-26],[-29,-59],[-52,-29]],[[20102,6810],[-2,163],[92,30],[40,40],[-10,73],[63,83],[53,38],[139,21],[23,36],[64,39],[30,54],[77,55],[46,-4],[32,51],[-3,49],[41,18],[16,42],[70,65],[20,-65],[31,2],[41,37],[19,55],[56,45],[70,20],[13,-27],[48,17],[46,133],[33,37],[59,9],[-18,43],[17,40],[-13,46],[11,37]],[[21306,8092],[423,51],[67,14],[207,23],[393,70],[499,97],[794,167],[53,16],[467,105]],[[24209,8635],[-7,-50],[-74,3],[78,-82],[67,-118],[-40,15],[-49,-29],[-16,-30],[-70,-53],[-93,-33],[-21,-43],[-59,-22],[-52,11],[21,-73],[54,18],[72,45],[20,-29],[93,63],[54,10],[34,-41],[-16,-51],[19,-92],[32,47],[-17,77],[46,73],[33,-5],[40,-44],[42,-123],[-14,-84],[-50,6],[-28,-54],[-41,-115],[-20,-26],[-77,-27],[-73,-12],[-47,14],[-73,94],[-16,-22],[47,-77],[-73,12],[-40,-35],[170,-17],[11,-43],[-27,-110],[-59,-79],[-51,-35],[-79,43],[20,-54],[96,-19],[57,63],[65,28],[25,41],[20,-71],[82,53],[-33,-96],[-45,-56],[-6,-28],[-66,-60],[-141,-16],[-148,-97],[-43,-71],[-82,-78],[-84,-113],[-34,-67],[-31,-111],[-19,-135],[-22,-15],[-61,8],[-67,-9],[-72,-23],[-77,-52]],[[23194,6534],[-691,530],[-100,-18],[-476,-75],[-4,80],[-96,102],[-48,-51],[-11,70],[-584,-64],[-98,-24],[-13,21],[-49,-42],[-299,-158]],[[13817,13900],[-351,3],[-471,11],[-478,19],[-302,14],[-554,31],[-666,47],[-498,42]],[[10659,16123],[191,-17],[586,-46],[459,-29],[344,-18],[397,-17],[496,-15],[415,-8]],[[19979,11451],[18,-28],[40,17],[55,-34],[81,-22],[51,-42],[46,14],[12,39],[57,-44],[-107,-33],[23,-44],[48,42],[29,-13],[35,27],[36,-33],[63,-17],[51,40],[51,12],[106,73],[67,-12],[61,13],[61,61],[63,89],[64,70],[27,9],[96,75],[46,20],[166,104]],[[21325,11834],[140,-905]],[[21465,10929],[-50,-21],[-14,-35],[42,-56],[12,-151],[-28,-79],[1,-128],[-25,-40],[11,-36],[-23,-81],[6,-91],[-62,-58],[-43,-82],[-37,-47],[-56,-37],[-58,34],[-42,-56],[0,-49],[-52,-4],[-29,-72],[12,-110],[-31,-65],[-49,33],[-53,18],[-40,-95],[4,-39],[-31,-36],[25,-56],[8,-78],[-49,-18],[-4,-91],[-97,-45],[-33,6]],[[14866,5497],[-62,16],[-79,47],[-66,12],[-50,73],[-129,68],[-34,-58],[-85,-8],[-48,10],[-34,41],[-81,-55],[-49,-16],[-51,16],[-83,-10],[-42,-25],[1,-34],[-63,3],[-22,-52],[-44,60],[-41,-2],[-14,33],[-53,22],[-70,-19],[-17,31],[-38,-11],[-29,73],[-67,-96],[-25,-13],[-1,-48],[-40,7],[-17,45],[15,61],[-67,-3],[-36,-46],[-47,16],[2,43],[-48,-3],[-19,37],[-43,28],[-58,-65],[-45,-30],[-54,23],[13,72],[-71,12],[-18,56],[-26,21],[-101,32],[-19,-35],[-47,-28],[-58,69],[-87,-14],[-121,59],[-23,-12],[-76,14],[-8,84],[-43,55],[-44,30],[-10,-53],[-95,30],[-11,-29],[-50,5],[-95,121],[-59,10],[52,1326],[-264,13],[-597,34],[-661,48]],[[2056,15992],[31,-3],[4,-63],[58,-44],[77,4],[72,-94],[17,-92],[-13,-123],[-20,-82],[31,-37],[171,-102],[70,4],[95,22],[51,22],[30,-18],[92,-5],[51,-38],[30,-1],[47,-37],[3,-46],[49,14],[103,-12],[107,21],[48,-45],[132,-19],[23,19],[98,16],[133,-13],[27,26],[115,-19],[49,0],[55,-20],[70,28],[653,-167],[242,-61]],[[4249,12381],[-766,186],[-595,162]],[[980,13306],[-43,100],[10,41],[-9,53],[24,126],[46,83],[6,58],[-29,72],[-3,64],[87,113],[73,146],[74,95],[48,74],[74,152],[74,187],[132,351],[19,93],[37,61],[41,112],[28,39],[85,257],[36,122],[19,145],[30,12],[19,61],[9,97],[41,-31],[63,-19],[85,22]],[[23985,10863],[-44,12],[-56,-13],[-35,-30],[-31,-64]],[[22060,10400],[-500,-91],[-95,620]],[[21325,11834],[82,55],[238,205]],[[23194,6534],[-83,-52],[-45,-48],[-53,-82],[-58,-120],[-26,-116],[9,-76],[-27,-65],[-39,-34],[-9,-56],[-109,-17],[-17,-51],[23,-22],[-55,-49],[-10,-33],[-74,-52],[3,-46],[-52,-63],[-62,-22],[-60,-48],[-39,-47],[-79,-26],[37,-43],[-5,-47],[-57,-42],[-79,19],[-26,-30],[57,-41],[-32,-55],[-49,-25],[-14,-60]],[[10335,12069],[106,1357]],[[20301,7950],[209,24],[292,43],[374,59],[4,16],[126,0]],[[15264,2817],[-90,-8],[-52,-16],[-295,-147],[47,83],[-120,-35],[33,79],[0,77],[-31,19],[-33,-16],[-31,-60],[-39,18],[-40,-45],[1,-63],[69,-71],[0,-81],[-44,-24],[-33,-46],[-74,-62],[24,-34],[-144,-137],[-46,-17],[-171,-108],[-174,-90],[-105,-62],[-68,-54],[-30,-43],[-66,-36],[-109,-82],[-119,-124],[-3,41],[24,48],[79,68],[50,8],[66,66],[80,28],[-7,51],[-131,-70],[-12,61],[-52,-26],[-6,-50],[13,-42],[-83,-70],[-52,17],[-3,27],[-66,-31],[-44,-43],[47,-34],[49,44],[5,-44],[-84,-137],[-33,36],[-78,-23],[-5,-39],[28,-40],[51,-19],[-40,-86],[-28,-106],[-27,-60],[-39,-15],[-8,50],[-63,-56],[-14,-30],[58,-10],[61,18],[-26,-276],[-11,-27],[7,-76],[24,-107],[23,-37],[46,-125],[-12,-48],[26,-93],[67,-33],[3,-57],[-76,-3],[-51,-30],[-5,-41],[-84,32],[-72,82],[-76,17],[-57,25],[-94,-14],[-38,18],[-82,5],[-77,59],[-45,48],[-22,-10],[-49,34],[-48,-13],[-48,65],[-36,28],[-44,-11],[-106,33],[-4,54],[-42,41],[-20,128],[-32,81],[-33,26],[-26,64],[-38,35],[15,102],[-7,50],[-31,16],[-3,46],[17,93],[-27,15],[11,44],[-50,54],[-67,19],[-26,46],[-59,49],[-6,62],[-52,70],[-14,49],[-35,56],[-71,38],[-43,62],[-28,81],[8,18],[-38,85],[7,23],[-53,52],[-3,55],[-19,59],[-54,81],[-9,108],[-34,28],[-30,75],[-111,86],[-28,65],[-50,15],[-11,27],[-47,17],[-26,35],[8,37],[-39,29],[-17,63],[-28,14],[-44,-16],[-14,26],[-45,-27],[-85,39],[-150,-2],[-122,71],[-22,-4],[-30,-57],[-51,-1],[-119,-28],[-35,-85],[-38,-45],[-25,-109],[-22,-2],[-19,-61],[19,-28],[-74,-26],[-25,-50],[-72,-81],[-53,10],[-49,48],[-40,-1],[-69,86],[-93,25],[-31,60],[-105,30],[-101,77],[-18,60],[-69,32],[-92,91],[-42,144],[-29,47],[-5,87],[13,95],[-34,86],[-48,66],[0,83],[-11,41],[-37,31],[-72,103],[-50,43],[-94,40],[-7,35],[-71,69],[-21,68],[-85,65],[-44,88],[-33,20],[-8,37],[-63,29],[-72,66],[-70,180],[-75,44]],[[14557,2397],[98,91],[39,47],[44,-3],[-181,-135]],[[13300,1177],[-8,55],[72,184],[24,15],[41,115],[40,9],[-82,-147],[-44,-98],[-43,-133]],[[7014,11815],[-102,-678],[257,-46],[457,-70],[229,-33]],[[5016,8712],[70,399],[343,1888],[183,998],[12,74]],[[24179,14565],[217,61],[236,54],[351,104]],[[23318,9896],[-32,-19],[-37,-93],[-2,-37],[36,-65],[20,-2],[101,57],[3,-48],[41,-30],[5,-28],[67,-21],[112,14],[94,-92],[122,-40],[-25,-54],[20,-88],[-16,-53],[-94,8],[10,-33],[118,-8],[-27,-25],[63,-43],[14,-49],[-24,-40],[-63,42],[-8,-32],[53,-56],[-11,-46],[80,-66],[-53,-99],[-35,38],[-93,48],[-12,-49],[45,-12],[85,-69],[50,6],[16,55],[110,-18],[44,20],[45,-102],[69,-132]],[[21070,8713],[-8,-44],[26,-17],[25,-63],[38,-37],[46,-1],[49,-43],[58,13],[55,56],[31,49],[78,-59],[52,39],[80,26],[178,154],[43,-27],[78,73],[-20,35],[46,52],[-44,37],[47,136],[66,93],[25,85],[4,60],[45,64],[31,116],[-9,42],[11,70],[59,-18],[40,-57],[85,-16],[40,64],[21,116],[44,145],[71,-47],[25,90],[81,72],[6,48],[65,107],[-18,59],[27,73],[-17,75],[290,-174],[29,138]],[[24314,9695],[-35,-105],[-29,-2],[-29,-52],[-23,-72],[-8,-91],[12,-24],[-26,-82],[14,-8],[-38,-114],[-5,-74],[-29,-59],[-34,-8],[-48,87],[0,214],[32,128],[35,43],[18,76],[-35,9],[39,47]],[[23958,9561],[-25,-6]],[[2056,15992],[-50,22],[-7,28],[-85,-18],[-34,60],[-45,-9],[28,69],[44,171],[7,-48],[-19,-55],[-13,-84],[24,-3],[11,65],[38,15],[-4,88],[52,50],[-56,0],[-33,40],[25,78],[54,20],[2,76],[-54,11],[14,184],[-19,90],[20,118],[4,115],[-14,58],[-35,52],[-10,63],[17,85],[-3,56],[60,94],[46,10],[59,-78],[55,-33],[61,-80],[72,-39],[67,-13],[62,-31],[46,-38],[76,-24],[40,21],[37,-71],[52,-6],[64,13],[28,-37],[-16,-96],[2,-64],[-58,-27],[-49,-2],[-55,-95],[78,11],[51,74],[85,54],[-14,-114],[-43,-151],[-23,-22],[-19,-60],[-41,-73],[-41,34],[-65,-91],[41,-29],[49,36],[42,58],[37,-21],[14,36],[49,5],[6,26],[-7,134],[38,12],[-24,46],[33,36],[4,53],[30,19],[31,62],[49,35],[-38,66],[10,79],[-22,22],[-52,-56],[13,77],[51,-14],[13,46],[-43,50],[-2,36],[-43,0],[8,52],[28,16],[47,-51],[19,56],[26,22],[-24,53],[9,75],[-32,1],[-33,38],[-19,113],[33,22],[409,-127],[717,-204],[479,-128],[264,-68],[481,-120]],[[2732,17167],[62,70],[12,29],[49,-79],[-49,4],[-25,-27],[20,-95],[60,-77],[-3,-56],[-44,-3],[-3,43],[-43,38],[16,87],[-26,7],[-26,59]],[[2704,17351],[23,44],[49,-43],[-27,-54],[-45,53]],[[2696,17460],[61,40],[63,-55],[-40,-28],[-73,15],[-11,28]],[[2619,17460],[45,5],[30,-70],[-32,-42],[-31,35],[-12,72]],[[2682,16572],[20,57],[28,-41],[-48,-16]],[[15817,14461],[32,-16],[67,13],[93,47],[28,1],[74,45],[104,35],[55,59],[43,15],[52,-44],[-54,-96],[16,-37],[-24,-26],[-1,-55],[96,61],[50,-41],[75,-18]],[[17846,13506],[-11,-81],[-83,-25],[-1,-39],[-60,-125],[-13,-111],[47,-12],[28,60],[40,19],[16,58],[43,82],[55,16],[33,38],[30,94],[24,35],[7,57],[39,20],[13,45],[54,32],[5,-52],[-36,-48],[14,-39],[-56,-91],[-2,-64],[-46,-64],[-25,-104],[-33,-91],[-17,-132],[19,-95],[-53,-57],[-28,-156],[24,-78],[2,-51],[-34,-89],[-1,-68],[-24,-50],[-13,-99],[31,-121],[-12,-21],[27,-52],[17,-85],[33,-34],[-19,-102],[15,-97]],[[18115,13711],[2,41],[54,-1],[-15,-49],[-41,9]],[[23945,10716],[-5,16]],[[23956,10775],[-32,-32],[-4,-39],[28,-18],[-3,-59],[65,-77],[31,-16],[38,-77],[18,-90],[32,-19],[32,-67],[69,-58],[57,-11],[61,-211]],[[25647,12640],[-39,-3],[-37,-52],[27,-127],[-14,-76],[-59,-23],[-41,-34],[-65,-25]],[[25730,12513],[-87,-39],[-13,25],[17,90],[19,31]],[[5211,1234],[-75,-57],[-61,26],[-57,43],[-71,94],[-123,67],[-8,12]],[[4816,1419],[-32,40]],[[4784,1459],[23,27],[-17,43],[-72,-48],[-60,8],[-78,51],[-105,27],[-103,-7],[-36,-12],[-35,43],[-39,1],[-30,27],[2,56],[-47,-46],[-43,33],[-15,46],[-61,3],[-23,61],[-38,20],[-69,-38]],[[3938,1754],[-32,26],[-35,-34],[40,-65],[-82,-127],[-76,25],[-36,-20],[-44,-53],[-123,-89],[-25,16],[-39,-19],[-23,24],[14,37],[47,8],[-1,35],[-37,34],[24,57],[33,38],[24,74],[-12,41],[38,11],[73,50],[34,-32],[34,22],[-22,52],[-56,19],[-102,-55],[-44,-59],[-53,-46],[-13,-45],[-40,-21],[-3,-62],[-60,-57],[-37,2],[-19,-33],[-44,-16],[-20,-47],[89,-64],[-12,-39],[-58,-23],[-36,-51],[-1,-33],[-52,-34],[-49,7],[-13,-34],[-53,-9],[-27,-50],[-34,9],[-37,-27],[-7,-52],[-64,-53],[-47,-21],[-28,20],[-35,-29],[-73,-30],[-24,-24],[15,-43],[-78,-41],[-93,-20],[-91,-6],[-47,-32],[-87,0],[-18,14],[-57,-62],[-117,0],[-44,-20],[19,63],[54,3],[13,24],[80,69],[59,30],[50,5],[67,-33],[63,75],[70,45],[61,16],[83,52],[53,60],[90,59],[-7,24],[50,163],[56,45],[-3,33],[-119,-35],[-50,69],[-43,0]],[[2689,1465],[24,-68]],[[2713,1397],[-36,-21],[-44,123],[-21,-26],[-34,31],[-12,40],[-63,-34]],[[2503,1510],[-49,-7],[-47,-33],[-18,24],[18,72],[31,15]],[[2438,1581],[-45,36],[46,53],[-29,141],[-108,-28],[-62,4],[-36,20],[-31,120],[106,109],[-66,5],[-8,22],[-17,1],[-12,9],[-10,-6],[0,41],[-43,14],[7,44],[-26,20],[24,73],[28,34],[14,67],[76,70],[25,-4],[42,33],[28,-13],[19,-51],[21,87],[5,2],[1,1],[-1,2],[6,3],[5,3],[3,14],[24,14],[48,-21],[106,87],[30,-30],[67,0],[48,54],[1,111],[-19,41],[52,43],[-5,79]],[[2752,2885],[-45,-31],[-25,9],[-90,-38],[-49,6],[-73,34],[-86,8],[-26,-12],[-105,66],[-14,41],[17,30],[-30,62],[55,26],[-37,39],[-48,21],[-50,59],[64,42],[36,-4],[56,39],[56,-8],[45,45],[66,2],[33,23],[83,-21],[-31,-98],[64,-31],[31,0],[75,-37],[40,44],[40,18],[83,-8],[2,58],[-69,20],[-36,-20],[-26,54],[35,49],[-13,28],[-59,-3],[-104,61],[4,73],[-11,51],[-72,119],[-53,51],[-31,55],[36,56],[19,73],[70,-26],[90,-6],[74,36],[49,51],[26,90],[96,81]],[[2914,4162],[104,23],[118,95],[24,-17],[105,2],[44,22],[82,88],[78,-80],[-41,-24],[34,-40],[16,40],[58,-1],[-3,-53],[117,11],[69,-34],[-22,-64],[39,-40],[104,-25],[66,23],[49,-4],[63,-52],[91,-46],[75,3],[80,-51],[166,28],[32,-15],[48,-53],[37,-14],[34,-40],[31,4],[30,-2230],[108,-26],[30,36],[63,6],[-10,-60],[54,-40],[10,-31],[114,-113],[21,-74],[64,60],[27,3],[35,110],[73,42],[52,-49],[12,-63],[55,-30],[29,-57],[47,-26],[56,-61],[29,-60],[83,-137],[66,-93],[-4,-39],[129,-88],[35,-4],[47,-44],[37,0],[14,-48],[-12,-27],[34,-103],[-34,-89],[-30,-34],[-33,1],[-27,84],[21,28],[-13,87],[-46,59],[-55,-33],[-20,-88],[-32,41],[24,68],[-2,52],[-149,171],[-44,11],[0,43],[-64,134],[-77,79],[-23,2],[-52,98],[-22,81],[-20,-6],[45,-123],[15,-67],[-24,-19],[-67,52]],[[2007,762],[33,-27],[4,-50],[-38,-21],[-58,15],[-36,-24],[-60,5],[73,96],[23,-12],[59,18]],[[1622,633],[44,-20],[-17,-61],[-56,-29],[-48,3],[-64,-18],[-13,31],[78,4],[22,40],[2,47],[52,3]],[[1273,474],[32,14],[26,46],[41,8],[24,37],[44,8],[10,-43],[-58,-15],[-32,-32],[-87,-23]],[[657,600],[-13,-59],[-84,3],[97,56]],[[5384,1168],[53,-67],[13,-100],[-77,-76],[-4,94],[-22,54],[-10,79],[47,16]],[[5620,573],[33,41],[55,-50],[9,-122],[-20,0],[-50,77],[-58,33],[-6,38],[-47,40],[26,39],[-24,76],[29,2],[55,-50],[24,-74],[-26,-50]],[[5779,726],[37,-50],[6,-64],[-21,-51],[-78,46],[16,103],[40,16]],[[5636,794],[29,-34],[-13,-58],[-42,33],[-7,29],[33,30]],[[5236,1136],[-10,-14]],[[5226,1122],[48,34]],[[5274,1156],[41,-13],[21,-111],[-29,-14],[-71,50],[21,-31],[-41,-33],[-45,70]],[[5171,1074],[-13,13],[10,84],[50,17],[37,-23],[-19,-29]],[[5299,850],[3,3]],[[5302,853],[-3,-3]],[[5453,944],[105,-27],[11,-58],[-26,-51],[-52,-5],[-9,71],[-44,54],[15,16]],[[5569,891],[46,-44],[-44,-22],[-2,66]],[[5462,867],[-14,-79],[-42,58],[20,54],[36,-33]],[[5328,851],[-37,15],[-26,92],[-3,60],[22,9],[49,-41],[45,-146],[3,-110],[-59,91],[6,30]],[[2179,2069],[19,-30],[39,-18],[-69,-97],[-56,64],[63,56],[4,25]],[[2026,1994],[39,-42],[-6,-85],[-62,-1],[-50,15],[-56,67],[16,36],[119,10]],[[2386,2569],[36,-40],[-23,-21],[-5,-14],[-4,-5],[-4,-1],[0,-3],[-4,0],[-1,-1],[-2,1],[-2,5],[-15,-1],[-33,66],[57,14]],[[2333,2528],[27,-36],[-7,-53],[-68,48],[48,41]],[[1702,2907],[5,-46],[44,-25],[56,14],[26,-63],[44,-47],[70,-33],[-24,-30],[-41,22],[-29,-18],[-30,28],[-47,77],[-41,24],[-44,-16],[-27,54],[38,59]],[[3408,1256],[35,-38],[-15,-24],[-50,-4],[-39,-22],[-33,53],[65,53],[37,-18]],[[3294,1174],[48,-37],[37,4],[3,-107],[-43,-26],[-61,-5],[-86,-90],[-3,42],[-62,17],[-8,100],[47,40],[51,-9],[-2,41],[32,10],[48,-27],[-1,47]],[[4784,1459],[-1,2]],[[4783,1461],[1,-2]],[[4783,1461],[-1,3]],[[4782,1464],[1,-3]]],"objects":{"states":{"type":"GeometryCollection","geometries":[{"arcs":[[0,1,2,3,4]],"type":"Polygon","properties":{"NAME":"Alabama","ST":"AL","STATEFP":"01","X":855271.7589679677,"Y":-485285.0415507499}},{"arcs":[[5,6,7,8,9]],"type":"Polygon","properties":{"NAME":"Arizona","ST":"AZ","STATEFP":"04","X":-1418564.485502027,"Y":-238800.9905171948}},{"arcs":[[10,11,12,13,14,15]],"type":"Polygon","properties":{"NAME":"Arkansas","ST":"AR","STATEFP":"05","X":318098.5591603887,"Y":-275856.3670293095}},{"arcs":[[[-10,16,17,18]],[[19]],[[20]],[[21]],[[22]]],"type":"MultiPolygon","properties":{"NAME":"California","ST":"CA","STATEFP":"06","X":-2072529.90499936,"Y":161684.3612016907}},{"arcs":[[23,24,25,26,27,28]],"type":"Polygon","properties":{"NAME":"Colorado","ST":"CO","STATEFP":"08","X":-817891.4466291738,"Y":208814.6325181203}},{"arcs":[[29,30,31,32]],"type":"Polygon","properties":{"NAME":"Connecticut","ST":"CT","STATEFP":"09","X":1905816.0751020052,"Y":698036.2929050631}},{"arcs":[[33,34]],"type":"Polygon","properties":{"NAME":"District of Columbia","ST":"DC","STATEFP":"11","X":1621059.7013702418,"Y":320098.2916303818}},{"arcs":[[[-1,35,36]],[[37]],[[38]]],"type":"MultiPolygon","properties":{"NAME":"Florida","ST":"FL","STATEFP":"12","X":1395457.5784975826,"Y":-885543.6802549034}},{"arcs":[[-36,-5,39,40,41,42]],"type":"Polygon","properties":{"NAME":"Georgia","ST":"GA","STATEFP":"13","X":1188190.1588273256,"Y":-485535.3897664229}},{"arcs":[[[43]],[[44]],[[45]],[[46]],[[47]],[[48]],[[49]],[[50]]],"type":"MultiPolygon","properties":{"NAME":"Hawaii","ST":"HI","STATEFP":"15","X":-875509.0048471711,"Y":-1197074.001995326}},{"arcs":[[51,52,53,54,55,56,57]],"type":"Polygon","properties":{"NAME":"Idaho","ST":"ID","STATEFP":"16","X":-1496480.200787924,"Y":831477.5442031382}},{"arcs":[[58,59,60,61,62,63]],"type":"Polygon","properties":{"NAME":"Illinois","ST":"IL","STATEFP":"17","X":560664.7759398912,"Y":321451.3847902393}},{"arcs":[[64,-63,65,66,67]],"type":"Polygon","properties":{"NAME":"Indiana","ST":"IN","STATEFP":"18","X":833235.7988301852,"Y":308302.4695505889}},{"arcs":[[68,69,70,71,72,-60]],"type":"Polygon","properties":{"NAME":"Iowa","ST":"IA","STATEFP":"19","X":205735.7903710294,"Y":511152.3342194205}},{"arcs":[[73,74,75,-25]],"type":"Polygon","properties":{"NAME":"Kansas","ST":"KS","STATEFP":"20","X":-205456.1085637171,"Y":114672.9071161429}},{"arcs":[[[-65,76,77,78,79,80,-64]],[[81,82]]],"type":"MultiPolygon","properties":{"NAME":"Kentucky","ST":"KY","STATEFP":"21","X":1009641.5355216666,"Y":85989.1177162814}},{"arcs":[[[-13,83,84,85]],[[86]],[[87]]],"type":"MultiPolygon","properties":{"NAME":"Louisiana","ST":"LA","STATEFP":"22","X":316748.3451312538,"Y":-617352.7635985452}},{"arcs":[[[88,89]],[[90]],[[91]]],"type":"MultiPolygon","properties":{"NAME":"Maine","ST":"ME","STATEFP":"23","X":2070404.1465318133,"Y":1175516.2010869705}},{"arcs":[[92,93,94,95,96,-34,97,98,99]],"type":"Polygon","properties":{"NAME":"Maryland","ST":"MD","STATEFP":"24","X":1607861.3575440207,"Y":367356.9747121343}},{"arcs":[[[102,103,104,-31,105,106,107,108]],[[109]],[[110]]],"type":"MultiPolygon","properties":{"NAME":"Massachusetts","ST":"MA","STATEFP":"25","X":1959892.617101432,"Y":795976.9337792025}},{"arcs":[[[111,112]],[[113,-67,114]],[[115]],[[116]],[[117]],[[118]]],"type":"MultiPolygon","properties":{"NAME":"Michigan","ST":"MI","STATEFP":"26","X":899881.7285996445,"Y":669733.8475229964}},{"arcs":[[119,120,-72,121,122]],"type":"Polygon","properties":{"NAME":"Minnesota","ST":"MN","STATEFP":"27","X":111170.0122693336,"Y":1013392.2770150183}},{"arcs":[[123,-3,124,-84,-12]],"type":"Polygon","properties":{"NAME":"Mississippi","ST":"MS","STATEFP":"28","X":589522.9376762345,"Y":-512421.5586537886}},{"arcs":[[125,-69,-59,-81,126,-83,127,-16,128,-75]],"type":"Polygon","properties":{"NAME":"Missouri","ST":"MO","STATEFP":"29","X":300850.3966062765,"Y":89246.1303551525}},{"arcs":[[-57,129,130,131,132]],"type":"Polygon","properties":{"NAME":"Montana","ST":"MT","STATEFP":"30","X":-1037537.75589546,"Y":1135039.2301822559}},{"arcs":[[133,134,-70,-126,-74,-24]],"type":"Polygon","properties":{"NAME":"Nebraska","ST":"NE","STATEFP":"31","X":-314247.0191926633,"Y":454323.4991230773}},{"arcs":[[135,-108,136,137,-89]],"type":"Polygon","properties":{"NAME":"New Hampshire","ST":"NH","STATEFP":"33","X":1939205.972737547,"Y":926780.5709505031}},{"arcs":[[138,139,140,141,142,143,144,145]],"type":"Polygon","properties":{"NAME":"New Jersey","ST":"NJ","STATEFP":"34","X":1781227.8717108746,"Y":431711.3479621321}},{"arcs":[[146,147,148,-8,-27]],"type":"Polygon","properties":{"NAME":"New Mexico","ST":"NM","STATEFP":"35","X":-914744.2713960214,"Y":-287250.6098021388}},{"arcs":[[[-139,149,150,151,-106,-30,152]],[[154]]],"type":"MultiPolygon","properties":{"NAME":"New York","ST":"NY","STATEFP":"36","X":1700284.8073894512,"Y":809893.1168240933}},{"arcs":[[155,156,157,158,-41]],"type":"Polygon","properties":{"NAME":"North Carolina","ST":"NC","STATEFP":"37","X":1575640.6778975055,"Y":-85787.1549347275}},{"arcs":[[159,-131,160,-123]],"type":"Polygon","properties":{"NAME":"North Dakota","ST":"ND","STATEFP":"38","X":-338813.0591482639,"Y":1120548.6710444293}},{"arcs":[[-114,161,162,163,-77,-68]],"type":"Polygon","properties":{"NAME":"Ohio","ST":"OH","STATEFP":"39","X":1106682.6774174657,"Y":377792.1083336471}},{"arcs":[[164,-147,-26,-76,-129,-15]],"type":"Polygon","properties":{"NAME":"Oklahoma","ST":"OK","STATEFP":"40","X":-134177.995258352,"Y":-228673.6552166736}},{"arcs":[[165,-54,166,-18,167]],"type":"Polygon","properties":{"NAME":"Oregon","ST":"OR","STATEFP":"41","X":-1943053.780759427,"Y":959209.6157659808}},{"arcs":[[168,-100,169,-163,170,-150,-146]],"type":"Polygon","properties":{"NAME":"Pennsylvania","ST":"PA","STATEFP":"42","X":1512088.8728819941,"Y":521852.1372110442}},{"arcs":[[-159,171,-42]],"type":"Polygon","properties":{"NAME":"South Carolina","ST":"SC","STATEFP":"45","X":1396602.8968325963,"Y":-299766.9942549393}},{"arcs":[[-132,-160,-122,-71,-135,172]],"type":"Polygon","properties":{"NAME":"South Dakota","ST":"SD","STATEFP":"46","X":-335439.1081615659,"Y":787242.7115576853}},{"arcs":[[-156,-40,-4,-124,-11,-128,-82,-127,-80,173]],"type":"Polygon","properties":{"NAME":"Tennessee","ST":"TN","STATEFP":"47","X":862209.0470675046,"Y":-144737.9405674768}},{"arcs":[[[-148,-165,-14,-86,174]],[[175]],[[176]]],"type":"MultiPolygon","properties":{"NAME":"Texas","ST":"TX","STATEFP":"48","X":-253520.8950180072,"Y":-698619.4610730355}},{"arcs":[[177,-28,-7,178,-52]],"type":"Polygon","properties":{"NAME":"Utah","ST":"UT","STATEFP":"49","X":-1328137.100443579,"Y":291412.515068655}},{"arcs":[[-107,-152,179,-137]],"type":"Polygon","properties":{"NAME":"Vermont","ST":"VT","STATEFP":"50","X":1838217.4611017562,"Y":960357.2774004566}},{"arcs":[[[-98,-35,-97,180,-157,-174,-79,181]],[[-95,182]]],"type":"MultiPolygon","properties":{"NAME":"Virginia","ST":"VA","STATEFP":"51","X":1540958.7354417534,"Y":153834.4911081562}},{"arcs":[[[184,-55,-166]],[[185]],[[186]],[[187]],[[188]],[[189]]],"type":"MultiPolygon","properties":{"NAME":"Washington","ST":"WA","STATEFP":"53","X":-1807138.180099809,"Y":1341065.179344447}},{"arcs":[[-78,-164,-170,-99,-182]],"type":"Polygon","properties":{"NAME":"West Virginia","ST":"WV","STATEFP":"54","X":1306536.1509124474,"Y":234909.0383644013}},{"arcs":[[[-121,190,-112,191,-61,-73]],[[192]]],"type":"MultiPolygon","properties":{"NAME":"Wisconsin","ST":"WI","STATEFP":"55","X":478615.2632004721,"Y":838636.8802472121}},{"arcs":[[-133,-173,-134,-29,-178,-58]],"type":"Polygon","properties":{"NAME":"Wyoming","ST":"WY","STATEFP":"56","X":-934491.2130692517,"Y":672717.0947645989}},{"arcs":[[-169,-145,194,-93]],"type":"Polygon","properties":{"NAME":"Delaware","ST":"DE","STATEFP":"10","X":1757891.7060257266,"Y":325622.3514566758}},{"arcs":[[-167,-53,-179,-6,-19]],"type":"Polygon","properties":{"NAME":"Nevada","ST":"NV","STATEFP":"32","X":-1753803.878138776,"Y":416253.8632834449}},{"arcs":[[[-32,-105,195]],[[-103,196]]],"type":"MultiPolygon","properties":{"NAME":"Rhode Island","ST":"RI","STATEFP":"44","X":1992177.9012704247,"Y":736705.2410935495}},{"arcs":[[[197,198,199,200,201,202,203,204,205,206]],[[207]],[[208]],[[209]],[[210]],[[211]],[[212]],[[213]],[[214]],[[215,216,217,218]],[[221]],[[222]],[[223]],[[224]],[[225]],[[226]],[[227]],[[228]],[[229]],[[230]],[[231]]],"type":"MultiPolygon","properties":{"NAME":"Alaska","ST":"AK","STATEFP":"02","X":-1814365.755563385,"Y":-863717.9711204094}}]}}}';return function(){if(!t){var r=JSON.parse(n);t={states:e.feature(r,r.objects.states),statelines:e.meshes(r,r.objects.states,function(e,t){return e!=t})}}return t}}),define("map2016/asset-loader",["d3/3","../nytg-vote-map/lib/topojson-utils","underscore/nyt","../nytg-vote-map/lib/vmap-utils","./map-utils","./map-simple-states"],function(e,t,n,r,i,s){function g(e,n){var r=t.feature(e,e.objects.districts),i=t.mesh(e,e.objects.districts,function(e,t){return e.properties.ST==t.properties.ST?e.properties.ST:!1}),s=i.features.reduce(function(e,t){return e[t.id]=t,e},{}),o=t.meshes(e,e.objects.districts,function(e,t){return e!=t}),u={"house-districts":r,innerlines:o,states:t.feature(e,e.objects.states),statelines:t.meshes(e,e.objects.states,function(e,t){return e!=t}),innerlines_by_state:s,outerlines:t.meshes(e,e.objects.states,function(e,t){return e==t})};return e.objects.cities&&(u.cities=t.feature(e,e.objects.cities)),u}function y(e,n){var r=t.feature(e,e.objects.counties),i=t.mesh(e,e.objects.counties,function(e,t){return e.properties.ST==t.properties.ST?e.properties.ST:!1}),s=i.features.reduce(function(e,t){return e[t.id]=t,e},{}),o={counties:r,states:t.feature(e,e.objects.states),statelines:t.meshes(e,e.objects.states,function(e,t){return e!=t}),innerlines_by_state:s,outerlines:t.meshes(e,e.objects.states,function(e,t){return e==t})};return e.objects.cities&&(o.cities=t.feature(e,e.objects.cities)),o}function b(e,t){var r=n.countBy(t,function(e){return e});e.geometries=e.geometries.filter(function(e){return e.properties.ST in r})}function w(e,n){var r=t.feature(e,e.objects.counties),i={cities:t.feature(e,e.objects.cities),state:t.mesh(e,e.objects.counties,function(e,t){return e==t}),innerlines:t.meshes(e,e.objects.counties,function(e,t){return e!=t})};return i[n]=r,i}var o={},u=[],a="https://int.nyt.com/newsgraphics/2016/elections/primaries/topojson/usa/",f=a+"states-albers-750/",l=a+"counties-mixed-albers-19p.json",c=a+"counties-mixed-albers-10p.json",h=a+"counties-albers-19p-v2.json",p=a+"counties-albers-10p-v2.json",d=a+"cd115-albers-v2.json",v=a+"counties-general-albers-19p.json",m=a+"counties-general-albers-10p.json";return o.loadGeography=function(t,i){var o=t.map_extent=="single-state"?t.state_id:null,a=t.geography_type,b=t.map_name=="all-counties"||t.election_type=="general",E,S,x,T,N=t.map_extent=="national"&&(t.map_type=="leader"||t.map_type=="leader-no-gain")&&!t.state_id&&a=="counties";o?(a&&a!="states"&&a!="counties"&&(o+="_"+a),E=f+o+".json?c=1",S=function(e){return w(e,a)}):a=="house-districts"?(E=d,S=g):t.election_type=="general"?(E=t.map_width<600?m:v,S=y):(t.map_width<600?E=b?p:c:E=b?h:l,S=y),T={url:E},x=n.findWhere(u,T),x?T=x:(u.push(T),T.loader=new r.EventDispatcher,e.json(E,function(e,n){var r={geo:n?S(n,t):null};if(e)throw console.error(E),e;T.geo=r.geo,T.loader.dispatchEvent("load",r)})),N?i(null,s()):T.geo?i(null,T.geo):T.loader.on("load",function(e){i(e.error,e.geo)})},o}),define("nytg-vote-map/lib/vmap-color",["./mbloch-utils"],function(e){var t=e.utils,n={memos:{},nameIndex:{black:"#000000",white:"#ffffff"},getRGB:function(e,t,n){return e<<16|t<<8|n},getR:function(e){return e>>16&255},getG:function(e){return e>>8&255},getB:function(e){return e&255}};return n.interpolate=function(e,r,i){var s=t.interpolate(n.getR(e),n.getR(r),i),o=t.interpolate(n.getG(e),n.getG(r),i),u=t.interpolate(n.getB(e),n.getB(r),i),a=n.getRGB(s,o,u);return a},n.parseHex=function(e){var t;if(/^#[0-9a-f]{6}$/i.test(e))t=e;else if(/^#[0-9a-f]{3}$/i.test(e))t="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(!(e in n.nameIndex))throw new Error("Color.parseHex() Invalid color: ["+e+"]");t=n.nameIndex[e]}var r=parseInt(t.substr(1,2),16),i=parseInt(t.substr(3,2),16),s=parseInt(t.substr(5,2),16);return n.getRGB(r,i,s)},n.rgbToHex=function(e){if(!t.isNumber(e))throw new Error("Expected a number.");var n=e.toString(16);while(n.length<6)n="0"+n;return"#"+n},n.rgbAlphaToRgba=function(e,t){return"rgba("+n.getR(e)+","+n.getG(e)+","+n.getB(e)+","+t.toFixed(2)+")"},n.hexAlphaToRgba=function(e,t){var r=n.parseHex(e);return n.rgbAlphaToRgba(r,t)},n.parseColor=function(e){return t.isNumber(e)?e:n.parseHex(e)},n.formatAsCSS=function(e,r){var i=n.memos,s=e+(r===undefined?"":"|"+r),o;return s in i?i[s]:(r<1?t.isString(e)?o=n.hexAlphaToRgba(e,r):o=n.rgbAlphaToRgba(e,r):t.isString(e)?o=e:o=n.rgbToHex(e),i[s]=o,o)},n.getOverlayColor=function(e,t,r,i){var s=n.parseColor(e),o=n.calcOverlayColor(s,t,r),u=Math.min(i||1,o.alpha);return n.formatAsCSS(o.rgb,u)},n.calcOverlayColor=function(e,t,n){t=t==null?16777215:t,n=n==null?0:n;var r=this.getMinAlpha(e,t);n>r&&(r=n);var i=this.adjustColorByAlpha(e,r,t);return{alpha:r,rgb:i}},n.getMinChannelAlpha=function(e,t){var n=.1,r=(e-(1-n)*t)/n,i=n;return r<0?i=1-e/t:r>255&&(i=(e-t)/(255-t)),t<e&&t>102&&(i=.35),i},n.getMinAlpha=function(e,t){var n=this.getR(e),r=this.getG(e),i=this.getB(e),s=this.getR(t),o=this.getG(t),u=this.getB(t),a=this.getMinChannelAlpha(n,s),f=this.getMinChannelAlpha(r,o),l=this.getMinChannelAlpha(i,u);return Math.max(a,l,f)},n.flattenChannel=function(e,t,n){var r=e*t,i=(1-t)*n;return r+i},n.flattenChannels=function(e,t,r,i){if(e.length!==t.length)throw new Error("Mismatched channel / alpha data");var s=r,o;for(var u=0;u<e.length;u++)o=t[u],i&&(o=(o*255|0)/255),s=n.flattenChannel(e[u],t[u],s),i&&(s|=0);return Math.floor(s)},n.flattenColors=function(e,t,r,i){var s=e.map(n.getR),o=e.map(n.getG),u=e.map(n.getB),a=n.flattenChannels(s,t,n.getR(r),i),f=n.flattenChannels(o,t,n.getG(r),i),l=n.flattenChannels(u,t,n.getB(r),i);return n.getRGB(a,f,l)},n.flattenColor=function(e,t,r){return n.flattenColors([e],[t],r,!0)},n.adjustColorByAlpha=function(e,n,r){r===undefined&&(r=16777215);var i=this.getR(e),s=this.getG(e),o=this.getB(e),u=this.getR(r),a=this.getG(r),f=this.getB(r),l=(i-(1-n)*u)/n,c=(s-(1-n)*a)/n,h=(o-(1-n)*f)/n;return l=Math.round(t.clamp(l,0,255)),c=Math.round(t.clamp(c,0,255)),h=Math.round(t.clamp(h,0,255)),this.getRGB(l,c,h)},n}),define("map2016/map-colors",["underscore/nyt","d3/3","../nytg-vote-map/lib/vmap-utils","../nytg-vote-map/lib/vmap-color"],function(e,t,n,r){function D(){Object.keys(c).forEach(function(e){var n=c[e],r=g[e];r||(g[e]=t.hcl(n).brighter().toString())})}function P(){var n={};return e.keys(c).forEach(function(e){var r=A[e],i=c[e],s=r[0],o=t.hcl(i).darker(.5).toString(),u=t.interpolateLab(s,o),a=u(.31),f=u(.66);n[e]=[s,a,f,o]}),n}function H(){var n={};return e.keys(c).forEach(function(e){var r=c[e],i=t.hsl(r),s=t.hsl(r);s.l=.9,s.s+=.65*(1-s.s),s.l*=v[e]||1,s.s*=m[e]||1;var o=t.interpolateHsl(s,i);n[e]=[o(0),o(.333),o(.667),o(1),i.darker(.75).toString()]}),n}function B(e,t){return e.reduce(function(e,n){return n.candidate_id==t&&(e=n.percent),e},0)}function j(e,t){var r=O[t];return e>0&&r?(console.log(e,n.getClassId(e,C)),r[n.getClassId(e,C)]):E}function F(e,t){if(!e.results||!e.results.length)return i.NONVOTING_COLOR;if(!e.votes)return E;var r=e.margin/e.votes*100||0;if(!t||r<=0)return"#eee";var s=O[t];return s?s[n.getClassId(r,N)]:E}function I(e){var n=t.hcl(e).darker(1).toString();return{colors:[e,n],widths:[1,4]}}var i={},s="#cc3d3d",o="#1a80c4",u="#7ead53",a="#f2c4c0",f="#b2dbed",l="#d7e8ba",c={"clinton-1746":"#3989cb","sanders-1445":"#83bc5e","omalley-22603":"#8b80d6","bush-1239":"#a33c3d","carson-64509":"#74ab5b","christie-60051":"#62add4","cruz-61815":"#eabc3b","fiorina-60339":"#5e8db3","gilmore-45650":"#726860","huckabee-1187":"#a55194","paul-60208":"#e7969c","rubio-53044":"#6f60c4","kasich-36679":"#3ca0a0","santorum-1752":"#e0765c","trump-8639":"#d65454",democrat:o,republican:s,otherParty:u,"no-3":"purple","yes-2":"yellow"},h={republican1:"#d65454",republican2:"#eabc3b",republican3:"#3ca0a0",republican4:"#7564bc",republican5:"#a33c3d",democrat1:"#3989cb",democrat2:"#83bc5e",democrat3:"#897ddb",democrat4:"#83949b",democrat5:"#e8cb52"},p={democrat:o,republican:s,yes:"#4394a1",no:"#db7851",other:u},d={democrat:f,republican:a,other:l},v={"sanders-1445":1.01,"clinton-1746":1.04,"rubio-53044":1.05,"trump-8639":1.03,"cruz-61815":.98,"kasich-36679":.99},m={"sanders-1445":.95,"clinton-1746":1.03},g={"carson-64509":"#c7ddbd","cruz-61815":"#f5dfa0","kasich-36679":"#9bdada","rubio-53044":"#cbc4e6","trump-8639":"#f1c3c3","clinton-1746":"#c0daef","sanders-1445":"#c6e0b4"},y="#bbbbbb",b="#ddd",w="white",E="#ebebeb",S="#888888",x=[10,20,30,40],T=[15,30],N=[10,20,30],C=[40,50,60],k={democrat:[15,30,45,60],republican:[15,25,35,45]},L=[10,20,30],A=H(),O=P(),M=e.times(5,function(){return y}),_=M.slice(1);return D(),i.NONVOTING_COLOR="#dadada",i.REPORTING_PCT_COLOR="#888",i.getRampByPartyId=function(e){return k[e]||[]},i.getRamp4ByCandId=function(e){return O[e]||_},i.getRampByCandId=function(e){return A[e]||M},i.getHatchColors=function(e){return[e,t.hcl(e).brighter(.5)]},i.getLeaderMarginPctColor=function(e){return F(e,e.leader)},i.getCandVotePctColor=function(e,t){var r=k[e.party_id],s=e.candidate_id,o=A[s];if(!t.results||!t.results.length)return i.NONVOTING_COLOR;var u=B(t.results,s);return t.votes===0?E:u?o?o[n.getClassId(u,r)]:i.getCandColor(e):"white"},i.getLightCandColor=function(e){var t=e?e.candidate_id:null;return g[t]||b},i.getPartyColor=function(e){return p[e]||p.other},i.getLightPartyColor=function(e){return d[e]||d.other},i.getCandColor=function(e){var t=e&&e.candidate_id;if(c[t])return c[t];var n=e.party_id+e.order;return h[n]?h[n]:y},i.getBubbleColor=function(e){return r.getOverlayColor(e,16777215,.85,.85)},i.getGeneralRunoffColor=function(e,t,n,r){var i;return t.party_id==n.party_id?(i=S,e.gain&&!r):i=S,i},i.getGeneralWinLeadFill=function(e,t,n){var r;return t&&t.party_id?(e.winner?r=i.getPartyColor(t.party_id):r=i.getLightPartyColor(t.party_id),e.gain&&!n&&(r=I(r))):r=i.getGeneralLeaderColor(e,t),r},i.getPrimaryWinLeadFill=function(e,n,r){var s,o;return r||!n?i.getPrimaryLeaderColor(e,n):(s=i.getLightCandColor(n),o=t.hcl(s).brighter(.4).toString(),{colors:[s,o],widths:[3,1]})},i.getGeneralLeaderMarginPctColor=function(e,t){var n="";return t&&t.party_id&&(n=t.party_id,n!="democrat"&&n!="republican"&&(n="otherParty")),F(e,n)},i.getGeneralLeaderVotePctColor=function(e,t){var n="";return t&&t.party_id&&(n=t.party_id,n!="democrat"&&n!="republican"&&(n="otherParty")),j(e.leader_percent,n)},i.getPartyChangeColor2=function(e){var t=E;return e>0?t=o:e<0&&(t=s),t},i.getPartyChangeColor=function(e){var t=L,r;return isNaN(e)?E:e===0?S:(e>0?r=O.democrat:e<0&&(e=-e,r=O.republican),r[n.getClassId(e,t)])},i.getGeneralLeaderColor=function(e,t){var n;return t&&t.party_id?n=i.getPartyColor(t.party_id):e.tie?n=S:n=E,n},i.getPrimaryLeaderColor=function(e,t){var n;return t?n=i.getCandColor(t):e.tie?n=S:!e.results||!e.results.length?n=i.NONVOTING_COLOR:n=E,n},i}),define("map2016/race-data-import",["underscore/nyt"],function(e){function r(e,t,n){var r=c(t),o=r.slug,u=f(t),a;o in e?(a=e[o],a.states.indexOf(u)==-1&&a.states.push(u)):(a=r,a.states=[u],a.results={},a.candidates={},e[o]=a),i(a,t),s(a,t,n),a.max_county_margin=n.max_county_margin||a.max_county_margin}function i(t,n){var r=t.candidates;n.candidates.reduce(function(t,n,r){var i=n.candidate_id;return i in t==0&&(t[i]=e.defaults({sort_id:r,votes:null,percent:null,percent_display:null},n)),t},t.candidates)}function s(r,i,s){function p(e){var t=i[e];if(!t||t.length>0==0)return;r.max_county_margin=r.max_county_margin||0,r.max_county_votes=r.max_county_votes||0,t.forEach(function(e){var t=e.fips||e.geoid||e.fips_town_mbloch||e.fips_town,n=o(i.candidates,e,c);i.has_incumbent&&(n.has_incumbent=!0),n.margin>r.max_county_margin&&(r.max_county_margin=n.margin),n.leader_votes>r.max_county_votes&&(r.max_county_votes=n.leader_votes),r.results[t]=n})}var f=l(i),c=s.vote_type||"results",h=e.defaults({counties:null,townships:null,candidates:null},i);h.results=u(i),h.winner=i.candidates.reduce(function(e,t){return t.winner?t.candidate_id:e},null),t.calcVoteShare(h),a(h),h.race=i,r.results[f]=h,r.reporting_pct=i.precincts_reporting/i.precincts_total||0,i.election_type!="house"&&n.forEach(p)}function o(e,n,r){var i={est_votes_remaining:n.est_votes_remaining||0,precincts_reporting:n.reporting,precincts_total:n.precincts,results:[],votes:0};if(r in n==0)throw new Error("Missing results object named "+r);return i.results=e.map(function(e){var t=e.candidate_key||e.candidate_id,s=n[r][t];return isNaN(s)||(i.votes+=s),{candidate_id:e.candidate_id,votes:s}}),t.calcVoteShare(i),a(i),i}function u(e){return e.candidates.map(function(n){var r={is_other:t.isOtherCand(n.candidate_id),candidate_id:n.candidate_id,votes:n.votes};return n.runoff&&e.result=="runoff"&&(r.runoff=!0),r})}function a(e){var n=e.results.sort(function(e,n){return t.isOtherCand(e.candidate_id)?1:t.isOtherCand(n.candidate_id)?-1:(n.votes|0)-(e.votes|0)}),r=e.votes,i=n.length>0?n[0].votes:0,s=n.length>1?n[1].votes:0;e.tie=i>0&&i==s,e.leader=i>0&&i>s?n[0].candidate_id:null,e.leader_percent=r>0?i/r*100:0,e.leader_votes=i,e.margin=e.leader?i-s:0}function f(e){return e.state_id}function l(e){var t=e.race_type,n,r;return t=="house"?(r=e.seat,n=e.state_id,e.seat<10&&(n+="0"),n+=e.seat):n=e.state_id,n}function c(e){var t={is_primary:!!e.party_id,party_id:e.party_id||null,election_type:e.election_type,race_type:e.race_type,runoff:e.runoff};return t.slug=h(t),t}function h(e){var t=e.race_type;return e.is_primary&&(t=e.party_id+"-primary-"+t),t}var t={},n="counties,state_house_districts,congressional_districts,wards,townships,convention_districts".split(",");return t.import=function(t,n){var i=t.reduce(function(e,t){return r(e,t,n),e},{});return e.values(i)},t.isOtherCand=function(e){return/^other-/.test(e)},t.calcVoteShare=function(e){var t=e.votes;e.results.forEach(function(e){e.percent=e.votes/t*100||0})},t}),define("map2016/map-popup",["underscore/nyt","d3/3","templates","lib/helpers","./race-data-import","./map-utils"],function(e,t,n,r,i,s){function l(t){var n=0,r={};t.forEach(function(e){n+=e.votes||0,e.results.reduce(c,r)});var s=e.values(r),o={votes:n,results:s};return i.calcVoteShare(o),o}function c(e,t){var n=t.candidate_id;return n in e==0&&(e[n]={votes:0,candidate_id:n}),e[n].votes+=t.votes||0,e}function h(t,n){var r={show_pct_reporting:!0,results_expander:!1,hide_party:!0,animate_change:!1,small_checkmark:!0,show_party_initial:!0,max_candidates:3};return e.extend(r,n)}function p(e,t,i){var o=h(t,i),a=t.getResult(e),f=s.getGeoType(e),l=b(e,f,o),c=!a.results.length,p=f=="counties"&&c,v=c&&(f=="townships"||f=="state-districts"),y=c&&f=="states",w=g(e),E=s.getStateName(w),S="",x="",T=c?{}:m(a,t.map_data),N={};if(!T.uncontested)if(y)S="No election";else if(p)S="County-level results are not available.";else if(v)/^0+$/.test(e.properties.GEOID)?S="Areas with no reported results":S="No polling places";else if(t.vote_type=="remaining")S="Estimated votes remaining";else if(!a)S="No election";else if(o.show_pct_reporting){if(a.report===!1&&a.poll_display)S=a.poll_display;else if(a.precincts_reporting==0&&a.votes>0)S="Initial results";else if(a.reporting_display&&a.race)S=a.reporting_display;else if(a.precincts_total&&a.precincts_reporting>=0){var C=a.precincts_total==1?"precinct":"precincts";S=r.votesFormat(a.precincts_reporting)+" of "+r.votesFormat(a.precincts_total)+" "+C+" reporting"}}else a.poll_display&&(S=a.poll_display);f=="states"&&!c&&!t.stateHasDetails(w)&&(x="Detailed results not available for "+E);var k=o.popupTemplate||"popup";if(k in n==0)throw"Popup template not found: "+k;f=="counties"&&t.map_type=="party-change-arrows-2012"&&(o.show_pct_change=!0,o.show_pct_change_year="2012",T.candidates=T.candidates.reduce(function(t,n){var r=n.party_id,i;if(r=="democrat"||r=="republican")i=d(e,r),n.votes_past=i.votes_past,n.percent_display_past=i.percent_display_past,t.push(n);return t},[]));var L=n[k]({Helpers:r,title:l,subtitle:S,race:T,partials:n,options:o,state:N,formatCount:u,state_id:g(e),note:x});return L}function d(e,t){var n=e.properties,r=t=="democrat"?n.dem12:n.rep12;return{votes_past:r,percent_display_past:a(r/n.tot12*100)}}function v(t,n,r){var s=t.votes,o=t.results,u=r&&r.rounded?f:a,l=o.map(function(r){var i=e.defaults({votes:r.votes,percent:r.percent,percent_display:u(r.percent)},n[r.candidate_id]);return t.winner&&t.winner==r.candidate_id&&(i.winner=!0),i}),c=l.filter(function(e,t){var n=i.isOtherCand(e.candidate_id),r=e.votes>0&&t===0;return!e.rollup||!n&&r});return c.sort(function(e,t){return t.votes-e.votes||e.sort_id-t.sort_id}),c}function m(e,t,n){if(e.race)return e.race;var r=v(e,t.candidates,n),i=t.winner?"W":"",s=r.length===1,o=t.reporting_display||"",u={election_type:t.election_type,race_type:t.race_type,runoff:t.runoff,candidates:r,uncontested:s,result:i,has_incumbent:e.has_incumbent||!1,reporting_display:e.reporting_display};return u}function g(e){return e.properties.ST}function b(e,t,n){var r="";return t=="states"?r=s.getStateName(g(e)):t=="counties"?r=y(e):t=="house-districts"?r=s.getDistrict(e):r=e.properties.NAME,r}var o={};o.getPopupHtml=function(e,t,n){var r=p(e,t,n);return r};var u=t.format(",d"),a=function(){var e=t.format(".1f");return function(t){var n=e(t||0);return n=="0.0"?"0":n}}(),f=t.format(".0f");o.getFilteredTableHtml=function(e,t){var i=l(e),s=h(t,{max_candidates:3}),o=formatResults(i,t.map_data,{rounded:!0}),u=n["results-table"]({Helpers:r,race:o,partials:n,options:s});return u};var y=function(){var e={NY:{Richmond:"Staten Island",Kings:"Brooklyn",Queens:"Queens","New York":"Manhattan",Bronx:"Bronx"},MD:{"Baltimore City":"Baltimore"},DC:{"District of Columbia":"District of Columbia"}},t={MO:"St. Louis County~St. Louis City",NV:"Carson City",VA:"Alexandria~Bedford City~Bristol~Buena Vista~Charlottesville~Chesapeake~Colonial Heights~Covington~Danville~Emporia~Fairfax County~Fairfax City~Falls Church~Franklin~Franklin City~Fredericksburg~Galax~Hampton~Harrisonburg~Hopewell~Lexington~Lynchburg~Manassas~Manassas Park~Martinsville~Newport News~Norfolk~Norton~Petersburg~Poquoson~Portsmouth~Radford~Richmond City~Roanoke City~Salem~Staunton~Suffolk~Virginia Beach~Waynesboro~Williamsburg~Winchester"};return function(n){var r="",i=n.properties.NAME,s=g(n).toUpperCase(),o=e[s];return o&&o[i]?r=o[i]:s=="LA"?r=i+" Parish":t[s]&&t[s].indexOf(i)!=-1?r=i:/City$/.test(i)?r=i:s=="AK"||s=="ND"?r=i:r=i+" County",r}}();return o}),define("map2016/map-filters",[],function(){function x(e,t,n,r){var i=r[n]||r.others;return function(n){var r=n.properties[e];return t=="low"&&r<i||t=="high"&&r>=i}}function T(e){var t={low:"R",middle:"S",high:"U"}[e]||"";return function(e){return e.properties.poptype2===t}}function N(e,t){var n=m[t]||m.others;return function(t){var r=t.properties.density,i=r>=n;return e=="high"&&i||e=="low"&&!i}}function C(e,t){var n=!1;return/^not-/.test(e)&&(n=!0,e=e.substr(4)),function(r){var i=r.properties[t]||"",s=i.indexOf(e)>-1;return i?n?!s:s:!1}}function k(e,t){var n=t in v?v[t]:v.others;return function(t){var r=t.properties.income,i=-1;return r<n[0]?i=0:r<n[1]?i=1:r>=n[1]&&(i=2),e=="low"&&i===0||e=="middle"&&i==1||e=="high"&&i==2}}function L(e,t){var n=S[t]||S.others;return function(t){var r=t.properties.income;return e=="low"&&r<n||e=="high"&&r>=n}}var e={},t=.1,n=!0,r=/^income3-(high|middle|low)$/,i=/^income2-(high|low)$/,s=/^density-(high|middle|low)$/,o=/^density2-(high|low)$/,u=/^(?:leader|repleader)12-(.*)/,a=/^repleader08-(.*)/,f=/^(?:leader|demleader)08-(.*)/,l=/^evangelical2-(high|low)$/,c=/^college2-(high|low)$/,h=/^black2-(high|low)$/,p=/^white2-(high|low)$/,d=/^hispanic2-(high|low)$/,v={IA:[45e3,55e3],others:[45e3,6e4]},m={IA:90,NC:180,NV:80,OH:130,SC:100,TX:95,VA:110,others:90},g={others:50},y={AL:25,FL:15,GA:25,SC:40,others:10},b={NV:20,TX:25,others:20},w={AL:350,AR:350,GA:350,IA:140,SC:240,TN:350,TX:240,others:250},E={IA:20,others:20},S={AL:43511,AK:71829,AZ:49928,AR:41264,CA:61489,CO:59448,CT:69899,DE:60231,DC:69235,FL:47212,GA:49342,HI:68201,ID:47334,IL:57166,IN:48737,IA:52716,KS:51872,KY:43342,LA:44991,ME:48804,MD:74149,MA:67846,MI:49087,MN:60828,MS:39464,MO:47764,MT:46766,NE:52400,NV:52205,NH:65986,NJ:72062,NM:44968,NY:58687,NC:46693,ND:55579,OH:48849,OK:46235,OR:50521,PA:53115,RI:56423,SC:45033,SD:50338,TN:44621,TX:52576,UT:59846,VT:54447,VA:64792,WA:60294,WV:41576,WI:52738,WY:58252,others:5e4};return e.applyFilter=function(r,i){var s;if(!i.filter)return;s=e.getFilter(i),n?(r.style.opacity=function(e){return s(e)?1:t},r.hoverStyle&&(r.hoverStyle.stroke=function(e){return s(e)?"black":"rgba(0, 0, 0, 0.2)"},r.hoverStyle.strokeWidth=function(e){return s(e)?2:1})):r.style.visibility=function(e){return s(e)?"visible":"hidden"}},e.getFilter=function(e){var t=e.filter,n=e.state_id,v,m,S;if(v=r.exec(t))S=k(v[1],n);else if(v=i.exec(t))S=L(v[1],n);else if(v=s.exec(t))S=T(v[1],n);else if(v=u.exec(t))S=C(v[1],"r12");else if(v=a.exec(t))S=C(v[1],"r08");else if(v=f.exec(t))S=C(v[1],"d08");else if(v=o.exec(t))S=N(v[1],n);else if(v=l.exec(t))S=x("evanpct",v[1],n,w);else if(v=c.exec(t))S=x("collegepct",v[1],n,E);else if(v=h.exec(t))S=x("blackpct",v[1],n,y);else if(v=p.exec(t))S=x("whitepct",v[1],n,g);else if(v=d.exec(t))S=x("hisppct",v[1],n,b);else if(!(v=a.exec(t)))throw new Error("Unknown filter: "+t);return S},e}),define("nytg-vote-map/lib/vmap-vector-symbols",["./vmap-layer-types"],function(e){function t(t,n,r){e.initPointLayer(t),t.path=r,t.point_features=t.features,t.features=t.point_features.map(function(e){return{type:"Feature",properties:e.properties||e,geometry:{type:n,coordinates:[]}}}),e.initPathLayer(t)}function n(t,n){var r=n.getDisplayWidth(),s=r/500,o=n.invertInterval(1)*s;t.features.forEach(function(e,n){var r=t.point_features[n],s=t.point(r),u=t.path(r);i(u,s,o),e.geometry.coordinates=u,delete e.bbox}),e.drawPathLayer(t,n)}function r(e){return Array.isArray(e)&&e.length>=2&&e[0]==Number(e[0])}function i(e,t,n){var s,o;if(e&&e.length){o=r(e[0]);for(var u=0;u<e.length;u++)s=e[u],o?(s[0]=s[0]*n+t[0],s[1]=s[1]*n+t[1]):i(s,t,n)}}return{initLayer:t,drawLayer:n}}),define("nytg-vote-map/lib/vmap-arrow-layer",["./vmap-layer-types","./vmap-vector-symbols","./vmap-surface"],function(e,t,n){function f(e){t.initLayer(e,"MultiLineString",l(e))}function l(e){var t=c(e.length,10),n=c(e.dy,0);return function(e){var r=t(e);if(!r)return[];var i=n(e),f=Math.sqrt(r*r+i*i),l=Math.min(f*.7,3),c=r/f*l,h=i/f*l,p=c*u-h*s+r,d=c*s+h*u+i,v=c*a-h*o+r,m=c*o+h*a+i,g=[[0,0],[r,i]],y=[[p,d],[r,i],[v,m]];return[g,y]}}function c(e,t){var n;return typeof e=="function"?n=e:(e===void 0&&(e=t),n=function(){return e}),n}var r=Math.PI*.75,i=Math.PI*-0.75,s=Math.sin(r),o=Math.sin(i),u=Math.cos(r),a=Math.cos(i);n.addLayerType("arrow",{init:f,draw:t.drawLayer,renderers:["canvas","svg"]})}),define("map2016/map-layers",["./map-colors","./map-popup","./map-filters","../nytg-vote-map/lib/vmap-utils","../nytg-vote-map/lib/vmap-arrow-layer","./map-utils","../etagx","underscore/nyt","jquery/nyt"],function(e,t,n,r,i,s,o,u,a){function h(t){var n=t.map_data.candidates;return function(r){var i=t.getResult(r),s=i.leader,o=s?n[s]:null;return e.getGeneralLeaderVotePctColor(i,o)}}function p(e){return function(){var t=e.get_map_zoom()<=1?.5:0;return t}}function d(t,n){var r=n.map_data.candidates[t];return r||(console.log("Missing data for candidate: "+t),console.log("cands:",n.map_data.candidates),r={candidate_id:t}),function(t){var i=n.getResult(t);return e.getCandVotePctColor(r,i)}}function v(e){return e.results.length>=2&&e.results[0].runoff&&e.results[1].runoff}function m(t,n){var r=t.map_data.candidates;return function(i){if(i.properties.ST==n)return"white";var s=t.getResult(i),o=t.candidate||s.winner||s.leader,u=o?r[o]:null,a=t.map_type=="leader-no-gain",f;return t.election_type=="general"?v(s)?f=e.getGeneralRunoffColor(s,r[s.results[0].candidate_id],r[s.results[1].candidate_id],a):f=e.getGeneralWinLeadFill(s,u,a):f=getPrimaryWinLeadFill(s,u,s.winner),f}}function g(e,t,n,r){var i=.4,s=Math.min(n/.3,1);r*=s*(1-i)+i;var o=e>0?r*Math.sqrt(e)/Math.sqrt(t):0;return o}function y(e,t){var n=(t.get_map_width()+t.get_map_height())*.35,r=Math.min(n/Math.sqrt(e),n*.16);return r}function b(e,t){var n=e.map_data,i=e.scale_by_reporting_pct?n.reporting_pct:1,s=!0,o=s?n.max_county_margin:n.max_county_votes,u=r.getFeatures(t).length,a=e.map_extent=="national"?2.5:1;if(isNaN(o))throw console.log(n),"Missing county max margin";return function(t){var n=e.getResult(t),r=s?n.margin:n.leader_votes,f=y(u,e);return a*g(r,o,i,f)}}function w(e,t){return e.reduce(function(e,n){return n.candidate_id==t&&(e=n.votes),e},0)}function E(e){return e&&e[0]?e[0].votes:0}function S(e,t,n){var i=e.map_data,s=e.scale_by_reporting_pct?i.reporting_pct:1,o=i.max_county_votes,u=r.getFeatures(t).length;if(isNaN(o))throw console.log(i),"Missing county max margin";return function(t){var r=e.getResult(t),i=n?w(r.results,n):E(r.results),a=y(u,e);return g(i,o,s,a)}}function x(t,n){var r=n.map_data.candidates[t];return r||(console.log("Missing data for candidate: "+t),r={candidate_id:t}),function(t){return e.getCandColor(r)}}function T(t){var n=t.map_data.candidates;return function(r){var i=t.getResult(r),s=i.leader,o=s?n[s]:null,u=t.election_type=="general"?e.getGeneralLeaderMarginPctColor(i,o):e.getLeaderMarginPctColor(i);return u}}function N(t){var n=t.map_data.candidates;return function(r){var i=t.getResult(r),s=t.candidate||i.winner||i.leader,o=s?n[s]:null,u=t.election_type=="general"?e.getGeneralLeaderColor(i,o):e.getPrimaryLeaderColor(i,o);return u}}var f={},l=/^votes-?(.*)/,c=/^votepct-(.+)/;return f.isVoteTypeMap=function(e){return l.test(e.map_type)},f.isChoroplethMap=function(e){var t=e.map_type;return t.indexOf("bubbles")==-1&&t.indexOf("arrows")==-1},f.isCandPctMap=function(e){return c.test(e.map_type)},f.getNodataBackgroundLyr=function(e,t){var n=t[e.geography_type];return n=r.getFeatures(n).filter(function(t){var n=e.getResult(t);return!n.results||!n.results.length}),{features:n,style:{fill:"#e5e5e5"}}},f.getLeaderVotePctLyr=function(e,t){var n=t[e.geography_type],r=h(e);return{features:n,style:{fill:r,stroke:r,strokeWidth:p(e)}}},f.getLeaderMarginPctLyr=function(e,t){var n=t[e.geography_type],r=T(e);return{features:n,style:{fill:r,stroke:r,strokeWidth:p(e)}}},f.getRemainingVotesLyr=function(e,t){var n=r.getFeatures(t[e.geography_type]),i=0,s="est_votes_remaining",o=n.reduce(function(t,n,r){var o=e.getResult(n),u=o[s],a=o.precincts_reporting/o.precincts_total||0;return u>t&&(t=u,i=a),t},0),u=Math.min(.2,(1-i)/3),a=function(t){var r=e.getResult(t),i=y(n.length,e);return g(r[s],o,u,i)},f={renderer:"svg",type:"circle",point:function(e){return[e.properties.X,e.properties.Y]},features:n,classname:"eln-remaining-votes-bubbles",style:{classname:function(){return"eln-remaining-votes-bubble"},"stroke-dasharray":function(e){var t=a(e);return t<2?"0.7,0.6":t<4?"1.1,1.2":"1.5,1.9"},radius:a,stroke:"#000"}};return f},f.getStateOutlineLyr=function(e,t){return{features:t.state,style:{stroke:"black",opacity:.15}}},f.getInnerlinesLyr=function(e,t,n,r){return{features:t,style:{stroke:n||"#e5e5e5",strokeWidth:r||.6}}},f.getHistoricalMarginFunction=function(e,t){var n=String(t).slice(-2),r="dem"+n,i="rep"+n,s="tot"+n;return function(e){var t=e.properties,n=(t[r]-t[i])/t[s]*100;return n}},f.getPartyMarginFunction=function(e){return function(t){var n=e.getResult(t),r=NaN,i=NaN,s=NaN,o,u;for(var a=0,f=n.results?n.results.length:0;a<f;a++)o=n.results[a],u=e.getCand(o.candidate_id),u&&(u.party_id=="democrat"?r=o.percent:u.party_id=="republican"&&(i=o.percent));return!isNaN(r)&&!isNaN(i)&&n.votes>0&&(s=r-i),s}},f.getHistoricalChangeFunction=function(e,t){var n=f.getHistoricalMarginFunction(e,t),r=f.getPartyMarginFunction(e);return function(e){var t=n(e),i=r(e),s=NaN;return!isNaN(t)&&!isNaN(i)&&(s=i-t),s}},f.getPartyChangeLyr2=function(t,n,r){var i=f.getHistoricalChangeFunction(t,r),s=function(t){var n=i(t),r=e.getPartyChangeColor2(n);return r};return{type:"arrow",features:n[t.geography_type],point:function(e){return[e.properties.X,e.properties.Y]},length:function(e){var t=.42,n=i(e);return-n*t||0},dy:function(e){return 2.5},style:{stroke:s,strokeWidth:1.2}}},f.getPartyChangeLyr=function(t,n,r){var i=f.getHistoricalChangeFunction(t,r),s=function(t){var n=i(t),r=e.getPartyChangeColor(n);return r};return{features:n[t.geography_type],style:{fill:s}}},f.getCountyMarginLyr=function(t,n){var r=N(t),i=function(t,n){return e.getBubbleColor(r(t,n))},s=n[t.geography_type],o=b(t,s),u={type:"circle",point:function(e){return[e.properties.X,e.properties.Y]},features:s,style:{radius:o,fill:i,strokeWidth:function(e){var t=o(e);return t<4&&.45||t<6&&.65||.9},stroke:"rgba(0, 0, 0, 0.25)"}};return u},f.getCandidateVotePctLyr=function(e,t){var n=c.exec(e.map_type),r=n[1],i=d(r,e),s=t[e.geography_type],o={features:s,style:{fill:i,stroke:i,strokeWidth:p(e)}};return o},f.getCountyVotesLyr=function(t,n){var r=l.exec(t.map_type),i=r[1],s=i?x(i,t):N(t),o=function(t,n){return e.getBubbleColor(s(t,n))},u=n[t.geography_type],a={type:"circle",point:function(e){return[e.properties.X,e.properties.Y]},features:u,style:{radius:S(t,u,i),fill:o,stroke:"rgba(0, 0, 0, 0.15)"}};return a},f.getCountyBackgroundLyr=function(e,t,n){return{features:t.innerlines,style:{stroke:n||"#e5e5e5",strokeWidth:.6}}},f.getHouseLeaderLyr=function(e,t){var n=m(e,null);return{features:t[e.geography_type],style:{fill:n}}},f.getStateLeaderLyr=function(e,t){var n=e.state_id;n=="DC"&&(n=null);var r=m(e,n);return{features:t.states,style:{fill:r}}},f.getLeaderLyr=function(e,t){var n=N(e),r=n,i=.7;return e.geography_type=="house-districts"&&(i=0),{features:t[e.geography_type],style:{fill:n,stroke:r,strokeWidth:i}}},f}),define("map2016/map-compiler",["./map-layers","./map-colors","./map-popup","./map-filters","../nytg-vote-map/lib/vmap-utils","./map-utils","../etagx","underscore/nyt","jquery/nyt"],function(e,t,n,r,i,s,o,u,a){function l(e){var t=a(e).find(".eln-map-overlay")[0];return t||(t=a("<div>").addClass("eln-map-overlay").appendTo(e)[0]),t}function c(a,c){function w(e){var t="";return c.name?t=c.name:e.map_extent=="single-state"&&e.state_id?t=e.state_id:e.map_extent=="national"&&(t="national"),t}function E(e){var t;return e.race_type=="house"?t="house-districts":e.map_extent=="single-state"?t=e.election_type=="general"?S(e):x(e):t="counties",t}function S(e){var t=e.state_id,n="counties";if(t=="VT"||t=="MA"||t=="NH"||t=="ME"||t=="RI"||t=="CT")n="townships";return n}function x(e){var t=e.party_id,n=e.state_id,r="counties";return e.race_type=="president"&&(n=="ME"&&t=="republican"?r="counties":n=="VT"||n=="MA"||n=="NH"||n=="ME"||n=="RI"||n=="CT"?r="townships":n=="AK"||n=="ND"?r="state-house-districts":n=="KS"||n=="MN"?r="house-districts":n=="WY"&&t=="republican"?r="convention-districts":n=="DC"&&t=="democrat"&&(r="wards")),r}function T(e,t){var n=e.cities.features.filter(function(e){return e.properties.ST==t});return{cities:{type:"FeatureCollection",features:n}}}function N(e,t){function r(e){return function(t){var r=n[t.properties.ST];return e=="dy"&&$()>1?6:e=="dx"&&$()>1?0:r&&e in n?n[e]:n.others[e]}}var n={others:{dx:0,dy:5,"text-anchor":"middle"}};return{features:e,type:"label",maxZoom:4,point:function(e){return[e.properties.X,e.properties.Y]},style:{opacity:.9,classname:function(e){var t="g-map-label g-state-label";return t},dx:r("dx"),dy:r("dy"),"text-anchor":r("text-anchor"),visibility:function(e){return e.properties.ST==t.state_id?"hidden":"visible"}},text:function(e){return e.properties.LABEL||""}}}function C(e){return function(t){if(e.race_type=="house")return!0;if(e.map_type!="leader"&&e.map_type!="leader-no-gain")return!1;var n=e.getResult(t);return!!n.winner}}function k(e,t,n){var r=h.getStatesWithData().reduce(function(e,n){var r=s.getStateLabel(n,a.width(),t.zoom_to_states);return e[n]=r,e},{}),i=n.states.features.filter(function(e){var t=r[e.properties.ST]||"";return e.properties.LABEL=t,!!t}),o=C(t),u=function(e){return o(e)?"white":"black"},f=function(e){return o(e)?"black":"white"},l=N(i,t),c=N(i,t);t.zoom_to_states&&(l.maxZoom=c.maxZoom=8,l.minZoom=c.minZoom=1.5),L(c),l.style.fill=u,c.style.stroke=f,e.push(c),e.push(l)}function L(e){e.style.stroke="white",e.style.strokeWidth=3,e.style.opacity=.2,e.style.fill="none"}function A(e,t,n,r){var i=R(t,n),s=X(t,n),o="white",u=i.style.strokeWidth,a,f;a=R(t,n),f=X(t,n),a.style.strokeWidth=function(e){var t=u(e);return J(e)===0?0:t?t+3:5},a.style.stroke=o,a.style.opacity=.3,L(f),e.push(a,f),e.push(i),e.push(s),r&&(i.minZoom=a.minZoom=s.minZoom=f.minZoom=r)}function O(){var e=a.getZoom()*a.width();return e>1400&&1.8||e>800&&1||.6}function M(){return O()*.6}function D(e,n){return function(r){var i=n.getResult(r),s=getPctReporting(i),o=e(r);return i.results&&i.results.length&&s<n.reporting_threshold?{colors:t.getHatchColors(o)}:o}}function P(e){var t=350;return a.width()<t?!1:e.map_extent=="national"&&a.width()>350?!0:!1}function H(e){var t=!1,n=Math.max(a.width(),a.height());return e.map_extent!="national"&&(t=c.show_city_labels=="always"||n>240),t}function B(e,t){var s=a.container().node().nextElementSibling,o=r.getFilter(t);if(!s||!d3.select(s).classed("eln-results-map-table")){console.log("Missing container for filtered table");return}o||console.log("Missing filter function for",t.filter);var u=i.getFeatures(e.features).filter(function(e){return o(e)}),f=u.map(function(e){return t.getResult(e)});s.innerHTML=tableHtml=n.getFilteredTableHtml(f,t)}function j(e,t){return function(r){try{var i=r&&r.properties&&r.properties.GEOID||"";v("Maps | Interactive","Hover | Tooltip",i,!0)}catch(s){}return n.getPopupHtml(r,e,t)}}function F(e,t){var n;return t.states&&t.states.features&&(n=u.find(t.states.features,function(t){return t.properties.ST==e})),n}function I(e,t,n){var r=[],s=[],o=t.length==1&&t[0]=="DC",a=u.extend({},{counties:s,innerlines:r},e),f;if(t.length>0){var l=t.reduce(function(e,t){return e[t]=!0,e},{}),c=e.counties.features.reduce(function(e,t){var r=t.properties.ST;if(r=="DC"&&o)return e;if(n=="republican"){if(r=="WY")return e;r=="WY2"&&(t=i.extend({},t),t.properties=i.defaults({ST:"WY"},t.properties))}return t.properties.ST in l&&e.push(t),e},[]);a.counties=u.defaults({features:c},e.counties)}return t.length==1&&(a.innerlines=e.innerlines_by_state[t[0]]||[]),a}function q(e){var t=e.map_data.results;e.getCand=function(t){return e.map_data.candidates[t]||null},e.getResult=function(e){var n=s.getGeoField(e),r=e.properties[n];return r in t?t[r]:r=="46113"&&"46102"in t?t[46102]:{no_data:!0,results:[],votes:0}}}function R(e,t){return{features:t.cities,style:{radius:Q,fill:Y,strokeWidth:G,stroke:"black"}}}function U(e){return e.properties.anchor||"middle"}function z(e){var t=$(),n=U(e),r=e.properties.dx||0,i=n=="start"&&2||n=="end"&&-2||0;return r+=(t-1)*i,r}function W(e){var t=U(e),n=e.properties.dy||0,r=$(),i=n>0?2:-2;return t=="middle"&&(n+=(r-1)*i),n}function X(e,t){return{features:t.cities,style:{classname:function(e){var t="g-map-label g-label-class-"+J(e);return t},dx:z,dy:W,"text-anchor":U},text:function(e){return e.properties.NAME}}}function V(){var e=$();a.container().classed("g-map-scale-0",e==0),a.container().classed("g-map-scale-1",e==1),a.container().classed("g-map-scale-2",e==2)}function $(){var e=a.width(),t=0;return e>625?t=2:e>=360&&(t=1),t}function J(e){var t=(e.properties||e).CLASS,n=$(),r=0;return t==1||t==2?n==2?r=4:n==1?r=3:r=2:(n==2?r=2:r=1,t>3&&n===0&&(r=0)),r}function K(e){var t=J(e);return t>=3}function Q(e){var t=J(e),n=0;return t==4?n=4:t==3?n=3:t==2?n=2:t==1&&(n=1.5),n}function G(e){return K(e)?1.5:0}function Y(e){return K(e)?"rgba(0, 0, 0, 0)":"black"}var h={},p={},d={},v=u.debounce(o.track,2e3),m,g,y,b=!1;return a.on("resize",V),a.on("navigate",function(){if(!g)return;var e=i.getFeatureBounds(g),t=a.getBounds(),n=i.boundsCenter(e),r=n[0]>t[0]&&n[0]<t[2]&&n[1]>t[1]&&n[1]<t[3];r&&!b&&(b=!0,m.innerHTML=y),!r&&b&&(b=!1,m.innerHTML="")}),h.getStatesWithData=function(){return d.state_ids||[]},h.getStatesWithDetails=function(){return h.getStatesWithData().filter(function(e){return(e=="ME"&&d.map_data.party_id=="republican")==0})},h.showStateTable=function(e,t){var n;m&&e&&(n=j(t,c),y=n(e),g=e,b=!0,m.innerHTML=y)},h.hideStateTable=function(){m&&(g=null,b=!1,m.innerHTML="")},h.getMapRequirements=function(e,t){var n=p.state_id;t=u.extend(p,t);var r={zoom_to_states:t.zoom_to_states||!1,filter:t.filter||null,map_type:t.map_type||"leader",vote_type:t.vote_type||"results"};r.get_map_width=a.width,r.get_map_height=a.height,r.get_map_zoom=a.getZoom;var i=e.states.length>1;return r.map_data=e,r.map_width=a.width(),r.map_extent=i?"national":"single-state",r.scale_by_reporting_pct=!t.max_county_margin,i?(r.map_extent="national",r.state_ids=e.states,r.state_id=t.state_id):(r.map_extent="single-state",r.state_id=e.states[0],r.show_remaining_votes=!!t.show_remaining_votes),r.race_type=e.race_type,r.election_type=e.election_type,r.prev_state_id=n,r.party_id=e?e.party_id:"",r.reporting_threshold=t.reporting_threshold||c.reporting_threshold||null,r.geography_type=E(r),r.map_name=w(r),d.map_name&&d.map_name!=r.map_name&&console.error("Mismatched map names; curr:",r.map_name,"prev:",d.map_name),r.stateHasDetails=function(e){return h.getStatesWithDetails().indexOf(e)>-1},q(r),p=t,d=r,r},h.compileLayers=function(t,n){var i=[],s=j(t,c),o=t.map_type,u=t.map_extent=="national",p=e.isChoroplethMap(t),d=e.isCandPctMap(t),v,g,y,b,w=function(){var e=1,t=a.getZoom()*a.width();return t>500&&(e=1),e};V(),u?(t.state_id===null&&h.hideStateTable(),o=="leader-margin"||d?(n=I(n,t.state_ids,t.party_id),v=d?e.getCandidateVotePctLyr(t,n):e.getLeaderMarginPctLyr(t,n),g={features:n.states,style:{fill:"#e2e2e2"}},y={features:n.outerlines,style:{stroke:"#999",opacity:.2}}):o=="leader-margin-bubbles"?(i.push({features:n.states,style:{fill:function(e){return"#e5e5e5"}}}),i.push(e.getInnerlinesLyr(t,n.statelines,"white",O)),v=e.getCountyMarginLyr(t,n)):o=="party-change-2012"||o=="party-change-2008"?v=e.getPartyChangeLyr(t,n,o=="party-change-2008"?2008:2012):o=="party-change-arrows-2012"||o=="party-change-arrows-2008"?(i.push({features:n.states,style:{fill:function(e){return"#e5e5e5"}}}),i.push(e.getInnerlinesLyr(t,n.statelines,"white",O)),v=e.getPartyChangeLyr2(t,n,o=="party-change-arrows-2008"?2008:2012)):(m||(m=l(a.container())),t.state_id?h.showStateTable(F(t.state_id,n),t):h.hideStateTable(),n=I(n,t.state_id?[t.state_id]:[]),t.race_type=="house"?v=e.getHouseLeaderLyr(t,n):(v=e.getLeaderLyr(t,n),g=e.getStateLeaderLyr(t,n),g.hoverStyle={stroke:"black",strokeWidth:2},g.onHover=a.popup({classname:"eln-popup eln-state-popup"}).onHover(function(e){return a.isTouchEnabled()?"":s(e)}),g.onSelect=function(e){var n=t.getResult(e);n.no_data||a.dispatchEvent("select",{state_id:e.properties.ST,feature:e})})),g&&i.push(g)):o=="leader"||o=="leader-no-gain"?t.race_type=="house"?v=e.getHouseLeaderLyr(t,n):v=e.getLeaderLyr(t,n):o=="leader-bubbles"||o=="leader-margin-bubbles"?(i.push(e.getNodataBackgroundLyr(t,n)),i.push(e.getCountyBackgroundLyr(t,n)),v=e.getCountyMarginLyr(t,n)):e.isVoteTypeMap(t)?(i.push(e.getCountyBackgroundLyr(t,n)),v=e.getCountyVotesLyr(t,n)):d?v=e.getCandidateVotePctLyr(t,n):o=="leader-pct"&&(v=e.getLeaderVotePctLyr(t,n));if(!v)throw"Unsupported map type or extent: "+o+" "+t.map_extent;if(!v.features)throw console.log(t),"Missing map geography";return v.onHover=a.popup({classname:"eln-popup eln-detail-popup"}).onHover(function(e){return a.isTouchEnabled()&&h.hideStateTable(),s(e)}),v.hoverStyle={stroke:"black",strokeWidth:2},t.filter&&r.applyFilter(v,t),i.push(v),p&&n.statelines&&i.push(e.getInnerlinesLyr(t,n.statelines,"white",O)),p&&n.innerlines&&i.push(e.getInnerlinesLyr(t,n.innerlines,f)),t.map_extent=="single-state"&&i.push(e.getStateOutlineLyr(t,n)),t.show_remaining_votes&&i.push(e.getRemainingVotesLyr(t,n)),u?(y&&i.push(y),P(t)&&k(i,t,n),n.cities&&(t.state_id?A(i,t,T(n,t.state_id),2.2):A(i,t,n,3.5))):H(t)&&A(i,t,n),i},h}var f="rgba(255, 255, 255, 0.65)";return{create:c}}),define("map2016/map-dataset",["underscore/nyt","./race-data-import","./map-utils"],function(e,t,n){function i(e){var n={},r,i;return n.update=function(n){var u,a;return n.party_id&&(r=n.party_id),n.races&&(u=o(n.races),!e,i=t.import(u,n)),a=s(i,r),a},n}function s(t,n){var r=e.pluck(t,"party_id"),i;if(n){i=e.find(t,function(e){return e.party_id==n});if(!i)return console.error("Missing data for party: "+n),null}else i=t[0],t.length>1&&r.length>1?console.error("Warning: map is missing a 'party_id' display param"):t.length>1&&console.error("Warning: map received data for multiple race types");return i}function o(t){if(!e.isArray(t)){if(!t.race_id)throw console.log(t),new Error("Invalid race data");t=[t]}else if(!t[0]||!t[0].race_id)throw console.error(t),new Error("Invalid races array");return t}function u(e,t){return t||(t=+(new Date)),t=Math.round(t/1e3),e.map(function(e){var n=r[e.race_id];return n&&n.timestamp==t&&n.race.load_id==e.load_id?e=n.race:n&&n.race.load_id>e.load_id?(console.log("Decreasing load_ids for race",e.race_id,"-- cached:",n.race.load_id,"new:",e.load_id),console.log("... Using previously cached data"),e=n.race):r[e.race_id]={timestamp:t,race:e},e})}function a(e){e=o(e);var n=t.import(e,{});if(n.length!=1)throw"Expected data from a single race; received: "+e.length;return n[0].max_county_margin}var r={};return{calcMaxCountyMargin:a,create:i}}),define("map2016/map",["jquery/nyt","underscore/nyt","../nytg-vote-map/lib/vmap","./asset-loader","./map-compiler","./race-data-import","./map-dataset","./map-utils","../nytg-vote-map/lib/vmap-utils"],function(e,t,n,r,i,s,o,u,a){function f(s,f){function g(){d3.event.preventDefault()}function y(e){function l(){var e=v.getZoom(),t=e>=1.2;i.select("div").attr("class","eln-sprite eln-icon-map-zoom-in"),o.select("div").attr("class","eln-sprite eln-icon-map-zoom-out"),a.select("div").attr("class","eln-sprite eln-icon-map-reset"),r.classed("active",t),e>=f.maxZoom-.2?i.classed("eln-disabled",!0):i.classed("eln-disabled",!1)}var t=u.mapShouldZoom(e),n=d3.select(s),r,i,o,a;v.allowNavigation(t),t&&(n.on("gesturechange",g).on("gesturestart",g).on("gestureend",g),r=n.append("div").classed("eln-map-zoom-buttons",!0),i=r.append("a").attr("href","#").classed("eln-map-nav-btn eln-map-nav-zoom-in",!0),i.append("div"),o=r.append("a").attr("href","#").classed("eln-map-nav-btn eln-map-nav-zoom-out",!0),o.append("div"),a=r.append("a").attr("href","#").classed("eln-map-nav-btn eln-map-nav-reset",!0),a.append("div"),i.on("click",function(){d3.event.preventDefault(),v.zoomIn()}),o.on("click",function(){d3.event.preventDefault(),v.zoomOut(),c.display({state_id:null})}),a.on("click",function(){d3.event.preventDefault(),m(),c.display({state_id:null})}),v.on("refresh",function(){l()}),v.on("zoom-out",function(){c.display({state_id:null})}),v.on("select",function(e){if(p.getStatesWithDetails().indexOf(e.state_id)==-1)return;setTimeout(function(){c.display({state_id:e.state_id,animate:!0})},100)}),l())}function b(){return a.viewportWidth()<=700}function w(t){var r=n.create(s,t);return r.on("zoom-in",function(){c.dispatchEvent("zoom-in")}),r.on("zoom-out",function(){c.dispatchEvent("zoom-out")}),e(".eln-map").on("click",".eln-map-overlay .eln-close",function(){e(this).parent().remove()}),r}var l={padding:"1% 1%",margin:"2px",maxZoom:19,minAspectRatio:1.5},c=new a.EventDispatcher,h=0,p,d,v,m=function(){v&&v.zoomReset()};return t.defaults(f,l),d=o.create(!!f.no_cache),c.display=function(n){var s=++h,o,a=!1,l=d.update(n);v||(v=w(f),p=i.create(v,f),a=!0),o=p.getMapRequirements(l,n);if(!o)return;a&&(u.mapShouldZoom(o)&&o.map_extent=="single-state"&&e(window).width()>764&&(f.margin="2px 2px 2px 35px"),y(o)),r.loadGeography(o,function(r,i){var u,f,l={};if(r){console.error(r);return}s==h&&v.setLayers(p.compileLayers(o,i)),i.states&&o.state_id&&o.prev_state_id!=o.state_id?(u=t.find(i.states.features,function(e){return e.properties.ST==o.state_id}),n.animate||(l.duration=0),l.spacing="5%",f=e(v.container().node()).find(".eln-map-overlay"),f.position().top<10&&(l.margin="0 "+Math.round(f.width()*.7)+"px 0 0"),v.zoomToFeature(u,l)):i.states&&o.state_ids&&n.zoom_to_states&&(u=i.states.features.filter(function(e){return o.state_ids.indexOf(e.properties.ST)>-1}),u.length>1&&(l.duration=0,a&&(m=function(){v.zoomToFeature(u,l)},m())))})},c}return{calcMaxCountyMargin:o.calcMaxCountyMargin,create:f}}),define("map2016/map-menu",["jquery/nyt","etagx"],function(e,t){e(".eln-map-menu .eln-item").on("click",function(){e(this).addClass("eln-active").siblings().removeClass("eln-active");var n=e(this).data("map-type"),r=e(this).data("target")||".eln-race-map",i=e(this).data("show_remaining_votes"),s=".eln-map-key-"+e(this).data("key"),o=e(this).closest(r);o.find(".eln-map-keys").find(s).addClass("eln-active").siblings().removeClass("eln-active");if(e(this).data("race-id")){var u=e(this).data("race-id"),a=_.findWhere(eln_races,{race_id:u});o.find("#map-"+u).addClass("eln-active").siblings().removeClass("eln-active")}else if(i){var f=!e(this).hasClass("eln-show"),l=o.find(".eln-results-map").data("map");e(this).toggleClass("eln-show eln-active",f),o.toggleClass("eln-showing-remaining-votes",f),l.display({show_remaining_votes:f}),n="estimated-votes-remaining"}else{var s=".eln-map-key-"+e(this).data("key"),l=o.find(".eln-results-map").data("map");l&&l.display({map_type:n})}if(e(this).data("party-id")){var l=e(".eln-national-map").data("map"),c=e(this).data("party-id");l.display({party_id:c})}l&&t.track("Maps | Interactive","Click | Map Menu",n,!1)})}),define("ic-broker",["ic","arrayToObject"],function(e,t){function n(e){const t=Object.keys(e),n=Array(t.length);return Object.keys(e).forEach(function(t){n[t]=e[t]}),n}return{get:function(r,i){var s="_control:"+eln_config.ic_config.stream_name+":"+eln_election_date;i&&(s+=":homepage");var o=r.stream_names.concat(s);return console.info("Register",o),e.getBroker({transport_mode:eln_config.ic_config.transport_mode,static_bundle_host:eln_config.ic_config.static_bundle_host,dynamic_bundle_host:eln_config.ic_config.dynamic_bundle_host,stream_names:o,debug:eln_config.ic_config.debug||window.location.search.slice(1,6)==="debug",environment:eln_config.ic_config.environment,pusher_options:{cluster:"nyt"},transform:{wrap:function(e){return e.candidates&&Array.isArray(e.candidates)&&(e.candidates=t(e.candidates)),e},unwrap:function(e){return e.candidates&&!Array.isArray(e.candidates)&&(e.candidates=n(e.candidates)),e}}})}}}),define("general-state-results",["jquery/nyt","underscore/nyt","d3/3","results","results-banner","map2016/map","map2016/map-menu","ic","ic-broker","templates","lib/helpers","etagx"],function(e,t,n,r,i,s,o,u,a,f,l,c){function O(){var n=+(new Date);e(".eln-results-map").each(function(){var r=e(this),i=r.data("race-id"),o=t.where(eln_races,{race_id:i}),u=o[0],a=u.race_type,f=r.data("map-type")||"leader",l=r.data("filter"),c,d;t.indexOf(p,a)>-1&&(c={},u.state_id=="OR"&&(c.popup={show_pct_reporting:!1}),d=s.create(r[0],c),d.race_id=u.race_id,a=="house"&&(o=t.where(eln_races,{race_type:a,election_type:"general"}),d.race_id="house"),d.display({map_type:f,filter:l,races:o,timestamp:n}),r.data("map",d),h.push(d))})}function M(e,n){if(!n||!n.length)return;_(n),r.render(null,{races:e,all_races:n}),b=t.any(n,function(e){return e.report}),S=new Date}function _(t){t.forEach(function(t){if(!t.race_id)return;t.race_best_sentence?e("#"+t.race_id+" .eln-race-best-sentence-container").html(f["race-best-sentence"]({race:t})):e("#"+t.race_id+" .eln-race-best-sentence-container").html("")})}function D(e){var n=t.indexBy(e,"race_id"),r=t.groupBy(e,"race_type"),i=+(new Date);if(!h)return;h.forEach(function(e){var s=e.race_id;if(s in n){var o=n[s];if(!o)return;e.display({races:[o],timestamp:i}),(o.race_type=="president"||o.race_type=="senate")&&(o.counties||o.townships)&&P(o)}else if(s=="house"&&r.house){var u=t.where(r.house,{election_type:"general"});e.display({races:u,timestamp:i})}}),MapKey.update(e)}function P(t){var n=e("#"+t.race_id),r=n.find(".eln-county-table-container");if(!r)return;var i=r.data("options"),s=f["county-table"]({Helpers:l,race:t,options:i});r.replaceWith(s)}function H(){if(!eln_config.livetime)return;if(S&&new Date-S>12e4||!x){g.show(),y.hide();return}g.hide(),y.show();var e=eln_config.livetime+(new Date-E),t=b?"<strong>LIVE</strong> ":"Updated ",n=t+l.secondFormat(e);y.html(n)}if(!eln_config.modules||eln_config.modules.indexOf("general-state-results-page")==-1)return!1;var h=[],p=["president","senate","house","governor","lieutenant-governor"],d=["president","senate","governor","lieutenant-governor"],v=3e4,m,g=e(".eln-datetime"),y=e(".eln-live-datetime"),b=t.any(eln_races,function(e){return e.report&&e.election_date==eln_election_date}),w=eln_config.livetime||null,E=new Date,S=null,x=!1;if(eln_config.ic_config.on===!0){console.info("IC enabled.");var T=i.getStreamName(),N=eln_config.ic_config.stream_name+":"+eln_election_date+":"+eln_config.state.slug,C=t.chain(eln_races).filter(function(e){return t.indexOf(d,e.race_type)>-1}).map(function(e){return eln_config.ic_config.stream_name+":"+e.race_slug}).value(),k=t.flatten([N,C,T]),L=a.get({stream_names:k}),A=new u.Consumer(N);A.on("create",function(){if(eln_config.livetime){var e=new Date-eln_config.livetime;e<12e4?(console.info("Showing live clock."),x=!0):console.info("Disabling live clock. Drift is",e/1e3+" seconds")}else console.info("Disabling live clock. No system time found.");m||(S=new Date,H(),y.addClass("eln-live-datetime"),m=setInterval(H,1e3))}),A.on("update",M),L.register(A),t.each(C,function(e){var t=new u.Consumer(e);t.on("update",D),L.register(t)}),i.init({broker:L})}else console.info("IC disabled.");O(),e(".eln-nav-item").click(function(){c.track("Navigation | Interactive","Click | Election Nav",e(this).text(),!1)}),e(".eln-promo a").click(function(){c.track("Maps | Interactive","Click | Election Guide",e(this).text(),!1)}),e(".eln-content").on("click",".eln-toggle-counties",function(t){t.preventDefault(),e(this).parent().parent(".eln-county-table-container").toggleClass("eln-show-all-rows")}),e(".eln-general-state-results").on("click",".eln-state-navigation .eln-item",function(t){if(!e(this).hasClass("eln-external-link")){t.preventDefault();var n=e(e(this).attr("href")).offset().top-e("#masthead").outerHeight()-20;e("html,body").scrollTop(n)}})}),define("general-branch-results",["jquery/nyt","underscore/nyt","d3/3","results","results-banner","map2016/map","map2016/map-menu","ic","ic-broker","templates","lib/helpers","etagx"],function(e,t,n,r,i,s,o,u,a,f,l,c){function M(){i.init({broker:N,callback:I}),_(),D(),v!="house"&&eln_config.ic_config.on===!0&&(T=new u.Consumer(A),T.on("create",function(e){C=e,j()}),T.on("update",function(e){C=e,j()}),N.register(T))}function _(){var n=+(new Date);e(".eln-results-map").each(function(){var r=e(this),i;if(v=="president"||v=="governor"||v=="senate"||v=="house"){i={state_link:!0},h=s.create(r[0],i);var o=t.where(eln_races,{race_type:v});h.display({races:o,timestamp:n,map_type:R("view")||"leader"}),r.data("map",h),R("view")&&e(".eln-map-zoom-buttons").hide()}})}function D(){e(".eln-map-thumb").each(function(){var t=e(this),n=t.data("id");t.on("click",function(){H(h,n);var r=e(this).data("key");P(r),t.addClass("eln-thumb-active").siblings().removeClass("eln-thumb-active")})})}function P(t){if(!t)return;e(".eln-map-keys").find("."+t).addClass("eln-active").siblings().removeClass("eln-active")}function H(e,t){e.display({map_type:t})}function B(e,n){if(!n||!n.length)return;eln_races=t.where(n,{race_type:v});if(!eln_races.length)return console.info("No matching races, won't update.");j(),r.render(null,{races:e,all_races:eln_races}),y=t.any(eln_races,function(e){return e.report}),E=new Date}function j(){v!="house"&&F();var e=+(new Date);if(!h)return;h.display({races:eln_races,timestamp:e})}function F(){t.each(C,function(e){if(!e.counties)return;var n=t.findWhere(eln_races,{race_id:e.race_id});if(!n)return console.info(e.race_id,"is mising from eln_races.");n.counties=t.values(e.counties)})}function I(n){console.info("Update balance of power.",new Date),e(".eln-content").find(".eln-bop").each(function(){var r=e(this).data("race-type"),i=t.findWhere(n,{race_type:r});e(this).replaceWith(f["balance-of-power"]({Helpers:l,office:i}))})}function q(){if(!eln_config.livetime)return;if(E&&new Date-E>12e4||!S){m.show(),g.hide();return}m.hide(),g.show();var e=eln_config.livetime+(new Date-w),t=y?"<strong>LIVE</strong> ":"Updated ",n=t+l.secondFormat(e);g.html(n)}function R(e,t){var n=t?t:window.location.href,r=new RegExp("[?&]"+e+"=([^&#]*)","i"),i=r.exec(n);return i?i[1]:null}if(!eln_config.modules||eln_config.modules.indexOf("branch-results-page")==-1)return!1;var h,p=3e4,d,v=eln_config.race_type,m=e(".eln-datetime"),g=e(".eln-live-datetime"),y=t.any(eln_races,function(e){return e.report&&e.election_date==eln_election_date}),b=eln_config.livetime||null,w=new Date,E=null,S=!1,x,T,N,C;if(eln_config.ic_config.on===!0){console.info("IC enabled.");var k=i.getStreamName(),L=eln_config.ic_config.stream_name+":"+eln_election_date+":"+v,A=L+":counties",O=[L,k];v!="house"&&O.push(A),N=a.get({stream_names:O}),x=new u.Consumer(L),x.on("create",function(){if(eln_config.livetime){var e=new Date-eln_config.livetime;e<12e4?(console.info("Showing live clock."),S=!0):console.info("Disabling live clock. Drift is",e/1e3+" seconds")}else console.info("Disabling live clock. No system time found.");d||(E=new Date,q(),g.addClass("eln-live-datetime"),d=setInterval(q,1e3))}),x.on("update",B),N.register(x)}else console.info("IC disabled.");M(),e(".eln-nav-item").click(function(){c.track("Navigation | Interactive","Click | Election Nav",e(this).text(),!1)}),e(".eln-promo a").click(function(){c.track("Maps | Interactive","Click | Election Guide",e(this).text(),!1)})}),define("vendor/text-balancer",["jquery/nyt"],function(e){function o(){this.reset()}var t="smartresize",n=function(e,t,n){var r;return function(){function u(){n||e.apply(s,o),r=null}var s=this,o=arguments;r?clearTimeout(r):n&&e.apply(s,o),r=setTimeout(u,t||100)}};e.fn[t]=function(e){return e?this.bind("resize",n(e)):this.trigger(t)};var r=document.documentElement.style,i=r.textWrap||r.WebkitTextWrap||r.MozTextWrap||r.MsTextWrap||r.OTextWrap,s;o.prototype.reset=function(){this.index=0,this.width=0};var u=function(e,t){var n=/\s(?![^<]*>)/g,r;if(!s){s=[];while((r=n.exec(e))!==null)s.push(r.index)}return s.indexOf(t)!==-1},a=function(t){t.find('br[data-owner="balance-text"]').replaceWith(" ");var n=t.find('span[data-owner="balance-text"]');if(n.length>0){var r="";n.each(function(){r+=e(this).text(),e(this).remove()}),t.html(r)}},f=function(e){return r=e.get(0).currentStyle||window.getComputedStyle(e.get(0),null),r.textAlign==="justify"},l=function(t,n,r){n=e.trim(n);var i=n.split(" ").length;n+=" ";if(i<2)return n;var s=e("<span></span>").html(n);t.append(s);var o=s.width();s.remove();var u=Math.floor((r-o)/(i-1));return s.css("word-spacing",u+"px").attr("data-owner","balance-text"),e("<div></div>").append(s).html()},c=function(e,t){return t===0||t===e.length||u(e,t-1)&&!u(e,t)},h=function(e,t,n,r,i,s,o){var u;for(;;){while(!c(t,s))s+=i;e.html(t.substr(0,s)),u=e.width();if(i<0?u<=r||u<=0||s===0:r<=u||n<=u||s===t.length)break;s+=i}o.index=s,o.width=u},p=function(e,t){var n=document.createElement("div");n.style.display="block",n.style.position="absolute",n.style.bottom=0,n.style.right=0,n.style.width=0,n.style.height=0,n.style.margin=0,n.style.padding=0,n.style.visibility="hidden",n.style.overflow="hidden";var r=document.createElement("span");r.style.fontSize="2000px",r.innerHTML="&nbsp;",n.appendChild(r),e.append(n);var i=r.getBoundingClientRect();n.parentNode.removeChild(n);var s=i.height/i.width;return t/s},d=[".balance-text"],v=function(){var t=d.join(",");e(t).balanceText(!0)};return e.fn.balanceTextUpdate=v,e.fn.balanceText=function(t){var n=this.selector;return!t&&d.indexOf(n)===-1&&d.push(n),i?this:this.each(function(){var t=e(this),n=5e3;a(t);var r="";t.attr("style")&&t.attr("style").indexOf("line-height")>=0&&(r=t.css("line-height")),t.css("line-height","normal");var i=t.width(),u=t.height(),c=t.css("white-space"),d=t.css("float"),v=t.css("display"),m=t.css("position");t.css({"white-space":"nowrap","float":"none",display:"inline",position:"static"});var g=t.width(),y=t.height(),b=c==="pre-wrap"?0:p(t,y);if(i>0&&g>i&&g<n){var w=t.html(),E="",S="",x=f(t),T=Math.round(u/y),N=T;while(N>1){s=null;var C=Math.round((g+b)/N-b),k=Math.round((w.length+1)/N)-1,L=new o;h(t,w,i,C,-1,k,L);var A=new o;k=L.index,h(t,w,i,C,1,k,A),L.reset(),k=A.index,h(t,w,i,C,-1,k,L);var O;L.index===0?O=A.index:i<A.width||L.index===A.index?O=L.index:O=Math.abs(C-L.width)<Math.abs(A.width-C)?L.index:A.index,S=w.substr(0,O),x?E+=l(t,S,i):(E+=S.replace(/\s$/,""),E+='<br data-owner="balance-text" />'),w=w.substr(O),N--,t.html(w),g=t.width()}x?t.html(E+l(t,w,i)):t.html(E+w)}t.css({position:m,display:v,"float":d,"white-space":c,"line-height":r})})},function(t){function n(){e(t).each(function(){var t=e(this),n,r;t.hasClass("interactive-leadin")?(n=t.find("time.dateline"),r=t.find("a.related-link"),t.data("updated",n.get(0)).data("related",r.get(0)).data("filter",e.trim((n.text()+" "+r.text()).replace(/[ \n\t]+/g," ")))):t.hasClass("g-intro")&&(n=t.find(".g-updated"),r=t.find(".g-related-link"),t.data("updated",n.get(0)).data("related",r.get(0)).data("filter",e.trim((n.text()+(r.get(0)?" "+r.text():"")).replace(/[ \n\t]+/g," "))),console.log(t.data("filter"),r.get(0)))}).balanceText().each(function(){var t=e(this),n,r,i;t.hasClass("interactive-leadin")?(t.find(".dateline,.related-link").remove(),n=t.data("filter"),r=t.html().replace(/[ \n\t]+/g," ").replace(n,""),t.html('<span class="summary-text">'+r+"</span>"),i=e("<span />").css("white-space","nowrap").appendTo(t),i.append(t.data("updated")),i.append(" "),i.append(t.data("related"))):t.hasClass("g-intro")&&(t.find(".g-updated,.g-related-link").remove(),n=t.data("filter"),r=t.html().replace(/[ \n\t]+/g," ").replace(n,""),t.html('<span class="summary-text">'+r+"</span>"),i=e("<span />").css("white-space","nowrap").appendTo(t),i.append(t.data("updated")),t.data("related")&&(i.append(" "),i.append(t.data("related"))))})}e.isArray(t)&&(t=t.join(", ")),e(window).ready(n),e(window).smartresize(n)}}),define("results-article-page",["jquery/nyt","underscore/nyt","map2016/map","etagx","vendor/text-balancer"],function(e,t,n,r,i){function o(){var r=+(new Date);e(".eln-results-map").each(function(){var i=e(this),o=i.data("race-id"),u=t.findWhere(eln_races,{race_id:o}),a=u.race_type,f=i.data("map-type")||"leader",l=i.data("filter"),c,h;c={},u.state_id=="OR"&&(c.popup={show_pct_reporting:!1}),h=n.create(i[0],c),h.display({map_type:f,filter:l,races:[u],timestamp:r}),i.data("map",h),s.push(h)}),i(".eln-headline")}if(!eln_config.modules||eln_config.modules.indexOf("results-article-page")==-1)return!1;var s=[];o(),e(".eln-nav-item").click(function(){r.track("Navigation | Interactive","Click | Election Nav",e(this).text(),!1)}),e(".eln-content").on("click",".eln-toggle-counties",function(t){t.preventDefault(),e(this).parent().parent(".eln-county-table-container").toggleClass("eln-show-all-rows")})}),define("auth/mtr",[],function(){}),define("foundation/main",[],function(){}),function(e,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define("vendor/d3.v4+jetpack",["exports"],t):t(e.d3=e.d3||{})}(this,function(e){function t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function n(e){return e.length===1&&(e=r(e)),{left:function(t,n,r,i){r==null&&(r=0),i==null&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){r==null&&(r=0),i==null&&(i=t.length);while(r<i){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function r(e){return function(n,r){return t(e(n),r)}}function u(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function a(e){return e===null?NaN:+e}function f(e,t){var n=e.length,r=0,i,s,o=0,u=-1,f=0;if(t==null)while(++u<n)isNaN(i=a(e[u]))||(s=i-r,r+=s/++f,o+=s*(i-r));else while(++u<n)isNaN(i=a(t(e[u],u,e)))||(s=i-r,r+=s/++f,o+=s*(i-r));if(f>1)return o/(f-1)}function l(e,t){var n=f(e,t);return n?Math.sqrt(n):n}function c(e,t){var n=-1,r=e.length,i,s,o;if(t==null){while(++n<r)if((s=e[n])!=null&&s>=s){i=o=s;break}while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r)if((s=t(e[n],n,e))!=null&&s>=s){i=o=s;break}while(++n<r)(s=t(e[n],n,e))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]}function v(e){return function(){return e}}function m(e){return e}function g(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);while(++r<i)s[r]=e+r*n;return s}function E(e,t,n){var r=S(e,t,n);return g(Math.ceil(e/r)*r,Math.floor(t/r)*r+r/2,r)}function S(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=y?i*=10:s>=b?i*=5:s>=w&&(i*=2),t<e?-i:i}function x(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function T(){function r(r){var i,o=r.length,u,a=new Array(o);for(i=0;i<o;++i)a[i]=e(r[i],i,r);var f=t(a),l=f[0],c=f[1],h=n(a,l,c);Array.isArray(h)||(h=E(l,c,h));var p=h.length;while(h[0]<=l)h.shift(),--p;while(h[p-1]>=c)h.pop(),--p;var d=new Array(p+1),v;for(i=0;i<=p;++i)v=d[i]=[],v.x0=i>0?h[i-1]:l,v.x1=i<p?h[i]:c;for(i=0;i<o;++i)u=a[i],l<=u&&u<=c&&d[s(h,u,0,p)].push(r[i]);return d}var e=m,t=c,n=x;return r.value=function(t){return arguments.length?(e=typeof t=="function"?t:v(t),r):e},r.domain=function(e){return arguments.length?(t=typeof e=="function"?e:v([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n=typeof e=="function"?e:Array.isArray(e)?v(p.call(e)):v(e),r):n},r}function N(e,t,n){n==null&&(n=a);if(!(r=e.length))return;if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),u=+n(e[s+1],s+1,e);return o+(u-o)*(i-s)}function C(e,n,r){return e=d.call(e,a).sort(t),Math.ceil((r-n)/(2*(N(e,.75)-N(e,.25))*Math.pow(e.length,-1/3)))}function k(e,t,n){return Math.ceil((n-t)/(3.5*l(e)*Math.pow(e.length,-1/3)))}function L(e,t){var n=-1,r=e.length,i,s;if(t==null){while(++n<r)if((s=e[n])!=null&&s>=s){i=s;break}while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r)if((s=t(e[n],n,e))!=null&&s>=s){i=s;break}while(++n<r)(s=t(e[n],n,e))!=null&&s>i&&(i=s)}return i}function A(e,t){var n=0,r=e.length,i,s=-1,o=r;if(t==null)while(++s<r)isNaN(i=a(e[s]))?--o:n+=i;else while(++s<r)isNaN(i=a(t(e[s],s,e)))?--o:n+=i;if(o)return n/o}function O(e,n){var r=[],i=e.length,s,o=-1;if(n==null)while(++o<i)isNaN(s=a(e[o]))||r.push(s);else while(++o<i)isNaN(s=a(n(e[o],o,e)))||r.push(s);return N(r.sort(t),.5)}function M(e){var t=e.length,n,r=-1,i=0,s,o;while(++r<t)i+=e[r].length;s=new Array(i);while(--t>=0){o=e[t],n=o.length;while(--n>=0)s[--i]=o[n]}return s}function _(e,t){var n=-1,r=e.length,i,s;if(t==null){while(++n<r)if((s=e[n])!=null&&s>=s){i=s;break}while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r)if((s=t(e[n],n,e))!=null&&s>=s){i=s;break}while(++n<r)(s=t(e[n],n,e))!=null&&i>s&&(i=s)}return i}function D(e){var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);while(t<n)i[t]=[r,r=e[++t]];return i}function P(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r}function H(e,n){if(!(i=e.length))return;var r=0,i,s=0,o,u=e[s];n||(n=t);while(++r<i)if(n(o=e[r],u)<0||n(u,u)!==0)u=o,s=r;if(n(u,u)===0)return s}function B(e,t,n){var r=(n==null?e.length:n)-(t=t==null?0:+t),i,s;while(r)s=Math.random()*r--|0,i=e[r+t],e[r+t]=e[s+t],e[s+t]=i;return e}function j(e,t){var n=0,r=e.length,i,s=-1;if(t==null){while(++s<r)if(i=+e[s])n+=i}else while(++s<r)if(i=+t(e[s],s,e))n+=i;return n}function F(e){if(!(s=e.length))return[];for(var t=-1,n=_(e,I),r=new Array(n);++t<n;)for(var i=-1,s,o=r[t]=new Array(s);++i<s;)o[i]=e[i][t];return r}function I(e){return e.length}function q(){return F(arguments)}function U(){}function z(e,t){var n=new U;if(e instanceof U)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r=-1,i=e.length,s;if(t==null)while(++r<i)n.set(r,e[r]);else while(++r<i)n.set(t(s=e[r],r,e),s)}else if(e)for(var o in e)n.set(o,e[o]);return n}function W(){function s(t,i,o,u){if(i>=e.length)return r!=null?r(t):n!=null?t.sort(n):t;var a=-1,f=t.length,l=e[i++],c,h,p=z(),d,v=o();while(++a<f)(d=p.get(c=l(h=t[a])+""))?d.push(h):p.set(c,[h]);return p.each(function(e,t){u(v,t,s(e,i,o,u))}),v}function o(n,i){if(++i>e.length)return n;var s,u=t[i-1];return r!=null&&i>=e.length?s=n.entries():(s=[],n.each(function(e,t){s.push({key:t,values:o(e,i)})})),u!=null?s.sort(function(e,t){return u(e.key,t.key)}):s}var e=[],t=[],n,r,i;return i={object:function(e){return s(e,0,X,V)},map:function(e){return s(e,0,$,J)},entries:function(e){return o(s(e,0,$,J),0)},key:function(t){return e.push(t),i},sortKeys:function(n){return t[e.length-1]=n,i},sortValues:function(e){return n=e,i},rollup:function(e){return r=e,i}}}function X(){return{}}function V(e,t,n){e[t]=n}function $(){return z()}function J(e,t,n){e.set(t,n)}function K(){}function G(e,t){var n=new K;if(e instanceof K)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(t==null)while(++r<i)n.add(e[r]);else while(++r<i)n.add(t(e[r],r,e))}return n}function Y(e){var t=[];for(var n in e)t.push(n);return t}function Z(e){var t=[];for(var n in e)t.push(e[n]);return t}function et(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t}function tt(e,t){return e=e==null?0:+e,t=t==null?1:+t,arguments.length===1?(t=e,e=0):t-=e,function(){return Math.random()*t+e}}function nt(e,t){var n,r;return e=e==null?0:+e,t=t==null?1:+t,function(){var i;if(n!=null)i=n,n=null;else do n=Math.random()*2-1,i=Math.random()*2-1,r=n*n+i*i;while(!r||r>1);return e+t*i*Math.sqrt(-2*Math.log(r)/r)}}function rt(){var e=nt.apply(this,arguments);return function(){return Math.exp(e())}}function it(e){return function(){for(var t=0,n=0;n<e;++n)t+=Math.random();return t}}function st(e){var t=it(e);return function(){return t()/e}}function ot(e){return function(){return-Math.log(1-Math.random())/e}}function ut(e){return+e}function at(e){return e*e}function ft(e){return e*(2-e)}function lt(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function ct(e){return e*e*e}function ht(e){return--e*e*e+1}function pt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function wt(e){return 1-Math.cos(e*bt)}function Et(e){return Math.sin(e*bt)}function St(e){return(1-Math.cos(yt*e))/2}function xt(e){return Math.pow(2,10*e-10)}function Tt(e){return 1-Math.pow(2,-10*e)}function Nt(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function Ct(e){return 1-Math.sqrt(1-e*e)}function kt(e){return Math.sqrt(1- --e*e)}function Lt(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}function It(e){return 1-qt(1-e)}function qt(e){return(e=+e)<At?Ft*e*e:e<Mt?Ft*(e-=Ot)*e+_t:e<Pt?Ft*(e-=Dt)*e+Ht:Ft*(e-=Bt)*e+jt}function Rt(e){return((e*=2)<=1?1-qt(1-e):qt(e-1)+1)/2}function Yt(e){var t=-1,n=e.length,r,i=e[n-1],s=0;while(++t<n)r=i,i=e[t],s+=r[1]*i[0]-r[0]*i[1];return s/2}function Zt(e){var t=-1,n=e.length,r=0,i=0,s,o=e[n-1],u,a=0;while(++t<n)s=o,o=e[t],a+=u=s[0]*o[1]-o[0]*s[1],r+=(s[0]+o[0])*u,i+=(s[1]+o[1])*u;return a*=3,[r/a,i/a]}function en(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function tn(e,t){return e[0]-t[0]||e[1]-t[1]}function nn(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;++i){while(r>1&&en(e[n[r-2]],e[n[r-1]],e[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function rn(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),i=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];r.sort(tn);for(t=0;t<n;++t)i[t]=[r[t][0],-r[t][1]];var s=nn(r),o=nn(i),u=o[0]===s[0],a=o[o.length-1]===s[s.length-1],f=[];for(t=s.length-1;t>=0;--t)f.push(e[r[s[t]][2]]);for(t=+u;t<o.length-a;++t)f.push(e[r[o[t]][2]]);return f}function sn(e,t){var n=e.length,r=e[n-1],i=t[0],s=t[1],o=r[0],u=r[1],a,f,l=!1;for(var c=0;c<n;++c)r=e[c],a=r[0],f=r[1],f>s!=u>s&&i<(o-a)*(s-f)/(u-f)+a&&(l=!l),o=a,u=f;return l}function on(e){var t=-1,n=e.length,r=e[n-1],i,s,o=r[0],u=r[1],a=0;while(++t<n)i=o,s=u,r=e[t],o=r[0],u=r[1],i-=o,s-=u,a+=Math.sqrt(i*i+s*s);return a}function cn(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function hn(){return new cn}function pn(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return dn(this.cover(t,n),t,n,e)}function dn(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},u=e._x0,a=e._y0,f=e._x1,l=e._y1,c,h,p,d,v,m,g,y;if(!s)return e._root=o,e;while(s.length){(v=t>=(c=(u+f)/2))?u=c:f=c,(m=n>=(h=(a+l)/2))?a=h:l=h;if(i=s,!(s=s[g=m<<1|v]))return i[g]=o,e}p=+e._x.call(null,s.data),d=+e._y.call(null,s.data);if(t===p&&n===d)return o.next=s,i?i[g]=o:e._root=o,e;do i=i?i[g]=new Array(4):e._root=new Array(4),(v=t>=(c=(u+f)/2))?u=c:f=c,(m=n>=(h=(a+l)/2))?a=h:l=h;while((g=m<<1|v)===(y=(d>=h)<<1|p>=c));return i[y]=s,i[g]=o,e}function vn(e){var t,n,r=e.length,i,s,o=new Array(r),u=new Array(r),a=Infinity,f=Infinity,l=-Infinity,c=-Infinity;for(n=0;n<r;++n){if(isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t)))continue;o[n]=i,u[n]=s,i<a&&(a=i),i>l&&(l=i),s<f&&(f=s),s>c&&(c=s)}l<a&&(a=this._x0,l=this._x1),c<f&&(f=this._y0,c=this._y1),this.cover(a,f).cover(l,c);for(n=0;n<r;++n)dn(this,o[n],u[n],e[n]);return this}function mn(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>s))return this;var o=i-n,u=this._root,a,f;switch(f=(t<(r+s)/2)<<1|e<(n+i)/2){case 0:do a=new Array(4),a[f]=u,u=a;while(o*=2,i=n+o,s=r+o,e>i||t>s);break;case 1:do a=new Array(4),a[f]=u,u=a;while(o*=2,n=i-o,s=r+o,n>e||t>s);break;case 2:do a=new Array(4),a[f]=u,u=a;while(o*=2,i=n+o,r=s-o,e>i||r>t);break;case 3:do a=new Array(4),a[f]=u,u=a;while(o*=2,n=i-o,r=s-o,n>e||r>t)}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function gn(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function yn(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]}function bn(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function wn(e,t,n){var r,i=this._x0,s=this._y0,o,u,a,f,l=this._x1,c=this._y1,h=[],p=this._root,d,v;p&&h.push(new bn(p,i,s,l,c)),n==null?n=Infinity:(i=e-n,s=t-n,l=e+n,c=t+n,n*=n);while(d=h.pop()){if(!(p=d.node)||(o=d.x0)>l||(u=d.y0)>c||(a=d.x1)<i||(f=d.y1)<s)continue;if(p.length){var m=(o+a)/2,g=(u+f)/2;h.push(new bn(p[3],m,g,a,f),new bn(p[2],o,g,m,f),new bn(p[1],m,u,a,g),new bn(p[0],o,u,m,g));if(v=(t>=g)<<1|e>=m)d=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=d}else{var y=e- +this._x.call(null,p.data),b=t- +this._y.call(null,p.data),w=y*y+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,l=e+E,c=t+E,r=p.data}}}return r}function En(e){if(isNaN(l=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,u=this._y0,a=this._x1,f=this._y1,l,c,h,p,d,v,m,g;if(!n)return this;if(n.length)for(;;){(d=l>=(h=(o+a)/2))?o=h:a=h,(v=c>=(p=(u+f)/2))?u=p:f=p;if(!(t=n,n=n[m=v<<1|d]))return this;if(!n.length)break;if(t[m+1&3]||t[m+2&3]||t[m+3&3])r=t,g=m}while(n.data!==e)if(!(i=n,n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[m]=s:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[g]=n:this._root=n),this):(this._root=s,this)}function Sn(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function xn(){return this._root}function Tn(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Nn(e){var t=[],n,r=this._root,i,s,o,u,a;r&&t.push(new bn(r,this._x0,this._y0,this._x1,this._y1));while(n=t.pop())if(!e(r=n.node,s=n.x0,o=n.y0,u=n.x1,a=n.y1)&&r.length){var f=(s+u)/2,l=(o+a)/2;(i=r[3])&&t.push(new bn(i,f,l,u,a)),(i=r[2])&&t.push(new bn(i,s,l,f,a)),(i=r[1])&&t.push(new bn(i,f,o,u,l)),(i=r[0])&&t.push(new bn(i,s,o,f,l))}return this}function Cn(e){var t=[],n=[],r;this._root&&t.push(new bn(this._root,this._x0,this._y0,this._x1,this._y1));while(r=t.pop()){var i=r.node;if(i.length){var s,o=r.x0,u=r.y0,a=r.x1,f=r.y1,l=(o+a)/2,c=(u+f)/2;(s=i[0])&&t.push(new bn(s,o,u,l,c)),(s=i[1])&&t.push(new bn(s,l,u,a,c)),(s=i[2])&&t.push(new bn(s,o,c,l,f)),(s=i[3])&&t.push(new bn(s,l,c,a,f))}n.push(r)}while(r=n.pop())e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function kn(e){return e[0]}function Ln(e){return arguments.length?(this._x=e,this):this._x}function An(e){return e[1]}function On(e){return arguments.length?(this._y=e,this):this._y}function Mn(e,t,n){var r=new _n(t==null?kn:t,n==null?An:n,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function _n(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=undefined}function Dn(e){var t={data:e.data},n=t;while(e=e.next)n=n.next={data:e.data};return t}function jn(e){if(!(e>=1))throw new Error;this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function Fn(e){if(!e._start)try{In(e)}catch(t){if(e._tasks[e._ended+e._active-1])Rn(e,t);else if(!e._data)throw t}}function In(e){while(e._start=e._waiting&&e._active<e._size){var t=e._ended+e._active,n=e._tasks[t],r=n.length-1,i=n[r];n[r]=qn(e,t),--e._waiting,++e._active,n=i.apply(null,n);if(!e._tasks[t])continue;e._tasks[t]=n||Bn}}function qn(e,t){return function(n,r){if(!e._tasks[t])return;--e._active,++e._ended,e._tasks[t]=null;if(e._error!=null)return;n!=null?Rn(e,n):(e._data[t]=r,e._waiting?Fn(e):Un(e))}}function Rn(e,t){var n=e._tasks.length,r;e._error=t,e._data=undefined,e._waiting=NaN;while(--n>=0)if(r=e._tasks[n]){e._tasks[n]=null;if(r.abort)try{r.abort()}catch(t){}}e._active=NaN,Un(e)}function Un(e){if(!e._active&&e._call){var t=e._data;e._data=undefined,e._call(e._error,t)}}function zn(e){return new jn(arguments.length?+e:Infinity)}function Wn(e){return function(){return e}}function Kn(e){return e.innerRadius}function Qn(e){return e.outerRadius}function Gn(e){return e.startAngle}function Yn(e){return e.endAngle}function Zn(e){return e&&e.padAngle}function er(e){return e>=1?$n:e<=-1?-$n:Math.asin(e)}function tr(e,t,n,r,i,s,o,u){var a=n-e,f=r-t,l=o-i,c=u-s,h=(l*(t-s)-c*(e-i))/(c*a-l*f);return[e+h*a,t+h*f]}function nr(e,t,n,r,i,s,o){var u=e-n,a=t-r,f=(o?s:-s)/Math.sqrt(u*u+a*a),l=f*a,c=-f*u,h=e+l,p=t+c,d=n+l,v=r+c,m=(h+d)/2,g=(p+v)/2,y=d-h,b=v-p,w=y*y+b*b,E=i-s,S=h*v-d*p,x=(b<0?-1:1)*Math.sqrt(Math.max(0,E*E*w-S*S)),T=(S*b-y*x)/w,N=(-S*y-b*x)/w,C=(S*b+y*x)/w,k=(-S*y+b*x)/w,L=T-m,A=N-g,O=C-m,M=k-g;return L*L+A*A>O*O+M*M&&(T=C,N=k),{cx:T,cy:N,x01:-l,y01:-c,x11:T*(i/E-1),y11:N*(i/E-1)}}function rr(){function a(){var a,f,l=+e.apply(this,arguments),c=+t.apply(this,arguments),h=i.apply(this,arguments)-$n,p=s.apply(this,arguments)-$n,d=Math.abs(p-h),v=p>h;u||(u=a=hn()),c<l&&(f=c,c=l,l=f);if(c>Xn)if(d>Jn-Xn)u.moveTo(c*Math.cos(h),c*Math.sin(h)),u.arc(0,0,c,h,p,!v),l>Xn&&(u.moveTo(l*Math.cos(p),l*Math.sin(p)),u.arc(0,0,l,p,h,v));else{var m=h,g=p,y=h,b=p,w=d,E=d,S=o.apply(this,arguments)/2,x=S>Xn&&(r?+r.apply(this,arguments):Math.sqrt(l*l+c*c)),T=Math.min(Math.abs(c-l)/2,+n.apply(this,arguments)),N=T,C=T,k,L;if(x>Xn){var A=er(x/l*Math.sin(S)),O=er(x/c*Math.sin(S));(w-=A*2)>Xn?(A*=v?1:-1,y+=A,b-=A):(w=0,y=b=(h+p)/2),(E-=O*2)>Xn?(O*=v?1:-1,m+=O,g-=O):(E=0,m=g=(h+p)/2)}var M=c*Math.cos(m),_=c*Math.sin(m),D=l*Math.cos(b),P=l*Math.sin(b);if(T>Xn){var H=c*Math.cos(g),B=c*Math.sin(g),j=l*Math.cos(y),F=l*Math.sin(y);if(d<Vn){var I=w>Xn?tr(M,_,j,F,H,B,D,P):[D,P],q=M-I[0],R=_-I[1],U=H-I[0],z=B-I[1],W=1/Math.sin(Math.acos((q*U+R*z)/(Math.sqrt(q*q+R*R)*Math.sqrt(U*U+z*z)))/2),X=Math.sqrt(I[0]*I[0]+I[1]*I[1]);N=Math.min(T,(l-X)/(W-1)),C=Math.min(T,(c-X)/(W+1))}}E>Xn?C>Xn?(k=nr(j,F,M,_,c,C,v),L=nr(H,B,D,P,c,C,v),u.moveTo(k.cx+k.x01,k.cy+k.y01),C<T?u.arc(k.cx,k.cy,C,Math.atan2(k.y01,k.x01),Math.atan2(L.y01,L.x01),!v):(u.arc(k.cx,k.cy,C,Math.atan2(k.y01,k.x01),Math.atan2(k.y11,k.x11),!v),u.arc(0,0,c,Math.atan2(k.cy+k.y11,k.cx+k.x11),Math.atan2(L.cy+L.y11,L.cx+L.x11),!v),u.arc(L.cx,L.cy,C,Math.atan2(L.y11,L.x11),Math.atan2(L.y01,L.x01),!v))):(u.moveTo(M,_),u.arc(0,0,c,m,g,!v)):u.moveTo(M,_),l>Xn&&w>Xn?N>Xn?(k=nr(D,P,H,B,l,-N,v),L=nr(M,_,j,F,l,-N,v),u.lineTo(k.cx+k.x01,k.cy+k.y01),N<T?u.arc(k.cx,k.cy,N,Math.atan2(k.y01,k.x01),Math.atan2(L.y01,L.x01),!v):(u.arc(k.cx,k.cy,N,Math.atan2(k.y01,k.x01),Math.atan2(k.y11,k.x11),!v),u.arc(0,0,l,Math.atan2(k.cy+k.y11,k.cx+k.x11),Math.atan2(L.cy+L.y11,L.cx+L.x11),v),u.arc(L.cx,L.cy,N,Math.atan2(L.y11,L.x11),Math.atan2(L.y01,L.x01),!v))):u.arc(0,0,l,b,y,v):u.lineTo(D,P)}else u.moveTo(0,0);u.closePath();if(a)return u=null,a+""||null}var e=Kn,t=Qn,n=Wn(0),r=null,i=Gn,s=Yn,o=Zn,u=null;return a.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Vn/2;return[Math.cos(r)*n,Math.sin(r)*n]},a.innerRadius=function(t){return arguments.length?(e=typeof t=="function"?t:Wn(+t),a):e},a.outerRadius=function(e){return arguments.length?(t=typeof e=="function"?e:Wn(+e),a):t},a.cornerRadius=function(e){return arguments.length?(n=typeof e=="function"?e:Wn(+e),a):n},a.padRadius=function(e){return arguments.length?(r=e==null?null:typeof e=="function"?e:Wn(+e),a):r},a.startAngle=function(e){return arguments.length?(i=typeof e=="function"?e:Wn(+e),a):i},a.endAngle=function(e){return arguments.length?(s=typeof e=="function"?e:Wn(+e),a):s},a.padAngle=function(e){return arguments.length?(o=typeof e=="function"?e:Wn(+e),a):o},a.context=function(e){return arguments.length?(u=e==null?null:e,a):u},a}function ir(e){this._context=e}function sr(e){return new ir(e)}function or(e){return e[0]}function ur(e){return e[1]}function ar(){function o(o){var u,a=o.length,f,l=!1,c;r==null&&(s=i(c=hn()));for(u=0;u<=a;++u)!(u<a&&n(f=o[u],u,o))===l&&((l=!l)?s.lineStart():s.lineEnd()),l&&s.point(+e(f,u,o),+t(f,u,o));if(c)return s=null,c+""||null}var e=or,t=ur,n=Wn(!0),r=null,i=sr,s=null;return o.x=function(t){return arguments.length?(e=typeof t=="function"?t:Wn(+t),o):e},o.y=function(e){return arguments.length?(t=typeof e=="function"?e:Wn(+e),o):t},o.defined=function(e){return arguments.length?(n=typeof e=="function"?e:Wn(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,r!=null&&(s=i(r)),o):i},o.context=function(e){return arguments.length?(e==null?r=s=null:s=i(r=e),o):r},o}function fr(){function a(a){var f,l,c,h=a.length,p,d=!1,v,m=new Array(h),g=new Array(h);s==null&&(u=o(v=hn()));for(f=0;f<=h;++f){if(!(f<h&&i(p=a[f],f,a))===d)if(d=!d)l=f,u.areaStart(),u.lineStart();else{u.lineEnd(),u.lineStart();for(c=f-1;c>=l;--c)u.point(m[c],g[c]);u.lineEnd(),u.areaEnd()}d&&(m[f]=+e(p,f,a),g[f]=+n(p,f,a),u.point(t?+t(p,f,a):m[f],r?+r(p,f,a):g[f]))}if(v)return u=null,v+""||null}function f(){return ar().defined(i).curve(o).context(s)}var e=or,t=null,n=Wn(0),r=ur,i=Wn(!0),s=null,o=sr,u=null;return a.x=function(n){return arguments.length?(e=typeof n=="function"?n:Wn(+n),t=null,a):e},a.x0=function(t){return arguments.length?(e=typeof t=="function"?t:Wn(+t),a):e},a.x1=function(e){return arguments.length?(t=e==null?null:typeof e=="function"?e:Wn(+e),a):t},a.y=function(e){return arguments.length?(n=typeof e=="function"?e:Wn(+e),r=null,a):n},a.y0=function(e){return arguments.length?(n=typeof e=="function"?e:Wn(+e),a):n},a.y1=function(e){return arguments.length?(r=e==null?null:typeof e=="function"?e:Wn(+e),a):r},a.lineX0=a.lineY0=function(){return f().x(e).y(n)},a.lineY1=function(){return f().x(e).y(r)},a.lineX1=function(){return f().x(t).y(n)},a.defined=function(e){return arguments.length?(i=typeof e=="function"?e:Wn(!!e),a):i},a.curve=function(e){return arguments.length?(o=e,s!=null&&(u=o(s)),a):o},a.context=function(e){return arguments.length?(e==null?s=u=null:u=o(s=e),a):s},a}function lr(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function cr(e){return e}function hr(){function o(o){var u,a=o.length,f,l,c=0,h=new Array(a),p=new Array(a),d=+r.apply(this,arguments),v=Math.min(Jn,Math.max(-Jn,i.apply(this,arguments)-d)),m,g=Math.min(Math.abs(v)/a,s.apply(this,arguments)),y=g*(v<0?-1:1),b;for(u=0;u<a;++u)(b=p[h[u]=u]=+e(o[u],u,o))>0&&(c+=b);t!=null?h.sort(function(e,n){return t(p[e],p[n])}):n!=null&&h.sort(function(e,t){return n(o[e],o[t])});for(u=0,l=c?(v-a*y)/c:0;u<a;++u,d=m)f=h[u],b=p[f],m=d+(b>0?b*l:0)+y,p[f]={data:o[f],index:u,value:b,startAngle:d,endAngle:m,padAngle:g};return p}var e=cr,t=lr,n=null,r=Wn(0),i=Wn(Jn),s=Wn(0);return o.value=function(t){return arguments.length?(e=typeof t=="function"?t:Wn(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,n=null,o):t},o.sort=function(e){return arguments.length?(n=e,t=null,o):n},o.startAngle=function(e){return arguments.length?(r=typeof e=="function"?e:Wn(+e),o):r},o.endAngle=function(e){return arguments.length?(i=typeof e=="function"?e:Wn(+e),o):i},o.padAngle=function(e){return arguments.length?(s=typeof e=="function"?e:Wn(+e),o):s},o}function dr(e){this._curve=e}function vr(e){function t(t){return new dr(e(t))}return t._curve=e,t}function mr(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(vr(e)):t()._curve},e}function gr(){return mr(ar().curve(pr))}function yr(){var e=fr().curve(pr),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,s=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return mr(n())},delete e.lineX0,e.lineEndAngle=function(){return mr(r())},delete e.lineX1,e.lineInnerRadius=function(){return mr(i())},delete e.lineY0,e.lineOuterRadius=function(){return mr(s())},delete e.lineY1,e.curve=function(e){return arguments.length?t(vr(e)):t()._curve},e}function Fr(){function r(){var r;n||(n=r=hn()),e.apply(this,arguments).draw(n,+t.apply(this,arguments));if(r)return n=null,r+""||null}var e=Wn(br),t=Wn(64),n=null;return r.type=function(t){return arguments.length?(e=typeof t=="function"?t:Wn(t),r):e},r.size=function(e){return arguments.length?(t=typeof e=="function"?e:Wn(+e),r):t},r.context=function(e){return arguments.length?(n=e==null?null:e,r):n},r}function Ir(){}function qr(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Rr(e){this._context=e}function Ur(e){return new Rr(e)}function zr(e){this._context=e}function Wr(e){return new zr(e)}function Xr(e){this._context=e}function Vr(e){return new Xr(e)}function $r(e,t){this._basis=new Rr(e),this._beta=t}function Kr(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Qr(e,t){this._context=e,this._k=(1-t)/6}function Yr(e,t){this._context=e,this._k=(1-t)/6}function ei(e,t){this._context=e,this._k=(1-t)/6}function ni(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Xn){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,a=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/a,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/a}if(e._l23_a>Xn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*f+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*f+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function ri(e,t){this._context=e,this._alpha=t}function si(e,t){this._context=e,this._alpha=t}function ui(e,t){this._context=e,this._alpha=t}function fi(e){this._context=e}function li(e){return new fi(e)}function ci(e){return e<0?-1:1}function hi(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&0),o=(n-e._y1)/(i||r<0&&0),u=(s*i+o*r)/(r+i);return(ci(s)+ci(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(u))||0}function pi(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function di(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,u=(s-r)/3;e._context.bezierCurveTo(r+u,i+u*t,s-u,o-u*n,s,o)}function vi(e){this._context=e}function mi(e){this._context=new gi(e)}function gi(e){this._context=e}function yi(e){return new vi(e)}function bi(e){return new mi(e)}function wi(e){this._context=e}function Ei(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);i[0]=0,s[0]=2,o[0]=e[0]+2*e[1];for(t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n];for(t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];i[n-1]=o[n-1]/s[n-1];for(t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];s[n-1]=(e[n]+i[n-1])/2;for(t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Si(e){return new wi(e)}function xi(e,t){this._context=e,this._t=t}function Ti(e){return new xi(e,.5)}function Ni(e){return new xi(e,0)}function Ci(e){return new xi(e,1)}function Li(e,t){if(!((s=e.length)>1))return;for(var n=1,r,i=e[t[0]],s,o=i.length;n<s;++n){r=i,i=e[t[n]];for(var u=0;u<o;++u)i[u][1]+=i[u][0]=isNaN(r[u][1])?r[u][0]:r[u][1]}}function Ai(e){var t=e.length,n=new Array(t);while(--t>=0)n[t]=t;return n}function Oi(e,t){return e[t]}function Mi(){function i(i){var s=e.apply(this,arguments),o,u=i.length,a=s.length,f=new Array(a),l;for(o=0;o<a;++o){for(var c=s[o],h=f[o]=new Array(u),p=0,d;p<u;++p)h[p]=d=[0,+r(i[p],c,p,i)],d.data=i[p];h.key=c}for(o=0,l=t(f);o<a;++o)f[l[o]].index=o;return n(f,l),f}var e=Wn([]),t=Ai,n=Li,r=Oi;return i.keys=function(t){return arguments.length?(e=typeof t=="function"?t:Wn(ki.call(t)),i):e},i.value=function(e){return arguments.length?(r=typeof e=="function"?e:Wn(+e),i):r},i.order=function(e){return arguments.length?(t=e==null?Ai:typeof e=="function"?e:Wn(ki.call(e)),i):t},i.offset=function(e){return arguments.length?(n=e==null?Li:e,i):n},i}function _i(e,t){if(!((r=e.length)>0))return;for(var n,r,i=0,s=e[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<r;++n)e[n][i][1]/=o}Li(e,t)}function Di(e,t){if(!((i=e.length)>0))return;for(var n=0,r=e[t[0]],i,s=r.length;n<s;++n){for(var o=0,u=0;o<i;++o)u+=e[o][n][1]||0;r[n][1]+=r[n][0]=-u/2}Li(e,t)}function Pi(e,t){if(!((o=e.length)>0&&(s=(i=e[t[0]]).length)>0))return;for(var n=0,r=1,i,s,o;r<s;++r){for(var u=0,a=0,f=0;u<o;++u){var l=e[t[u]],c=l[r][1]||0,h=l[r-1][1]||0,p=(c-h)/2;for(var d=0;d<u;++d){var v=e[t[d]],m=v[r][1]||0,g=v[r-1][1]||0;p+=m-g}a+=c,f+=p*c}i[r-1][1]+=i[r-1][0]=n,a&&(n-=f/a)}i[r-1][1]+=i[r-1][0]=n,Li(e,t)}function Hi(e){var t=e.map(Bi);return Ai(e).sort(function(e,n){return t[e]-t[n]})}function Bi(e){var t=0,n=-1,r=e.length,i;while(++n<r)if(i=+e[n][1])t+=i;return t}function ji(e){return Hi(e).reverse()}function Fi(e){var t=e.length,n,r,i=e.map(Bi),s=Ai(e).sort(function(e,t){return i[t]-i[e]}),o=0,u=0,a=[],f=[];for(n=0;n<t;++n)r=s[n],o<u?(o+=i[r],a.push(r)):(u+=i[r],f.push(r));return f.reverse().concat(a)}function Ii(e){return Ai(e).reverse()}function qi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ri(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ui(){}function es(e){var t;return e=(e+"").trim().toLowerCase(),(t=Xi.exec(e))?(t=parseInt(t[1],16),new ss(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1)):(t=Vi.exec(e))?ts(parseInt(t[1],16)):(t=$i.exec(e))?new ss(t[1],t[2],t[3],1):(t=Ji.exec(e))?new ss(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ki.exec(e))?ns(t[1],t[2],t[3],t[4]):(t=Qi.exec(e))?ns(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gi.exec(e))?os(t[1],t[2]/100,t[3]/100,1):(t=Yi.exec(e))?os(t[1],t[2]/100,t[3]/100,t[4]):Zi.hasOwnProperty(e)?ts(Zi[e]):e==="transparent"?new ss(NaN,NaN,NaN,0):null}function ts(e){return new ss(e>>16&255,e>>8&255,e&255,1)}function ns(e,t,n,r){return r<=0&&(e=t=n=NaN),new ss(e,t,n,r)}function rs(e){return e instanceof Ui||(e=es(e)),e?(e=e.rgb(),new ss(e.r,e.g,e.b,e.opacity)):new ss}function is(e,t,n,r){return arguments.length===1?rs(e):new ss(e,t,n,r==null?1:r)}function ss(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function os(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fs(e,t,n,r)}function us(e){if(e instanceof fs)return new fs(e.h,e.s,e.l,e.opacity);e instanceof Ui||(e=es(e));if(!e)return new fs;if(e instanceof fs)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,u=s-i,a=(s+i)/2;return u?(t===s?o=(n-r)/u+(n<r)*6:n===s?o=(r-t)/u+2:o=(t-n)/u+4,u/=a<.5?s+i:2-s-i,o*=60):u=a>0&&a<1?0:o,new fs(o,u,a,e.opacity)}function as(e,t,n,r){return arguments.length===1?us(e):new fs(e,t,n,r==null?1:r)}function fs(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ls(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function Es(e){if(e instanceof xs)return new xs(e.l,e.a,e.b,e.opacity);if(e instanceof Os){var t=e.h*cs;return new xs(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof ss||(e=rs(e));var n=ks(e.r),r=ks(e.g),i=ks(e.b),s=Ts((.4124564*n+.3575761*r+.1804375*i)/ds),o=Ts((.2126729*n+.7151522*r+.072175*i)/vs),u=Ts((.0193339*n+.119192*r+.9503041*i)/ms);return new xs(116*o-16,500*(s-o),200*(o-u),e.opacity)}function Ss(e,t,n,r){return arguments.length===1?Es(e):new xs(e,t,n,r==null?1:r)}function xs(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Ts(e){return e>ws?Math.pow(e,1/3):e/bs+gs}function Ns(e){return e>ys?e*e*e:bs*(e-gs)}function Cs(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ks(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ls(e){if(e instanceof Os)return new Os(e.h,e.c,e.l,e.opacity);e instanceof xs||(e=Es(e));var t=Math.atan2(e.b,e.a)*hs;return new Os(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function As(e,t,n,r){return arguments.length===1?Ls(e):new Os(e,t,n,r==null?1:r)}function Os(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Is(e){if(e instanceof Rs)return new Rs(e.h,e.s,e.l,e.opacity);e instanceof ss||(e=rs(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Fs*r+Bs*t-js*n)/(Fs+Bs-js),s=r-i,o=(Hs*(n-i)-Ds*s)/Ps,u=Math.sqrt(o*o+s*s)/(Hs*i*(1-i)),a=u?Math.atan2(o,s)*hs-120:NaN;return new Rs(a<0?a+360:a,u,i,e.opacity)}function qs(e,t,n,r){return arguments.length===1?Is(e):new Rs(e,t,n,r==null?1:r)}function Rs(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Us(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function zs(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,u=r<t-1?e[r+2]:2*s-i;return Us((n-r/t)*t,o,i,s,u)}}function Ws(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return Us((n-r/t)*t,i,s,o,u)}}function Xs(e){return function(){return e}}function Vs(e,t){return function(n){return e+n*t}}function $s(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Js(e,t){var n=t-e;return n?Vs(e,n>180||n<-180?n-360*Math.round(n/360):n):Xs(isNaN(e)?t:e)}function Ks(e){return(e=+e)===1?Qs:function(t,n){return n-t?$s(t,n,e):Xs(isNaN(t)?n:t)}}function Qs(e,t){var n=t-e;return n?Vs(e,n):Xs(isNaN(e)?t:e)}function Ys(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,u;for(o=0;o<n;++o)u=is(t[o]),r[o]=u.r||0,i[o]=u.g||0,s[o]=u.b||0;return r=e(r),i=e(i),s=e(s),u.opacity=1,function(e){return u.r=r(e),u.g=i(e),u.b=s(e),u+""}}}function to(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(n),s=new Array(n),o;for(o=0;o<r;++o)i[o]=lo(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(e){for(o=0;o<r;++o)s[o]=i[o](e);return s}}function no(e,t){var n=new Date;return e=+e,t-=e,function(r){return n.setTime(e+t*r),n}}function ro(e,t){return e=+e,t-=e,function(n){return e+t*n}}function io(e,t){var n={},r={},i;if(e===null||typeof e!="object")e={};if(t===null||typeof t!="object")t={};for(i in t)i in e?n[i]=lo(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}}function uo(e){return function(){return e}}function ao(e){return function(t){return e(t)+""}}function fo(e,t){var n=so.lastIndex=oo.lastIndex=0,r,i,s,o=-1,u=[],a=[];e+="",t+="";while((r=so.exec(e))&&(i=oo.exec(t)))(s=i.index)>n&&(s=t.slice(n,s),u[o]?u[o]+=s:u[++o]=s),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,a.push({i:o,x:ro(r,i)})),n=oo.lastIndex;return n<t.length&&(s=t.slice(n),u[o]?u[o]+=s:u[++o]=s),u.length<2?a[0]?ao(a[0].x):uo(t):(t=a.length,function(e){for(var n=0,r;n<t;++n)u[(r=a[n]).i]=r.x(e);return u.join("")})}function lo(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xs(t):(n==="number"?ro:n==="string"?(r=es(t))?(t=r,Gs):fo:t instanceof es?Gs:t instanceof Date?no:Array.isArray(t)?to:isNaN(t)?io:ro)(e,t)}function co(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}}function vo(e,t,n,r,i,s){var o,u,a;if(o=Math.sqrt(e*e+t*t))e/=o,t/=o;if(a=e*n+t*r)n-=e*a,r-=t*a;if(u=Math.sqrt(n*n+r*r))n/=u,r/=u,a/=u;return e*r<t*n&&(e=-e,t=-t,a=-a,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ho,skewX:Math.atan(a)*ho,scaleX:o,scaleY:u}}function wo(e){return e==="none"?po:(mo||(mo=document.createElement("DIV"),go=document.documentElement,yo=document.defaultView),mo.style.transform=e,e=yo.getComputedStyle(go.appendChild(mo),null).getPropertyValue("transform"),go.removeChild(mo),e=e.slice(7,-1).split(","),vo(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function Eo(e){return e==null?po:(bo||(bo=document.createElementNS("http://www.w3.org/2000/svg","g")),bo.setAttribute("transform",e),(e=bo.transform.baseVal.consolidate())?(e=e.matrix,vo(e.a,e.b,e.c,e.d,e.e,e.f)):po)}function So(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function s(e,r,i,s,o,u){if(e!==i||r!==s){var a=o.push("translate(",null,t,null,n);u.push({i:a-4,x:ro(e,i)},{i:a-2,x:ro(r,s)})}else(i||s)&&o.push("translate("+i+t+s+n)}function o(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:ro(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function u(e,t,n,s){e!==t?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:ro(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function a(e,t,n,r,s,o){if(e!==n||t!==r){var u=s.push(i(s)+"scale(",null,",",null,")");o.push({i:u-4,x:ro(e,n)},{i:u-2,x:ro(t,r)})}else(n!==1||r!==1)&&s.push(i(s)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),s(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),u(t.skewX,n.skewX,r,i),a(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){var t=-1,n=i.length,s;while(++t<n)r[(s=i[t]).i]=s.x(e);return r.join("")}}}function Ao(e){return((e=Math.exp(e))+1/e)/2}function Oo(e){return((e=Math.exp(e))-1/e)/2}function Mo(e){return((e=Math.exp(2*e))-1)/(e+1)}function _o(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],u=t[2],a=s-n,f=o-r,l=a*a+f*f,c,h;if(l<Lo)h=Math.log(u/i)/No,c=function(e){return[n+e*a,r+e*f,i*Math.exp(No*e*h)]};else{var p=Math.sqrt(l),d=(u*u-i*i+ko*l)/(2*i*Co*p),v=(u*u-i*i-ko*l)/(2*u*Co*p),m=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(v*v+1)-v);h=(g-m)/No,c=function(e){var t=e*h,s=Ao(m),o=i/(Co*p)*(s*Mo(No*t+m)-Oo(m));return[n+o*a,r+o*f,i*s/Ao(No*t+m)]}}return c.duration=h*1e3,c}function Do(e){return function(t,n){var r=e((t=as(t)).h,(n=as(n)).h),i=Qs(t.s,n.s),s=Qs(t.l,n.l),o=Qs(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=s(e),t.opacity=o(e),t+""}}}function Bo(e,t){var n=Qs((e=Ss(e)).l,(t=Ss(t)).l),r=Qs(e.a,t.a),i=Qs(e.b,t.b),s=Qs(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=s(t),e+""}}function jo(e){return function(t,n){var r=e((t=As(t)).h,(n=As(n)).h),i=Qs(t.c,n.c),s=Qs(t.l,n.l),o=Qs(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=s(e),t.opacity=o(e),t+""}}}function qo(e){return function t(n){function r(t,r){var i=e((t=qs(t)).h,(r=qs(r)).h),s=Qs(t.s,r.s),o=Qs(t.l,r.l),u=Qs(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=s(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}function zo(e,t){var n=new Array(t);for(var r=0;r<t;++r)n[r]=e(r/(t-1));return n}function Xo(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new Vo(n)}function Vo(e){this._=e}function $o(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");r>=0&&(n=e.slice(r+1),e=e.slice(0,r));if(e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function Jo(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ko(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Wo,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}function Qo(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Go(e,t){var n=Qo(e);return function(r,i){return t(n(r),i,e)}}function Yo(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function Zo(e){function r(e,t){var n,r,s=i(e,function(e,i){if(n)return n(e,i-1);r=e,n=t?Go(e,t):Qo(e)});return s.columns=r,s}function i(e,t){function c(){if(u>=o)return i;if(l)return l=!1,r;var t=u,s;if(e.charCodeAt(t)===34){var a=t;while(a++<o)if(e.charCodeAt(a)===34){if(e.charCodeAt(a+1)!==34)break;++a}return u=a+2,s=e.charCodeAt(a+1),s===13?(l=!0,e.charCodeAt(a+2)===10&&++u):s===10&&(l=!0),e.slice(t+1,a).replace(/""/g,'"')}while(u<o){var f=1;s=e.charCodeAt(u++);if(s===10)l=!0;else if(s===13)l=!0,e.charCodeAt(u)===10&&(++u,++f);else if(s!==n)continue;return e.slice(t,u-f)}return e.slice(t)}var r={},i={},s=[],o=e.length,u=0,a=0,f,l;while((f=c())!==i){var h=[];while(f!==r&&f!==i)h.push(f),f=c();if(t&&(h=t(h,a++))==null)continue;s.push(h)}return s}function s(t,n){return n==null&&(n=Yo(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")}function o(e){return e.map(u).join("\n")}function u(t){return t.map(a).join(e)}function a(e){return e==null?"":t.test(e+="")?'"'+e.replace(/\"/g,'""')+'"':e}var t=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);return{parse:r,parseRows:i,format:s,formatRows:o}}function lu(e,t){function h(e){var t=o.status,i;if(!t&&hu(o)||t>=200&&t<300||t===304){if(f)try{i=f.call(n,o)}catch(s){r.call("error",n,s);return}else i=o;r.call("load",n,i)}else r.call("error",n,e)}var n,r=Xo("beforesend","progress","load","error"),i,s=z(),o=new XMLHttpRequest,u=null,a=null,f,l,c=0;typeof XDomainRequest!="undefined"&&!("withCredentials"in o)&&/^(http(s)?:)?\/\//.test(e)&&(o=new XDomainRequest),"onload"in o?o.onload=o.onerror=o.ontimeout=h:o.onreadystatechange=function(e){o.readyState>3&&h(e)},o.onprogress=function(e){r.call("progress",n,e)},n={header:function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s.get(e):(t==null?s.remove(e):s.set(e,t+""),n)},mimeType:function(e){return arguments.length?(i=e==null?null:e+"",n):i},responseType:function(e){return arguments.length?(l=e,n):l},timeout:function(e){return arguments.length?(c=+e,n):c},user:function(e){return arguments.length<1?u:(u=e==null?null:e+"",n)},password:function(e){return arguments.length<1?a:(a=e==null?null:e+"",n)},response:function(e){return f=e,n},get:function(e,t){return n.send("GET",e,t)},post:function(e,t){return n.send("POST",e,t)},send:function(t,f,h){return o.open(t,e,!0,u,a),i!=null&&!s.has("accept")&&s.set("accept",i+",*/*"),o.setRequestHeader&&s.each(function(e,t){o.setRequestHeader(t,e)}),i!=null&&o.overrideMimeType&&o.overrideMimeType(i),l!=null&&(o.responseType=l),c>0&&(o.timeout=c),h==null&&typeof f=="function"&&(h=f,f=null),h!=null&&h.length===1&&(h=cu(h)),h!=null&&n.on("error",h).on("load",function(e){h(null,e)}),r.call("beforesend",n,o),o.send(f==null?null:f),n},abort:function(){return o.abort(),n},on:function(){var e=r.on.apply(r,arguments);return e===r?n:e}};if(t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return n.get(t)}return n}function cu(e){return function(t,n){e(t==null?n:null)}}function hu(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function pu(e,t){return function(n,r){var i=lu(n).mimeType(e).response(t);if(r!=null){if(typeof r!="function")throw new Error("invalid callback: "+r);return i.get(r)}return i}}function yu(e,t){return function(n,r,i){arguments.length<3&&(i=r,r=null);var s=lu(n).mimeType(e);return s.row=function(e){return arguments.length?s.response(bu(t,r=e)):r},s.row(r),i?s.get(i):s}}function bu(e,t){return function(n){return e(n.responseText,t)}}function Du(){return Au||(_u(Pu),Au=Mu.now()+Ou)}function Pu(){Au=0}function Hu(){this._call=this._time=this._next=null}function Bu(e,t,n){var r=new Hu;return r.restart(e,t,n),r}function ju(){Du(),++Su;var e=Cu,t;while(e)(t=Au-e._time)>=0&&e._call.call(null,t),e=e._next;--Su}function Fu(e){Au=(Lu=e||Mu.now())+Ou,Su=xu=0;try{ju()}finally{Su=0,qu(),Au=0}}function Iu(){var e=Mu.now(),t=e-Lu;t>Nu&&(Ou-=t,Lu=e)}function qu(){var e,t=Cu,n,r=Infinity;while(t)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Cu=n);ku=e,Ru(r)}function Ru(e){if(Su)return;xu&&(xu=clearTimeout(xu));var t=e-Au;t>24?(e<Infinity&&(xu=setTimeout(Fu,t)),Tu&&(Tu=clearInterval(Tu))):(Tu||(Tu=setInterval(Iu,Nu)),Su=1,_u(Fu))}function Uu(e,t,n){var r=new Hu;return t=t==null?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r}function zu(e,t,n){var r=new Hu,i=t;return t==null?(r.restart(e,t,n),r):(t=+t,n=n==null?Du():+n,r.restart(function s(o){o+=i,r.restart(s,i+=t,n),e(o)},t,n),r)}function Vu(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),n==null?1:Math.floor(n)),e},i.range=function(n,r,s){var o=[];n=i.ceil(n),s=s==null?1:Math.floor(s);if(n<r&&s>0){do o.push(new Date(+n));while(t(n,s),e(n),n<r);return o}return o},i.filter=function(n){return Vu(function(t){while(e(t),!n(t))t.setTime(t-1)},function(e,r){while(--r>=0)while(t(e,1),!n(e));})},n&&(i.count=function(t,r){return Wu.setTime(+t),Xu.setTime(+r),e(Wu),e(Xu),Math.floor(n(Wu,Xu))},i.every=function(e){return e=Math.floor(e),!!isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e===0}:function(t){return i.count(0,t)%e===0}):i:null}),i}function aa(e){return Vu(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qu)/Zu})}function Da(e){return Vu(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/Zu})}function Ya(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Za(e){return e=Ya(Math.abs(e)),e?e[1]:NaN}function ef(e,t){return function(n,r){var i=n.length,s=[],o=0,u=e[0],a=0;while(i>0&&u>0){a+u+1>r&&(u=Math.max(1,r-a)),s.push(n.substring(i-=u,i+u));if((a+=u+1)>r)break;u=e[o=(o+1)%e.length]}return s.reverse().join(t)}}function tf(e,t){e=e.toPrecision(t);e:for(var n=e.length,r=1,i=-1,s;r<n;++r)switch(e[r]){case".":i=s=r;break;case"0":i===0&&(i=r),s=r;break;case"e":break e;default:i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(s+1):e}function rf(e,t){var n=Ya(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(nf=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+(new Array(s-o+1)).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+(new Array(1-s)).join("0")+Ya(e,Math.max(0,t+s-1))[0]}function sf(e,t){var n=Ya(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+(new Array(-i)).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+(new Array(i-r.length+2)).join("0")}function af(e){return new ff(e)}function ff(e){if(!(t=uf.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",s=t[4]||"",o=!!t[5],u=t[6]&&+t[6],a=!!t[7],f=t[8]&&+t[8].slice(1),l=t[9]||"";l==="n"?(a=!0,l="g"):of[l]||(l="");if(o||n==="0"&&r==="=")o=!0,n="0",r="=";this.fill=n,this.align=r,this.sign=i,this.symbol=s,this.zero=o,this.width=u,this.comma=a,this.precision=f,this.type=l}function cf(e){return e}function hf(e){function i(e){function g(e){var n=p,u=d,g,y,b;if(h==="c")u=v(e)+u,e="";else{e=+e;var w=(e<0||1/e<0)&&(e*=-1,!0);e=v(e,c);if(w){g=-1,y=e.length,w=!1;while(++g<y)if(b=e.charCodeAt(g),48<b&&b<58||h==="x"&&96<b&&b<103||h==="X"&&64<b&&b<71){w=!0;break}}n=(w?o==="("?o:"-":o==="-"||o==="("?"":o)+n,u=u+(h==="s"?lf[8+nf/3]:"")+(w&&o==="("?")":"");if(m){g=-1,y=e.length;while(++g<y)if(b=e.charCodeAt(g),48>b||b>57){u=(b===46?r+e.slice(g+1):e.slice(g))+u,e=e.slice(0,g);break}}}l&&!a&&(e=t(e,Infinity));var E=n.length+e.length+u.length,S=E<f?(new Array(f-E+1)).join(i):"";l&&a&&(e=t(S+e,S.length?f-u.length:Infinity),S="");switch(s){case"<":return n+e+u+S;case"=":return n+S+e+u;case"^":return S.slice(0,E=S.length>>1)+n+e+u+S.slice(E)}return S+n+e+u}e=af(e);var i=e.fill,s=e.align,o=e.sign,u=e.symbol,a=e.zero,f=e.width,l=e.comma,c=e.precision,h=e.type,p=u==="$"?n[0]:u==="#"&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",d=u==="$"?n[1]:/[%p]/.test(h)?"%":"",v=of[h],m=!h||/[defgprs%]/.test(h);return c=c==null?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,c)):Math.max(0,Math.min(20,c)),g.toString=function(){return e+""},g}function s(e,t){var n=i((e=af(e),e.type="f",e)),r=Math.max(-8,Math.min(8,Math.floor(Za(t)/3)))*3,s=Math.pow(10,-r),o=lf[8+r/3];return function(e){return n(s*e)+o}}var t=e.grouping&&e.thousands?ef(e.grouping,e.thousands):cf,n=e.currency,r=e.decimal;return{format:i,formatPrefix:s}}function df(t){return pf=hf(t),e.format=pf.format,e.formatPrefix=pf.formatPrefix,pf}function vf(e){return Math.max(0,-Za(Math.abs(e)))}function mf(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Za(t)/3)))*3-Za(Math.abs(e)))}function gf(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Za(t)-Za(e))+1}function yf(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bf(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wf(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Ef(e){function S(e,t){return function(n){var r=[],i=-1,s=0,o=e.length,u,a,f;n instanceof Date||(n=new Date(+n));while(++i<o)if(e.charCodeAt(i)===37){r.push(e.slice(s,i)),(a=Sf[u=e.charAt(++i)])!=null?u=e.charAt(++i):a=u==="e"?" ":"0";if(f=t[u])u=f(n,a);r.push(u),s=i+1}return r.push(e.slice(s,i)),r.join("")}}function x(e,t){return function(n){var r=wf(1900),i=T(r,e,n+="",0);if(i!=n.length)return null;"p"in r&&(r.H=r.H%12+r.p*12);if("W"in r||"U"in r){"w"in r||(r.w="W"in r?1:0);var s="Z"in r?bf(wf(r.y)).getUTCDay():t(wf(r.y)).getDay();r.m=0,r.d="W"in r?(r.w+6)%7+r.W*7-(s+5)%7:r.w+r.U*7-(s+6)%7}return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,bf(r)):t(r)}}function T(e,t,n,r){var i=0,s=t.length,o=n.length,u,a;while(i<s){if(r>=o)return-1;u=t.charCodeAt(i++);if(u===37){u=t.charAt(i++),a=E[u in Sf?t.charAt(i++):u];if(!a||(r=a(e,n,r))<0)return-1}else if(u!=n.charCodeAt(r++))return-1}return r}function N(e,t,n){var r=f.exec(t.slice(n));return r?(e.p=l[r[0].toLowerCase()],n+r[0].length):-1}function C(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1}function k(e,t,n){var r=c.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1}function L(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1}function A(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1}function O(e,n,r){return T(e,t,n,r)}function M(e,t,r){return T(e,n,t,r)}function _(e,t,n){return T(e,r,t,n)}function D(e){return o[e.getDay()]}function P(e){return s[e.getDay()]}function H(e){return a[e.getMonth()]}function B(e){return u[e.getMonth()]}function j(e){return i[+(e.getHours()>=12)]}function F(e){return o[e.getUTCDay()]}function I(e){return s[e.getUTCDay()]}function q(e){return a[e.getUTCMonth()]}function R(e){return u[e.getUTCMonth()]}function U(e){return i[+(e.getUTCHours()>=12)]}var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,u=e.months,a=e.shortMonths,f=Lf(i),l=Af(i),c=Lf(s),h=Af(s),p=Lf(o),d=Af(o),v=Lf(u),m=Af(u),g=Lf(a),y=Af(a),b={a:D,A:P,b:H,B:B,c:null,d:Wf,e:Wf,H:Xf,I:Vf,j:$f,L:Jf,m:Kf,M:Qf,p:j,S:Gf,U:Yf,w:Zf,W:el,x:null,X:null,y:tl,Y:nl,Z:rl,"%":yl},w={a:F,A:I,b:q,B:R,c:null,d:il,e:il,H:sl,I:ol,j:ul,L:al,m:fl,M:ll,p:U,S:cl,U:hl,w:pl,W:dl,x:null,X:null,y:vl,Y:ml,Z:gl,"%":yl},E={a:C,A:k,b:L,B:A,c:O,d:jf,e:jf,H:If,I:If,j:Ff,L:Uf,m:Bf,M:qf,p:N,S:Rf,U:Mf,w:Of,W:_f,x:M,X:_,y:Pf,Y:Df,Z:Hf,"%":zf};return b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w),{format:function(e){var t=S(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=x(e+="",yf);return t.toString=function(){return e},t},utcFormat:function(e){var t=S(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=x(e,bf);return t.toString=function(){return e},t}}}function Cf(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?(new Array(n-s+1)).join(t)+i:i)}function kf(e){return e.replace(Nf,"\\$&")}function Lf(e){return new RegExp("^(?:"+e.map(kf).join("|")+")","i")}function Af(e){var t={},n=-1,r=e.length;while(++n<r)t[e[n].toLowerCase()]=n;return t}function Of(e,t,n){var r=xf.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Mf(e,t,n){var r=xf.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function _f(e,t,n){var r=xf.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Df(e,t,n){var r=xf.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Pf(e,t,n){var r=xf.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Hf(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Bf(e,t,n){var r=xf.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function jf(e,t,n){var r=xf.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ff(e,t,n){var r=xf.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function If(e,t,n){var r=xf.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function qf(e,t,n){var r=xf.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Rf(e,t,n){var r=xf.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Uf(e,t,n){var r=xf.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function zf(e,t,n){var r=Tf.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Wf(e,t){return Cf(e.getDate(),t,2)}function Xf(e,t){return Cf(e.getHours(),t,2)}function Vf(e,t){return Cf(e.getHours()%12||12,t,2)}function $f(e,t){return Cf(1+oa.count(Na(e),e),t,3)}function Jf(e,t){return Cf(e.getMilliseconds(),t,3)}function Kf(e,t){return Cf(e.getMonth()+1,t,2)}function Qf(e,t){return Cf(e.getMinutes(),t,2)}function Gf(e,t){return Cf(e.getSeconds(),t,2)}function Yf(e,t){return Cf(fa.count(Na(e),e),t,2)}function Zf(e){return e.getDay()}function el(e,t){return Cf(la.count(Na(e),e),t,2)}function tl(e,t){return Cf(e.getFullYear()%100,t,2)}function nl(e,t){return Cf(e.getFullYear()%1e4,t,4)}function rl(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Cf(t/60|0,"0",2)+Cf(t%60,"0",2)}function il(e,t){return Cf(e.getUTCDate(),t,2)}function sl(e,t){return Cf(e.getUTCHours(),t,2)}function ol(e,t){return Cf(e.getUTCHours()%12||12,t,2)}function ul(e,t){return Cf(1+Ma.count(Qa(e),e),t,3)}function al(e,t){return Cf(e.getUTCMilliseconds(),t,3)}function fl(e,t){return Cf(e.getUTCMonth()+1,t,2)}function ll(e,t){return Cf(e.getUTCMinutes(),t,2)}function cl(e,t){return Cf(e.getUTCSeconds(),t,2)}function hl(e,t){return Cf(Pa.count(Qa(e),e),t,2)}function pl(e){return e.getUTCDay()}function dl(e,t){return Cf(Ha.count(Qa(e),e),t,2)}function vl(e,t){return Cf(e.getUTCFullYear()%100,t,2)}function ml(e,t){return Cf(e.getUTCFullYear()%1e4,t,4)}function gl(){return"+0000"}function yl(){return"%"}function wl(t){return bl=Ef(t),e.timeFormat=bl.format,e.timeParse=bl.parse,e.utcFormat=bl.utcFormat,e.utcParse=bl.utcParse,bl}function Sl(e){return e.toISOString()}function Tl(e){var t=new Date(e);return isNaN(t)?null:t}function Ol(e){function i(i){var s=i+"",o=t.get(s);if(!o){if(r!==Al)return r;t.set(s,o=n.push(i))}return e[(o-1)%e.length]}var t=z(),n=[],r=Al;return e=e==null?[]:Ll.call(e),i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=z();var r=-1,s=e.length,o,u;while(++r<s)t.has(u=(o=e[r])+"")||t.set(u,n.push(o));return i},i.range=function(t){return arguments.length?(e=Ll.call(t),i):e.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Ol().domain(n).range(e).unknown(r)},i}function Ml(){function l(){var e=t().length,l=r[1]<r[0],c=r[l-0],h=r[1-l];i=(h-c)/Math.max(1,e-u+a*2),o&&(i=Math.floor(i)),c+=(h-c-i*(e-u))*f,s=i*(1-u),o&&(c=Math.round(c),s=Math.round(s));var p=g(e).map(function(e){return c+i*e});return n(l?p.reverse():p)}var e=Ol().unknown(undefined),t=e.domain,n=e.range,r=[0,1],i,s,o=!1,u=0,a=0,f=.5;return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),l()):t()},e.range=function(e){return arguments.length?(r=[+e[0],+e[1]],l()):r.slice()},e.rangeRound=function(e){return r=[+e[0],+e[1]],o=!0,l()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(e){return arguments.length?(o=!!e,l()):o},e.padding=function(e){return arguments.length?(u=a=Math.max(0,Math.min(1,e)),l()):u},e.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),l()):u},e.paddingOuter=function(e){return arguments.length?(a=Math.max(0,Math.min(1,e)),l()):a},e.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),l()):f},e.copy=function(){return Ml().domain(t()).range(r).round(o).paddingInner(u).paddingOuter(a).align(f)},l()}function _l(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return _l(t())},e}function Dl(){return _l(Ml().paddingInner(1))}function Pl(e){return function(){return e}}function Hl(e){return+e}function jl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Pl(t)}function Fl(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function Il(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}function ql(e,t,n,r){var i=e[0],s=e[1],o=t[0],u=t[1];return s<i?(i=n(s,i),o=r(u,o)):(i=n(i,s),o=r(o,u)),function(e){return o(i(e))}}function Rl(e,t,n,r){var i=Math.min(e.length,t.length)-1,o=new Array(i),u=new Array(i),a=-1;e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());while(++a<i)o[a]=n(e[a],e[a+1]),u[a]=r(t[a],t[a+1]);return function(t){var n=s(e,t,1,i)-1;return u[n](o[n](t))}}function Ul(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function zl(e,t){function f(){return o=Math.min(n.length,r.length)>2?Rl:ql,u=a=null,l}function l(t){return(u||(u=o(n,r,s?Fl(e):e,i)))(+t)}var n=Bl,r=Bl,i=lo,s=!1,o,u,a;return l.invert=function(e){return(a||(a=o(r,n,jl,s?Il(t):t)))(+e)},l.domain=function(e){return arguments.length?(n=kl.call(e,Hl),f()):n.slice()},l.range=function(e){return arguments.length?(r=Ll.call(e),f()):r.slice()},l.rangeRound=function(e){return r=Ll.call(e),i=co,f()},l.clamp=function(e){return arguments.length?(s=!!e,f()):s},l.interpolate=function(e){return arguments.length?(i=e,f()):i},f()}function Wl(t,n,r){var i=t[0],s=t[t.length-1],o=S(i,s,n==null?10:n),u;r=af(r==null?",f":r);switch(r.type){case"s":var a=Math.max(Math.abs(i),Math.abs(s));return r.precision==null&&!isNaN(u=mf(o,a))&&(r.precision=u),e.formatPrefix(r,a);case"":case"e":case"g":case"p":case"r":r.precision==null&&!isNaN(u=gf(o,Math.max(Math.abs(i),Math.abs(s))))&&(r.precision=u-(r.type==="e"));break;case"f":case"%":r.precision==null&&!isNaN(u=vf(o))&&(r.precision=u-(r.type==="%")*2)}return e.format(r)}function Xl(e){var t=e.domain;return e.ticks=function(e){var n=t();return E(n[0],n[n.length-1],e==null?10:e)},e.tickFormat=function(e,n){return Wl(t(),e,n)},e.nice=function(n){var r=t(),i=r.length-1,s=n==null?10:n,o=r[0],u=r[i],a=S(o,u,s);return a&&(a=S(Math.floor(o/a)*a,Math.ceil(u/a)*a,s),r[0]=Math.floor(o/a)*a,r[i]=Math.ceil(u/a)*a,t(r)),e},e}function Vl(){var e=zl(jl,ro);return e.copy=function(){return Ul(e,Vl())},Xl(e)}function $l(){function t(e){return+e}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=kl.call(n,Hl),t):e.slice()},t.copy=function(){return $l().domain(e)},Xl(t)}function Jl(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Kl(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:Pl(t)}function Ql(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function Gl(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Yl(e){return e===10?Gl:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function Zl(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function ec(e){return function(t){return-e(-t)}}function tc(){function o(){return i=Zl(r),s=Yl(r),n()[0]<0&&(i=ec(i),s=ec(s)),t}var t=zl(Kl,Ql).domain([1,10]),n=t.domain,r=10,i=Zl(10),s=Yl(10);return t.base=function(e){return arguments.length?(r=+e,o()):r},t.domain=function(e){return arguments.length?(n(e),o()):n()},t.ticks=function(e){var t=n(),o=t[0],u=t[t.length-1],a;if(a=u<o)f=o,o=u,u=f;var f=i(o),l=i(u),c,h,p,d=e==null?10:+e,v=[];if(!(r%1)&&l-f<d){f=Math.round(f)-1,l=Math.round(l)+1;if(o>0)for(;f<l;++f)for(h=1,c=s(f);h<r;++h){p=c*h;if(p<o)continue;if(p>u)break;v.push(p)}else for(;f<l;++f)for(h=r-1,c=s(f);h>=1;--h){p=c*h;if(p<o)continue;if(p>u)break;v.push(p)}}else v=E(f,l,Math.min(l-f,d)).map(s);return a?v.reverse():v},t.tickFormat=function(n,o){o==null&&(o=r===10?".0e":","),typeof o!="function"&&(o=e.format(o));if(n===Infinity)return o;n==null&&(n=10);var u=Math.max(1,r*n/t.ticks().length);return function(e){var t=e/s(Math.round(i(e)));return t*r<r-.5&&(t*=r),t<=u?o(e):""}},t.nice=function(){return n(Jl(n(),{floor:function(e){return s(Math.floor(i(e)))},ceil:function(e){return s(Math.ceil(i(e)))}}))},t.copy=function(){return Ul(t,tc().base(r))},t}function nc(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function rc(){function r(t,n){return(n=nc(n,e)-(t=nc(t,e)))?function(r){return(nc(r,e)-t)/n}:Pl(n)}function i(t,n){return n=nc(n,e)-(t=nc(t,e)),function(r){return nc(t+n*r,1/e)}}var e=1,t=zl(r,i),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return Ul(t,rc().exponent(e))},Xl(t)}function ic(){return rc().exponent(.5)}function sc(){function i(){var t=0,i=Math.max(1,n.length);r=new Array(i-1);while(++t<i)r[t-1]=N(e,t/i);return o}function o(e){if(!isNaN(e=+e))return n[s(r,e)]}var e=[],n=[],r=[];return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(n){if(!arguments.length)return e.slice();e=[];for(var r=0,s=n.length,o;r<s;++r)(o=n[r],o!=null&&!isNaN(o=+o))&&e.push(o);return e.sort(t),i()},o.range=function(e){return arguments.length?(n=Ll.call(e),i()):n.slice()},o.quantiles=function(){return r.slice()},o.copy=function(){return sc().domain(e).range(n)},o}function oc(){function o(e){if(e<=e)return i[s(r,e,0,n)]}function u(){var i=-1;r=new Array(n);while(++i<n)r[i]=((i+1)*t-(i-n)*e)/(n+1);return o}var e=0,t=1,n=1,r=[.5],i=[0,1];return o.domain=function(n){return arguments.length?(e=+n[0],t=+n[1],u()):[e,t]},o.range=function(e){return arguments.length?(n=(i=Ll.call(e)).length-1,u()):i.slice()},o.invertExtent=function(s){var o=i.indexOf(s);return o<0?[NaN,NaN]:o<1?[e,r[0]]:o>=n?[r[n-1],t]:[r[o-1],r[o]]},o.copy=function(){return oc().domain([e,t]).range(i)},Xl(o)}function uc(){function r(r){if(r<=r)return t[s(e,r,0,n)]}var e=[.5],t=[0,1],n=1;return r.domain=function(i){return arguments.length?(e=Ll.call(i),n=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Ll.call(i),n=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(n){var r=t.indexOf(n);return[e[r-1],e[r]]},r.copy=function(){return uc().domain(e).range(t)},r}function vc(e){return new Date(e)}function mc(e){return e instanceof Date?+e:+(new Date(+e))}function gc(e,t,r,i,s,o,u,a,f){function x(n){return(u(n)<n?p:o(n)<n?d:s(n)<n?v:i(n)<n?m:t(n)<n?r(n)<n?g:y:e(n)<n?b:w)(n)}function T(t,r,i,s){t==null&&(t=10);if(typeof t=="number"){var o=Math.abs(i-r)/t,u=n(function(e){return e[2]}).right(E,o);u===E.length?(s=S(r/dc,i/dc,t),t=e):u?(u=E[o/E[u-1][2]<E[u][2]/o?u-1:u],s=u[1],t=u[0]):(s=S(r,i,t),t=a)}return s==null?t:t.every(s)}var l=zl(jl,ro),c=l.invert,h=l.domain,p=f(".%L"),d=f(":%S"),v=f("%I:%M"),m=f("%I %p"),g=f("%a %d"),y=f("%b %d"),b=f("%B"),w=f("%Y"),E=[[u,1,ac],[u,5,5*ac],[u,15,15*ac],[u,30,30*ac],[o,1,fc],[o,5,5*fc],[o,15,15*fc],[o,30,30*fc],[s,1,lc],[s,3,3*lc],[s,6,6*lc],[s,12,12*lc],[i,1,cc],[i,2,2*cc],[r,1,hc],[t,1,pc],[t,3,3*pc],[e,1,dc]];return l.invert=function(e){return new Date(c(e))},l.domain=function(e){return arguments.length?h(kl.call(e,mc)):h().map(vc)},l.ticks=function(e,t){var n=h(),r=n[0],i=n[n.length-1],s=i<r,o;return s&&(o=r,r=i,i=o),o=T(e,r,i,t),o=o?o.range(r,i+1):[],s?o.reverse():o},l.tickFormat=function(e,t){return t==null?x:f(t)},l.nice=function(e,t){var n=h();return(e=T(e,n[0],n[n.length-1],t))?h(Jl(n,e)):l},l.copy=function(){return Ul(l,gc(e,t,r,i,s,o,u,a,f))},l}function yc(){return gc(Na,xa,fa,oa,ia,na,ea,$u,e.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function bc(){return gc(Qa,Ja,Pa,Ma,Aa,ka,ea,$u,e.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function wc(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}function Ac(e){if(e<0||e>1)e-=Math.floor(e);var t=Math.abs(e-.5);return Lc.h=360*e-100,Lc.s=1.5-1.5*t,Lc.l=.8-.9*t,Lc+""}function Oc(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Hc(e){function i(i){var s=(i-t)/(n-t);return e(r?Math.max(0,Math.min(1,s)):s)}var t=0,n=1,r=!1;return i.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.clamp=function(e){return arguments.length?(r=!!e,i):r},i.interpolator=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Hc(e).domain([t,n]).clamp(r)},Xl(i)}function Fc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),jc.hasOwnProperty(t)?{space:jc[t],local:e}:e}function Ic(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Bc&&t.documentElement.namespaceURI===Bc?t.createElement(e):t.createElementNS(n,e)}}function qc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Rc(e){var t=Fc(e);return(t.local?qc:Ic)(t)}function zc(){return new Wc}function Wc(){this._="@"+(++Uc).toString(36)}function Gc(e,t,n){return e=Yc(e,t,n),function(t){var n=t.relatedTarget;(!n||n!==this&&!(n.compareDocumentPosition(this)&8))&&e.call(this,t)}}function Yc(t,n,r){return function(i){var s=e.event;e.event=i;try{t.call(this,this.__data__,n,r)}finally{e.event=s}}}function Zc(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function eh(e){return function(){var t=this.__on;if(!t)return;for(var n=0,r=-1,i=t.length,s;n<i;++n)(s=t[n],!!e.type&&s.type!==e.type||s.name!==e.name)?t[++r]=s:this.removeEventListener(s.type,s.listener,s.capture);++r?t.length=r:delete this.__on}}function th(e,t,n){var r=Kc.hasOwnProperty(e.type)?Gc:Yc;return function(i,s,o){var u=this.__on,a,f=r(t,s,o);if(u)for(var l=0,c=u.length;l<c;++l)if((a=u[l]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=f,a.capture=n),a.value=t;return}this.addEventListener(e.type,f,n),a={type:e.type,name:e.name,value:t,listener:f,capture:n},u?u.push(a):this.__on=[a]}}function nh(e,t,n){var r=Zc(e+""),i,s=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u)for(var a=0,f=u.length,l;a<f;++a)for(i=0,l=u[a];i<s;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value;return}u=t?th:eh,n==null&&(n=!1);for(i=0;i<s;++i)this.each(u(r[i],t,n));return this}function rh(t,n,r,i){var s=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(r,i)}finally{e.event=s}}function ih(){var t=e.event,n;while(n=t.sourceEvent)t=n;return t}function sh(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function oh(e){var t=ih();return t.changedTouches&&(t=t.changedTouches[0]),sh(e,t)}function uh(){}function ah(e){return e==null?uh:function(){return this.querySelector(e)}}function fh(e){typeof e!="function"&&(e=ah(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=new Array(o),a,f,l=0;l<o;++l)(a=s[l])&&(f=e.call(a,a.__data__,l,s))&&("__data__"in a&&(f.__data__=a.__data__),u[l]=f);return new kp(r,this._parents)}function lh(){return[]}function ch(e){return e==null?lh:function(){return this.querySelectorAll(e)}}function hh(e){typeof e!="function"&&(e=ch(e));for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],u=o.length,a,f=0;f<u;++f)if(a=o[f])r.push(e.call(a,a.__data__,f,o)),i.push(a);return new kp(r,i)}function ph(e){typeof e!="function"&&(e=Jc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=[],a,f=0;f<o;++f)(a=s[f])&&e.call(a,a.__data__,f,s)&&u.push(a);return new kp(r,this._parents)}function dh(e){return new Array(e.length)}function vh(){return new kp(this._enter||this._groups.map(dh),this._parents)}function mh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function gh(e){return function(){return e}}function bh(e,t,n,r,i,s){var o=0,u,a=t.length,f=s.length;for(;o<f;++o)(u=t[o])?(u.__data__=s[o],r[o]=u):n[o]=new mh(e,s[o]);for(;o<a;++o)if(u=t[o])i[o]=u}function wh(e,t,n,r,i,s,o){var u,a,f={},l=t.length,c=s.length,h=new Array(l),p;for(u=0;u<l;++u)if(a=t[u])h[u]=p=yh+o.call(a,a.__data__,u,t),p in f?i[u]=a:f[p]=a;for(u=0;u<c;++u)p=yh+o.call(e,s[u],u,s),(a=f[p])?(r[u]=a,a.__data__=s[u],f[p]=null):n[u]=new mh(e,s[u]);for(u=0;u<l;++u)(a=t[u])&&f[h[u]]===a&&(i[u]=a)}function Eh(e,t){if(!e)return p=new Array(this.size()),f=-1,this.each(function(e){p[++f]=e}),p;var n=t?wh:bh,r=this._parents,i=this._groups;typeof e!="function"&&(e=gh(e));for(var s=i.length,o=new Array(s),u=new Array(s),a=new Array(s),f=0;f<s;++f){var l=r[f],c=i[f],h=c.length,p=e.call(l,l&&l.__data__,f,r),d=p.length,v=u[f]=new Array(d),m=o[f]=new Array(d),g=a[f]=new Array(h);n(l,c,v,m,g,p,t);for(var y=0,b=0,w,E;y<d;++y)if(w=v[y]){y>=b&&(b=y+1);while(!(E=m[b])&&++b<d);w._next=E||null}}return o=new kp(o,r),o._enter=u,o._exit=a,o}function Sh(){return new kp(this._exit||this._groups.map(dh),this._parents)}function xh(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),u=0;u<s;++u)for(var a=t[u],f=n[u],l=a.length,c=o[u]=new Array(l),h,p=0;p<l;++p)if(h=a[p]||f[p])c[p]=h;for(;u<r;++u)o[u]=t[u];return new kp(o,this._parents)}function Th(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)if(o=r[i])s&&s!==o.nextSibling&&s.parentNode.insertBefore(o,s),s=o;return this}function Nh(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ch);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],u=o.length,a=i[s]=new Array(u),f,l=0;l<u;++l)if(f=o[l])a[l]=f;a.sort(t)}return(new kp(i,this._parents)).order()}function Ch(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function kh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Lh(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function Ah(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Oh(){var e=0;return this.each(function(){++e}),e}function Mh(){return!this.node()}function _h(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,u;s<o;++s)(u=i[s])&&e.call(u,u.__data__,s,i);return this}function Dh(e){return function(){this.removeAttribute(e)}}function Ph(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hh(e,t){return function(){this.setAttribute(e,t)}}function Bh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function jh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Fh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ih(e,t){var n=Fc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ph:Dh:typeof t=="function"?n.local?Fh:jh:n.local?Bh:Hh)(n,t))}function qh(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rh(e){return function(){this.style.removeProperty(e)}}function Uh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function zh(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Wh(e,t,n){var r;return arguments.length>1?this.each((t==null?Rh:typeof t=="function"?zh:Uh)(e,t,n==null?"":n)):qh(r=this.node()).getComputedStyle(r,null).getPropertyValue(e)}function Xh(e){return function(){delete this[e]}}function Vh(e,t){return function(){this[e]=t}}function $h(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Jh(e,t){return arguments.length>1?this.each((t==null?Xh:typeof t=="function"?$h:Vh)(e,t)):this.node()[e]}function Kh(e){return e.trim().split(/^|\s+/)}function Qh(e){return e.classList||new Gh(e)}function Gh(e){this._node=e,this._names=Kh(e.getAttribute("class")||"")}function Yh(e,t){var n=Qh(e),r=-1,i=t.length;while(++r<i)n.add(t[r])}function Zh(e,t){var n=Qh(e),r=-1,i=t.length;while(++r<i)n.remove(t[r])}function ep(e){return function(){Yh(this,e)}}function tp(e){return function(){Zh(this,e)}}function np(e,t){return function(){(t.apply(this,arguments)?Yh:Zh)(this,e)}}function rp(e,t){var n=Kh(e+"");if(arguments.length<2){var r=Qh(this.node()),i=-1,s=n.length;while(++i<s)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?np:t?ep:tp)(n,t))}function ip(){this.textContent=""}function sp(e){return function(){this.textContent=e}}function op(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function up(e){return arguments.length?this.each(e==null?ip:(typeof e=="function"?op:sp)(e)):this.node().textContent}function ap(){this.innerHTML=""}function fp(e){return function(){this.innerHTML=e}}function lp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function cp(e){return arguments.length?this.each(e==null?ap:(typeof e=="function"?lp:fp)(e)):this.node().innerHTML}function hp(){this.nextSibling&&this.parentNode.appendChild(this)}function pp(){return this.each(hp)}function dp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vp(){return this.each(dp)}function mp(e){var t=typeof e=="function"?e:Rc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gp(){return null}function yp(e,t){var n=typeof e=="function"?e:Rc(e),r=t==null?gp:typeof t=="function"?t:ah(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function bp(){var e=this.parentNode;e&&e.removeChild(this)}function wp(){return this.each(bp)}function Ep(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Sp(e,t,n){var r=qh(e),i=r.CustomEvent;i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xp(e,t){return function(){return Sp(this,e,t)}}function Tp(e,t){return function(){return Sp(this,e,t.apply(this,arguments))}}function Np(e,t){return this.each((typeof t=="function"?Tp:xp)(e,t))}function kp(e,t){this._groups=e,this._parents=t}function Lp(){return new kp([[document.documentElement]],Cp)}function Ap(e){return typeof e=="string"?new kp([[document.querySelector(e)]],[document.documentElement]):new kp([[e]],Cp)}function Op(e){return typeof e=="string"?new kp([document.querySelectorAll(e)],[document.documentElement]):new kp([e==null?[]:e],Cp)}function Mp(e,t,n){arguments.length<3&&(n=t,t=ih().changedTouches);for(var r=0,i=t?t.length:0,s;r<i;++r)if((s=t[r]).identifier===n)return sh(e,s);return null}function _p(e,t){t==null&&(t=ih().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=sh(e,t[n]);return i}function Rp(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Xp(e,n,{name:t,index:r,group:i,on:Dp,tween:Pp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Hp})}function Up(e,t){var n=e.__transition;if(!n||!(n=n[t])||n.state>Hp)throw new Error("too late");return n}function zp(e,t){var n=e.__transition;if(!n||!(n=n[t])||n.state>jp)throw new Error("too late");return n}function Wp(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("too late");return n}function Xp(e,t,n){function s(e){n.state=Bp,n.delay<=e?o(e-n.delay):n.timer.restart(o,n.delay,n.time)}function o(s){var o,a,f,l;for(o in r){l=r[o];if(l.name!==n.name)continue;l.state===Fp?(l.state=qp,l.timer.stop(),l.on.call("interrupt",e,e.__data__,l.index,l.group),delete r[o]):+o<t&&(l.state=qp,l.timer.stop(),delete r[o])}Uu(function(){n.state===Fp&&(n.timer.restart(u,n.delay,n.time),u(s))}),n.state=jp,n.on.call("start",e,e.__data__,n.index,n.group);if(n.state!==jp)return;n.state=Fp,i=new Array(f=n.tween.length);for(o=0,a=-1;o<f;++o)if(l=n.tween[o].value.call(e,e.__data__,n.index,n.group))i[++a]=l;i.length=a+1}function u(s){var o=s<n.duration?n.ease.call(null,s/n.duration):(n.state=Ip,1),u=-1,a=i.length;while(++u<a)i[u].call(null,o);if(n.state===Ip){n.state=qp,n.timer.stop(),n.on.call("end",e,e.__data__,n.index,n.group);for(u in r)if(+u!==t)return void delete r[t];delete e.__transition}}var r=e.__transition,i;r[t]=n,n.timer=Bu(s,0,n.time)}function Vp(e,t){var n=e.__transition,r,i,s=!0,o;if(!n)return;t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state===Fp,r.state=qp,r.timer.stop(),i&&r.on.call("interrupt",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}function $p(e){return this.each(function(){Vp(this,e)})}function Jp(e,t){var n,r;return function(){var i=zp(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Kp(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=zp(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},a=0,f=i.length;a<f;++a)if(i[a].name===t){i[a]=u;break}a===f&&i.push(u)}s.tween=i}}function Qp(e,t){var n=this._id;e+="";if(arguments.length<2){var r=Wp(this.node(),n).tween;for(var i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Jp:Kp)(n,e,t))}function Gp(e,t,n){var r=e._id;return e.each(function(){var e=zp(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Wp(e,r).value[t]}}function Yp(e,t){var n;return(typeof t=="number"?ro:t instanceof es?Gs:(n=es(t))?(t=n,Gs):fo)(e,t)}function Zp(e){return function(){this.removeAttribute(e)}}function ed(e){return function(){this.removeAttributeNS(e.space,e.local)}}function td(e,t,n){var r,i;return function(){var s=this.getAttribute(e);return s===n?null:s===r?i:i=t(r=s,n)}}function nd(e,t,n){var r,i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===n?null:s===r?i:i=t(r=s,n)}}function rd(e,t,n){var r,i,s;return function(){var o,u=n(this);return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),o===u?null:o===r&&u===i?s:s=t(r=o,i=u))}}function id(e,t,n){var r,i,s;return function(){var o,u=n(this);return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),o===u?null:o===r&&u===i?s:s=t(r=o,i=u))}}function sd(e,t){var n=Fc(e),r=n==="transform"?To:Yp;return this.attrTween(e,typeof t=="function"?(n.local?id:rd)(n,r,Gp(this,"attr."+e,t)):t==null?(n.local?ed:Zp)(n):(n.local?nd:td)(n,r,t))}function od(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttributeNS(e.space,e.local,r(t))}}return n._value=t,n}function ud(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttribute(e,r(t))}}return n._value=t,n}function ad(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Fc(e);return this.tween(n,(r.local?od:ud)(r,t))}function fd(e,t){return function(){Up(this,e).delay=+t.apply(this,arguments)}}function ld(e,t){return t=+t,function(){Up(this,e).delay=t}}function cd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fd:ld)(t,e)):Wp(this.node(),t).delay}function hd(e,t){return function(){zp(this,e).duration=+t.apply(this,arguments)}}function pd(e,t){return t=+t,function(){zp(this,e).duration=t}}function dd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hd:pd)(t,e)):Wp(this.node(),t).duration}function vd(e,t){if(typeof t!="function")throw new Error;return function(){zp(this,e).ease=t}}function md(e){var t=this._id;return arguments.length?this.each(vd(t,e)):Wp(this.node(),t).ease}function gd(e){typeof e!="function"&&(e=Jc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,u=r[i]=[],a,f=0;f<o;++f)(a=s[f])&&e.call(a,a.__data__,f,s)&&u.push(a);return new qd(r,this._parents,this._name,this._id)}function yd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),u=0;u<s;++u)for(var a=t[u],f=n[u],l=a.length,c=o[u]=new Array(l),h,p=0;p<l;++p)if(h=a[p]||f[p])c[p]=h;for(;u<r;++u)o[u]=t[u];return new qd(o,this._parents,this._name,this._id)}function bd(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function wd(e,t,n){var r,i,s=bd(t)?Up:zp;return function(){var o=s(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function Ed(e,t){var n=this._id;return arguments.length<2?Wp(this.node(),n).on.on(e):this.each(wd(n,e,t))}function Sd(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xd(){return this.on("end.remove",Sd(this._id))}function Td(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ah(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var u=r[o],a=u.length,f=s[o]=new Array(a),l,c,h=0;h<a;++h)(l=u[h])&&(c=e.call(l,l.__data__,h,u))&&("__data__"in l&&(c.__data__=l.__data__),f[h]=c,Rp(f[h],t,n,h,f,Wp(l,n)));return new qd(s,this._parents,t,n)}function Nd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ch(e));for(var r=this._groups,i=r.length,s=[],o=[],u=0;u<i;++u)for(var a=r[u],f=a.length,l,c=0;c<f;++c)if(l=a[c]){for(var h=e.call(l,l.__data__,c,a),p,d=Wp(l,n),v=0,m=h.length;v<m;++v)(p=h[v])&&Rp(p,t,n,v,h,d);s.push(h),o.push(l)}return new qd(s,o,t,n)}function kd(){return new Cd(this._groups,this._parents)}function Ld(e,t){var n,r,i;return function(){var s=qh(this).getComputedStyle(this,null),o=s.getPropertyValue(e),u=(this.style.removeProperty(e),s.getPropertyValue(e));return o===u?null:o===n&&u===r?i:i=t(n=o,r=u)}}function Ad(e){return function(){this.style.removeProperty(e)}}function Od(e,t,n){var r,i;return function(){var s=qh(this).getComputedStyle(this,null).getPropertyValue(e);return s===n?null:s===r?i:i=t(r=s,n)}}function Md(e,t,n){var r,i,s;return function(){var o=qh(this).getComputedStyle(this,null),u=o.getPropertyValue(e),a=n(this);return a==null&&(a=(this.style.removeProperty(e),o.getPropertyValue(e))),u===a?null:u===r&&a===i?s:s=t(r=u,i=a)}}function _d(e,t,n){var r=(e+="")==="transform"?xo:Yp;return t==null?this.styleTween(e,Ld(e,r)).on("end.style."+e,Ad(e)):this.styleTween(e,typeof t=="function"?Md(e,r,Gp(this,"style."+e,t)):Od(e,r,t),n)}function Dd(e,t,n){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.style.setProperty(e,i(t),n)}}return r._value=t,r}function Pd(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Dd(e,t,n==null?"":n))}function Hd(e){return function(){this.textContent=e}}function Bd(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function jd(e){return this.tween("text",typeof e=="function"?Bd(Gp(this,"text",e)):Hd(e==null?"":e+""))}function Fd(){var e=this._name,t=this._id,n=Ud();for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,a,f=0;f<u;++f)if(a=o[f]){var l=Wp(a,t);Rp(a,e,n,f,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new qd(r,this._parents,e,n)}function qd(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Rd(e){return Lp().transition(e)}function Ud(){return++Id}function Xd(e,t){var n;while(!(n=e.__transition)||!(n=n[t]))if(!(e=e.parentNode))return Wd.time=Du(),Wd;return n}function Vd(e){var t,n;e instanceof qd?(t=e._id,e=e._name):(t=Ud(),(n=Wd).time=Du(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],u=o.length,a,f=0;f<u;++f)(a=o[f])&&Rp(a,e,t,f,o,n||Xd(a,t));return new qd(r,this._parents,e,t)}function Jd(e,t){var n=e.__transition,r,i;if(n){t=t==null?null:t+"";for(i in n)if((r=n[i]).state>Bp&&r.name===t)return new qd([[e]],$d,t,+i)}return null}function Qd(e){return e}function nv(e,t,n){var r=e(n);return"translate("+(isFinite(r)?r:t(n))+",0)"}function rv(e,t,n){var r=e(n);return"translate(0,"+(isFinite(r)?r:t(n))+")"}function iv(e){var t=e.bandwidth()/2;return e.round()&&(t=Math.round(t)),function(n){return e(n)+t}}function sv(){return!this.__axis}function ov(e,t){function a(a){var f=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,l=i==null?t.tickFormat?t.tickFormat.apply(t,n):Qd:i,c=Math.max(s,0)+u,h=e===Gd||e===Zd?nv:rv,p=t.range(),d=p[0]+.5,v=p[p.length-1]+.5,m=(t.bandwidth?iv:Qd)(t.copy()),g=a.selection?a.selection():a,y=g.selectAll(".domain").data([null]),b=g.selectAll(".tick").data(f,t).order(),w=b.exit(),E=b.enter().append("g").attr("class","tick"),S=b.select("line"),x=b.select("text"),T=e===Gd||e===ev?-1:1,N,C=e===ev||e===Yd?(N="x","y"):(N="y","x");y=y.merge(y.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),b=b.merge(E),S=S.merge(E.append("line").attr("stroke","#000").attr(N+"2",T*s).attr(C+"1",.5).attr(C+"2",.5)),x=x.merge(E.append("text").attr("fill","#000").attr(N,T*c).attr(C,.5).attr("dy",e===Gd?"0em":e===Zd?"0.71em":"0.32em")),a!==g&&(y=y.transition(a),b=b.transition(a),S=S.transition(a),x=x.transition(a),w=w.transition(a).attr("opacity",tv).attr("transform",function(e){return h(m,this.parentNode.__axis||m,e)}),E.attr("opacity",tv).attr("transform",function(e){return h(this.parentNode.__axis||m,m,e)})),w.remove(),y.attr("d",e===ev||e==Yd?"M"+T*o+","+d+"H0.5V"+v+"H"+T*o:"M"+d+","+T*o+"V0.5H"+v+"V"+T*o),b.attr("opacity",1).attr("transform",function(e){return h(m,m,e)}),S.attr(N+"2",T*s),x.attr(N,T*c).text(l),g.filter(sv).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Yd?"start":e===ev?"end":"middle"),g.each(function(){this.__axis=m})}var n=[],r=null,i=null,s=6,o=6,u=3;return a.scale=function(e){return arguments.length?(t=e,a):t},a.ticks=function(){return n=Kd.call(arguments),a},a.tickArguments=function(e){return arguments.length?(n=e==null?[]:Kd.call(e),a):n.slice()},a.tickValues=function(e){return arguments.length?(r=e==null?null:Kd.call(e),a):r&&r.slice()},a.tickFormat=function(e){return arguments.length?(i=e,a):i},a.tickSize=function(e){return arguments.length?(s=o=+e,a):s},a.tickSizeInner=function(e){return arguments.length?(s=+e,a):s},a.tickSizeOuter=function(e){return arguments.length?(o=+e,a):o},a.tickPadding=function(e){return arguments.length?(u=+e,a):u},a}function uv(e){return ov(Gd,e)}function av(e){return ov(Yd,e)}function fv(e){return ov(Zd,e)}function lv(e){return ov(ev,e)}function cv(e,t){return e.parent===t.parent?1:2}function hv(e){return e.reduce(pv,0)/e.length}function pv(e,t){return e+t.x}function dv(e){return 1+e.reduce(vv,0)}function vv(e,t){return Math.max(e,t.y)}function mv(e){var t;while(t=e.children)e=t[0];return e}function gv(e){var t;while(t=e.children)e=t[t.length-1];return e}function yv(){function i(i){var s,o=0;i.eachAfter(function(t){var n=t.children;n?(t.x=hv(n),t.y=dv(n)):(t.x=s?o+=e(t,s):0,t.y=0,s=t)});var u=mv(i),a=gv(i),f=u.x-e(u,a)/2,l=a.x+e(a,u)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-f)/(l-f)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}var e=cv,t=1,n=1,r=!1;return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}function bv(e){var t=this,n,r=[t],i,s,o;do{n=r.reverse(),r=[];while(t=n.pop()){e(t),i=t.children;if(i)for(s=0,o=i.length;s<o;++s)r.push(i[s])}}while(r.length);return this}function wv(e){var t=this,n=[t],r,i;while(t=n.pop()){e(t),r=t.children;if(r)for(i=r.length-1;i>=0;--i)n.push(r[i])}return this}function Ev(e){var t=this,n=[t],r=[],i,s,o;while(t=n.pop()){r.push(t),i=t.children;if(i)for(s=0,o=i.length;s<o;++s)n.push(i[s])}while(t=r.pop())e(t);return this}function Sv(e){return this.eachAfter(function(t){var n=+e(t.data)||0,r=t.children,i=r&&r.length;while(--i>=0)n+=r[i].value;t.value=n})}function xv(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Tv(e){var t=this,n=Nv(t,e),r=[t];while(t!==n)t=t.parent,r.push(t);var i=r.length;while(e!==n)r.splice(i,0,e),e=e.parent;return r}function Nv(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();while(e===t)i=e,e=n.pop(),t=r.pop();return i}function Cv(){var e=this,t=[e];while(e=e.parent)t.push(e);return t}function kv(){var e=[];return this.each(function(t){e.push(t)}),e}function Lv(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Av(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function Ov(e,t){var n=new Hv(e),r=+e.value&&(n.value=e.value),i,s=[n],o,u,a,f;t==null&&(t=_v);while(i=s.pop()){r&&(i.value=+i.data.value);if((u=t(i.data))&&(f=u.length)){i.children=new Array(f);for(a=f-1;a>=0;--a)s.push(o=i.children[a]=new Hv(u[a])),o.parent=i,o.depth=i.depth+1}}return n.eachBefore(Pv)}function Mv(){return Ov(this).eachBefore(Dv)}function _v(e){return e.children}function Dv(e){e.data=e.data.data}function Pv(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Hv(e){this.data=e,this.depth=this.height=0,this.parent=null}function Bv(e){this._=e,this.next=null}function jv(e){var t,n=(e=e.slice()).length,r=null,i=r;while(n){var s=new Bv(e[n-1]);i?i=i.next=s:i=r=s,e[t]=e[--n]}return{head:r,tail:i}}function Fv(e){return qv(jv(e),[])}function Iv(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r-t.r;return i*i+1e-6>n*n+r*r}function qv(e,t){var n,r=null,i=e.head,s,o;switch(t.length){case 1:n=Rv(t[0]);break;case 2:n=Uv(t[0],t[1]);break;case 3:n=zv(t[0],t[1],t[2])}while(i)o=i._,s=i.next,!n||!Iv(n,o)?(r?(e.tail=r,r.next=null):e.head=e.tail=null,t.push(o),n=qv(e,t),t.pop(),e.head?(i.next=e.head,e.head=i):(i.next=null,e.head=e.tail=i),r=e.tail,r.next=s):r=i,i=s;return e.tail=r,n}function Rv(e){return{x:e.x,y:e.y,r:e.r}}function Uv(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,u=t.r,a=s-n,f=o-r,l=u-i,c=Math.sqrt(a*a+f*f);return{x:(n+s+a/c*l)/2,y:(r+o+f/c*l)/2,r:(c+i+u)/2}}function zv(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,u=t.y,a=t.r,f=n.x,l=n.y,c=n.r,h=2*(r-o),p=2*(i-u),d=2*(a-s),v=r*r+i*i-s*s-o*o-u*u+a*a,m=2*(r-f),g=2*(i-l),y=2*(c-s),b=r*r+i*i-s*s-f*f-l*l+c*c,w=m*p-h*g,E=(p*b-g*v)/w-r,S=(g*d-p*y)/w,x=(m*v-h*b)/w-i,T=(h*y-m*d)/w,N=S*S+T*T-1,C=2*(E*S+x*T+s),k=E*E+x*x-s*s,L=(-C-Math.sqrt(C*C-4*N*k))/(2*N);return{x:E+S*L+r,y:x+T*L+i,r:L}}function Wv(e,t,n){var r=e.x,i=e.y,s=t.r+n.r,o=e.r+n.r,u=t.x-r,a=t.y-i,f=u*u+a*a;if(f){var l=.5+((o*=o)-(s*=s))/(2*f),c=Math.sqrt(Math.max(0,2*s*(o+f)-(o-=f)*o-s*s))/(2*f);n.x=r+l*u+c*a,n.y=i+l*a-c*u}else n.x=r+o,n.y=i}function Xv(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return i*i>n*n+r*r}function Vv(e,t,n){var r=e.x-t,i=e.y-n;return r*r+i*i}function $v(e){this._=e,this.next=null,this.previous=null}function Jv(e){if(!(i=e.length))return 0;var t,n,r,i;t=e[0],t.x=0,t.y=0;if(i>1){n=e[1],t.x=-n.r,n.x=t.r,n.y=0;if(i>2){Wv(n,t,r=e[2]);var s=t.r*t.r,o=n.r*n.r,u=r.r*r.r,a=s+o+u,f=s*t.x+o*n.x+u*r.x,l=s*t.y+o*n.y+u*r.y,c,h,p,d,v,m,g;t=new $v(t),n=new $v(n),r=new $v(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(p=3;p<i;++p){Wv(t._,n._,r=e[p]),r=new $v(r);if((v=t.previous)===(d=n.next)){if(Xv(d._,r._)){t=n,n=d,--p;continue e}}else{m=d._.r,g=v._.r;do if(m<=g){if(Xv(d._,r._)){n=d,t.next=n,n.previous=t,--p;continue e}d=d.next,m+=d._.r}else{if(Xv(v._,r._)){t=v,t.next=n,n.previous=t,--p;continue e}v=v.previous,g+=v._.r}while(d!==v.next)}r.previous=t,r.next=n,t.next=n.previous=n=r,a+=u=r._.r*r._.r,f+=u*r._.x,l+=u*r._.y,s=Vv(t._,c=f/a,h=l/a);while((r=r.next)!==n)(u=Vv(r._,c,h))<s&&(t=r,s=u);n=t.next}t=[n._],r=n;while((r=r.next)!==n)t.push(r._);r=Fv(t);for(p=0;p<i;++p)t=e[p],t.x-=r.x,t.y-=r.y;return r.r}return t.r+n.r}return t.r}function Kv(e){return Jv(e),e}function Qv(e){return e==null?null:Gv(e)}function Gv(e){if(typeof e!="function")throw new Error;return e}function Yv(){return 0}function Zv(e){return function(){return e}}function em(e){return Math.sqrt(e.value)}function tm(){function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(nm(e)).eachAfter(rm(r,.5)).eachBefore(im(1)):i.eachBefore(nm(em)).eachAfter(rm(Yv,1)).eachAfter(rm(r,i.r/Math.min(t,n))).eachBefore(im(Math.min(t,n)/(2*i.r))),i}var e=null,t=1,n=1,r=Yv;return i.radius=function(t){return arguments.length?(e=Qv(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r=typeof e=="function"?e:Zv(+e),i):r},i}function nm(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function rm(e,t){return function(n){if(r=n.children){var r,i,s=r.length,o=e(n)*t||0,u;if(o)for(i=0;i<s;++i)r[i].r+=o;u=Jv(r);if(o)for(i=0;i<s;++i)r[i].r-=o;n.r=u+o}}}function im(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function sm(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function om(e,t,n,r,i){var s=e.children,o,u=-1,a=s.length,f=e.value&&(r-t)/e.value;while(++u<a)o=s[u],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*f}function um(){function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(s(t,o)),r&&i.eachBefore(sm),i}function s(e,t){return function(r){r.children&&om(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,s=r.y0,o=r.x1-n,u=r.y1-n;o<i&&(i=o=(i+o)/2),u<s&&(s=u=(s+u)/2),r.x0=i,r.y0=s,r.x1=o,r.y1=u}}var e=1,t=1,n=0,r=!1;return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}function cm(e){return e.id}function hm(e){return e.parentId}function pm(){function n(n){var r,i,s=n.length,o,u,a,f=new Array(s),l,c,h={};for(i=0;i<s;++i)r=n[i],a=f[i]=new Hv(r),(l=e(r,i,n))!=null&&(l+="")&&(c=am+(a.id=l),h[c]=c in h?lm:a);for(i=0;i<s;++i){a=f[i],l=t(n[i],i,n);if(l==null||!(l+="")){if(o)throw new Error("multiple roots");o=a}else{u=h[am+l];if(!u)throw new Error("missing: "+l);if(u===lm)throw new Error("ambiguous: "+l);u.children?u.children.push(a):u.children=[a],a.parent=u}}if(!o)throw new Error("no root");o.parent=fm,o.eachBefore(function(e){e.depth=e.parent.depth+1,--s}).eachBefore(Pv),o.parent=null;if(s>0)throw new Error("cycle");return o}var e=cm,t=hm;return n.id=function(t){return arguments.length?(e=Gv(t),n):e},n.parentId=function(e){return arguments.length?(t=Gv(e),n):t},n}function dm(e,t){return e.parent===t.parent?1:2}function vm(e){var t=e.children;return t?t[0]:e.t}function mm(e){var t=e.children;return t?t[t.length-1]:e.t}function gm(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ym(e){var t=0,n=0,r=e.children,i=r.length,s;while(--i>=0)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function bm(e,t,n){return e.a.parent===t.parent?e.a:n}function wm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Em(e){var t=new wm(e,0),n,r=[t],i,s,o,u;while(n=r.pop())if(s=n._.children){n.children=new Array(u=s.length);for(o=u-1;o>=0;--o)r.push(i=n.children[o]=new wm(s[o],o)),i.parent=n}return(t.parent=new wm(null,0)).children=[t],t}function Sm(){function i(i){var u=Em(i);u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o);if(r)i.eachBefore(a);else{var f=i,l=i,c=i;i.eachBefore(function(e){e.x<f.x&&(f=e),e.x>l.x&&(l=e),e.depth>c.depth&&(c=e)});var h=f===l?1:e(f,l)/2,p=h-f.x,d=t/(l.x+h+p),v=n/(c.depth||1);i.eachBefore(function(e){e.x=(e.x+p)*d,e.y=e.depth*v})}return i}function s(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){ym(t);var s=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-s):t.z=s}else i&&(t.z=i.z+e(t._,i._));t.parent.A=u(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(t,n,r){if(n){var i=t,s=t,o=n,u=i.parent.children[0],a=i.m,f=s.m,l=o.m,c=u.m,h;while(o=mm(o),i=vm(i),o&&i)u=vm(u),s=mm(s),s.a=t,h=o.z+l-i.z-a+e(o._,i._),h>0&&(gm(bm(o,t,r),t,h),a+=h,f+=h),l+=o.m,a+=i.m,c+=u.m,f+=s.m;o&&!mm(s)&&(s.t=o,s.m+=l-f),i&&!vm(u)&&(u.t=i,u.m+=a-c,r=t)}return r}function a(e){e.x*=t,e.y=e.depth*n}var e=dm,t=1,n=1,r=null;return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}function xm(e,t,n,r,i){var s=e.children,o,u=-1,a=s.length,f=e.value&&(i-n)/e.value;while(++u<a)o=s[u],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*f}function Nm(e,t,n,r,i,s){var o=[],u=t.children,a,f,l=0,c,h=u.length,p,d,v=t.value,m,g,y,b,w,E,S;while(l<h){p=i-n,d=s-r,g=y=m=u[l].value,E=Math.max(d/p,p/d)/(v*e),S=m*m*E,w=Math.max(y/S,S/g);for(c=l+1;c<h;++c){m+=f=u[c].value,f<g&&(g=f),f>y&&(y=f),S=m*m*E,b=Math.max(y/S,S/g);if(b>w){m-=f;break}w=b}o.push(a={value:m,dice:p<d,children:u.slice(l,c)}),a.dice?om(a,n,r,i,v?r+=d*m/v:s):xm(a,n,r,v?n+=p*m/v:i,s),v-=m,l=c}return o}function km(){function l(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(c),i=[0],t&&e.eachBefore(sm),e}function c(t){var n=i[t.depth],r=t.x0+n,l=t.y0+n,c=t.x1-n,h=t.y1-n;c<r&&(r=c=(r+c)/2),h<l&&(l=h=(l+h)/2),t.x0=r,t.y0=l,t.x1=c,t.y1=h,t.children&&(n=i[t.depth+1]=s(t)/2,r+=f(t)-n,l+=o(t)-n,c-=u(t)-n,h-=a(t)-n,c<r&&(r=c=(r+c)/2),h<l&&(l=h=(l+h)/2),e(t,r,l,c,h))}var e=Cm,t=!1,n=1,r=1,i=[0],s=Yv,o=Yv,u=Yv,a=Yv,f=Yv;return l.round=function(e){return arguments.length?(t=!!e,l):t},l.size=function(e){return arguments.length?(n=+e[0],r=+e[1],l):[n,r]},l.tile=function(t){return arguments.length?(e=Gv(t),l):e},l.padding=function(e){return arguments.length?l.paddingInner(e).paddingOuter(e):l.paddingInner()},l.paddingInner=function(e){return arguments.length?(s=typeof e=="function"?e:Zv(+e),l):s},l.paddingOuter=function(e){return arguments.length?l.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):l.paddingTop()},l.paddingTop=function(e){return arguments.length?(o=typeof e=="function"?e:Zv(+e),l):o},l.paddingRight=function(e){return arguments.length?(u=typeof e=="function"?e:Zv(+e),l):u},l.paddingBottom=function(e){return arguments.length?(a=typeof e=="function"?e:Zv(+e),l):a},l.paddingLeft=function(e){return arguments.length?(f=typeof e=="function"?e:Zv(+e),l):f},l}function Lm(e,t,n,r,i){function l(e,t,n,r,i,o,u){if(e>=t-1){var a=s[e];a.x0=r,a.y0=i,a.x1=o,a.y1=u;return}var c=f[e],h=n/2+c,p=e+1,d=t-1;while(p<d){var v=p+d>>>1;f[v]<h?p=v+1:d=v}var m=f[p]-c,g=n-m;if(u-i>o-r){var y=(i*g+u*m)/n;l(e,p,m,r,i,o,y),l(p,t,g,r,y,o,u)}else{var b=(r*g+o*m)/n;l(e,p,m,r,i,b,u),l(p,t,g,b,i,o,u)}}var s=e.children,o,u=s.length,a,f=new Array(u+1);for(f[0]=a=o=0;o<u;++o)f[o+1]=a+=s[o].value;l(0,u,e.value,t,n,r,i)}function Am(e,t,n,r,i){(e.depth&1?xm:om)(e,t,n,r,i)}function Mm(e,t){function r(){var r,i=n.length,s,o=0,u=0;for(r=0;r<i;++r)s=n[r],o+=s.x,u+=s.y;for(o=o/i-e,u=u/i-t,r=0;r<i;++r)s=n[r],s.x-=o,s.y-=u}var n;return e==null&&(e=0),t==null&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r}function _m(e){return function(){return e}}function Dm(){return(Math.random()-.5)*1e-6}function Pm(e){return e.x+e.vx}function Hm(e){return e.y+e.vy}function Bm(e){function s(){function d(t,n,i,s,o){var u=t.data,p=t.r,d=c+p;if(u){if(u.index>e){var v=f-u.x-u.vx,m=l-u.y-u.vy,g=v*v+m*m;g<d*d&&(v===0&&(v=Dm(),g+=v*v),m===0&&(m=Dm(),g+=m*m),g=(d-(g=Math.sqrt(g)))/g*r,a.vx+=(v*=g)*(d=(p*=p)/(h+p)),a.vy+=(m*=g)*d,u.vx-=v*(d=1-d),u.vy-=m*d)}return}return n>f+d||s<f-d||i>l+d||o<l-d}var e,s=t.length,u,a,f,l,c,h;for(var p=0;p<i;++p){u=Mn(t,Pm,Hm).visitAfter(o);for(e=0;e<s;++e)a=t[e],c=n[e],h=c*c,f=a.x+a.vx,l=a.y+a.vy,u.visit(d)}}function o(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}var t,n,r=1,i=1;return typeof e!="function"&&(e=_m(e==null?1:+e)),s.initialize=function(r){var i,s=(t=r).length;n=new Array(s);for(i=0;i<s;++i)n[i]=+e(t[i],i,t)},s.iterations=function(e){return arguments.length?(i=+e,s):i},s.strength=function(e){return arguments.length?(r=+e,s):r},s.radius=function(t){return arguments.length?(e=typeof t=="function"?t:_m(+t),s):e},s}function jm(e,t){return t}function Fm(e){function l(e){return 1/Math.min(u[e.source.index],u[e.target.index])}function c(t){for(var n=0,i=e.length;n<f;++n)for(var o=0,u,l,c,h,p,d,v;o<i;++o)u=e[o],l=u.source,c=u.target,h=c.x+c.vx-l.x-l.vx||Dm(),p=c.y+c.vy-l.y-l.vy||Dm(),d=Math.sqrt(h*h+p*p),d=(d-s[o])/d*t*r[o],h*=d,p*=d,c.vx-=h*(v=a[o]),c.vy-=p*v,l.vx+=h*(v=1-v),l.vy+=p*v}function h(){if(!o)return;var n,i=o.length,f=e.length,l=z(o,t),c;for(n=0,u=new Array(i);n<i;++n)u[n]=0;for(n=0;n<f;++n)c=e[n],c.index=n,typeof c.source!="object"&&(c.source=l.get(c.source)),typeof c.target!="object"&&(c.target=l.get(c.target)),++u[c.source.index],++u[c.target.index];for(n=0,a=new Array(f);n<f;++n)c=e[n],a[n]=u[c.source.index]/(u[c.source.index]+u[c.target.index]);r=new Array(f),p(),s=new Array(f),d()}function p(){if(!o)return;for(var t=0,i=e.length;t<i;++t)r[t]=+n(e[t],t,e)}function d(){if(!o)return;for(var t=0,n=e.length;t<n;++t)s[t]=+i(e[t],t,e)}var t=jm,n=l,r,i=_m(30),s,o,u,a,f=1;return e==null&&(e=[]),c.initialize=function(e){o=e,h()},c.links=function(t){return arguments.length?(e=t,h(),c):e},c.id=function(e){return arguments.length?(t=e,c):t},c.iterations=function(e){return arguments.length?(f=+e,c):f},c.strength=function(e){return arguments.length?(n=typeof e=="function"?e:_m(+e),p(),c):n},c.distance=function(e){return arguments.length?(i=typeof e=="function"?e:_m(+e),d(),c):i},c}function Im(e){return e.x}function qm(e){return e.y}function zm(e){function l(){c(),f.call("tick",t),n<r&&(a.stop(),f.call("end",t))}function c(){var t,r=e.length,a;n+=(s-n)*i,u.each(function(e){e(n)});for(t=0;t<r;++t)a=e[t],a.fx==null?a.x+=a.vx*=o:(a.x=a.fx,a.vx=0),a.fy==null?a.y+=a.vy*=o:(a.y=a.fy,a.vy=0)}function h(){for(var t=0,n=e.length,r;t<n;++t){r=e[t],r.index=t;if(isNaN(r.x)||isNaN(r.y)){var i=Rm*Math.sqrt(t),s=t*Um;r.x=i*Math.cos(s),r.y=i*Math.sin(s)}if(isNaN(r.vx)||isNaN(r.vy))r.vx=r.vy=0}}function p(t){return t.initialize&&t.initialize(e),t}var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,u=z(),a=Bu(l),f=Xo("tick","end");return e==null&&(e=[]),h(),t={tick:c,restart:function(){return a.restart(l),t},stop:function(){return a.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),u.each(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(s=+e,t):s},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},force:function(e,n){return arguments.length>1?(n==null?u.remove(e):u.set(e,p(n)),t):u.get(e)},find:function(t,n,r){var i=0,s=e.length,o,u,a,f,l;r==null?r=Infinity:r*=r;for(i=0;i<s;++i)f=e[i],o=t-f.x,u=n-f.y,a=o*o+u*u,a<r&&(l=f,r=a);return l},on:function(e,n){return arguments.length>1?(f.on(e,n),t):f.on(e)}}}function Wm(){function a(r){var i,s=e.length,o=Mn(e,Im,qm).visitAfter(l);for(n=r,i=0;i<s;++i)t=e[i],o.visit(c)}function f(){if(!e)return;var t,n=e.length;i=new Array(n);for(t=0;t<n;++t)i[t]=+r(e[t],t,e)}function l(e){var t=0,n,r,s,o,u;if(e.length){for(s=o=u=0;u<4;++u)(n=e[u])&&(r=n.value)&&(t+=r,s+=r*n.x,o+=r*n.y);e.x=s/t,e.y=o/t}else{n=e,n.x=n.data.x,n.y=n.data.y;do t+=i[n.data.index];while(n=n.next)}e.value=t}function c(e,r,a,f){if(!e.value)return!0;var l=e.x-t.x,c=e.y-t.y,h=f-r,p=l*l+c*c;if(h*h/u<p)return p<o&&(l===0&&(l=Dm(),p+=l*l),c===0&&(c=Dm(),p+=c*c),p<s&&(p=Math.sqrt(s*p)),t.vx+=l*e.value*n/p,t.vy+=c*e.value*n/p),!0;if(e.length||p>=o)return;if(e.data!==t||e.next)l===0&&(l=Dm(),p+=l*l),c===0&&(c=Dm(),p+=c*c),p<s&&(p=Math.sqrt(s*p));do e.data!==t&&(h=i[e.data.index]*n/p,t.vx+=l*h,t.vy+=c*h);while(e=e.next)}var e,t,n,r=_m(-30),i,s=1,o=Infinity,u=.81;return a.initialize=function(t){e=t,f()},a.strength=function(e){return arguments.length?(r=typeof e=="function"?e:_m(+e),f(),a):r},a.distanceMin=function(e){return arguments.length?(s=e*e,a):Math.sqrt(s)},a.distanceMax=function(e){return arguments.length?(o=e*e,a):Math.sqrt(o)},a.theta=function(e){return arguments.length?(u=e*e,a):Math.sqrt(u)},a}function Xm(e){function s(e){for(var t=0,s=n.length,o;t<s;++t)o=n[t],o.vx+=(i[t]-o.x)*r[t]*e}function o(){if(!n)return;var s,o=n.length;r=new Array(o),i=new Array(o);for(s=0;s<o;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}var t=_m(.1),n,r,i;return typeof e!="function"&&(e=_m(e==null?0:+e)),s.initialize=function(e){n=e,o()},s.strength=function(e){return arguments.length?(t=typeof e=="function"?e:_m(+e),o(),s):t},s.x=function(t){return arguments.length?(e=typeof t=="function"?t:_m(+t),o(),s):e},s}function Vm(e){function s(e){for(var t=0,s=n.length,o;t<s;++t)o=n[t],o.vy+=(i[t]-o.y)*r[t]*e}function o(){if(!n)return;var s,o=n.length;r=new Array(o),i=new Array(o);for(s=0;s<o;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}var t=_m(.1),n,r,i;return typeof e!="function"&&(e=_m(e==null?0:+e)),s.initialize=function(e){n=e,o()},s.strength=function(e){return arguments.length?(t=typeof e=="function"?e:_m(+e),o(),s):t},s.y=function(t){return arguments.length?(e=typeof t=="function"?t:_m(+t),o(),s):e},s}function $m(){e.event.stopImmediatePropagation()}function Jm(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function Km(e){var t=e.document.documentElement,n=Ap(e).on("dragstart.drag",Jm,!0);"onselectstart"in t?n.on("selectstart.drag",Jm,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Qm(e,t){var n=e.document.documentElement,r=Ap(e).on("dragstart.drag",null);t&&(r.on("click.drag",Jm,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Gm(e){return function(){return e}}function Ym(e,t,n,r,i,s,o,u,a,f){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=s,this.y=o,this.dx=u,this.dy=a,this._=f}function Zm(){return!e.event.button}function eg(){return this.parentNode}function tg(t){return t==null?{x:e.event.x,y:e.event.y}:t}function ng(){function f(e){e.on("mousedown.drag",l).on("touchstart.drag",p).on("touchmove.drag",d).on("touchend.drag touchcancel.drag",v).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){if(a||!t.apply(this,arguments))return;var r=m("mouse",n.apply(this,arguments),oh,this,arguments);if(!r)return;Ap(e.event.view).on("mousemove.drag",c,!0).on("mouseup.drag",h,!0),Km(e.event.view),$m(),u=!1,r("start")}function c(){Jm(),u=!0,i.mouse("drag")}function h(){Ap(e.event.view).on("mousemove.drag mouseup.drag",null),Qm(e.event.view,u),Jm(),i.mouse("end")}function p(){if(!t.apply(this,arguments))return;var r=e.event.changedTouches,i=n.apply(this,arguments),s=r.length,o,u;for(o=0;o<s;++o)if(u=m(r[o].identifier,i,Mp,this,arguments))$m(),u("start")}function d(){var t=e.event.changedTouches,n=t.length,r,s;for(r=0;r<n;++r)if(s=i[t[r].identifier])Jm(),s("drag")}function v(){var t=e.event.changedTouches,n=t.length,r,s;a&&clearTimeout(a),a=setTimeout(function(){a=null},500);for(r=0;r<n;++r)if(s=i[t[r].identifier])$m(),s("end")}function m(t,n,u,a,l){var c=u(n,t),h,p,d,v=s.copy();if(!rh(new Ym(f,"beforestart",h,t,o,c[0],c[1],0,0,v),function(){return(e.event.subject=h=r.apply(a,l))==null?!1:(p=h.x-c[0]||0,d=h.y-c[1]||0,!0)}))return;return function m(e){var r=c,s;switch(e){case"start":i[t]=m,s=o++;break;case"end":delete i[t],--o;case"drag":c=u(n,t),s=o}rh(new Ym(f,e,h,t,s,c[0]+p,c[1]+d,c[0]-r[0],c[1]-r[1],v),v.apply,v,[e,a,l])}}var t=Zm,n=eg,r=tg,i={},s=Xo("start","drag","end"),o=0,u,a;return f.filter=function(e){return arguments.length?(t=typeof e=="function"?e:Gm(!!e),f):t},f.container=function(e){return arguments.length?(n=typeof e=="function"?e:Gm(e),f):n},f.subject=function(e){return arguments.length?(r=typeof e=="function"?e:Gm(e),f):r},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f}function rg(e){return function(){return e}}function ig(e){return e[0]}function sg(e){return e[1]}function og(){this._=null}function ug(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ag(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function fg(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function lg(e){while(e.L)e=e.L;return e}function cg(e,t,n,r){var i=[null,null],s=Rg.push(i)-1;return i.left=e,i.right=t,n&&pg(i,e,t,n),r&&pg(i,t,e,r),Ig[e.index].halfedges.push(s),Ig[t.index].halfedges.push(s),i}function hg(e,t,n){var r=[t,n];return r.left=e,r}function pg(e,t,n,r){!e[0]&&!e[1]?(e[0]=r,e.left=t,e.right=n):e.left===n?e[1]=r:e[0]=r}function dg(e,t,n,r,i){var s=e[0],o=e[1],u=s[0],a=s[1],f=o[0],l=o[1],c=0,h=1,p=f-u,d=l-a,v;v=t-u;if(!p&&v>0)return;v/=p;if(p<0){if(v<c)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>c&&(c=v)}v=r-u;if(!p&&v<0)return;v/=p;if(p<0){if(v>h)return;v>c&&(c=v)}else if(p>0){if(v<c)return;v<h&&(h=v)}v=n-a;if(!d&&v>0)return;v/=d;if(d<0){if(v<c)return;v<h&&(h=v)}else if(d>0){if(v>h)return;v>c&&(c=v)}v=i-a;if(!d&&v<0)return;v/=d;if(d<0){if(v>h)return;v>c&&(c=v)}else if(d>0){if(v<c)return;v<h&&(h=v)}return c>0||h<1?(c>0&&(e[0]=[u+c*p,a+c*d]),h<1&&(e[1]=[u+h*p,a+h*d]),!0):!0}function vg(e,t,n,r,i){var s=e[1];if(s)return!0;var o=e[0],u=e.left,a=e.right,f=u[0],l=u[1],c=a[0],h=a[1],p=(f+c)/2,d=(l+h)/2,v,m;if(h===l){if(p<t||p>=r)return;if(f>c){if(!o)o=[p,n];else if(o[1]>=i)return;s=[p,i]}else{if(!o)o=[p,i];else if(o[1]<n)return;s=[p,n]}}else{v=(f-c)/(h-l),m=d-v*p;if(v<-1||v>1)if(f>c){if(!o)o=[(n-m)/v,n];else if(o[1]>=i)return;s=[(i-m)/v,i]}else{if(!o)o=[(i-m)/v,i];else if(o[1]<n)return;s=[(n-m)/v,n]}else if(l<h){if(!o)o=[t,v*t+m];else if(o[0]>=r)return;s=[r,v*r+m]}else{if(!o)o=[r,v*r+m];else if(o[0]<t)return;s=[t,v*t+m]}}return e[0]=o,e[1]=s,!0}function mg(e,t,n,r){var i=Rg.length,s;while(i--)(!vg(s=Rg[i],e,t,n,r)||!dg(s,e,t,n,r)||!(Math.abs(s[0][0]-s[1][0])>Bg||Math.abs(s[0][1]-s[1][1])>Bg))&&delete Rg[i]}function gg(e){return Ig[e.index]={site:e,halfedges:[]}}function yg(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function bg(e,t){return t[+(t.left!==e.site)]}function wg(e,t){return t[+(t.left===e.site)]}function Eg(){for(var e=0,t=Ig.length,n,r,i,s;e<t;++e)if((n=Ig[e])&&(s=(r=n.halfedges).length)){var o=new Array(s),u=new Array(s);for(i=0;i<s;++i)o[i]=i,u[i]=yg(n,Rg[r[i]]);o.sort(function(e,t){return u[t]-u[e]});for(i=0;i<s;++i)u[i]=r[o[i]];for(i=0;i<s;++i)r[i]=u[i]}}function Sg(e,t,n,r){var i=Ig.length,s,o,u,a,f,l,c,h,p,d,v,m,g=!0;for(s=0;s<i;++s)if(o=Ig[s]){u=o.site,f=o.halfedges,a=f.length;while(a--)Rg[f[a]]||f.splice(a,1);a=0,l=f.length;while(a<l){d=wg(o,Rg[f[a]]),v=d[0],m=d[1],c=bg(o,Rg[f[++a%l]]),h=c[0],p=c[1];if(Math.abs(v-h)>Bg||Math.abs(m-p)>Bg)f.splice(a,0,Rg.push(hg(u,d,Math.abs(v-e)<Bg&&r-m>Bg?[e,Math.abs(h-e)<Bg?p:r]:Math.abs(m-r)<Bg&&n-v>Bg?[Math.abs(p-r)<Bg?h:n,r]:Math.abs(v-n)<Bg&&m-t>Bg?[n,Math.abs(h-n)<Bg?p:t]:Math.abs(m-t)<Bg&&v-e>Bg?[Math.abs(p-t)<Bg?h:e,t]:null))-1),++l}l&&(g=!1)}if(g){var y,b,w,E=Infinity;for(s=0,g=null;s<i;++s)if(o=Ig[s])u=o.site,y=u[0]-e,b=u[1]-t,w=y*y+b*b,w<E&&(E=w,g=o);if(g){var S=[e,t],x=[e,r],T=[n,r],N=[n,t];g.halfedges.push(Rg.push(hg(u=g.site,S,x))-1,Rg.push(hg(u,x,T))-1,Rg.push(hg(u,T,N))-1,Rg.push(hg(u,N,S))-1)}}for(s=0;s<i;++s)if(o=Ig[s])o.halfedges.length||delete Ig[s]}function Ng(){ug(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cg(e){var t=e.P,n=e.N;if(!t||!n)return;var r=t.site,i=e.site,s=n.site;if(r===s)return;var o=i[0],u=i[1],a=r[0]-o,f=r[1]-u,l=s[0]-o,c=s[1]-u,h=2*(a*c-f*l);if(h>=-jg)return;var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,g=xg.pop()||new Ng;g.arc=e,g.site=i,g.x=v+o,g.y=(g.cy=m+u)+Math.sqrt(v*v+m*m),e.circle=g;var y=null,b=qg._;while(b)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}qg.insert(y,g),y||(Tg=g)}function kg(e){var t=e.circle;t&&(t.P||(Tg=t.N),qg.remove(t),xg.push(t),ug(t),e.circle=null)}function Ag(){ug(this),this.edge=this.site=this.circle=null}function Og(e){var t=Lg.pop()||new Ag;return t.site=e,t}function Mg(e){kg(e),Fg.remove(e),Lg.push(e),ug(e)}function _g(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],s=e.P,o=e.N,u=[e];Mg(e);var a=s;while(a.circle&&Math.abs(n-a.circle.x)<Bg&&Math.abs(r-a.circle.cy)<Bg)s=a.P,u.unshift(a),Mg(a),a=s;u.unshift(a),kg(a);var f=o;while(f.circle&&Math.abs(n-f.circle.x)<Bg&&Math.abs(r-f.circle.cy)<Bg)o=f.N,u.push(f),Mg(f),f=o;u.push(f),kg(f);var l=u.length,c;for(c=1;c<l;++c)f=u[c],a=u[c-1],pg(f.edge,a.site,f.site,i);a=u[0],f=u[l-1],f.edge=cg(a.site,f.site,null,i),Cg(a),Cg(f)}function Dg(e){var t=e[0],n=e[1],r,i,s,o,u=Fg._;while(u){s=Pg(u,n)-t;if(s>Bg)u=u.L;else{o=t-Hg(u,n);if(!(o>Bg)){s>-Bg?(r=u.P,i=u):o>-Bg?(r=u,i=u.N):r=i=u;break}if(!u.R){r=u;break}u=u.R}}gg(e);var a=Og(e);Fg.insert(r,a);if(!r&&!i)return;if(r===i){kg(r),i=Og(r.site),Fg.insert(a,i),a.edge=i.edge=cg(r.site,a.site),Cg(r),Cg(i);return}if(!i){a.edge=cg(r.site,a.site);return}kg(r),kg(i);var f=r.site,l=f[0],c=f[1],h=e[0]-l,p=e[1]-c,d=i.site,v=d[0]-l,m=d[1]-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w=[(m*y-p*b)/g+l,(h*b-v*y)/g+c];pg(i.edge,f,d,w),a.edge=cg(f,e,null,w),i.edge=cg(e,d,null,w),Cg(r),Cg(i)}function Pg(e,t){var n=e.site,r=n[0],i=n[1],s=i-t;if(!s)return r;var o=e.P;if(!o)return-Infinity;n=o.site;var u=n[0],a=n[1],f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function Hg(e,t){var n=e.N;if(n)return Pg(n,t);var r=e.site;return r[1]===t?r[0]:Infinity}function Ug(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function zg(e,t){return t[1]-e[1]||t[0]-e[0]}function Wg(e,t){var n=e.sort(zg).pop(),r,i,s;Rg=[],Ig=new Array(e.length),Fg=new og,qg=new og;for(;;){s=Tg;if(n&&(!s||n[1]<s.y||n[1]===s.y&&n[0]<s.x)){if(n[0]!==r||n[1]!==i)Dg(n),r=n[0],i=n[1];n=e.pop()}else{if(!s)break;_g(s.arc)}}Eg();if(t){var o=+t[0][0],u=+t[0][1],a=+t[1][0],f=+t[1][1];mg(o,u,a,f),Sg(o,u,a,f)}this.edges=Rg,this.cells=Ig,Fg=qg=Rg=Ig=null}function Xg(){function r(r){return new Wg(r.map(function(n,i){var s=[Math.round(e(n,i,r)/Bg)*Bg,Math.round(t(n,i,r)/Bg)*Bg];return s.index=i,s.data=n,s}),n)}var e=ig,t=sg,n=null;return r.polygons=function(e){return r(e).polygons()},r.links=function(e){return r(e).links()},r.triangles=function(e){return r(e).triangles()},r.x=function(t){return arguments.length?(e=typeof t=="function"?t:rg(+t),r):e},r.y=function(e){return arguments.length?(t=typeof e=="function"?e:rg(+e),r):t},r.extent=function(e){return arguments.length?(n=e==null?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(e){return arguments.length?(n=e==null?null:[[0,0],[+e[0],+e[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}function Vg(e){return function(){return e}}function $g(e,t,n){this.target=e,this.type=t,this.transform=n}function Jg(e,t,n){this.k=e,this.x=t,this.y=n}function Qg(e){return e.__zoom||Kg}function Gg(){e.event.stopImmediatePropagation()}function Yg(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function Zg(){return!e.event.button}function ey(){var e=this,t,n;return e instanceof SVGElement?(e=e.ownerSVGElement||e,t=e.width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function ty(){return this.__zoom||Kg}function ny(){function m(e){e.on("wheel.zoom",T).on("mousedown.zoom",N).on("dblclick.zoom",C).on("touchstart.zoom",k).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",ty)}function g(e,t){return t=Math.max(r,Math.min(i,t)),t===e.k?e:new Jg(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Jg(e.k,r,i)}function b(e,t){var n=Math.min(0,e.invertX(t[0][0])-s)||Math.max(0,e.invertX(t[1][0])-o),r=Math.min(0,e.invertY(t[0][1])-u)||Math.max(0,e.invertY(t[1][1])-a);return n||r?e.translate(n,r):e}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function E(e,t,r){e.on("start.zoom",function(){S(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).end()}).tween("zoom",function(){var e=this,i=arguments,s=S(e,i),o=n.apply(e,i),u=r||w(o),a=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),f=e.__zoom,l=typeof t=="function"?t.apply(e,i):t,c=_o(f.invert(u).concat(a/f.k),l.invert(u).concat(a/l.k));return function(e){if(e===1)e=l;else{var t=c(e),n=a/t[2];e=new Jg(n,u[0]-t[0]*n,u[1]-t[1]*n)}s.zoom(null,e)}})}function S(e,t){for(var n=0,r=l.length,i;n<r;++n)if((i=l[n]).that===e)return i;return new x(e,t)}function x(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=n.apply(e,t)}function T(){function a(){n.wheel=null,n.end()}if(!t.apply(this,arguments))return;var n=S(this,arguments),s=this.__zoom,o=Math.max(r,Math.min(i,s.k*Math.pow(2,-e.event.deltaY*(e.event.deltaMode?120:1)/500))),u=oh(this);if(n.wheel){if(n.mouse[0][0]!==u[0]||n.mouse[0][1]!==u[1])n.mouse[1]=s.invert(n.mouse[0]=u);clearTimeout(n.wheel)}else{if(s.k===o)return;n.mouse=[u,s.invert(u)],Vp(this),n.start()}Yg(),n.wheel=setTimeout(a,v),n.zoom("mouse",b(y(g(s,o),n.mouse[0],n.mouse[1]),n.extent))}function N(){function s(){Yg(),n.moved=!0,n.zoom("mouse",b(y(n.that.__zoom,n.mouse[0]=oh(n.that),n.mouse[1]),n.extent))}function o(){r.on("mousemove.zoom mouseup.zoom",null),Qm(e.event.view,n.moved),Yg(),n.end()}if(p||!t.apply(this,arguments))return;var n=S(this,arguments),r=Ap(e.event.view).on("mousemove.zoom",s,!0).on("mouseup.zoom",o,!0),i=oh(this);Km(e.event.view),Gg(),n.mouse=[i,this.__zoom.invert(i)],Vp(this),n.start()}function C(){if(!t.apply(this,arguments))return;var r=this.__zoom,i=oh(this),s=r.invert(i),o=r.k*(e.event.shiftKey?.5:2),u=b(y(g(r,o),i,s),n.apply(this,arguments));Yg(),f>0?Ap(this).transition().duration(f).call(E,u,i):Ap(this).call(m.transform,u)}function k(){if(!t.apply(this,arguments))return;var n=S(this,arguments),r=e.event.changedTouches,i=r.length,s,o,u;Gg();for(s=0;s<i;++s)o=r[s],u=Mp(this,r,o.identifier),u=[u,this.__zoom.invert(u),o.identifier],n.touch0?n.touch1||(n.touch1=u):n.touch0=u;if(h){h=clearTimeout(h);if(!n.touch1)return n.end(),C.apply(this,arguments)}e.event.touches.length===i&&(h=setTimeout(function(){h=null},d),Vp(this),n.start())}function L(){var t=S(this,arguments),n=e.event.changedTouches,r=n.length,i,s,o,u;Yg(),h&&(h=clearTimeout(h));for(i=0;i<r;++i)s=n[i],o=Mp(this,n,s.identifier),t.touch0&&t.touch0[2]===s.identifier?t.touch0[0]=o:t.touch1&&t.touch1[2]===s.identifier&&(t.touch1[0]=o);s=t.that.__zoom;if(t.touch1){var a=t.touch0[0],f=t.touch0[1],l=t.touch1[0],c=t.touch1[1],p=(p=l[0]-a[0])*p+(p=l[1]-a[1])*p,d=(d=c[0]-f[0])*d+(d=c[1]-f[1])*d;s=g(s,Math.sqrt(p/d)),o=[(a[0]+l[0])/2,(a[1]+l[1])/2],u=[(f[0]+c[0])/2,(f[1]+c[1])/2]}else{if(!t.touch0)return;o=t.touch0[0],u=t.touch0[1]}t.zoom("touch",b(y(s,o,u),t.extent))}function A(){var t=S(this,arguments),n=e.event.changedTouches,r=n.length,i,s;Gg(),p&&clearTimeout(p),p=setTimeout(function(){p=null},d);for(i=0;i<r;++i)s=n[i],t.touch0&&t.touch0[2]===s.identifier?delete t.touch0:t.touch1&&t.touch1[2]===s.identifier&&delete t.touch1;t.touch1&&!t.touch0&&(t.touch0=t.touch1,delete t.touch1),t.touch0||t.end()}var t=Zg,n=ey,r=0,i=Infinity,s=-i,o=i,u=s,a=o,f=250,l=[],c=Xo("start","zoom","end"),h,p,d=500,v=150;return m.transform=function(e,t){var n=e.selection?e.selection():e;n.property("__zoom",ty),e!==n?E(e,t):n.interrupt().each(function(){S(this,arguments).start().zoom(null,typeof t=="function"?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t){m.scaleTo(e,function(){var e=this.__zoom.k,n=typeof t=="function"?t.apply(this,arguments):t;return e*n})},m.scaleTo=function(e,t){m.transform(e,function(){var e=n.apply(this,arguments),r=this.__zoom,i=w(e),s=r.invert(i),o=typeof t=="function"?t.apply(this,arguments):t;return b(y(g(r,o),i,s),e)})},m.translateBy=function(e,t,r){m.transform(e,function(){return b(this.__zoom.translate(typeof t=="function"?t.apply(this,arguments):t,typeof r=="function"?r.apply(this,arguments):r),n.apply(this,arguments))})},x.prototype={start:function(){return++this.active===1&&(this.index=l.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&e!=="mouse"&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&e!=="touch"&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&e!=="touch"&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return--this.active===0&&(l.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){rh(new $g(m,e,this.that.__zoom),c.apply,c,[e,this.that,this.args])}},m.filter=function(e){return arguments.length?(t=typeof e=="function"?e:Vg(!!e),m):t},m.extent=function(e){return arguments.length?(n=typeof e=="function"?e:Vg([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):n},m.scaleExtent=function(e){return arguments.length?(r=+e[0],i=+e[1],m):[r,i]},m.translateExtent=function(e){return arguments.length?(s=+e[0][0],o=+e[1][0],u=+e[0][1],a=+e[1][1],m):[[s,u],[o,a]]},m.duration=function(e){return arguments.length?(f=+e,m):f},m.on=function(){var e=c.on.apply(c,arguments);return e===c?m:e},m}function ry(e){return function(){return e}}function iy(e,t,n){this.target=e,this.type=t,this.selection=n}function sy(){e.event.stopImmediatePropagation()}function oy(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function by(e){return{type:e}}function wy(){return!e.event.button}function Ey(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Sy(e){while(!e.__brush)if(!(e=e.parentNode))return;return e.__brush}function xy(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Ty(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function Ny(){return Ly(cy)}function Cy(){return Ly(hy)}function ky(){return Ly(py)}function Ly(t){function u(e){var n=e.property("__brush",h).selectAll(".overlay").data([by("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",dy.overlay).merge(n).each(function(){var e=Sy(this).extent;Ap(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([by("selection")]).enter().append("rect").attr("class","selection").attr("cursor",dy.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(e){return e.type});r.exit().remove(),r.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return dy[e.type]}),e.each(a).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",c)}function a(){var e=Ap(this),t=Sy(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return e.type[e.type.length-1]==="e"?t[1][0]-s/2:t[0][0]-s/2}).attr("y",function(e){return e.type[0]==="s"?t[1][1]-s/2:t[0][1]-s/2}).attr("width",function(e){return e.type==="n"||e.type==="s"?t[1][0]-t[0][0]+s:s}).attr("height",function(e){return e.type==="e"||e.type==="w"?t[1][1]-t[0][1]+s:s})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(e,t){return e.__brush.emitter||new l(e,t)}function l(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function c(){function F(){var e=oh(n);A&&!O&&!M&&(Math.abs(e[0]-D[0])>Math.abs(e[1]-D[1])?M=!0:O=!0),D=e,L=!0,oy(),I()}function I(){var e;C=D[0]-_[0],k=D[1]-_[1];switch(s){case ay:case uy:u&&(C=Math.max(d-v,Math.min(w-E,C)),m=v+C,S=E+C),l&&(k=Math.max(g-y,Math.min(x-T,k)),b=y+k,N=T+k);break;case fy:u<0?(C=Math.max(d-v,Math.min(w-v,C)),m=v+C,S=E):u>0&&(C=Math.max(d-E,Math.min(w-E,C)),m=v,S=E+C),l<0?(k=Math.max(g-y,Math.min(x-y,k)),b=y+k,N=T):l>0&&(k=Math.max(g-T,Math.min(x-T,k)),b=y,N=T+k);break;case ly:u&&(m=Math.max(d,Math.min(w,v-C*u)),S=Math.max(d,Math.min(w,E+C*u))),l&&(b=Math.max(g,Math.min(x,y-k*l)),N=Math.max(g,Math.min(x,T+k*l)))}S<m&&(u*=-1,e=v,v=E,E=e,e=m,m=S,S=e,i in vy&&B.attr("cursor",dy[i=vy[i]])),N<b&&(l*=-1,e=y,y=T,T=e,e=b,b=N,N=e,i in my&&B.attr("cursor",dy[i=my[i]])),p=c.selection,O&&(m=p[0][0],S=p[1][0]),M&&(b=p[0][1],N=p[1][1]);if(p[0][0]!==m||p[0][1]!==b||p[1][0]!==S||p[1][1]!==N)c.selection=[[m,b],[S,N]],a.call(n),P.brush()}function q(){sy();if(e.event.touches){if(e.event.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500),H.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Qm(e.event.view,L),j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);H.attr("pointer-events","all"),B.attr("cursor",dy.overlay),xy(p)&&(c.selection=null,a.call(n)),P.end()}function R(){switch(e.event.keyCode){case 16:A=u&&l;break;case 18:s===fy&&(u&&(E=S-C*u,v=m+C*u),l&&(T=N-k*l,y=b+k*l),s=ly,I());break;case 32:if(s===fy||s===ly)u<0?E=S-C:u>0&&(v=m-C),l<0?T=N-k:l>0&&(y=b-k),s=ay,B.attr("cursor",dy.selection),I();break;default:return}oy()}function U(){switch(e.event.keyCode){case 16:A&&(O=M=A=!1,I());break;case 18:s===ly&&(u<0?E=S:u>0&&(v=m),l<0?T=N:l>0&&(y=b),s=fy,I());break;case 32:s===ay&&(e.event.altKey?(u&&(E=S-C*u,v=m+C*u),l&&(T=N-k*l,y=b+k*l),s=ly):(u<0?E=S:u>0&&(v=m),l<0?T=N:l>0&&(y=b),s=fy),B.attr("cursor",dy[i]),I());break;default:return}oy()}if(e.event.touches){if(e.event.changedTouches.length<e.event.touches.length)return oy()}else if(o)return;if(!r.apply(this,arguments))return;var n=this,i=e.event.target.__data__.type,s=(e.event.metaKey?i="overlay":i)==="selection"?uy:e.event.altKey?ly:fy,u=t===hy?null:gy[i],l=t===cy?null:yy[i],c=Sy(n),h=c.extent,p=c.selection,d=h[0][0],v,m,g=h[0][1],y,b,w=h[1][0],E,S,x=h[1][1],T,N,C,k,L,A=u&&l&&e.event.shiftKey,O,M,_=oh(n),D=_,P=f(n,arguments).beforestart();i==="overlay"?c.selection=p=[[v=t===hy?d:_[0],y=t===cy?g:_[1]],[E=t===hy?w:v,T=t===cy?x:y]]:(v=p[0][0],y=p[0][1],E=p[1][0],T=p[1][1]),m=v,b=y,S=E,N=T;var H=Ap(n).attr("pointer-events","none"),B=H.selectAll(".overlay").attr("cursor",dy[i]);if(e.event.touches)H.on("touchmove.brush",F,!0).on("touchend.brush touchcancel.brush",q,!0);else{var j=Ap(e.event.view).on("keydown.brush",R,!0).on("keyup.brush",U,!0).on("mousemove.brush",F,!0).on("mouseup.brush",q,!0);Km(e.event.view)}sy(),Vp(n),a.call(n),P.start()}function h(){var e=this.__brush||{selection:null};return e.extent=n.apply(this,arguments),e.dim=t,e}var n=Ey,r=wy,i=Xo(u,"start","brush","end"),s=6,o;return u.move=function(e,n){e.selection?e.on("start.brush",function(){f(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){f(this,arguments).end()}).tween("brush",function(){function l(t){r.selection=t===1&&xy(o)?null:u(t),a.call(e),i.brush()}var e=this,r=e.__brush,i=f(e,arguments),s=r.selection,o=t.input(typeof n=="function"?n.apply(this,arguments):n,r.extent),u=lo(s,o);return s&&o?l:l(1)}):e.each(function(){var e=this,r=arguments,i=e.__brush,s=t.input(typeof n=="function"?n.apply(e,r):n,i.extent),o=f(e,r).beforestart();Vp(e),i.selection=s==null||xy(s)?null:s,a.call(e),o.start().brush().end()})},l.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active===0&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){rh(new iy(u,e,t.output(this.state.selection)),i.apply,i,[e,this.that,this.args])}},u.extent=function(e){return arguments.length?(n=typeof e=="function"?e:ry([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),u):n},u.filter=function(e){return arguments.length?(r=typeof e=="function"?e:ry(!!e),u):r},u.handleSize=function(e){return arguments.length?(s=+e,u):s},u.on=function(){var e=i.on.apply(i,arguments);return e===i?u:e},u}function Ay(){return new Oy}function Oy(){this.reset()}function _y(e,t,n){var r=e.s=t+n,i=r-t,s=r-i;e.t=t-s+(n-i)}function Zy(e){return e>1?0:e<-1?Hy:Math.acos(e)}function eb(e){return e>1?By:e<-1?-By:Math.asin(e)}function tb(e){return(e=Ky(e/2))*e}function nb(){}function rb(e,t){e&&sb.hasOwnProperty(e.type)&&sb[e.type](e,t)}function ob(e,t,n){var r=-1,i=e.length-n,s;t.lineStart();while(++r<i)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function ub(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)ob(e[n],t,1);t.polygonEnd()}function ab(e,t){e&&ib.hasOwnProperty(e.type)?ib[e.type](e,t):rb(e,t)}function gb(){mb.point=bb}function yb(){wb(cb,hb)}function bb(e,t){mb.point=wb,cb=e,hb=t,e*=qy,t*=qy,pb=e,db=Wy(t=t/2+jy),vb=Ky(t)}function wb(e,t){e*=qy,t*=qy,t=t/2+jy;var n=e-pb,r=n>=0?1:-1,i=r*n,s=Wy(t),o=Ky(t),u=vb*o,a=db*s+u*Wy(i),f=u*r*Ky(i);fb.add(zy(f,a)),pb=e,db=s,vb=o}function Eb(e){return lb.reset(),ab(e,mb),lb*2}function Sb(e){return[zy(e[1],e[0]),eb(e[2])]}function xb(e){var t=e[0],n=e[1],r=Wy(n);return[r*Wy(t),r*Ky(t),Ky(n)]}function Tb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Nb(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Cb(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function kb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Lb(e){var t=Gy(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Rb(e,t){Fb.push(Ib=[Ab=e,Mb=e]),t<Ob&&(Ob=t),t>_b&&(_b=t)}function Ub(e,t){var n=xb([e*qy,t*qy]);if(Bb){var r=Nb(Bb,n),i=[r[1],-r[0],0],s=Nb(i,r);Lb(s),s=Sb(s);var o=e-Db,u=o>0?1:-1,a=s[0]*Iy*u,f,l=Ry(o)>180;l^(u*Db<a&&a<u*e)?(f=s[1]*Iy,f>_b&&(_b=f)):(a=(a+360)%360-180,l^(u*Db<a&&a<u*e))?(f=-s[1]*Iy,f<Ob&&(Ob=f)):(t<Ob&&(Ob=t),t>_b&&(_b=t)),l?e<Db?Jb(Ab,e)>Jb(Ab,Mb)&&(Mb=e):Jb(e,Mb)>Jb(Ab,Mb)&&(Ab=e):Mb>=Ab?(e<Ab&&(Ab=e),e>Mb&&(Mb=e)):e>Db?Jb(Ab,e)>Jb(Ab,Mb)&&(Mb=e):Jb(e,Mb)>Jb(Ab,Mb)&&(Ab=e)}else Rb(e,t);Bb=n,Db=e}function zb(){qb.point=Ub}function Wb(){Ib[0]=Ab,Ib[1]=Mb,qb.point=Rb,Bb=null}function Xb(e,t){if(Bb){var n=e-Db;jb.add(Ry(n)>180?n+(n>0?360:-360):n)}else Pb=e,Hb=t;mb.point(e,t),Ub(e,t)}function Vb(){mb.lineStart()}function $b(){Xb(Pb,Hb),mb.lineEnd(),Ry(jb)>Dy&&(Ab=-(Mb=180)),Ib[0]=Ab,Ib[1]=Mb,Bb=null}function Jb(e,t){return(t-=e)<0?t+360:t}function Kb(e,t){return e[0]-t[0]}function Qb(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Gb(e){var t,n,r,i,s,o,u;_b=Mb=-(Ab=Ob=Infinity),Fb=[],ab(e,qb);if(n=Fb.length){Fb.sort(Kb);for(t=1,r=Fb[0],s=[r];t<n;++t)i=Fb[t],Qb(r,i[0])||Qb(r,i[1])?(Jb(r[0],i[1])>Jb(r[0],r[1])&&(r[1]=i[1]),Jb(i[0],r[1])>Jb(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-Infinity,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(u=Jb(r[1],i[0]))>o&&(o=u,Ab=i[0],Mb=r[1])}return Fb=Ib=null,Ab===Infinity||Ob===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Ab,Ob],[Mb,_b]]}function vw(e,t){e*=qy,t*=qy;var n=Wy(t);mw(n*Wy(e),n*Ky(e),Ky(t))}function mw(e,t,n){++Yb,ew+=(e-ew)/Yb,tw+=(t-tw)/Yb,nw+=(n-nw)/Yb}function gw(){dw.point=yw}function yw(e,t){e*=qy,t*=qy;var n=Wy(t);cw=n*Wy(e),hw=n*Ky(e),pw=Ky(t),dw.point=bw,mw(cw,hw,pw)}function bw(e,t){e*=qy,t*=qy;var n=Wy(t),r=n*Wy(e),i=n*Ky(e),s=Ky(t),o=zy(Gy((o=hw*s-pw*i)*o+(o=pw*r-cw*s)*o+(o=cw*i-hw*r)*o),cw*r+hw*i+pw*s);Zb+=o,rw+=o*(cw+(cw=r)),iw+=o*(hw+(hw=i)),sw+=o*(pw+(pw=s)),mw(cw,hw,pw)}function ww(){dw.point=vw}function Ew(){dw.point=xw}function Sw(){Tw(fw,lw),dw.point=vw}function xw(e,t){fw=e,lw=t,e*=qy,t*=qy,dw.point=Tw;var n=Wy(t);cw=n*Wy(e),hw=n*Ky(e),pw=Ky(t),mw(cw,hw,pw)}function Tw(e,t){e*=qy,t*=qy;var n=Wy(t),r=n*Wy(e),i=n*Ky(e),s=Ky(t),o=hw*s-pw*i,u=pw*r-cw*s,a=cw*i-hw*r,f=Gy(o*o+u*u+a*a),l=cw*r+hw*i+pw*s,c=f&&-Zy(l)/f,h=zy(f,l);ow+=c*o,uw+=c*u,aw+=c*a,Zb+=h,rw+=h*(cw+(cw=r)),iw+=h*(hw+(hw=i)),sw+=h*(pw+(pw=s)),mw(cw,hw,pw)}function Nw(e){Yb=Zb=ew=tw=nw=rw=iw=sw=ow=uw=aw=0,ab(e,dw);var t=ow,n=uw,r=aw,i=t*t+n*n+r*r;if(i<Py){t=rw,n=iw,r=sw,Zb<Dy&&(t=ew,n=tw,r=nw),i=t*t+n*n+r*r;if(i<Py)return[NaN,NaN]}return[zy(n,t)*Iy,eb(r/Gy(i))*Iy]}function Cw(e){return function(){return e}}function kw(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Lw(e,t){return[e>Hy?e-Fy:e<-Hy?e+Fy:e,t]}function Aw(e,t,n){return(e%=Fy)?t||n?kw(Mw(e),_w(t,n)):Mw(e):t||n?_w(t,n):Lw}function Ow(e){return function(t,n){return t+=e,[t>Hy?t-Fy:t<-Hy?t+Fy:t,n]}}function Mw(e){var t=Ow(e);return t.invert=Ow(-e),t}function _w(e,t){function o(e,t){var o=Wy(t),u=Wy(e)*o,a=Ky(e)*o,f=Ky(t),l=f*n+u*r;return[zy(a*i-l*s,u*n-f*r),eb(l*i+a*s)]}var n=Wy(e),r=Ky(e),i=Wy(t),s=Ky(t);return o.invert=function(e,t){var o=Wy(t),u=Wy(e)*o,a=Ky(e)*o,f=Ky(t),l=f*i-a*s;return[zy(a*i+f*s,u*n+l*r),eb(l*n-u*r)]},o}function Dw(e){function t(t){return t=e(t[0]*qy,t[1]*qy),t[0]*=Iy,t[1]*=Iy,t}return e=Aw(e[0]*qy,e[1]*qy,e.length>2?e[2]*qy:0),t.invert=function(t){return t=e.invert(t[0]*qy,t[1]*qy),t[0]*=Iy,t[1]*=Iy,t},t}function Pw(e,t,n,r,i,s){if(!n)return;var o=Wy(t),u=Ky(t),a=r*n;if(i==null)i=t+r*Fy,s=t-a/2;else{i=Hw(o,i),s=Hw(o,s);if(r>0?i<s:i>s)i+=r*Fy}for(var f,l=i;r>0?l>s:l<s;l-=a)f=Sb([o,-u*Wy(l),-u*Ky(l)]),e.point(f[0],f[1])}function Hw(e,t){t=xb(t),t[0]-=e,Lb(t);var n=Zy(-t[1]);return((-t[2]<0?-n:n)+Fy-Dy)%Fy}function Bw(){function o(e,t){r.push(e=i(e,t)),e[0]*=Iy,e[1]*=Iy}function u(){var o=e.apply(this,arguments),u=t.apply(this,arguments)*qy,a=n.apply(this,arguments)*qy;return r=[],i=Aw(-o[0]*qy,-o[1]*qy,0).invert,Pw(s,u,a,1),o={type:"Polygon",coordinates:[r]},r=i=null,o}var e=Cw([0,0]),t=Cw(90),n=Cw(6),r,i,s={point:o};return u.center=function(t){return arguments.length?(e=typeof t=="function"?t:Cw([+t[0],+t[1]]),u):e},u.radius=function(e){return arguments.length?(t=typeof e=="function"?e:Cw(+e),u):t},u.precision=function(e){return arguments.length?(n=typeof e=="function"?e:Cw(+e),u):n},u}function jw(){var e=[],t;return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:nb,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Fw(e,t,n,r,i,s){var o=e[0],u=e[1],a=t[0],f=t[1],l=0,c=1,h=a-o,p=f-u,d;d=n-o;if(!h&&d>0)return;d/=h;if(h<0){if(d<l)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>l&&(l=d)}d=i-o;if(!h&&d<0)return;d/=h;if(h<0){if(d>c)return;d>l&&(l=d)}else if(h>0){if(d<l)return;d<c&&(c=d)}d=r-u;if(!p&&d>0)return;d/=p;if(p<0){if(d<l)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>l&&(l=d)}d=s-u;if(!p&&d<0)return;d/=p;if(p<0){if(d>c)return;d>l&&(l=d)}else if(p>0){if(d<l)return;d<c&&(c=d)}return l>0&&(e[0]=o+l*h,e[1]=u+l*p),c<1&&(t[0]=o+c*h,t[1]=u+c*p),!0}function Iw(e,t){return Ry(e[0]-t[0])<Dy&&Ry(e[1]-t[1])<Dy}function qw(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Rw(e,t,n,r,i){var s=[],o=[],u,a;e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t],a;if(Iw(n,r)){i.lineStart();for(u=0;u<t;++u)i.point((n=e[u])[0],n[1]);i.lineEnd();return}s.push(a=new qw(n,e,null,!0)),o.push(a.o=new qw(n,null,a,!1)),s.push(a=new qw(r,e,null,!1)),o.push(a.o=new qw(r,null,a,!0))});if(!s.length)return;o.sort(t),Uw(s),Uw(o);for(u=0,a=o.length;u<a;++u)o[u].e=n=!n;var f=s[0],l,c;for(;;){var h=f,p=!0;while(h.v)if((h=h.n)===f)return;l=h.z,i.lineStart();do{h.v=h.o.v=!0;if(h.e){if(p)for(u=0,a=l.length;u<a;++u)i.point((c=l[u])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){l=h.p.z;for(u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,p=!p}while(!h.v);i.lineEnd()}}function Uw(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}function Xw(e,t,n,r){function i(i,s){return e<=i&&i<=n&&t<=s&&s<=r}function s(i,s,u,f){var l=0,c=0;if(i==null||(l=o(i,u))!==(c=o(s,u))||a(i,s)<0^u>0){do f.point(l===0||l===3?e:n,l>1?r:t);while((l=(l+u+4)%4)!==c)}else f.point(s[0],s[1])}function o(r,i){return Ry(r[0]-e)<Dy?i>0?0:3:Ry(r[0]-n)<Dy?i>0?2:1:Ry(r[1]-t)<Dy?i>0?1:0:i>0?3:2}function u(e,t){return a(e.x,t.x)}function a(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}return function(o){function S(e,t){i(e,t)&&a.point(e,t)}function x(){var t=0;for(var n=0,i=c.length;n<i;++n)for(var s=c[n],o=1,u=s.length,a=s[0],f,l,h=a[0],p=a[1];o<u;++o)f=h,l=p,a=s[o],h=a[0],p=a[1],l<=r?p>r&&(h-f)*(r-l)>(p-l)*(e-f)&&++t:p<=r&&(h-f)*(r-l)<(p-l)*(e-f)&&--t;return t}function T(){a=f,l=[],c=[],w=!0}function N(){var e=x(),t=w&&e,n=(l=M(l)).length;if(t||n)o.polygonStart(),t&&(o.lineStart(),s(null,null,1,o),o.lineEnd()),n&&Rw(l,u,e,s,o),o.polygonEnd();a=o,l=c=h=null}function C(){E.point=L,c&&c.push(h=[]),b=!0,y=!1,m=g=NaN}function k(){l&&(L(p,d),v&&y&&f.rejoin(),l.push(f.result())),E.point=S,y&&a.lineEnd()}function L(s,o){var u=i(s,o);c&&h.push([s,o]);if(b)p=s,d=o,v=u,b=!1,u&&(a.lineStart(),a.point(s,o));else if(u&&y)a.point(s,o);else{var f=[m=Math.max(Ww,Math.min(zw,m)),g=Math.max(Ww,Math.min(zw,g))],l=[s=Math.max(Ww,Math.min(zw,s)),o=Math.max(Ww,Math.min(zw,o))];Fw(f,l,e,t,n,r)?(y||(a.lineStart(),a.point(f[0],f[1])),a.point(l[0],l[1]),u||a.lineEnd(),w=!1):u&&(a.lineStart(),a.point(s,o),w=!1)}m=s,g=o,y=u}var a=o,f=jw(),l,c,h,p,d,v,m,g,y,b,w,E={point:S,lineStart:C,lineEnd:k,polygonStart:T,polygonEnd:N};return E}}function Vw(){var e=0,t=0,n=960,r=500,i,s,o;return o={stream:function(o){return i&&s===o?i:i=Xw(e,t,n,r)(s=o)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1],i=s=null,o):[[e,t],[n,r]]}}}function Yw(){Gw.point=eE,Gw.lineEnd=Zw}function Zw(){Gw.point=Gw.lineEnd=nb}function eE(e,t){e*=qy,t*=qy,Jw=e,Kw=Ky(t),Qw=Wy(t),Gw.point=tE}function tE(e,t){e*=qy,t*=qy;var n=Ky(t),r=Wy(t),i=Ry(e-Jw),s=Wy(i),o=Ky(i),u=r*o,a=Qw*n-Kw*r*s,f=Kw*n+Qw*r*s;$w.add(zy(Gy(u*u+a*a),f)),Jw=e,Kw=n,Qw=r}function nE(e){return $w.reset(),ab(e,Gw),+$w}function sE(e,t){return rE[0]=e,rE[1]=t,nE(iE)}function oE(e,t,n){var r=g(e,t-Dy,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function uE(e,t,n){var r=g(e,t-Dy,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function aE(){function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return g(Xy(r/l)*l,n,l).map(d).concat(g(Xy(u/c)*c,o,c).map(v)).concat(g(Xy(t/a)*a,e,a).filter(function(e){return Ry(e%l)>Dy}).map(h)).concat(g(Xy(s/f)*f,i,f).filter(function(e){return Ry(e%c)>Dy}).map(p))}var e,t,n,r,i,s,o,u,a=10,f=a,l=90,c=360,h,p,d,v,m=2.5;return y.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[d(r).concat(v(o).slice(1),d(n).reverse().slice(1),v(u).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),y.precision(m)):[[r,u],[n,o]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],s=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),s>i&&(n=s,s=i,i=n),y.precision(m)):[[t,s],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(l=+e[0],c=+e[1],y):[l,c]},y.stepMinor=function(e){return arguments.length?(a=+e[0],f=+e[1],y):[a,f]},y.precision=function(a){return arguments.length?(m=+a,h=oE(s,i,90),p=uE(t,e,m),d=oE(u,o,90),v=uE(r,n,m),y):m},y.extentMajor([[-180,-90+Dy],[180,90-Dy]]).extentMinor([[-180,-80-Dy],[180,80+Dy]])}function fE(e,t){var n=e[0]*qy,r=e[1]*qy,i=t[0]*qy,s=t[1]*qy,o=Wy(r),u=Ky(r),a=Wy(s),f=Ky(s),l=o*Wy(n),c=o*Ky(n),h=a*Wy(i),p=a*Ky(i),d=2*eb(Gy(tb(s-r)+o*a*tb(i-n))),v=Ky(d),m=d?function(e){var t=Ky(e*=d)/v,n=Ky(d-e)/v,r=n*l+t*h,i=n*c+t*p,s=n*u+t*f;return[zy(i,r)*Iy,zy(s,Gy(r*r+i*i))*Iy]}:function(){return[n*Iy,r*Iy]};return m.distance=d,m}function lE(e){return e}function yE(){gE.point=bE}function bE(e,t){gE.point=wE,pE=vE=e,dE=mE=t}function wE(e,t){hE.add(mE*e-vE*t),vE=e,mE=t}function EE(){wE(pE,dE)}function kE(e,t){e<SE&&(SE=e),e>TE&&(TE=e),t<xE&&(xE=t),t>NE&&(NE=t)}function UE(e,t){LE+=e,AE+=t,++OE}function zE(){RE.point=WE}function WE(e,t){RE.point=XE,UE(IE=e,qE=t)}function XE(e,t){var n=e-IE,r=t-qE,i=Gy(n*n+r*r);ME+=i*(IE+e)/2,_E+=i*(qE+t)/2,DE+=i,UE(IE=e,qE=t)}function VE(){RE.point=UE}function $E(){RE.point=KE}function JE(){QE(jE,FE)}function KE(e,t){RE.point=QE,UE(jE=IE=e,FE=qE=t)}function QE(e,t){var n=e-IE,r=t-qE,i=Gy(n*n+r*r);ME+=i*(IE+e)/2,_E+=i*(qE+t)/2,DE+=i,i=qE*e-IE*t,PE+=i*(IE+e),HE+=i*(qE+t),BE+=i*3,UE(IE=e,qE=t)}function GE(e){function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Fy)}function i(t,r){e.moveTo(t,r),n.point=s}function s(t,n){e.lineTo(t,n)}function o(){n.point=r}function u(){e.closePath()}var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:nb};return n}function YE(){function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=s}function s(e,n){t.push("L",e,",",n)}function o(){n.point=i}function u(){n.point=r}function a(){t.push("Z")}var e=ZE(4.5),t=[],n={point:r,lineStart:o,lineEnd:u,polygonStart:function(){n.lineEnd=a},polygonEnd:function(){n.lineEnd=u,n.point=r},pointRadius:function(t){return e=ZE(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};return n}function ZE(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function eS(){function s(t){return t&&(typeof e=="function"&&i.pointRadius(+e.apply(this,arguments)),ab(t,n(i))),i.result()}var e=4.5,t,n,r,i;return s.area=function(e){return ab(e,n(gE)),gE.result()},s.bounds=function(e){return ab(e,n(CE)),CE.result()},s.centroid=function(e){return ab(e,n(RE)),RE.result()},s.projection=function(e){return arguments.length?(n=(t=e)==null?lE:e.stream,s):t},s.context=function(t){return arguments.length?(i=(r=t)==null?new YE:new GE(t),typeof e!="function"&&i.pointRadius(e),s):r},s.pointRadius=function(t){return arguments.length?(e=typeof t=="function"?t:(i.pointRadius(+t),+t),s):e},s.projection(null).context(null)}function nS(e,t){var n=t[0],r=t[1],i=[Ky(n),-Wy(n),0],s=0,o=0;tS.reset();for(var u=0,a=e.length;u<a;++u){if(!(l=(f=e[u]).length))continue;var f,l,c=f[l-1],h=c[0],p=c[1]/2+jy,d=Ky(p),v=Wy(p);for(var m=0;m<l;++m,h=y,d=w,v=E,c=g){var g=f[m],y=g[0],b=g[1]/2+jy,w=Ky(b),E=Wy(b),S=y-h,x=S>=0?1:-1,T=x*S,N=T>Hy,C=d*w;tS.add(zy(C*x*Ky(T),v*E+C*Wy(T))),s+=N?S+x*Fy:S;if(N^h>=n^y>=n){var k=Nb(xb(c),xb(g));Lb(k);var L=Nb(i,k);Lb(L);var A=(N^S>=0?-1:1)*eb(L[2]);if(r>A||r===A&&(k[0]||k[1]))o+=N^S>=0?1:-1}}}return(s<-Dy||s<Dy&&tS<-Dy)^o&1}function rS(e,t,n,r){return function(i,s){function v(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function m(e,t){var n=i(e,t);o.point(n[0],n[1])}function g(){d.point=m,o.lineStart()}function y(){d.point=v,o.lineEnd()}function b(e,t){p.push([e,t]);var n=i(e,t);f.point(n[0],n[1])}function w(){f.lineStart(),p=[]}function E(){b(p[0][0],p[0][1]),f.lineEnd();var e=f.clean(),t=a.result(),n,r=t.length,i,o,u;p.pop(),c.push(p),p=null;if(!r)return;if(e&1){o=t[0];if((i=o.length-1)>0){l||(s.polygonStart(),l=!0),s.lineStart();for(n=0;n<i;++n)s.point((u=o[n])[0],u[1]);s.lineEnd()}return}r>1&&e&2&&t.push(t.pop().concat(t.shift())),h.push(t.filter(iS))}var o=t(s),u=i.invert(r[0],r[1]),a=jw(),f=t(a),l=!1,c,h,p,d={point:v,lineStart:g,lineEnd:y,polygonStart:function(){d.point=b,d.lineStart=w,d.lineEnd=E,h=[],c=[]},polygonEnd:function(){d.point=v,d.lineStart=g,d.lineEnd=y,h=M(h);var e=nS(c,u);h.length?(l||(s.polygonStart(),l=!0),Rw(h,sS,e,n,s)):e&&(l||(s.polygonStart(),l=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),l&&(s.polygonEnd(),l=!1),h=c=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}};return d}}function iS(e){return e.length>1}function sS(e,t){return((e=e.x)[0]<0?e[1]-By-Dy:By-e[1])-((t=t.x)[0]<0?t[1]-By-Dy:By-t[1])}function uS(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var u=s>0?Hy:-Hy,a=Ry(s-t);Ry(a-Hy)<Dy?(e.point(t,n=(n+o)/2>0?By:-By),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(s,n),i=0):r!==u&&a>=Hy&&(Ry(t-r)<Dy&&(t-=r*Dy),Ry(s-u)<Dy&&(s-=u*Dy),n=aS(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=s,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function aS(e,t,n,r){var i,s,o=Ky(e-n);return Ry(o)>Dy?Uy((Ky(t)*(s=Wy(r))*Ky(n)-Ky(r)*(i=Wy(t))*Ky(e))/(i*s*o)):(t+r)/2}function fS(e,t,n,r){var i;if(e==null)i=n*By,r.point(-Hy,i),r.point(0,i),r.point(Hy,i),r.point(Hy,0),r.point(Hy,-i),r.point(0,-i),r.point(-Hy,-i),r.point(-Hy,0),r.point(-Hy,i);else if(Ry(e[0]-t[0])>Dy){var s=e[0]<t[0]?Hy:-Hy;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function lS(e,t){function s(n,r,i,s){Pw(s,e,t,i,n,r)}function o(e,t){return Wy(e)*Wy(t)>n}function u(e){var t,n,s,u,l;return{lineStart:function(){u=s=!1,l=1},point:function(c,h){var p=[c,h],d,v=o(c,h),m=r?v?0:f(c,h):v?f(c+(c<0?Hy:-Hy),h):0;!t&&(u=s=v)&&e.lineStart();if(v!==s){d=a(t,p);if(Iw(t,d)||Iw(p,d))p[0]+=Dy,p[1]+=Dy,v=o(p[0],p[1])}if(v!==s)l=0,v?(e.lineStart(),d=a(p,t),e.point(d[0],d[1])):(d=a(t,p),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(i&&t&&r^v){var g;!(m&n)&&(g=a(p,t,!0))&&(l=0,r?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}v&&(!t||!Iw(t,p))&&e.point(p[0],p[1]),t=p,s=v,n=m},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return l|(u&&s)<<1}}}function a(e,t,r){var i=xb(e),s=xb(t),o=[1,0,0],u=Nb(i,s),a=Tb(u,u),f=u[0],l=a-f*f;if(!l)return!r&&e;var c=n*a/l,h=-n*f/l,p=Nb(o,u),d=kb(o,c),v=kb(u,h);Cb(d,v);var m=p,g=Tb(d,m),y=Tb(m,m),b=g*g-y*(Tb(d,d)-1);if(b<0)return;var w=Gy(b),E=kb(m,(-g-w)/y);Cb(E,d),E=Sb(E);if(!r)return E;var S=e[0],x=t[0],T=e[1],N=t[1],C;x<S&&(C=S,S=x,x=C);var k=x-S,L=Ry(k-Hy)<Dy,A=L||k<Dy;!L&&N<T&&(C=T,T=N,N=C);if(A?L?T+N>0^E[1]<(Ry(E[0]-S)<Dy?T:N):T<=E[1]&&E[1]<=N:k>Hy^(S<=E[0]&&E[0]<=x)){var O=kb(m,(-g+w)/y);return Cb(O,d),[E,Sb(O)]}}function f(t,n){var i=r?e:Hy-e,s=0;return t<-i?s|=1:t>i&&(s|=2),n<-i?s|=4:n>i&&(s|=8),s}var n=Wy(e),r=n>0,i=Ry(n)>Dy;return rS(o,u,s,r?[0,-e]:[-Hy,e-Hy])}function cS(e){return{stream:hS(e)}}function hS(e){function t(){}var n=t.prototype=Object.create(pS.prototype);for(var r in e)n[r]=e[r];return function(e){var n=new t;return n.stream=e,n}}function pS(){}function dS(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],s=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),s!=null&&e.clipExtent(null),ab(n,e.stream(CE));var o=CE.result(),u=Math.min(r/(o[1][0]-o[0][0]),i/(o[1][1]-o[0][1])),a=+t[0][0]+(r-u*(o[1][0]+o[0][0]))/2,f=+t[0][1]+(i-u*(o[1][1]+o[0][1]))/2;return s!=null&&e.clipExtent(s),e.scale(u*150).translate([a,f])}function vS(e){return function(t,n){return dS(e,[[0,0],t],n)}}function mS(e){return function(t,n){return dS(e,t,n)}}function bS(e,t){return+t?ES(e,t):wS(e)}function wS(e){return hS({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ES(e,t){function n(r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=f-r,y=l-i,b=g*g+y*y;if(b>4*t&&v--){var w=o+h,E=u+p,S=a+d,x=Gy(w*w+E*E+S*S),T=eb(S/=x),N=Ry(Ry(S)-1)<Dy||Ry(s-c)<Dy?(s+c)/2:zy(E,w),C=e(N,T),k=C[0],L=C[1],A=k-r,O=L-i,M=y*A-g*O;if(M*M/b>t||Ry((g*A+y*O)/b-.5)>.3||o*h+u*p+a*d<yS)n(r,i,s,o,u,a,k,L,N,w/=x,E/=x,S,v,m),m.point(k,L),n(k,L,N,w,E,S,f,l,c,h,p,d,v,m)}}return function(t){function m(n,r){n=e(n,r),t.point(n[0],n[1])}function g(){l=NaN,v.point=y,t.lineStart()}function y(r,i){var s=xb([r,i]),o=e(r,i);n(l,c,f,h,p,d,l=o[0],c=o[1],f=r,h=s[0],p=s[1],d=s[2],gS,t),t.point(l,c)}function b(){v.point=m,t.lineEnd()}function w(){g(),v.point=E,v.lineEnd=S}function E(e,t){y(r=e,t),i=l,s=c,o=h,u=p,a=d,v.point=y}function S(){n(l,c,f,h,p,d,i,s,r,o,u,a,gS,t),v.lineEnd=b,b()}var r,i,s,o,u,a,f,l,c,h,p,d,v={point:m,lineStart:g,lineEnd:b,polygonStart:function(){t.polygonStart(),v.lineStart=w},polygonEnd:function(){t.polygonEnd(),v.lineStart=g}};return v}}function xS(e){return TS(function(){return e})()}function TS(e){function N(e){return e=p(e[0]*qy,e[1]*qy),[e[0]*n+s,o-e[1]*n]}function C(e){return e=p.invert((e[0]-s)/n,(o-e[1])/n),e&&[e[0]*Iy,e[1]*Iy]}function k(e,r){return e=t(e,r),[e[0]*n+s,o-e[1]*n]}function L(){p=kw(h=Aw(f,l,c),t);var e=t(u,a);return s=r-e[0]*n,o=i+e[1]*n,A()}function A(){return x=T=null,N}var t,n=150,r=480,i=250,s,o,u=0,a=0,f=0,l=0,c=0,h,p,d=null,v=oS,m=null,g,y,b,w=lE,E=.5,S=bS(k,E),x,T;return N.stream=function(e){return x&&T===e?x:x=SS(v(h,S(w(T=e))))},N.clipAngle=function(e){return arguments.length?(v=+e?lS(d=e*qy,6*qy):(d=null,oS),A()):d*Iy},N.clipExtent=function(e){return arguments.length?(w=e==null?(m=g=y=b=null,lE):Xw(m=+e[0][0],g=+e[0][1],y=+e[1][0],b=+e[1][1]),A()):m==null?null:[[m,g],[y,b]]},N.scale=function(e){return arguments.length?(n=+e,L()):n},N.translate=function(e){return arguments.length?(r=+e[0],i=+e[1],L()):[r,i]},N.center=function(e){return arguments.length?(u=e[0]%360*qy,a=e[1]%360*qy,L()):[u*Iy,a*Iy]},N.rotate=function(e){return arguments.length?(f=e[0]%360*qy,l=e[1]%360*qy,c=e.length>2?e[2]%360*qy:0,L()):[f*Iy,l*Iy,c*Iy]},N.precision=function(e){return arguments.length?(S=bS(k,E=e*e),A()):Gy(E)},N.fitExtent=mS(N),N.fitSize=vS(N),function(){return t=e.apply(this,arguments),N.invert=t.invert&&C,L()}}function NS(e){var t=0,n=Hy/3,r=TS(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*qy,n=e[1]*qy):[t*Iy,n*Iy]},i}function CS(e,t){function o(e,t){var n=Gy(i-2*r*Ky(t))/r;return[n*Ky(e*=r),s-n*Wy(e)]}var n=Ky(e),r=(n+Ky(t))/2,i=1+n*(2*r-n),s=Gy(i)/r;return o.invert=function(e,t){var n=s-t;return[zy(e,n)/r,eb((i-(e*e+n*n)*r*r)/(2*r))]},o}function kS(){return NS(CS).scale(155.424).center([0,33.6442])}function LS(){return kS().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-0.6,38.7])}function AS(e){var t=e.length;return{point:function(n,r){var i=-1;while(++i<t)e[i].point(n,r)},sphere:function(){var n=-1;while(++n<t)e[n].sphere()},lineStart:function(){var n=-1;while(++n<t)e[n].lineStart()},lineEnd:function(){var n=-1;while(++n<t)e[n].lineEnd()},polygonStart:function(){var n=-1;while(++n<t)e[n].polygonStart()},polygonEnd:function(){var n=-1;while(++n<t)e[n].polygonEnd()}}}function OS(){function l(e){var t=e[0],n=e[1];return a=null,(r.point(t,n),a)||(s.point(t,n),a)||(u.point(t,n),a)}var e,t,n=LS(),r,i=kS().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=kS().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,a,f={point:function(e,t){a=[e,t]}};return l.invert=function(e){var t=n.scale(),r=n.translate(),s=(e[0]-r[0])/t,u=(e[1]-r[1])/t;return(u>=.12&&u<.234&&s>=-0.425&&s<-0.214?i:u>=.166&&u<.234&&s>=-0.214&&s<-0.115?o:n).invert(e)},l.stream=function(r){return e&&t===r?e:e=AS([n.stream(t=r),i.stream(r),o.stream(r)])},l.precision=function(e){return arguments.length?(n.precision(e),i.precision(e),o.precision(e),l):n.precision()},l.scale=function(e){return arguments.length?(n.scale(e),i.scale(e*.35),o.scale(e),l.translate(n.translate())):n.scale()},l.translate=function(e){if(!arguments.length)return n.translate();var t=n.scale(),a=+e[0],c=+e[1];return r=n.translate(e).clipExtent([[a-.455*t,c-.238*t],[a+.455*t,c+.238*t]]).stream(f),s=i.translate([a-.307*t,c+.201*t]).clipExtent([[a-.425*t+Dy,c+.12*t+Dy],[a-.214*t-Dy,c+.234*t-Dy]]).stream(f),u=o.translate([a-.205*t,c+.212*t]).clipExtent([[a-.214*t+Dy,c+.166*t+Dy],[a-.115*t-Dy,c+.234*t-Dy]]).stream(f),l},l.fitExtent=mS(l),l.fitSize=vS(l),l.scale(1070)}function MS(e){return function(t,n){var r=Wy(t),i=Wy(n),s=e(r*i);return[s*i*Ky(t),s*Ky(n)]}}function _S(e){return function(t,n){var r=Gy(t*t+n*n),i=e(r),s=Ky(i),o=Wy(i);return[zy(t*s,r*o),eb(r&&n*s/r)]}}function PS(){return xS(DS).scale(124.75).clipAngle(179.999)}function BS(){return xS(HS).scale(79.4188).clipAngle(179.999)}function jS(e,t){return[e,$y(Yy((By+t)/2))]}function FS(){return IS(jS).scale(961/Fy)}function IS(e){var t=xS(e),n=t.scale,r=t.translate,i=t.clipExtent,s;return t.scale=function(e){return arguments.length?(n(e),s&&t.clipExtent(null),t):n()},t.translate=function(e){return arguments.length?(r(e),s&&t.clipExtent(null),t):r()},t.clipExtent=function(e){if(!arguments.length)return s?null:i();if(s=e==null){var o=Hy*n(),u=r();e=[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]}return i(e),t},t.clipExtent(null)}function qS(e){return Yy((By+e)/2)}function RS(e,t){function s(e,t){i>0?t<-By+Dy&&(t=-By+Dy):t>By-Dy&&(t=By-Dy);var n=i/Jy(qS(t),r);return[n*Ky(r*e),i-n*Wy(r*e)]}var n=Wy(e),r=e===t?Ky(e):$y(n/Wy(t))/$y(qS(t)/qS(e)),i=n*Jy(qS(e),r)/r;return r?(s.invert=function(e,t){var n=i-t,s=Qy(r)*Gy(e*e+n*n);return[zy(e,n)/r,2*Uy(Jy(i/s,1/r))-By]},s):jS}function US(){return NS(RS).scale(109.5).parallels([30,30])}function zS(e,t){return[e,t]}function WS(){return xS(zS).scale(152.63)}function XS(e,t){function s(e,t){var n=i-t,s=r*e;return[n*Ky(s),i-n*Wy(s)]}var n=Wy(e),r=e===t?Ky(e):(n-Wy(t))/(t-e),i=n/r+e;return Ry(r)<Dy?zS:(s.invert=function(e,t){var n=i-t;return[zy(e,n)/r,i-Qy(r)*Gy(e*e+n*n)]},s)}function VS(){return NS(XS).scale(131.154).center([0,13.9389])}function $S(e,t){var n=Wy(t),r=Wy(e)*n;return[n*Ky(e)/r,Ky(t)/r]}function JS(){return xS($S).scale(144.049).clipAngle(60)}function KS(e,t){return[Wy(t)*Ky(e),Ky(t)]}function QS(){return xS(KS).scale(249.5).clipAngle(90+Dy)}function GS(e,t){var n=Wy(t),r=1+Wy(e)*n;return[n*Ky(e)/r,Ky(t)/r]}function YS(){return xS(GS).scale(250).clipAngle(142)}function ZS(e,t){return[$y(Yy((By+t)/2)),-e]}function ex(){var e=IS(ZS),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)}function tx(e,t){return e.each(function(){var e=t.apply(this,arguments),n=Ap(this);for(var r in e)n.attr(r,e[r])})}function nx(e,t){for(var n in t)e.attr(n,t[n]);return e}function rx(e){return(typeof e=="function"?tx:nx)(this,e)}function ix(e,t,n){return e.each(function(){var e=t.apply(this,arguments),r=Ap(this);for(var i in e)r.style(i,e[i],n)})}function sx(e,t,n){for(var r in t)e.style(r,t[r],n);return e}function ox(e,t){return(typeof e=="function"?ix:sx)(this,e,t==null?"":t)}function ux(e,t){return e.each(function(){var e=t.apply(this,arguments),n=Ap(this);for(var r in e)n.property(r,e[r])})}function ax(e,t){for(var n in t)e.property(n,t[n]);return e}function fx(e){return(typeof e=="function"?ux:ax)(this,e)}function lx(e,t){return e.each(function(){var n=t.apply(this,arguments),r=Ap(this).transition(e);for(var i in n)r.attr(i,n[i])})}function cx(e,t){for(var n in t)e.attr(n,t[n]);return e}function hx(e){return(typeof e=="function"?lx:cx)(this,e)}function px(e,t,n){return e.each(function(){var r=t.apply(this,arguments),i=Ap(this).transition(e);for(var s in r)i.style(s,r[s],n)})}function dx(e,t,n){for(var r in t)e.style(r,t[r],n);return e}function vx(e,t){return(typeof e=="function"?px:dx)(this,e,t==null?"":t)}function mx(e){return this.attr("transform",function(t,n){return"translate("+[typeof e=="function"?e.call(this,t,n):e]+")"})}function gx(e){if(typeof e=="string"){var t={},n=e.split(/([\.#])/g),r;e=n.shift();while(r=n.shift())r=="."?t["class"]=t["class"]?t["class"]+" "+n.shift():n.shift():r=="#"&&(t.id=n.shift());return{tag:e,attr:t}}return e}function yx(e){var t=gx(e),n;e=Rc(t.tag),n=this.select(function(){return this.appendChild(e.apply(this,arguments))});for(var r in t.attr)n.attr(r,t.attr[r]);return n}function bx(e){var t=ah(e),n=gx(e),r;e=Rc(n.tag),r=this.select(function(){return t.apply(this,arguments)||this.appendChild(e.apply(this,arguments))});for(var i in n.attr)r.attr(i,n.attr[i]);return r}function wx(e,t){return this.selectAll("tspan").data(e).enter().append("tspan").text(function(e){return e}).attr("x",0).attr("dy",function(e,n){return n?t||15:0})}function Ex(e,t){return this.selectAll(null).data(e).enter().append(t)}function Sx(e,t){if(typeof e=="object"){for(var n in e)this.attr(n.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),e[n]);return this}return arguments.length==1?this.attr(e):this.attr(e,t)}function xx(){var e=arguments,t=0,n=e.length;while(t<n){if(typeof e[t]=="string"||typeof e[t]=="number")e[t]=function(e){return function(t){return t[e]}}(e[t]);t++}return function(t){var n=0,r=e.length;while(n++<r)t=e[n-1].call(this,t);return t}}function Tx(e,t){function r(e,t,n){var t=t.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),r="top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width  margin-top margin-left margin-bottom margin-right font-size width height stroke-width line-height margin padding border max-width min-width";return~r.indexOf(t)?e.style(t,typeof n=="function"?xx(n,i):i(n)):e.style(t,n),e}function i(e){return e.match?e:e+"px"}if(typeof e=="object"){for(var n in e)r(this,n,e[n]);return this}return arguments.length==1?this.style(e):r(this,e,t)}function Nx(e,t){var n=e.split(" "),r=[],i=[],s=t||40,o=0;return n.forEach(function(e){o+e.length>s&&(r.push(i.join(" ")),i.length=0,o=0),o+=e.length,i.push(e)}),i.length&&r.push(i.join(" ")),r.filter(function(e){return e!=""})}function Cx(e){return typeof e=="function"?function(t,n){return e(t)<e(n)?-1:e(t)>e(n)?1:e(t)>=e(n)?0:NaN}:function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:t[e]>=n[e]?0:NaN}}function kx(e){return typeof e=="function"?function(t,n){return e(n)<e(t)?-1:e(n)>e(t)?1:e(n)>=e(t)?0:NaN}:function(t,n){return n[e]<t[e]?-1:n[e]>t[e]?1:n[e]>=t[e]?0:NaN}}function Lx(e){return e=e||{},e.margin=e.margin||{top:20,right:20,bottom:20,left:20},e.width=e.width||e.totalWidth-e.margin.left-e.margin.right||900,e.height=e.height||e.totalHeight-e.margin.top-e.margin.bottom||460,e.totalWidth=e.width+e.margin.left+e.margin.right,e.totalHeight=e.height+e.margin.top+e.margin.bottom,e.parentSel=e.parentSel||Ap("body"),e.rootsvg=e.parentSel.append("svg"),e.svg=e.rootsvg.attr("width",e.totalWidth).attr("height",e.totalHeight).append("g").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.x=e.x||Vl().range([0,e.width]),e.y=e.y||Vl().range([e.height,0]),e.xAxis=e.xAxis||fv().scale(e.x),e.yAxis=e.yAxis||lv().scale(e.y),e.drawAxis=function(){e.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+e.height+")").call(e.xAxis),e.svg.append("g").attr("class","y axis").call(e.yAxis)},e}function Ax(t,n,r){function s(e){n.classed("tooltip-hidden",!1).html("").appendMany(r,"div").html(function(t){return t(e)}),Ap(this).classed("tooltipped",!0)}function o(t){var r=n;if(!r.size())return;var i=e.event,s=i.clientX,o=i.clientY,u=r.node(),a=u.getBoundingClientRect(),f=window.scrollY?window.scrollY:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop;r.style("top",o+f-a.height-18+"px"),r.style("left",Math.min(Math.max(20,s-a.width/2),window.innerWidth-a.width-20)+"px")}function u(e){n.classed("tooltip-hidden",!0),Op(".tooltipped").classed("tooltipped",!1)}if(!t.size())return;n=n||Ap(".tooltip"),t.on("mouseover.attachTooltip",s).on("mousemove.attachTooltip",o).on("mouseout.attachTooltip",u).on("click.attachTooltip",function(e){console.log(e)});var i=t.datum();r=r||Y(i).filter(function(e){return typeof i[e]!="object"&&i[e]!="array"}).map(function(e){return function(t){return e+": <b>"+t[e]+"</b>"}})}function Ox(e,t){var n=zn();e.forEach(function(e){var r=e.split(".").reverse()[0],i={csv:wu,tsv:Eu,json:vu}[r];if(!i)return t(new Error("Invalid type",e));n.defer(i,e)}),n.awaitAll(t)}function Mx(e,t){return W().key(t).entries(e).map(function(e){return e.values.key=e.key,e.values})}var i=n(t),s=i.right,o=i.left,h=Array.prototype,p=h.slice,d=h.map,y=Math.sqrt(50),b=Math.sqrt(10),w=Math.sqrt(2),R="$";U.prototype=z.prototype={constructor:U,has:function(e){return R+e in this},get:function(e){return this[R+e]},set:function(e,t){return this[R+e]=t,this},remove:function(e){var t=R+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===R&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===R&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===R&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===R&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===R&&++e;return e},empty:function(){for(var e in this)if(e[0]===R)return!1;return!0},each:function(e){for(var t in this)t[0]===R&&e(this[t],t.slice(1),this)}};var Q=z.prototype;K.prototype=G.prototype={constructor:K,has:Q.has,add:function(e){return e+="",this[R+e]=e,this},remove:Q.remove,clear:Q.clear,values:Q.keys,size:Q.size,empty:Q.empty,each:Q.each};var dt=3,vt=function _x(e){function t(t){return Math.pow(t,e)}return e=+e,t.exponent=_x,t}(dt),mt=function Dx(e){function t(t){return 1-Math.pow(1-t,e)}return e=+e,t.exponent=Dx,t}(dt),gt=function Px(e){function t(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,t.exponent=Px,t}(dt),yt=Math.PI,bt=yt/2,At=4/11,Ot=6/11,Mt=8/11,_t=.75,Dt=9/11,Pt=10/11,Ht=.9375,Bt=21/22,jt=63/64,Ft=1/At/At,Ut=1.70158,zt=function Hx(e){function t(t){return t*t*((e+1)*t-e)}return e=+e,t.overshoot=Hx,t}(Ut),Wt=function Bx(e){function t(t){return--t*t*((e+1)*t+e)+1}return e=+e,t.overshoot=Bx,t}(Ut),Xt=function jx(e){function t(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,t.overshoot=jx,t}(Ut),Vt=2*Math.PI,$t=1,Jt=.3,Kt=function Fx(e,t){function r(r){return e*Math.pow(2,10*--r)*Math.sin((n-r)/t)}var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Vt);return r.amplitude=function(e){return Fx(e,t*Vt)},r.period=function(t){return Fx(e,t)},r}($t,Jt),Qt=function Ix(e,t){function r(r){return 1-e*Math.pow(2,-10*(r=+r))*Math.sin((r+n)/t)}var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Vt);return r.amplitude=function(e){return Ix(e,t*Vt)},r.period=function(t){return Ix(e,t)},r}($t,Jt),Gt=function qx(e,t){function r(r){return((r=r*2-1)<0?e*Math.pow(2,10*r)*Math.sin((n-r)/t):2-e*Math.pow(2,-10*r)*Math.sin((n+r)/t))/2}var n=Math.asin(1/(e=Math.max(1,e)))*(t/=Vt);return r.amplitude=function(e){return qx(e,t*Vt)},r.period=function(t){return qx(e,t)},r}($t,Jt),un=Math.PI,an=2*un,fn=1e-6,ln=an-fn;cn.prototype=hn.prototype={constructor:cn,moveTo:function(e,t){this._.push("M",this._x0=this._x1=+e,",",this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(e,t){this._.push("L",this._x1=+e,",",this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._.push("Q",+e,",",+t,",",this._x1=+n,",",this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,s){this._.push("C",+e,",",+t,",",+n,",",+r,",",this._x1=+i,",",this._y1=+s)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,u=n-e,a=r-t,f=s-e,l=o-t,c=f*f+l*l;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._.push("M",this._x1=e,",",this._y1=t);else if(c>fn)if(Math.abs(l*u-a*f)>fn&&!!i){var h=n-s,p=r-o,d=u*u+a*a,v=h*h+p*p,m=Math.sqrt(d),g=Math.sqrt(c),y=i*Math.tan((un-Math.acos((d+c-v)/(2*m*g)))/2),b=y/g,w=y/m;Math.abs(b-1)>fn&&this._.push("L",e+b*f,",",t+b*l),this._.push("A",i,",",i,",0,0,",+(l*h>f*p),",",this._x1=e+w*u,",",this._y1=t+w*a)}else this._.push("L",this._x1=e,",",this._y1=t)},arc:function(e,t,n,r,i,s){e=+e,t=+t,n=+n;var o=n*Math.cos(r),u=n*Math.sin(r),a=e+o,f=t+u,l=1^s,c=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._.push("M",a,",",f):(Math.abs(this._x1-a)>fn||Math.abs(this._y1-f)>fn)&&this._.push("L",a,",",f);if(!n)return;c>ln?this._.push("A",n,",",n,",0,1,",l,",",e-o,",",t-u,"A",n,",",n,",0,1,",l,",",this._x1=a,",",this._y1=f):(c<0&&(c=c%an+an),this._.push("A",n,",",n,",0,",+(c>=un),",",l,",",this._x1=e+n*Math.cos(i),",",this._y1=t+n*Math.sin(i)))},rect:function(e,t,n,r){this._.push("M",this._x0=this._x1=+e,",",this._y0=this._y1=+t,"h",+n,"v",+r,"h",-n,"Z")},toString:function(){return this._.join("")}};var Pn=Mn.prototype=_n.prototype;Pn.copy=function(){var e=new _n(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Dn(t),e;n=[{source:t,target:e._root=new Array(4)}];while(t=n.pop())for(var i=0;i<4;++i)if(r=t.source[i])r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Dn(r);return e},Pn.add=pn,Pn.addAll=vn,Pn.cover=mn,Pn.data=gn,Pn.extent=yn,Pn.find=wn,Pn.remove=En,Pn.removeAll=Sn,Pn.root=xn,Pn.size=Tn,Pn.visit=Nn,Pn.visitAfter=Cn,Pn.x=Ln,Pn.y=On;var Hn=[].slice,Bn={};jn.prototype=zn.prototype={constructor:jn,defer:function(e){if(typeof e!="function"||this._call)throw new Error;if(this._error!=null)return this;var t=Hn.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),Fn(this),this},abort:function(){return this._error==null&&Rn(this,new Error("abort")),this},await:function(e){if(typeof e!="function"||this._call)throw new Error;return this._call=function(t,n){e.apply(null,[t].concat(n))},Un(this),this},awaitAll:function(e){if(typeof e!="function"||this._call)throw new Error;return this._call=e,Un(this),this}};var Xn=1e-12,Vn=Math.PI,$n=Vn/2,Jn=2*Vn;ir.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var pr=vr(sr);dr.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var br={draw:function(e,t){var n=Math.sqrt(t/Vn);e.moveTo(n,0),e.arc(0,0,n,0,Jn)}},wr={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Er=Math.sqrt(1/3),Sr=Er*2,xr={draw:function(e,t){var n=Math.sqrt(t/Sr),r=n*Er;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Tr=.8908130915292852,Nr=Math.sin(Vn/10)/Math.sin(7*Vn/10),Cr=Math.sin(Jn/10)*Nr,kr=-Math.cos(Jn/10)*Nr,Lr={draw:function(e,t){var n=Math.sqrt(t*Tr),r=Cr*n,i=kr*n;e.moveTo(0,-n),e.lineTo(r,i);for(var s=1;s<5;++s){var o=Jn*s/5,u=Math.cos(o),a=Math.sin(o);e.lineTo(a*n,-u*n),e.lineTo(u*r-a*i,a*r+u*i)}e.closePath()}},Ar={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},Or=Math.sqrt(3),Mr={draw:function(e,t){var n=-Math.sqrt(t/(Or*3));e.moveTo(0,n*2),e.lineTo(-Or*n,-n),e.lineTo(Or*n,-n),e.closePath()}},_r=-0.5,Dr=Math.sqrt(3)/2,Pr=1/Math.sqrt(12),Hr=(Pr/2+1)*3,Br={draw:function(e,t){var n=Math.sqrt(t/Hr),r=n/2,i=n*Pr,s=r,o=n*Pr+n,u=-s,a=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(u,a),e.lineTo(_r*r-Dr*i,Dr*r+_r*i),e.lineTo(_r*s-Dr*o,Dr*s+_r*o),e.lineTo(_r*u-Dr*a,Dr*u+_r*a),e.lineTo(_r*r+Dr*i,_r*i-Dr*r),e.lineTo(_r*s+Dr*o,_r*o-Dr*s),e.lineTo(_r*u+Dr*a,_r*a-Dr*u),e.closePath()}},jr=[br,wr,xr,Ar,Lr,Mr,Br];Rr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qr(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qr(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},zr.prototype={areaStart:Ir,areaEnd:Ir,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:qr(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Xr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:qr(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},$r.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0){var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,u=-1,a;while(++u<=n)a=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+a*s),this._beta*t[u]+(1-this._beta)*(i+a*o))}this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Jr=function Rx(e){function t(t){return e===1?new Rr(t):new $r(t,e)}return t.beta=function(e){return Rx(+e)},t}(.85);Qr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Kr(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Kr(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Gr=function Ux(e){function t(t){return new Qr(t,e)}return t.tension=function(e){return Ux(+e)},t}(0);Yr.prototype={areaStart:Ir,areaEnd:Ir,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Kr(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Zr=function zx(e){function t(t){return new Yr(t,e)}return t.tension=function(e){return zx(+e)},t}(0);ei.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Kr(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ti=function Wx(e){function t(t){return new ei(t,e)}return t.tension=function(e){return Wx(+e)},t}(0);ri.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this,this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;if(this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ni(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ii=function Xx(e){function t(t){return e?new ri(t,e):new Qr(t,0)}return t.alpha=function(e){return Xx(+e)},t}(.5);si.prototype={areaStart:Ir,areaEnd:Ir,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){e=+e,t=+t;if(this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ni(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var oi=function Vx(e){function t(t){return e?new si(t,e):new Yr(t,0)}return t.alpha=function(e){return Vx(+e)},t}(.5);ui.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){e=+e,t=+t;if(this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ni(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ai=function $x(e){function t(t){return e?new ui(t,e):new ei(t,0)}return t.alpha=function(e){return $x(+e)},t}(.5);fi.prototype={areaStart:Ir,areaEnd:Ir,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},vi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:di(this,this._t0,pi(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;e=+e,t=+t;if(e===this._x1&&t===this._y1)return;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,di(this,pi(this,n=hi(this,e,t)),n);break;default:di(this,this._t0,n=hi(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}},(mi.prototype=Object.create(vi.prototype)).point=function(e,t){vi.prototype.point.call(this,t,e)},gi.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}},wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n){this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]);if(n===2)this._context.lineTo(e[1],t[1]);else{var r=Ei(e),i=Ei(t);for(var s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o])}}(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},xi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){e=+e,t=+t;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var ki=Array.prototype.slice,zi=.7,Wi=1/zi,Xi=/^#([0-9a-f]{3})$/,Vi=/^#([0-9a-f]{6})$/,$i=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,Ji=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,Ki=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Qi=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Gi=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,Yi=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,Zi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qi(Ui,es,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),qi(ss,is,Ri(Ui,{brighter:function(e){return e=e==null?Wi:Math.pow(Wi,e),new ss(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?zi:Math.pow(zi,e),new ss(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}})),qi(fs,as,Ri(Ui,{brighter:function(e){return e=e==null?Wi:Math.pow(Wi,e),new fs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?zi:Math.pow(zi,e),new fs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ss(ls(e>=240?e-240:e+120,i,r),ls(e,i,r),ls(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var cs=Math.PI/180,hs=180/Math.PI,ps=18,ds=.95047,vs=1,ms=1.08883,gs=4/29,ys=6/29,bs=3*ys*ys,ws=ys*ys*ys;qi(xs,Ss,Ri(Ui,{brighter:function(e){return new xs(this.l+ps*(e==null?1:e),this.a,this.b,this.opacity)},darker:function(e){return new xs(this.l-ps*(e==null?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=vs*Ns(e),t=ds*Ns(t),n=ms*Ns(n),new ss(Cs(3.2404542*t-1.5371385*e-.4985314*n),Cs(-0.969266*t+1.8760108*e+.041556*n),Cs(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),qi(Os,As,Ri(Ui,{brighter:function(e){return new Os(this.h,this.c,this.l+ps*(e==null?1:e),this.opacity)},darker:function(e){return new Os(this.h,this.c,this.l-ps*(e==null?1:e),this.opacity)},rgb:function(){return Es(this).rgb()}}));var Ms=-0.14861,_s=1.78277,Ds=-0.29227,Ps=-0.90649,Hs=1.97294,Bs=Hs*Ps,js=Hs*_s,Fs=_s*Ds-Ps*Ms;qi(Rs,qs,Ri(Ui,{brighter:function(e){return e=e==null?Wi:Math.pow(Wi,e),new Rs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?zi:Math.pow(zi,e),new Rs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*cs,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ss(255*(t+n*(Ms*r+_s*i)),255*(t+n*(Ds*r+Ps*i)),255*(t+n*Hs*r),this.opacity)}}));var Gs=function Jx(e){function n(e,n){var r=t((e=is(e)).r,(n=is(n)).r),i=t(e.g,n.g),s=t(e.b,n.b),o=t(e.opacity,n.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e.opacity=o(t),e+""}}var t=Ks(e);return n.gamma=Jx,n}(1),Zs=Ys(zs),eo=Ys(Ws),so=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oo=new RegExp(so.source,"g"),ho=180/Math.PI,po={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},mo,go,yo,bo,xo=So(wo,"px, ","px)","deg)"),To=So(Eo,", ",")",")"),No=Math.SQRT2,Co=2,ko=4,Lo=1e-12,Po=Do(Js),Ho=Do(Qs),Fo=jo(Js),Io=jo(Qs),Ro=qo(Js),Uo=qo(Qs),Wo={value:function(){}};Vo.prototype=Xo.prototype={constructor:Vo,on:function(e,t){var n=this._,r=$o(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){while(++s<o)if((i=(e=r[s]).type)&&(i=Jo(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);while(++s<o)if(i=(e=r[s]).type)n[i]=Ko(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ko(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};var eu=Zo(","),tu=eu.parse,nu=eu.parseRows,ru=eu.format,iu=eu.formatRows,su=Zo("	"),ou=su.parse,uu=su.parseRows,au=su.format,fu=su.formatRows,du=pu("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),vu=pu("application/json",function(e){return JSON.parse(e.responseText)}),mu=pu("text/plain",function(e){return e.responseText}),gu=pu("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t}),wu=yu("text/csv",tu),Eu=yu("text/tab-separated-values",ou),Su=0,xu=0,Tu=0,Nu=1e3,Cu,ku,Lu=0,Au=0,Ou=0,Mu=typeof performance=="object"&&performance.now?performance:Date,_u=typeof requestAnimationFrame=="function"?Mu===Date?function(e){requestAnimationFrame(function(){e(Mu.now())})}:requestAnimationFrame:function(e){setTimeout(e,17)};Hu.prototype=Bu.prototype={constructor:Hu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Du():+n)+(t==null?0:+t),!this._next&&ku!==this&&(ku?ku._next=this:Cu=this,ku=this),this._call=e,this._time=n,Ru()},stop:function(){this._call&&(this._call=null,this._time=Infinity,Ru())}};var Wu=new Date,Xu=new Date,$u=Vu(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});$u.every=function(e){return e=Math.floor(e),!!isFinite(e)&&e>0?e>1?Vu(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):$u:null};var Ju=$u.range,Ku=1e3,Qu=6e4,Gu=36e5,Yu=864e5,Zu=6048e5,ea=Vu(function(e){e.setTime(Math.floor(e/Ku)*Ku)},function(e,t){e.setTime(+e+t*Ku)},function(e,t){return(t-e)/Ku},function(e){return e.getUTCSeconds()}),ta=ea.range,na=Vu(function(e){e.setTime(Math.floor(e/Qu)*Qu)},function(e,t){e.setTime(+e+t*Qu)},function(e,t){return(t-e)/Qu},function(e){return e.getMinutes()}),ra=na.range,ia=Vu(function(e){var t=e.getTimezoneOffset()*Qu%Gu;t<0&&(t+=Gu),e.setTime(Math.floor((+e-t)/Gu)*Gu+t)},function(e,t){e.setTime(+e+t*Gu)},function(e,t){return(t-e)/Gu},function(e){return e.getHours()}),sa=ia.range,oa=Vu(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Qu)/Yu},function(e){return e.getDate()-1}),ua=oa.range,fa=aa(0),la=aa(1),ca=aa(2),ha=aa(3),pa=aa(4),da=aa(5),va=aa(6),ma=fa.range,ga=la.range,ya=ca.range,ba=ha.range,wa=pa.range,Ea=da.range,Sa=va.range,xa=Vu(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),Ta=xa.range,Na=Vu(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Na.every=function(e){return!!isFinite(e=Math.floor(e))&&e>0?Vu(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var Ca=Na.range,ka=Vu(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Qu)},function(e,t){return(t-e)/Qu},function(e){return e.getUTCMinutes()}),La=ka.range,Aa=Vu(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*Gu)},function(e,t){return(t-e)/Gu},function(e){return e.getUTCHours()}),Oa=Aa.range,Ma=Vu(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Yu},function(e){return e.getUTCDate()-1}),_a=Ma.range,Pa=Da(0),Ha=Da(1),Ba=Da(2),ja=Da(3),Fa=Da(4),Ia=Da(5),qa=Da(6),Ra=Pa.range,Ua=Ha.range,za=Ba.range,Wa=ja.range,Xa=Fa.range,Va=Ia.range,$a=qa.range,Ja=Vu(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()}),Ka=Ja.range,Qa=Vu(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Qa.every=function(e){return!!isFinite(e=Math.floor(e))&&e>0?Vu(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var Ga=Qa.range,nf,of={"":tf,"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return sf(e*100,t)},r:sf,s:rf,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},uf=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;ff.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var lf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],pf;e.format,e.formatPrefix,df({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Sf={"-":"",_:" ",0:"0"},xf=/^\s*\d+/,Tf=/^%/,Nf=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,bl;e.timeFormat,e.timeParse,e.utcFormat,e.utcParse,wl({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var El="%Y-%m-%dT%H:%M:%S.%LZ",xl=Date.prototype.toISOString?Sl:e.utcFormat(El),Nl=+(new Date("2000-01-01T00:00:00.000Z"))?Tl:e.utcParse(El),Cl=Array.prototype,kl=Cl.map,Ll=Cl.slice,Al={name:"implicit"},Bl=[0,1],ac=1e3,fc=ac*60,lc=fc*60,cc=lc*24,hc=cc*7,pc=cc*30,dc=cc*365,Ec=wc("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Sc=wc("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),xc=wc("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Tc=wc("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Nc=Uo(qs(300,.5,0),qs(-240,.5,1)),Cc=Uo(qs(-100,.75,.35),qs(80,1.5,.8)),kc=Uo(qs(260,.75,.35),qs(80,1.5,.8)),Lc=qs(),Mc=Oc(wc("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),_c=Oc(wc("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Dc=Oc(wc("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Pc=Oc(wc("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Bc="http://www.w3.org/1999/xhtml",jc={svg:"http://www.w3.org/2000/svg",xhtml:Bc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Uc=0;Wc.prototype=zc.prototype={constructor:Wc,get:function(e){var t=this._;while(!(t in e))if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Xc=function(e){return function(){return this.matches(e)}};if(typeof document!="undefined"){var Vc=document.documentElement;if(!Vc.matches){var $c=Vc.webkitMatchesSelector||Vc.msMatchesSelector||Vc.mozMatchesSelector||Vc.oMatchesSelector;Xc=function(e){return function(){return $c.call(this,e)}}}}var Jc=Xc,Kc={};e.event=null;if(typeof document!="undefined"){var Qc=document.documentElement;"onmouseenter"in Qc||(Kc={mouseenter:"mouseover",mouseleave:"mouseout"})}mh.prototype={constructor:mh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var yh="$";Gh.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Cp=[null];kp.prototype=Lp.prototype={constructor:kp,select:fh,selectAll:hh,filter:ph,data:Eh,enter:vh,exit:Sh,merge:xh,order:Th,sort:Nh,call:kh,nodes:Lh,node:Ah,size:Oh,empty:Mh,each:_h,attr:Ih,style:Wh,property:Jh,classed:rp,text:up,html:cp,raise:pp,lower:vp,append:mp,insert:yp,remove:wp,datum:Ep,on:nh,dispatch:Np};var Dp=Xo("start","end","interrupt"),Pp=[],Hp=0,Bp=1,jp=2,Fp=3,Ip=4,qp=5,Cd=Lp.prototype.constructor,Id=0,zd=Lp.prototype;qd.prototype=Rd.prototype={constructor:qd,select:Td,selectAll:Nd,filter:gd,merge:yd,selection:kd,transition:Fd,call:zd.call,nodes:zd.nodes,node:zd.node,size:zd.size,empty:zd.empty,each:zd.each,on:Ed,attr:sd,attrTween:ad,style:_d,styleTween:Pd,text:jd,remove:xd,tween:Qp,delay:cd,duration:dd,ease:md};var Wd={time:null,delay:0,duration:250,ease:pt};Lp.prototype.interrupt=$p,Lp.prototype.transition=Vd;var $d=[null],Kd=Array.prototype.slice,Gd=1,Yd=2,Zd=3,ev=4,tv=1e-6;Hv.prototype=Ov.prototype={constructor:Hv,each:bv,eachAfter:Ev,eachBefore:wv,sum:Sv,sort:xv,path:Tv,ancestors:Cv,descendants:kv,leaves:Lv,links:Av,copy:Mv};var am="$",fm={depth:-1},lm={};wm.prototype=Object.create(Hv.prototype);var Tm=(1+Math.sqrt(5))/2,Cm=function Kx(e){function t(t,n,r,i,s){Nm(e,t,n,r,i,s)}return t.ratio=function(e){return Kx((e=+e)>1?e:1)},t}(Tm),Om=function Qx(e){function t(t,n,r,i,s){if((o=t._squarify)&&o.ratio===e){var o,u,a,f,l=-1,c,h=o.length,p=t.value;while(++l<h){u=o[l],a=u.children;for(f=u.value=0,c=a.length;f<c;++f)u.value+=a[f].value;u.dice?om(u,n,r,i,r+=(s-r)*u.value/p):xm(u,n,r,n+=(i-n)*u.value/p,s),p-=u.value}}else t._squarify=o=Nm(e,t,n,r,i,s),o.ratio=e}return t.ratio=function(e){return Qx((e=+e)>1?e:1)},t}(Tm),Rm=10,Um=Math.PI*(3-Math.sqrt(5));Ym.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},og.prototype={constructor:og,insert:function(e,t){var n,r,i;if(e){t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=lg(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);t.L=t.R=null,t.U=n,t.C=!0,e=t;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ag(this,n),e=n,n=e.U),n.C=!1,r.C=!0,fg(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(fg(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ag(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,s,o;r?i?s=lg(i):s=r:s=i,t?t.L===e?t.L=s:t.R=s:this._=s,r&&i?(o=s.C,s.C=e.C,s.L=r,r.U=s,s!==i?(t=s.U,s.U=e.U,e=s.R,t.L=e,s.R=i,i.U=s):(s.U=t,t=s,e=s.R)):(o=e.C,e=s),e&&(e.U=t);if(o)return;if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){n=t.R,n.C&&(n.C=!1,t.C=!0,ag(this,t),n=t.R);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C)n.L.C=!1,n.C=!0,fg(this,n),n=t.R;n.C=t.C,t.C=n.R.C=!1,ag(this,t),e=this._;break}}else{n=t.L,n.C&&(n.C=!1,t.C=!0,fg(this,t),n=t.L);if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C)n.R.C=!1,n.C=!0,ag(this,n),n=t.L;n.C=t.C,t.C=n.L.C=!1,fg(this,t),e=this._;break}}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}};var xg=[],Tg,Lg=[],Bg=1e-6,jg=1e-12,Fg,Ig,qg,Rg;Wg.prototype={constructor:Wg,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return bg(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){var i=n.site,s=n.halfedges,o=-1,u=s.length,a,f=t[s[u-1]],l=f.left===i?f.right:f.left;while(++o<u)a=l,f=t[s[o]],l=f.left===i?f.right:f.left,r<a.index&&r<l.index&&Ug(i,a,l)<0&&e.push([i.data,a.data,l.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})}},Jg.prototype={constructor:Jg,scale:function(e){return e===1?this:new Jg(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Jg(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kg=new Jg(1,0,0);Qg.prototype=Jg.prototype;var uy={name:"drag"},ay={name:"space"},fy={name:"handle"},ly={name:"center"},cy={name:"x",handles:["e","w"].map(by),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},hy={name:"y",handles:["n","s"].map(by),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},py={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(by),input:function(e){return e},output:function(e){return e}},dy={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},vy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},my={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},gy={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yy={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};Oy.prototype={constructor:Oy,reset:function(){this.s=this.t=0},add:function(e){_y(My,e,this.t),_y(this,My.s,this.s),this.s?this.t+=My.t:this.s=My.t},valueOf:function(){return this.s}};var My=new Oy,Dy=1e-6,Py=1e-12,Hy=Math.PI,By=Hy/2,jy=Hy/4,Fy=Hy*2,Iy=180/Hy,qy=Hy/180,Ry=Math.abs,Uy=Math.atan,zy=Math.atan2,Wy=Math.cos,Xy=Math.ceil,Vy=Math.exp,$y=Math.log,Jy=Math.pow,Ky=Math.sin,Qy=Math.sign||function(e){return e>0?1:e<0?-1:0},Gy=Math.sqrt,Yy=Math.tan,ib={Feature:function(e,t){rb(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)rb(n[r].geometry,t)}},sb={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ob(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)ob(n[r],t,0)},Polygon:function(e,t){ub(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)ub(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)rb(n[r],t)}},fb=Ay(),lb=Ay(),cb,hb,pb,db,vb,mb={point:nb,lineStart:nb,lineEnd:nb,polygonStart:function(){fb.reset(),mb.lineStart=gb,mb.lineEnd=yb},polygonEnd:function(){var e=+fb;lb.add(e<0?Fy+e:e),this.lineStart=this.lineEnd=this.point=nb},sphere:function(){lb.add(Fy)}},Ab,Ob,Mb,_b,Db,Pb,Hb,Bb,jb=Ay(),Fb,Ib,qb={point:Rb,lineStart:zb,lineEnd:Wb,polygonStart:function(){qb.point=Xb,qb.lineStart=Vb,qb.lineEnd=$b,jb.reset(),mb.polygonStart()},polygonEnd:function(){mb.polygonEnd(),qb.point=Rb,qb.lineStart=zb,qb.lineEnd=Wb,fb<0?(Ab=-(Mb=180),Ob=-(_b=90)):jb>Dy?_b=90:jb<-Dy&&(Ob=-90),Ib[0]=Ab,Ib[1]=Mb}},Yb,Zb,ew,tw,nw,rw,iw,sw,ow,uw,aw,fw,lw,cw,hw,pw,dw={sphere:nb,point:vw,lineStart:gw,lineEnd:ww,polygonStart:function(){dw.lineStart=Ew,dw.lineEnd=Sw},polygonEnd:function(){dw.lineStart=gw,dw.lineEnd=ww}};Lw.invert=Lw;var zw=1e9,Ww=-zw,$w=Ay(),Jw,Kw,Qw,Gw={sphere:nb,point:nb,lineStart:Yw,lineEnd:nb,polygonStart:nb,polygonEnd:nb},rE=[null,null],iE={type:"LineString",coordinates:rE},cE=Ay(),hE=Ay(),pE,dE,vE,mE,gE={point:nb,lineStart:nb,lineEnd:nb,polygonStart:function(){gE.lineStart=yE,gE.lineEnd=EE},polygonEnd:function(){gE.lineStart=gE.lineEnd=gE.point=nb,cE.add(Ry(hE)),hE.reset()},result:function(){var e=cE/2;return cE.reset(),e}},SE=Infinity,xE=SE,TE=-SE,NE=TE,CE={point:kE,lineStart:nb,lineEnd:nb,polygonStart:nb,polygonEnd:nb,result:function(){var e=[[SE,xE],[TE,NE]];return TE=NE=-(xE=SE=Infinity),e}},LE=0,AE=0,OE=0,ME=0,_E=0,DE=0,PE=0,HE=0,BE=0,jE,FE,IE,qE,RE={point:UE,lineStart:zE,lineEnd:VE,polygonStart:function(){RE.lineStart=$E,RE.lineEnd=JE},polygonEnd:function(){RE.point=UE,RE.lineStart=zE,RE.lineEnd=VE},result:function(){var e=BE?[PE/BE,HE/BE]:DE?[ME/DE,_E/DE]:OE?[LE/OE,AE/OE]:[NaN,NaN];return LE=AE=OE=ME=_E=DE=PE=HE=BE=0,e}},tS=Ay(),oS=rS(function(){return!0},uS,fS,[-Hy,-By]);pS.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var gS=16,yS=Wy(30*qy),SS=hS({point:function(e,t){this.stream.point(e*qy,t*qy)}}),DS=MS(function(e){return Gy(2/(1+e))});DS.invert=_S(function(e){return 2*eb(e/2)});var HS=MS(function(e){return(e=Zy(e))&&e/Ky(e)});HS.invert=_S(function(e){return e}),jS.invert=function(e,t){return[e,2*Uy(Vy(t))-By]},zS.invert=zS,$S.invert=_S(Uy),KS.invert=_S(eb),GS.invert=_S(function(e){return 2*Uy(e)}),ZS.invert=function(e,t){return[-t,2*Uy(Vy(e))-By]},Lp.prototype.attrs=rx,Lp.prototype.styles=ox,Lp.prototype.properties=fx,Rd.prototype.attrs=hx,Rd.prototype.styles=vx,xx.not=function(e){return!e},xx.run=function(e){return e()},xx.objToFn=function(e,t){return arguments.length==1&&(t=undefined),function(n){return typeof e[n]!==undefined?e[n]:t}},window.ƒ=xx,Lp.prototype.translate=mx,Lp.prototype.append=yx,Lp.prototype.selectAppend=bx,Lp.prototype.tspans=wx,Lp.prototype.appendMany=Ex,Lp.prototype.at=Sx,Lp.prototype.st=Tx,Lp.prototype.prop=Lp.prototype.property,e.bisect=s,e.bisectRight=s,e.bisectLeft=o,e.ascending=t,e.bisector=n,e.descending=u,e.deviation=l,e.extent=c,e.histogram=T,e.thresholdFreedmanDiaconis=C,e.thresholdScott=k,e.thresholdSturges=x,e.max=L,e.mean=A,e.median=O,e.merge=M,e.min=_,e.pairs=D,e.permute=P,e.quantile=N,e.range=g,e.scan=H,e.shuffle=B,e.sum=j,e.ticks=E,e.tickStep=S,e.transpose=F,e.variance=f,e.zip=q,e.entries=et,e.keys=Y,e.values=Z,e.map=z,e.set=G,e.nest=W,e.randomUniform=tt,e.randomNormal=nt,e.randomLogNormal=rt,e.randomBates=st,e.randomIrwinHall=it,e.randomExponential=ot,e.easeLinear=ut,e.easeQuad=lt,e.easeQuadIn=at,e.easeQuadOut=ft,e.easeQuadInOut=lt,e.easeCubic=pt,e.easeCubicIn=ct,e.easeCubicOut=ht,e.easeCubicInOut=pt,e.easePoly=gt,e.easePolyIn=vt,e.easePolyOut=mt,e.easePolyInOut=gt,e.easeSin=St,e.easeSinIn=wt,e.easeSinOut=Et,e.easeSinInOut=St,e.easeExp=Nt,e.easeExpIn=xt,e.easeExpOut=Tt,e.easeExpInOut=Nt,e.easeCircle=Lt,e.easeCircleIn=Ct,e.easeCircleOut=kt,e.easeCircleInOut=Lt,e.easeBounce=qt,e.easeBounceIn=It,e.easeBounceOut=qt,e.easeBounceInOut=Rt,e.easeBack=Xt,e.easeBackIn=zt,e.easeBackOut=Wt,e.easeBackInOut=Xt,e.easeElastic=Qt,e.easeElasticIn=Kt,e.easeElasticOut=Qt,e.easeElasticInOut=Gt,e.polygonArea=Yt,e.polygonCentroid=Zt,e.polygonHull=rn,e.polygonContains=sn,e.polygonLength=on,e.path=hn,e.quadtree=Mn,e.queue=zn,e.arc=rr,e.area=fr,e.line=ar,e.pie=hr,e.radialArea=yr,e.radialLine=gr,e.symbol=Fr,e.symbols=jr,e.symbolCircle=br,e.symbolCross=wr,e.symbolDiamond=xr,e.symbolSquare=Ar,e.symbolStar=Lr,e.symbolTriangle=Mr,e.symbolWye=Br,e.curveBasisClosed=Wr,e.curveBasisOpen=Vr,e.curveBasis=Ur,e.curveBundle=Jr,e.curveCardinalClosed=Zr,e.curveCardinalOpen=ti,e.curveCardinal=Gr,e.curveCatmullRomClosed=oi,e.curveCatmullRomOpen=ai,e.curveCatmullRom=ii,e.curveLinearClosed=li,e.curveLinear=sr,e.curveMonotoneX=yi,e.curveMonotoneY=bi,e.curveNatural=Si,e.curveStep=Ti,e.curveStepAfter=Ci,e.curveStepBefore=Ni,e.stack=Mi,e.stackOffsetExpand=_i,e.stackOffsetNone=Li,e.stackOffsetSilhouette=Di,e.stackOffsetWiggle=Pi,e.stackOrderAscending=Hi,e.stackOrderDescending=ji,e.stackOrderInsideOut=Fi,e.stackOrderNone=Ai,e.stackOrderReverse=Ii,e.color=es,e.rgb=is,e.hsl=as,e.lab=Ss,e.hcl=As,e.cubehelix=qs,e.interpolate=lo,e.interpolateArray=to,e.interpolateNumber=ro,e.interpolateObject=io,e.interpolateRound=co,e.interpolateString=fo,e.interpolateTransformCss=xo,e.interpolateTransformSvg=To,e.interpolateZoom=_o,e.interpolateRgb=Gs,e.interpolateRgbBasis=Zs,e.interpolateRgbBasisClosed=eo,e.interpolateHsl=Po,e.interpolateHslLong=Ho,e.interpolateLab=Bo,e.interpolateHcl=Fo,e.interpolateHclLong=Io,e.interpolateCubehelix=Ro,e.interpolateCubehelixLong=Uo,e.interpolateBasis=zs,e.interpolateBasisClosed=Ws,e.quantize=zo,e.dispatch=Xo,e.dsvFormat=Zo,e.csvParse=tu,e.csvParseRows=nu,e.csvFormat=ru,e.csvFormatRows=iu,e.tsvParse=ou,e.tsvParseRows=uu,e.tsvFormat=au,e.tsvFormatRows=fu,e.request=lu,e.html=du,e.json=vu,e.text=mu,e.xml=gu,e.csv=wu,e.tsv=Eu,e.now=Du,e.timer=Bu,e.timerFlush=ju,e.timeout=Uu,e.interval=zu,e.timeInterval=Vu,e.timeMillisecond=$u,e.timeMilliseconds=Ju,e.timeSecond=ea,e.timeSeconds=ta,e.timeMinute=na,e.timeMinutes=ra,e.timeHour=ia,e.timeHours=sa,e.timeDay=oa,e.timeDays=ua,e.timeWeek=fa,e.timeWeeks=ma,e.timeSunday=fa,e.timeSundays=ma,e.timeMonday=la,e.timeMondays=ga,e.timeTuesday=ca,e.timeTuesdays=ya,e.timeWednesday=ha,e.timeWednesdays=ba,e.timeThursday=pa,e.timeThursdays=wa,e.timeFriday=da,e.timeFridays=Ea,e.timeSaturday=va,e.timeSaturdays=Sa,e.timeMonth=xa,e.timeMonths=Ta,e.timeYear=Na,e.timeYears=Ca,e.utcMillisecond=$u,e.utcMilliseconds=Ju,e.utcSecond=ea,e.utcSeconds=ta,e.utcMinute=ka,e.utcMinutes=La,e.utcHour=Aa,e.utcHours=Oa,e.utcDay=Ma,e.utcDays=_a,e.utcWeek=Pa,e.utcWeeks=Ra,e.utcSunday=Pa,e.utcSundays=Ra,e.utcMonday=Ha,e.utcMondays=Ua,e.utcTuesday=Ba,e.utcTuesdays=za,e.utcWednesday=ja,e.utcWednesdays=Wa,e.utcThursday=Fa,e.utcThursdays=Xa,e.utcFriday=Ia,e.utcFridays=Va,e.utcSaturday=qa,e.utcSaturdays=$a,e.utcMonth=Ja,e.utcMonths=Ka,e.utcYear=Qa,e.utcYears=Ga,e.formatLocale=hf,e.formatDefaultLocale=df,e.formatSpecifier=af,e.precisionFixed=vf,e.precisionPrefix=mf,e.precisionRound=gf,e.isoFormat=xl,e.isoParse=Nl,e.timeFormatLocale=Ef,e.timeFormatDefaultLocale=wl,e.scaleBand=Ml,e.scalePoint=Dl,e.scaleIdentity=$l,e.scaleLinear=Vl,e.scaleLog=tc,e.scaleOrdinal=Ol,e.scaleImplicit=Al,e.scalePow=rc,e.scaleSqrt=ic,e.scaleQuantile=sc,e.scaleQuantize=oc,e.scaleThreshold=uc,e.scaleTime=yc,e.scaleUtc=bc,e.schemeCategory10=Ec,e.schemeCategory20b=Sc,e.schemeCategory20c=xc,e.schemeCategory20=Tc,e.scaleSequential=Hc,e.interpolateCubehelixDefault=Nc,e.interpolateRainbow=Ac,e.interpolateWarm=Cc,e.interpolateCool=kc,e.interpolateViridis=Mc,e.interpolateMagma=_c,e.interpolateInferno=Dc,e.interpolatePlasma=Pc,e.creator=Rc,e.customEvent=rh,e.local=zc,e.matcher=Jc,e.mouse=oh,e.namespace=Fc,e.namespaces=jc,e.select=Ap,e.selectAll=Op,e.selection=Lp,e.selector=ah,e.selectorAll=ch,e.touch=Mp,e.touches=_p,e.window=qh,e.active=Jd,e.interrupt=Vp,e.transition=Rd,e.axisTop=uv,e.axisRight=av,e.axisBottom=fv,e.axisLeft=lv,e.cluster=yv,e.hierarchy=Ov,e.pack=tm,e.packSiblings=Kv,e.packEnclose=Fv,e.partition=um,e.stratify=pm,e.tree=Sm,e.treemap=km,e.treemapBinary=Lm,e.treemapDice=om,e.treemapSlice=xm,e.treemapSliceDice=Am,e.treemapSquarify=Cm,e.treemapResquarify=Om,e.forceCenter=Mm,e.forceCollide=Bm,e.forceLink=Fm,e.forceManyBody=Wm,e.forceSimulation=zm,e.forceX=Xm,e.forceY=Vm,e.drag=ng,e.dragDisable=Km,e.dragEnable=Qm,e.voronoi=Xg,e.zoom=ny,e.zoomIdentity=Kg,e.zoomTransform=Qg,e.brush=ky,e.brushX=Ny,e.brushY=Cy,e.brushSelection=Ty,e.geoArea=Eb,e.geoBounds=Gb,e.geoCentroid=Nw,e.geoCircle=Bw,e.geoClipExtent=Vw,e.geoDistance=sE,e.geoGraticule=aE,e.geoInterpolate=fE,e.geoLength=nE,e.geoPath=eS,e.geoAlbers=LS,e.geoAlbersUsa=OS,e.geoAzimuthalEqualArea=PS,e.geoAzimuthalEquidistant=BS,e.geoConicConformal=US,e.geoConicEqualArea=kS,e.geoConicEquidistant=VS,e.geoEquirectangular=WS,e.geoGnomonic=JS,e.geoProjection=xS,e.geoProjectionMutator=TS,e.geoMercator=FS,e.geoOrthographic=QS,e.geoStereographic=YS,e.geoTransverseMercator=ex,e.geoRotation=Dw,e.geoStream=ab,e.geoTransform=cS,e.wordwrap=Nx,e.parseAttributes=gx,e.f=xx,e.ascendingKey=Cx,e.descendingKey=kx,e.conventions=Lx,e.attachTooltip=Ax,e.loadData=Ox,e.nestBy=Mx,e.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},e.floor=function(e,t){return t?Math.floor(e*(t=Math.pow(10,t)))/t:Math.floor(e)},e.ceil=function(e,t){return t?Math.ceil(e*(t=Math.pow(10,t)))/t:Math.ceil(e)},Object.defineProperty(e,"__esModule",{value:!0})}),define("vendor/p5",["require"],function(e){function l(e,l,c){l=l||0,c=c||0;if(f==null){f=new Array(s+1);for(var h=0;h<s+1;h++)f[h]=Math.random()}e<0&&(e=-e),l<0&&(l=-l),c<0&&(c=-c);var p=Math.floor(e),d=Math.floor(l),v=Math.floor(c),m=e-p,g=l-d,y=c-v,b,w,E=0,S=.5,x,T,N;for(var C=0;C<o;C++){var k=p+(d<<t)+(v<<r);b=a(m),w=a(g),x=f[k&s],x+=b*(f[k+1&s]-x),T=f[k+n&s],T+=b*(f[k+n+1&s]-T),x+=w*(T-x),k+=i,T=f[k&s],T+=b*(f[k+1&s]-T),N=f[k+n&s],N+=b*(f[k+n+1&s]-N),T+=w*(N-T),x+=a(y)*(T-x),E+=x*S,S*=u,p<<=1,m*=2,d<<=1,g*=2,v<<=1,y*=2,m>=1&&(p++,m--),g>=1&&(d++,g--),y>=1&&(v++,y--)}return E}var t=4,n=1<<t,r=8,i=1<<r,s=4095,o=4,u=.5,a=function(e){return.5*(1-Math.cos(e*Math.PI))},f;return{noise:l}}),define("forecast/jitter",["require","vendor/d3.v4+jetpack","vendor/p5"],function(e){function o(e){var t=0;if(!e.length)return t;for(i=0;i<e.length;i++)char=e.charCodeAt(i),t=(t<<5)-t+char,t&=t;return t}var t=e("vendor/d3.v4+jetpack"),n=e("vendor/p5"),r={},s={};return t.timer(function(){t.keys(r).forEach(function(e){r[e]+=s[e]})}),{init:function(e,t){r[e]=o(e),s[e]=t},get:function(e){return r[e]?n.noise(r[e])-.5:0}}}),define("forecast/colors",["require"],function(e){return{dem_4:"#3489CD",dem_3:"#7bb0dc",dem_2:"#bdd7ed",dem_1:"#c5d7f0",rep_4:"#d75c5c",rep_3:"#e49292",rep_2:"#f1c8c8",rep_1:"#F1C6C6",ind_4:"#63922F",ind_3:"#7EAD53",ind_2:"#C6D8A7",ind_1:"#d8e9c2",tossup_2:"#f6ee90",tossup_1:"#F5F5BD",green:"#128212"}}),define("forecast/widgets/gauge",["require","underscore/nyt","vendor/d3.v4+jetpack","forecast/jitter","forecast/colors"],function(e){var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("forecast/jitter"),i=e("forecast/colors"),s=Math.PI/180,o=Math.PI*.5,u={win_prob:"win_prob",n_vote:"vote_share_expected",vote_margin:"vote_share_expected",e_votes:"electoral_votes_expected",s_seats:"seats_expected",h_seats:"seats_expected"},a={vote_margin:function(e){return n.round(e,2)?(eln_forecast_flip&&(e*=-1),(e>0?"D":"R")+"+"+Math.abs(e*100).toFixed(0)):""},e_votes:function(e){return e<270?538-e:e},s_seats:function(e){return e<50?100-e:e},h_seats:function(e){return e<217.5?435-e:e}},f={win_prob:1,n_vote:1,vote_margin:1,e_votes:538,h_seats:435,s_seats:100};return function(){function w(e){return t.isArray(e)?e[2]:e||0}function E(e){var n={type:y.race,state:y.state||!1},r=t.findWhere(e,n);if(!r)return console.warn("no matching race found in forecast data",n),[0];var i=r.current,s=i[y.type].dem;return[s]}function S(e,t,n){return typeof e=="function"?e(t,n):e}var e=[0,100],l,c=30,h=30,p,d=[10,10,10,10],v,m,g=[],y={},b=function(i,b){var E=n.select(this).classed("eln-forecast-widget-gauge",!0).classed("gauge-"+y.type,!0),x={domain:S(e,i,b),target:S(l,i,b),ticks:S(c,i,b),"class":S(p,i,b),active:S(v,i,b),labels:S(g,i,b),margin:S(d,i,b),colors:S(m,i,b)},T=(E.prop("clientWidth")-x.margin[1]-x.margin[3])*.5,N=T/120,C=f[y.type],k=T*(y.type=="win_prob"?.4:.4),L=y.type=="win_prob"?k:T*.95,A=T*2+x.margin[1]+x.margin[3],O=T+x.margin[0]+x.margin[2],M=E.append("svg.gauge").attr("width",A).attr("height",O).st({overflow:"visible"}).append("g").translate([T+x.margin[3],T+x.margin[0]]),D=n.scaleLinear().domain(eln_forecast_flip&&!y.candidate?x.domain.reverse():x.domain).range([180,360]).clamp(!0),P=typeof x.ticks=="number"?D.ticks(x.ticks):x.ticks,H=P[1]-P[0],B=(eln_forecast_flip?C-P[0]:P[0])%H,j=[];y.type!="win_prob"&&(P=P.map(function(e){return e+B}).filter(function(e){var t=D(e);return t>185&&t<355}),j=D.ticks(h).map(function(e){return e+B}).filter(function(e){var t=D(e);return t>185&&t<355})),y.type=="e_votes"?(P=[],j=[],n.range(270,540,10).map(function(e){e%20===0?(P.push(e),P.push(538-e)):(j.push(e),j.push(538-e))})):y.type=="e_votes"&&(P=[],j=[],n.range(220,291,1).map(function(e){e%5===0?(P.push(e),P.push(435-e)):(j.push(e),j.push(435-e))})),j.length&&M.append("g.ticks").appendMany(j,"line.tick.minor").attr("x1",L+2).attr("x2",T).attr("transform",function(e){return"rotate("+D(e)+")"}),M.append("g.ticks").appendMany(P,"line.tick").attr("x1",L).attr("x2",T).attr("transform",function(e){return"rotate("+D(e)+")"}),y.type!="win_prob"&&M.append("g.tick-labels").appendMany(P,"text.tick").attr("transform",function(e){return"rotate("+D(e)+") translate("+(L-3)+",0) "+(D(e)<270?"rotate(180)":"")}).classed("rotated",function(e){return D(e)<270}).classed("color-dem",function(e){return y.type=="e_votes"&&e>270||y.type=="s_seats"&&e>50||y.type=="h_seats"&&e>217||y.type=="vote_margin"&&e>0}).classed("color-rep",function(e){return y.type=="e_votes"&&e<270||y.type=="s_seats"&&e<50||y.type=="h_seats"&&e<217||y.type=="vote_margin"&&e<0}).text(function(e){var n=a[y.type]||t.identity;return y.type=="vote_margin"?e=eln_forecast_flip?-e:e:e=eln_forecast_flip?C-e:e,n(e)}),x.target!==undefined&&M.append("line.tick.target").attr("x1",k).attr("x2",T).attr("transform","rotate("+D(l)+")");var F={e_votes:[[365,"Obama ’08"],[332,"Obama ’12"]],h_seats:[[201,"2012"],[188,"2014"]],s_seats:[[53,"2012"],[44,"2014"]],vote_margin:[[.511-.472,"Obama ’12"],[.529-.457,"Obama ’08"]]}[y.type]||[];if(y.race!="president"||y.state)F=[];y.stateMargins&&(F=JSON.parse(y.stateMargins));if(F.length){F.forEach(function(e){var t=T+5,n=D(e[0])*s;e.pos=[t*Math.cos(n),t*Math.sin(n)]});var I=F;F.length>1&&Math.abs(F[0].pos[1]-F[1].pos[1])<5&&(I=[F[0]]);var q=M.appendMany(I,"g.tgt"),R=n.scaleThreshold().domain([270]).range(["end","start"]);q.append("line.tick.target.ev").attr("x1",k).attr("x2",T).attr("transform",function(e){return"rotate("+D(e[0])+")"}),q.append("text.label-tgt").text(ƒ(1)).style("text-anchor",function(e){return D(e[0])<270?"end":"start"}).translate(ƒ("pos"))}var U=n.arc(),z=n.path(),W=n.path();z.arc(0,0,T,0,Math.PI,1),z.arc(0,0,k,0,Math.PI,1),M.append("path.outer").attr("d",z.toString()),M.append("path.inner").attr("d",W.toString()),M.append("line.lower").attr("x1",-T-x.margin[3]).attr("x2",T+x.margin[1]);var X=E.select("svg").insert("defs","g"),V=Math.round(1e7*Math.random()),$=X.append("clipPath#range95-"+V).append("path").attr("d",U({innerRadius:k,outerRadius:T,startAngle:0,endAngle:.01})),J=X.append("clipPath#range75-"+V).append("path").attr("d",U({innerRadius:k,outerRadius:T,startAngle:0,endAngle:.01}));M.append("g.range.range-95").attr("clip-path","url(#range95-"+V+")"),M.append("g.range.range-75").attr("clip-path","url(#range75-"+V+")");if(x.active){var K=[[x.domain[0],x.active[0]],[x.active[1],x.domain[1]]];M.appendMany(K,"path.inactive").attr("d",function(e){return U({innerRadius:k,outerRadius:T,startAngle:D(e[0])*s+o,endAngle:D(e[1])*s+o})})}if(x.labels.length){var Q=M.appendMany(x.labels,"text.label").translate(function(e){var t=(k+T)*.5,n=D(e[0])*s;return[t*Math.cos(n),t*Math.sin(n)]}).text(ƒ(1));x.colors&&Q.style("fill",function(e){var t=x.colors.filter(function(t){return e[0]>=t[0]&&e[0]<=t[1]});return t?(t=n.lab(t[0][2]),t.l=Math.min(60,t.l),""+t):"auto"})}var G=M.append("g.needle");G.append("path.needle").attr("d","M0.2-5.5l125,5.5L0.2,5.5c-3,0.1-5.6-2.2-5.7-5.3c-0.1-3,2.2-5.6,5.3-5.7C-0.1-5.5,0.1-5.5,0.2-5.5z"),G.append("circle").attr("r",7),G.attr("transform","scale("+N+") rotate("+D(0)+")"),x.colors&&M.selectAll("g.range").appendMany(x.colors,"path").attr("d",function(e){return U({innerRadius:0,outerRadius:T,startAngle:D(e[0])*s+o,endAngle:D(e[1])*s+o})}).style("fill",ƒ(2));var Y=[y.office,y.state,y.type].join("-"),Z=+y.initial||0,et=0,tt=+y.initial||0,nt=0,rt=+y.initial||0,it=0,st=+y.initial||0,ot=0,ut=+y.initial||0,at=0,ft=0,lt=.94,ct=0;r.init(Y,y.type=="e_votes"?.004:.03);var ht=n.timer(function(e){Z=Z*lt+et*(1-lt),tt=tt*lt+nt*(1-lt),rt=rt*lt+it*(1-lt),st=st*lt+ot*(1-lt),ut=ut*lt+at*(1-lt);var t=r.get(Y)*ft*.5*(eln_forecast_flip?-1:1);G.attr("transform","scale("+N+") rotate("+D(Z+t)+")");if(x.colors){var i=x.colors.filter(function(e,n){return Z+t>=e[0]&&Z+t<=e[1]});i.length||(Z+t<x.colors[0][0]&&(i=[x.colors[0]]),Z+t>x.colors[x.colors.length-1][1]&&(i=[x.colors[x.colors.length-1]])),i?(i=n.lab(i&&i[0]&&i[0][2]?i[0][2]:"black"),i.l=Math.min(70,i.l),i=""+i):i="auto",G.style("fill",i)}$.attr("d",U({innerRadius:k,outerRadius:T,startAngle:D(tt)*s+o,endAngle:D(ut)*s+o})),J.attr("d",U({innerRadius:k,outerRadius:T,startAngle:D(rt)*s+o,endAngle:D(st)*s+o}))});return x.data=i,x.index=b,x.update=function(e,t,n,r){et=e,n&&(it=n[0]),n&&(ot=n[1]),nt=t[0],at=t[1];var i=n||t;return ft=r===undefined&&i?i[1]-i[0]:r||0,x},x.updateData=function(e,n,r){var i=y.race+(y.state?"-"+y.state:"");if(!e[i])return;var s=e[i].current[u[y.type]],o=s[n],a=s[r],l=w(o),c=w(a),h=l,p=f[y.type],d=[0,p],v=!1,m=p*.03;return y.type=="vote_margin"?h=l-c:c>l&&(h=f[y.type]-c),y.type!="win_prob"&&(t.isArray(a)&&t.isArray(o)?y.type=="vote_margin"?(m=a[3]-a[1],d=[o[0]-a[4],o[4]-a[0]],v=[o[1]-a[3],o[3]-a[1]]):(m=a[3]-a[1],d=l>c?[o[0],o[4]]:[f[y.type]-a[4],f[y.type]-a[0]],v=l>c?[o[1],o[3]]:[f[y.type]-a[3],f[y.type]-a[1]]):d=[h-m*2,h+m*2]),y.race=="senate"&&y.type=="s_seats"&&(d[0]-=.5,d[1]+=.5,v[0]-=.5,v[1]+=.5),y.candidate&&(h=w(s[y.candidate])),x.update.apply(this,[h,d,v||null,m]),x},x.reset=function(){ht.stop(),E.select("svg").remove()},E.datum(x),x};return b.domain=function(t){return t===undefined?e:(e=t,b)},b.target=function(e){return e===undefined?l:(l=e,b)},b.ticks=function(e,t){return e===undefined?c:(c=e,h=t,b)},b.active=function(t){return t===undefined?v||e:(v=t,b)},b.class=function(e){return e===undefined?p:(p=e,b)},b.margin=function(e){return e===undefined?d:(d=e,b)},b.colors=function(e){return e===undefined?m:(m=e,b)},b.labels=function(e){return e===undefined?g:(g=e,b)},b.init=function(e){y=e,innerWidth<600&&b.margin([20,0,20,100]);switch(y.type){case"e_votes":b.domain([0,538]).target(270).ticks(20,40).colors([[-10,270.9,i.rep_4],[270.9,540,i.dem_4]]);break;case"win_prob":b.domain([0,1]).target(1).ticks([0,.05,.15,.35,.65,.85,.95,1]).colors([[-0.1,.05,i.rep_4],[.05,.15,i.rep_3],[.15,.35,i.rep_2],[.35,.65,"#eee"],[.65,.85,i.dem_2],[.85,.95,i.dem_3],[.95,1.1,i.dem_4]]).labels([[.025,"Very likely"],[.1,"likely"],[.25,"leaning"],[.5,"Tossup"],[.975,"Very likely"],[.9,"likely"],[.75,"leaning"]]),y.candidate&&b.domain([0,1]).ticks([0,.5,1]).labels([[.25,"less likely"],[.75,"more likely"]]).colors([[.1,1.1,"#fff"]]);break;case"n_vote":b.domain([0,1]).target(.5).colors([[-0.1,.49,i.rep_4],[.49,.51,"#eee"],[.51,1,i.dem_4]]);break;case"vote_margin":b.domain(y.state?[-0.3,.3]:[-0.12,.12]).target(0).ticks(20,40).colors([[-0.3,0,i.rep_4],[0,.3,i.dem_4]]);break;case"s_seats":b.domain([32,68]).target(50).ticks(20,40).colors([[0,50,i.rep_4],[50,100,i.dem_4]]).class("senate");break;case"h_seats":b.domain([150,285]).target(217.5).ticks(20,100).colors([[0,217.5,i.rep_4],[217.5,435,i.dem_4]]).class("house")}return b},b}}),define("forecast/utils",["require"],function(e){return{get_url:function(e,t){return(location.hostname.indexOf("nytimes.com")>0?"/elections/":"/2016/")+"forecast/"+e+(t?"/"+t:"")},fmt_prob:function(e){return isNaN(e)?"–":e>.95?">95%":e<.05?"<5%":Math.round(e*100)+"%"}}}),define("forecast/widgets/number",["require","underscore/nyt","vendor/d3.v4+jetpack","forecast/jitter","forecast/utils"],function(e){function f(e,t,n){return typeof e=="function"?e(t,n):e}var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("forecast/jitter"),i=e("forecast/utils"),s={win_prob:"win_prob",n_vote:"vote_share_expected",vote_margin:"vote_share_expected",e_votes:"electoral_votes_expected",h_seats:"seats_expected",s_seats:"seats_expected"},o={win_prob:1,n_vote:1,vote_margin:1,e_votes:538,h_seats:438,s_seats:100},u={obamab:"dem",clintonh:"dem",romneym:"rep",trumpd:"rep",mcmulline:"ind",democrat:"dem",republican:"rep"},a={obamab:"Obama",clintonh:"Clinton",romneym:"Romney",trumpd:"Trump",mcmulline:"McMullin",democrat:"Dem.",republican:"Rep."};return function(){var e="",l="",c=.01,h={},p=t.identity,d=function(e,p){function O(e){return t.isArray(e)?e[2]:e}var d={rep:a.trumpd,dem:a.clintonh},v={e_votes:270,n_vote:.5,win_prob:.5,vote_margin:0,h_seats:217,s_seats:50}[h.type],m=h.type=="n_vote"||h.type=="win_prob"?"."+(h.decimals||"0")+"%":"d",g=h.type=="win_prob"?i.fmt_prob:n.format(m),y=function(e){if(h.candidate)return g(Math.max(0,Math.min(o[h.type],e)));var t=Math.round(e)>v?e:o[h.type]-e;return g(Math.max(0,Math.min(o[h.type],t)))};h.type=="vote_margin"&&(y=function(e){return(e>0?d.dem:d.rep)+" +"+(100*(e>0?e:-e)).toFixed(1)});var b={"class":function(e){return h.type=="e_votes"&&(e=Math.round(e)),e>v?"dem":"rep"},title:function(e){return h.type=="e_votes"&&(e=Math.round(e)),e>v?d.dem:d.rep},format:y,jitter:f(c,e,p)};h.type=="vote_margin"&&(b.title=function(){return""},b.jitter=.002),h.candidate&&(b.title=function(){return a[h.candidate]},b.class=function(){return u[h.candidate]});var w=n.select(this).classed("eln-forecast-widget-number",!0).classed("linked",h.link);h.link&&w.on("click",function(){location.href=h.link}),h.title&&w.append("div.title").html(h.title);var E=w.append("div.widget-info-display-cont"),S=E.append("span.number"),x=E.append("span.name"),T=E.append("div.matte-kicker").html("Forecast"+(["Popular vote margin","Vote margin"].indexOf(h.title)>-1?"<span class='g-matte-kicker-lowercase-kq-favor'>, in pct. points</span>":"")),N=[h.office,h.state,h.type].join("-"),C=+h.initial||0,k=0,L=.94,A={"class":l,update:function(e){return k=e,A},updateData:function(e,n,r){var i=h.race+(h.state?"-"+h.state:"");if(!e[i])return;h.race=="senate"&&h.state&&e[i].regions.candidates.forEach(function(e){a[e.candidate_key]=e.last_name}),d.dem=a[n],d.rep=a[r];var u=e[i].current[s[h.type]],f=O(u[n]),l=O(u[r]),c=f;return t.isArray(u[n])?b.jitter=u[n][3]-u[n][1]:b.jitter=0,h.type=="vote_margin"?c=f-l:l>c&&(c=o[h.type]-l),h.candidate&&(c=O(u[h.candidate])),k=c,A},reset:function(){M.stop(),w.html("")}},M=n.timer(function(e){C=C*L+k*(1-L);var n=r.get(N)*b.jitter*(eln_forecast_flip?-1:1);t.isFunction(b.format)?S.html(b.format(C+n)):S.html(C+n),x.html(b.title(C+n)),w.attr("data-class",b.class(C+n)),h.race=="senate"&&h.candidate=="democrat"?window.__eln_fc_senate_dem=+b.format(C+n):h.race=="senate"&&h.candidate=="republican"?S.html(100-window.__eln_fc_senate_dem):h.race=="house"&&h.candidate=="democrat"?window.__eln_fc_house_dem=+b.format(C+n):h.race=="house"&&h.candidate=="republican"&&S.html(435-window.__eln_fc_house_dem)});return w.datum(A),A};return d.class=function(e){return e===undefined?l:(l=e,d)},d.title=function(t){return t===undefined?e:(e=t,d)},d.format=function(e){return e===undefined?p:(p=e,d)},d.jitter=function(e){return e===undefined?c:(c=e,d)},d.init=function(e){return h=e,d},d}}),define("forecast/widgets/bars",["require","underscore/nyt","jquery/nyt","vendor/d3.v4+jetpack","moment/elections","vendor/p5","lib/helpers"],function(e){function a(e,t,n){return typeof e=="function"?e(t,n):e}var t=e("underscore/nyt"),n=e("jquery/nyt"),r=e("vendor/d3.v4+jetpack"),i=e("moment/elections"),s=e("vendor/p5"),o=e("lib/helpers"),u={pct:r.format(".0%"),time:function(e){return i(e).format("ha")},pct_rep:function(e){return e?u.pct(e):"-"}};return function(){var e="",n={},i=r.format(".1%"),s=function(e){return r.format(".1f")(e)+"%"},u=90,a=function(e,i){var u=r.select(this),a=u.select("table tbody"),f={},l=r.scaleTime().range([0,100]),c={updateData:function(e,i,u){var f=e[n.race+"-"+n.state],h=f.regions.votesRemain+f.regions.votes,p=f.regions.candidates.filter(function(e){return e.name_display&&e.data.length>0}).map(function(e){var t=e.votes+e.data[0].votesRemain;return{name:e.name_display,last_name:e.last_name,id:e.candidate_key,slug:o.slugify(n.race+" "+e.last_name+" "+e.first_name),party:e.party_id,est_total_cand_votes:t,overallPct:t/h,estTotPoints:f.current.vote_share_expected[e.candidate_key][2]*100,votesCounted:e.votes}}).sort(r.descendingKey(function(e){return e.est_total_cand_votes})),d=r.max(p,ƒ("est_total_cand_votes"));l.domain([0,d]);var v={};p.forEach(function(e){v[e.id]=e,e.updated=!0});var m=a.selectAll(".g-candidate-row").data();m.forEach(function(e){e.updated=!1;var n=v[e.id];n&&(n.inOldData=!0),t.extend(e,v[e.id]||{})});var g=m.filter(ƒ("updated")).concat(p.filter(function(e){return!e.inOldData})),y=a.selectAll(".g-candidate-row").data(g,ƒ("id"));y.exit().remove();var b=y.enter().append("tr").attr("class",function(e){return"g-candidate-row g-"+e.party});b.append("td.g-cand-name").text(function(e){return e.last_name});var w=b.append("td.g-cand-vote-bar-cont").append("div.g-bar-cont");b.append("td.g-spacer"),w.append("div.g-bar.g-full-bar"),w.append("div.g-bar.g-already-counted-bar"),w.append("span.bar-overall-label");var E=w.append("div.g-pointer-labels-group").selectAll(".g-bar-vote-label").data(function(e){return[{data:e,display:"Counted",voteCount:e.votesCounted},{data:e,display:"Remaining",voteCount:e.est_total_cand_votes}]}).enter().append("div").attr("class",function(e){return"g-bar-vote-label "+e.display.toLowerCase()}).text(function(e){return e.display}),S=r.select(".g-bar.g-already-counted-bar").node().clientWidth,T=b.merge(y);return T.selectAll(".g-bar.g-full-bar").style("width",function(e){return l(e.est_total_cand_votes)+"%"}),T.selectAll(".g-bar.g-already-counted-bar").style("width",function(e){return l(e.votesCounted)+"%"}).classed("g-no-votes-yet",function(e){return e.votesCounted===0}),T.selectAll(".bar-overall-label").text(function(e){return s(e.estTotPoints)}).style("left",function(e){return l(e.est_total_cand_votes)+"%"}),T.selectAll(".g-pointer-labels-group .g-bar-vote-label").style("left",function(e){return l(e.display=="Counted"?0:e.data.votesCounted)+"%"}).classed("g-hide-label",function(e){if(e.display=="Counted")return l(e.data.votesCounted)<10;if(e.display=="Remaining"){var t=l(e.data.est_total_cand_votes)-l(e.data.votesCounted);return innerWidth<600?t<20:t<10}return!1}),c},reset:function(){a.html("")}};return c};return a.init=function(e){return n=e,a},a}}),define("forecast/widgets/histogram",["require","underscore/nyt","vendor/d3.v4+jetpack","vendor/p5"],function(e){var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("vendor/p5"),i={president:"electoral_votes_expected",senate:"seats_expected"},s={president:{needed:270,total:538,range:[0,538],lbl:"electoral votes",column:"electoral_votes_distribution"},senate:{needed:50,total:100,range:[33,66],lbl:"senate seats",column:"seats_distribution"},house:{needed:218,total:435,range:[150,285],lbl:"house seats",column:"seats_distribution"}};return n.selection.prototype.myTspans=function(e,t,n){Array.isArray(e)||(e=[e]);var r=t||15,i=n||0;return this.selectAll("tspan").data(e).enter().append("tspan").html(ƒ()).attr("x",0).attr("dy",function(e,t){return t?r:i})},function(){var e={},r=function(i,o){var u=s[e.race],a={top:20,right:20,bottom:50,left:45},f=n.select(this).classed("eln-forecast-widget-histogram",!0),l=f.node().clientWidth,c=l-a.left-a.right,h=(innerWidth<600?350:500)-a.top-a.bottom,p=n.scaleLinear().domain(u.range?u.range:[0,u.total+1]).range([0,c]),d=n.scaleLinear().range([h,0]),v=n.area().x(function(e){return p(e.dem)}).y1(function(e){return d(e.prob)}).y0(h).curve(n.curveStepBefore),m=n.axisBottom().ticks(8).scale(p).tickPadding(0),g=n.axisLeft().tickSize(p(539)-p(0)).ticks(8).tickFormat(n.format(".1%")).scale(d),y=f.append("svg.g-histogram").attr("width",c+a.left+a.right).attr("height",h+a.top+a.bottom).append("g").translate([a.left,a.top]);y.append("g.axis.axis--y.axis--y-left").translate([p(u.total+1,0)]).call(g).selectAll("g").classed("y-grid",!0).selectAll("line").classed("threshold",function(e){return e===0}),y.append("g.axis.axis--x").translate([0,h]).call(m).selectAll("g").classed("x-grid",!0);var b=y.append("path.dem-win-outcomes"),w=y.append("path.rep-win-outcomes"),E=y.append("g.g-peak-label");E.append("line.g-likeliest-line").attr("x2",10),E.append("text.g-halo").attr("dx",13),E.append("text").attr("dx",13),E.selectAll("text").myTspans(["Most likely outcome",'<tspan class="g-ev-number"></tspan> '+u.lbl],15,5),E.selectAll("text > tspan:nth-child(2)").attr("x",13);var S=y.append("g.marker.marker--election").translate(function(e){return[p(u.needed),0]});S.append("path").attr("d","M-3.5,0L3.5,0L0,6z"),S.append("text").attr("dy",-7).text(u.needed+" "+u.lbl+" needed"),S.append("line.g-win-line").attr("y1",0).attr("y2",h);var x={updateData:function(i){var s=i[e.race].current[u.column][e.race=="president"?"clintonh":"democrat"],o=[];t.isArray(s)?o=s.map(function(e,t){return{dem:t,prob:e}}):o=n.range(0,u.total+2).map(function(e){return{dem:e,prob:s[e]||0}});var a=n.sum(o.filter(function(e){return e.dem>=u.needed}),function(e){return e.prob}),f=n.max(o,function(e){return e.prob}),l=o.filter(function(e){return e.prob==f})[0].dem,c=l<u.needed;return p.domain(c?u.range.slice(0).reverse():u.range.slice(0)),d.domain([0,f]),g.tickFormat(n.format(f>.05?".0%":".1%")),y.select("g.axis.axis--y.axis--y-left").call(g).selectAll("g").classed("y-grid",!0),b.datum(o.filter(function(e){return e.dem>=u.needed})).transition().duration(1e3).attr("d",v),w.datum(o.filter(function(e){return e.dem<=u.needed})).transition().duration(1e3).attr("d",v),E.translate([p(l+(c?-1:1)),d(f)+10]),E.selectAll("tspan.g-ev-number").text(c?u.total-l:l),r},reset:function(){f.html("")}};return x};return r.init=function(t){return e=t,r},r}}),define("forecast/widgets/figures",["require","underscore/nyt","vendor/d3.v4+jetpack","moment/elections","vendor/p5","lib/helpers"],function(e){var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("moment/elections"),i=e("vendor/p5"),s=e("lib/helpers");window.d4=n;var o={pct:n.format(".0%"),pct_rep:function(e){return e?o.pct(e):"-"},timestamp:function(e){return r(e).format("h:mm A")},vote_count:n.format(","),vote_count_to_nearest_thousand:function(e){return e<1e3?"very few":"about "+n.format(",")(Math.round(e/1e3)*1e3)},display_vote_margin:n.format(".1f")};return function(){var e="",t={},r=function(){function E(e){var t=n.max([e.democrat,e.republican]);return t<.65?"it’s too early to tell if Republicans or Democrats":e.democrat>e.republican?"Democrats":"Republicans"}function S(e){var t=e.regions.candidates.sort(n.descendingKey(function(e){return e.votes||0}));return t[0].name_display}function x(e){var t=e.regions.candidates.filter(function(e){return e.data.length>0&&e.name_display});return t=t.sort(n.descendingKey(function(e){return e.data[0].votesRemain})),t[0].name_display}function T(e){var t=e.regions.candidates.sort(n.descendingKey(function(e){return e.votes||0})),r=t[0].percent-t[1].percent;return o.display_vote_margin(r)+" points"}function N(e){var t=e.regions.candidates.filter(function(e){return e.data.length>0&&e.name_display});t=t.sort(n.descendingKey(function(e){return e.data[0].votesRemain}));var r=t[0].data[0].votesRemainPoints-t[1].data[0].votesRemainPoints;return o.display_vote_margin(r)+" points"}function C(e,t,r){if(!e)return null;var i=n.entries(e.current.win_prob).filter(function(e){return e.key!=="other"}),s=n.max(i,function(e){return e.value}),o=i.filter(function(e){return e.value==s});o.length>1&&console.warn("tie in figures.js displayForecastLeader");var u=o[0].key;if(r=="pres-overview")return{trumpd:"Donald Trump",clintonh:"Hillary Clinton"}[u];var a=e.regions.candidates.filter(function(e){return e[t]==u})[0].name_display;return a}var e=n.select(this),r=e.selectAll(".fc-president-winner"),i=e.selectAll(".fc-state-winner"),s=e.selectAll(".fc-pct-of-all-votes-counted"),u=e.selectAll(".fc-last-updated"),a=e.selectAll(".fc-votes-counted-state-contest"),f=e.selectAll(".fc-votes-remaining-state-contest"),l=e.selectAll(".fc-votes-counted-state-contest-cand-leader"),c=e.selectAll(".fc-votes-remaining-state-contest-cand-leader"),h=e.selectAll(".fc-votes-counted-marginal-lead"),p=e.selectAll(".fc-votes-remaining-marginal-lead"),d=e.selectAll(".g-no-votes-yet"),v=e.selectAll(".fc-uncalled-state"),m=e.selectAll(".fc-called-state"),g=e.selectAll(".fc-senate-majority"),y=e.selectAll(".g-no-votes-remaining"),b=e.selectAll(".g-house-majority-party"),w={updateData:function(e,n,k){window.ddz=e,window.conf=t;var L=t.race+(t.state?"-"+t.state:"");stateData=e[L];if(!stateData)return console.error("figures.js no data");r.text(C(e.president,"slug","pres-overview")),b.text(e.house.current.win_prob.republican>e.house.current.win_prob.democrat?"Republicans":"Democrats"),g.text(E(e.senate.current.win_prob));var A=stateData.current.winner&&stateData.current.winner.winner;return u.text(o.timestamp(e.president.current.timestamp)),t.state&&(a.text(o.vote_count(stateData.regions.votes)),f.text(o.vote_count_to_nearest_thousand(stateData.regions.votesRemain)),l.text(S(stateData)),c.text(x(stateData)),h.text(T(stateData)),p.text(N(stateData)),d.classed("g-hidden",stateData.current.percent_counted===0),y.classed("g-hidden",stateData.current.percent_counted>=.99),s.text(o.pct(stateData.current.percent_counted)),v.st({display:A?"none":""}),m.st({display:A?"":"none"}),i.text(C(stateData,t.race=="president"?"slug":"candidate_key",""))),w},reset:function(){}};return w};return r.init=function(e){return t=e,r},r}}),define("forecast/widgets/outcomes",["require","underscore/nyt","vendor/d3.v4+jetpack","moment/elections","vendor/p5"],function(e){function a(e,t,n){return typeof e=="function"?e(t,n):e}var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("moment/elections"),i=e("vendor/p5"),s={pct:n.format(".0%"),time:function(e){return r(e).format("ha")},pct_rep:function(e){return e?s.pct(e):"-"}},o={e_votes:{range:[0,538],threshold:270,ticks:[0,135,270,405,538],fmt:n.format("d")},vote_margin:{range:[-0.1,.1],threshold:0,ticks:[-0.1,-0.05,0,.05,.1],fmt:s.pct},win_prob:{range:[0,1],threshold:.5,ticks:[0,.25,.5,.75,1],fmt:n.format(".0%")}},u={win_prob:"win_prob",n_vote:"vote_share_expected",vote_margin:"vote_share_expected",e_votes:"electoral_votes_expected"};return function(){var e="",r={},i=function(e,i){function g(e){var t=n.select(this),r=t.select("div.bar");r.node()||(r=t.append("div.bar")),r.style("width",h(e.prob)+"%")}var s=o[r.type],u=n.select(this).classed("eln-forecast-outcomes",!0),a=u.append("table.outcomes-table"),f=a.append("thead"),l=a.append("tbody"),c={clintonh:"Clinton",trumpd:"Trump",steinj:"Stein",johnsong:"Johnson",mcmulline:"McMullin"},h=n.scaleLinear().range([0,100]),p={democrat:"Clinton",republican:"Trump",independent:"Independent",X3:"Johnson",X4:"McMullin"},d={pct:n.format(".0%"),pct_rpt:function(e){return e?d.pct(e):"-"},estimate:function(e){return},win_prob:function(e){return e===1?">99%":e<.01?"<1%":d.pct(e)},majority:function(e){return e===0?"Even *":"+ "+Math.abs(e)+" "+(e>0?"Dem.":"Rep.")}},v=[{id:"seats",title:"Dem. Seats",html:ƒ("dem_seats")},{id:"seats",title:"Rep. Seats",html:ƒ("rep_seats")},{id:"majority",title:"Majority",html:ƒ("majority",d.majority)},{id:"likelihood",title:"Likelihood",html:ƒ("prob",d.win_prob),th_colspan:2},{id:"hist",title:"",th_ignore:!0,each:g},{id:"note",title:"",html:ƒ("note")}];f.append("tr").appendMany(v.filter(ƒ("th_ignore",ƒ.not)),"th").attr("class",function(e){return"eln-column-"+e.id}).attr("colspan",function(e){return e.th_colspan||1}).html(ƒ("title"));var m={updateData:function(e){var i=e[r.race].current.seats_distribution,s=n.extent(t.keys(i.democrat).map(Number).filter(function(e){return i.democrat[e]>=.005||i.democrat[e-1]>=.005||i.democrat[e+1]>=.005}).concat([45,55])),o=n.range(s[0],s[1]+1).map(function(e){var t=(e-50)*2;return{dem_seats:e,rep_seats:100-e,majority:t,prob:i.democrat[e]||0}}),u=n.max(o,ƒ("prob"));o.forEach(function(e){e.prob==u&&(e.note="<span>‣</span> Likeliest"),e.majority==-8&&(e.note="<span>‣</span> Current")}),h.domain([0,u]);var a=l.selectAll("tr").data(o,ƒ("dem")).order(),f=a.enter().append("tr");return t.each(v,function(e){f.append("td").attr("class","eln-column-"+e.id)}),a.exit().remove(),a=f.merge(a).classed("show",ƒ("competitive")).classed("lead-dem",function(e){return e.dem_seats>e.rep_seats}).classed("lead-rep",function(e){return e.rep_seats>e.dem_seats}).classed("even",function(e){return e.rep_seats==e.dem_seats}).classed("likeliest",function(e){return e.prob==u}),t.each(v,function(e,t){var r=a.selectAll("td:nth-child("+(t+1)+")").each(function(e){var t=n.select(this.parentNode).datum();delete e._old,t._old=e,n.select(this).datum(t)});e.html&&r.html(e.html),e.each&&r.each(e.each)}),m},reset:function(){u.html("")}};return m};return i.init=function(e){return console.log("init chart",e),r=e,i},i}}),define("forecast/widgets/turnout",["require","underscore/nyt","vendor/d3.v4+jetpack","moment/elections","map2016/map","vendor/p5"],function(e){function u(e,t,n){return typeof e=="function"?e(t,n):e}var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("moment/elections"),i=e("map2016/map"),s=e("vendor/p5"),o={pct:n.format(".0%"),time:function(e){return r(e).format("h:mm A")},pct_rep:function(e){return e?o.pct(e):"-"},pct_abs:function(e){return e?"+"+o.pct(Math.abs(e)):"Even"}};return function(){var e="",r={},i=function(e,i){console.log("data",e,i);var s=innerWidth<400,u=n.select(this).html("").classed("eln-widget-turnout",!0).classed("eln-forecast-time-series",!0),a=n.conventions({parentSel:u,height:80,margin:{left:45,right:10,top:10,bottom:20},totalWidth:u.node().offsetWidth}),f=a.svg.append("rect.passed").attr("height",a.height).attr("width",1),l=a.svg.append("g"),c=a.svg.append("g"),h=a.svg.append("path.pct-turnout"),p=a.svg.append("path.pct-turnout-line"),d={updateData:function(e){var i=r.race+(r.state=="false"?"":"-"+r.state),u=e[i].timeseries,v=window.__x,m=n.area().x(ƒ("timestamp",n.isoParse,v)).curve(n.curveStepBefore).y0(a.y(0)).y1(ƒ("percent_counted",a.y)),g=n.area().x(ƒ("timestamp",n.isoParse,v)).curve(n.curveStepBefore).y(ƒ("percent_counted",a.y));h.at({d:m(u)}),p.at({d:g(u)});var y=n.isoParse(t.last(u).timestamp),b=l.selectAll("g.y-grid").data(a.y.ticks(3));b.exit().remove();var w=b.enter().append("g.y-grid");w.append("text").translate([-5,0]).text(n.format(".0%")),w.append("line.elapsed-line").attr("x2",1),w.append("line.future-line").attr("x1",a.width-1).attr("x2",a.width),b=w.merge(b),b.translate(function(e){return[0,a.y(e)]}),b.selectAll(".elapsed-line").transition().attr("x2",v(y)),b.selectAll(".future-line").transition().attr("x1",v(y));var E=c.selectAll("g.x-grid").data(v.ticks(s?5:10),n.isoFormat);E.exit().remove();var S=E.enter().append("g.x-grid").attr("transform",function(e){return"translate("+[v(e),0]+")"});return S.append("text").translate([0,a.height]).attr("dy",8).text(o.time),S.append("line").translate([0,a.height]).attr("y2",5),S.merge(E).transition().attr("transform",function(e){return"translate("+[v(e),0]+")"}),f.transition().attr("width",v(y)),d},reset:function(){u.html("")}};return d};return i.init=function(e){return r=e,i},i}}),define("forecast/widgets/state-table",["require","underscore/nyt","vendor/d3.v4+jetpack","vendor/p5","lib/helpers","forecast/utils"],function(e){function o(e,t,n){return typeof e=="function"?e(t,n):e}var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("vendor/p5"),i=e("lib/helpers"),s=e("forecast/utils");return window.d4=n,function(){var e="",r={},o=function(e,o){function S(e){return e.current.winner&&e.current.winner.winner}function N(e,n){var i=e.state,s=e.current[n],o=r.type=="vote_margin"&&r.race=="president",u=t.chain(s).pairs().map(function(e){return r.race=="senate"&&!y[i][e[0]]||!t.isArray(e[1])&&!t.isFinite(e[1])?!1:e[0]=="other"?!1:{id:e[0],party:r.race=="senate"?y[i][e[0]].party_id:(y.pres[e[0]]||{party_id:e[0]}).party_id,vote:t.isArray(e[1])?e[1][2]:e[1],vote_p5:t.isArray(e[1])?e[1][0]:e[1],vote_p25:t.isArray(e[1])?e[1][1]:e[1],vote_p75:t.isArray(e[1])?e[1][3]:e[1],vote_p95:t.isArray(e[1])?e[1][4]:e[1]}}).filter(ƒ()).sortBy("vote").value().reverse();if(!u.length)return{margin:Number.NaN};var a=t.findWhere(u,{party:"democrat"});return a||console.log("dem",a,u),{id:u[0].id,party:u[0].party,party_2nd:u[1].party,state:e.state,margin:u[0].vote-u[1].vote,margin_p5:u[0].vote_p5-u[1].vote_p95,margin_p25:u[0].vote_p25-u[1].vote_p75,margin_p75:u[0].vote_p75-u[1].vote_p25,margin_p95:u[0].vote_p95-u[1].vote_p5,dem_margin:(u[0].vote-u[1].vote)*(u[0].party=="democrat"?1:-1)}}function C(e){return N(e,"vote_share_expected")}function k(e){return N(e,"vote_share_counted")}function L(e){return isNaN(e.margin)?"-":(tail=(100*e.margin).toFixed(1),B(e.id,e.state)+" +"+tail)}function A(e,t){var n=N(e,t);return isNaN(n.margin)?"-":B(n.id,e.state)+" +"+(100*n.margin).toFixed(1)}function O(e,t){return function(r){var i=n.select(this);if(!r._old)i.html(t(e(r)));else var s=e(r._old),o=e(r),u=n.interpolate(s,o),a=200,f=n.timer(function(e){i.html(t(u(e/a))),e>a&&(i.html(t(o)),f.stop())})}}function M(e){return A(e,"vote_share_expected")}function D(e){return A(e,"vote_share_counted")}function P(e){var n=t.chain(e).pairs().map(function(e){return{id:e[0],value:t.isArray(e[1])?e[1][0]:e[1]}}).sortBy("value").value().reverse();return n[0]}function H(e){if(!e._old)return"";if(S(e))return"✓";var t=e.margin.margin*(e.margin.id!="democrat"?-1:1),n=e._old.margin.margin*(e._old.margin.id!="democrat"?-1:1);return""}function B(e,t){return r.race=="president"?(y.pres[e]||{last_name:e}).last_name:y[t][e].last_name}function j(e){var t=i.getStateFromPostal(e.toUpperCase());return'<a href="'+s.get_url(r.race,t.slug)+'">'+'<span class="g-state-name-long">'+t.name+"</span>"+'<span class="g-state-name-short">'+t.nyt_abbrev+"</span>"+"</a>"}function F(e){var t=n.select(this),r=t.select("div.range"),i=t.select("div.range.range-neg"),s=t.select("div.range.range25"),o=t.select("div.range.range-neg.range25"),u=t.select("div.median");r.node()||(r=t.append("div.range"),i=t.append("div.range.range-neg"),s=t.append("div.range.range25"),o=t.append("div.range.range-neg.range25"),u=t.append("div.median")),r.style("left",e.scale(Math.max(0,e.margin.margin_p5))+"%").style("right",100-e.scale(e.margin.margin_p95)+"%"),i.style("left",e.scale(e.margin.margin_p5)+"%").style("right",100-e.scale(Math.max(0,e.margin.margin_p5))+"%"),s.style("left",e.scale(Math.max(0,e.margin.margin_p25))+"%").style("right",100-e.scale(e.margin.margin_p75)+"%"),o.style("left",e.scale(e.margin.margin_p25)+"%").style("right",100-e.scale(Math.max(0,e.margin.margin_p25))+"%"),u.style("left",e.scale(e.margin.margin)+"%")}var u={al:9,ak:3,az:11,ar:6,ca:55,co:9,ct:7,de:3,dc:3,fl:29,ga:16,hi:4,id:4,il:20,"in":11,ia:6,ks:6,ky:8,la:8,me:4,md:10,ma:11,mi:16,mn:10,ms:6,mo:10,mt:3,ne:5,nv:6,nh:4,nj:14,nm:5,ny:29,nc:15,nd:3,oh:18,ok:7,or:7,pa:20,ri:4,sc:9,sd:3,tn:11,tx:38,ut:6,vt:3,va:13,wa:12,wv:5,wi:10,wy:3},a={show_competitive:!0},f=n.select(this).classed("eln-forecast-state-table",!0);if(r.race=="president"){var l=f.append("div.eln-ev-overlay.eln-dem-ev-overlay"),c=f.append("div.eln-ev-overlay.eln-rep-ev-overlay");l.append("span"),l.append("svg").attr("width",10),c.append("span"),c.append("svg").attr("width",10)}var h=f.append("table"),p=h.append("thead"),d=h.append("tbody"),v={clintonh:"Clinton",trumpd:"Trump",steinj:"Stein",johnsong:"Johnson",mcmulline:"McMullin",obamab:"Obama",romneym:"Romney"},m={democrat:"Clinton",republican:"Trump",independent:"Independent",X3:"Johnson",X4:"McMullin"},g={pct:function(e){return e>0&&e<.01?"<1%":e>.95&&e<1?">95%":n.format(".0%")(e)},pct_rpt:function(e){return e?g.pct(e):"-"},estimate:function(e){return},win_prob:function(e){return e=="w"?"✓ WON":s.fmt_prob(e)}},y={pres:{democrat:{last_name:"Clinton",party_id:"democrat"},republican:{last_name:"Trump",party_id:"republican"},clintonh:{last_name:"Clinton",party_id:"democrat"},obamab:{last_name:"Obama",party_id:"democrat"},trumpd:{last_name:"Trump",party_id:"republican"},romneym:{last_name:"Romney",party_id:"republican"},johnsong:{last_name:"Johnson",party_id:"libertarian"},steinj:{last_name:"Stein",party_id:"green"},mcmulline:{last_name:"McMullin",party_id:"independent"},de_la_fuenter:{last_name:"De La Fuente",party_id:"independent"}}},b=[{id:"trend",title:"",html:H},{id:"state",title:"State",html:ƒ("state",j)},{id:"pct_rep g-num-est",title:"Est. pct. of votes",each:O(ƒ("current","percent_counted"),g.pct)},{id:"rep_margin g-leader-indicator",title:"Reported margin",each:O(ƒ(k),L)},{id:"upshot_est g-leader-indicator",title:"NYT projection",each:O(ƒ(C),L)},{id:"upshot_prob g-num-est",title:"NYT win prob.",each:O(function(e){return e.current.winner&&e.current.winner.winner?"w":e.current.win_prob[e.margin.id]},g.win_prob)},{id:"chart",title:"",each:F},{id:"spacer",title:"",html:""}];r.race!="president"&&(b=b.slice(0,7)),p.append("tr").appendMany(b,"th").attr("class",function(e){return"eln-column-"+e.id}).html(ƒ("title"));var w=n.select(".g-show-all-states-toggle"),E=n.select(".eln-forecast-state-table tbody");w.on("click",function(e){a.show_competitive=E.classed("g-show-all-states-toggle"),w.text(a.show_competitive?"Show all states":"Show competitive states"),E.classed("g-show-all-states-toggle",!a.show_competitive),T.updateData(x)});var x=null,T={updateData:function(e){function O(e){return e?(e>0?"+":"")+g.pct(e):"Even"}function M(){var e=h.node().getBoundingClientRect(),t=e.bottom-d.select("tr.lead-dem.last-of-party").node().getBoundingClientRect().bottom,n=d.select("tr.lead-rep.first-of-party").node().getBoundingClientRect().top-e.top;l.classed("no-show",!1).style("bottom",30+t+"px").select("span").html(f),l.select("svg").attr("height",n-30).html("").append("line").translate([5,0]).attr("y2",n-30),l.select("svg").append("path").attr("d","M0,0L3,5L-3,5Z").translate([5,0]),c.classed("no-show",!1).style("top",10+n+"px").select("span").html(v),c.select("svg").attr("height",t).html("").append("line").translate([5,0]).attr("y2",t-10),c.select("svg").append("path").attr("d","M0,5L3,0L-3,0Z").translate([5,t-10])}x=e;var o=e[r.race].races;e[r.race].candidates&&(y=e[r.race].candidates,t.each(y,function(e){t.each(e,function(t,n){e[t.party_id]=t}),e.other={party_id:"other"}}));var f=r.race=="senate"?37:0,v=r.race=="senate"?30:0;r.type=="president"&&(l.classed("no-show",!0),c.classed("no-show",!0));var m=n.scaleLinear().range([0,100]),w=[];o.forEach(function(e){e.current.pct_reported=e.current.precincts_reporting/e.current.precincts_total,e.margin=N(e,"vote_share_expected"),e.max_win_prob=P(e.current.win_prob),e.scale=m,r.race=="senate"&&(u[e.state]=1),S(e)?(e.current.winner.party_id=="democrat"&&(f+=u[e.state]),e.current.winner.party_id=="republican"&&(v+=u[e.state])):(e.margin.party=="democrat"&&(f+=u[e.state]),e.margin.party=="republican"&&(v+=u[e.state])),a.show_competitive||(w.push(e.margin.margin_p5),w.push(e.margin.margin_p95))}),o.sort(n.ascendingKey(ƒ("margin","margin"))).slice(0,15).map(function(e){e.competitive=!0,a.show_competitive&&(w.push(e.margin.margin_p5),w.push(e.margin.margin_p95))}),w=n.extent(w),m.domain([n.floor(w[0],2)-.003,n.ceil(w[1],2)+.002]),o=o.sort(n.descendingKey(function(e){return e.margin.dem_margin-(e.margin.party=="republican"?5:0)})),o.forEach(function(e,t){e._prev=t?o[t-1]:null,e._next=t<o.length-1?o[t+1]:null,e._last_of_party=e._next&&e._next.margin.party!=e.margin.party,e._first_of_party=e._prev&&e._prev.margin.party!=e.margin.party});var E=d.selectAll("tr").data(o,ƒ("state")).order(),C=E.enter().append("tr").on("click",function(e){var t=j(e.state),n=i.getStateFromPostal(e.state.toUpperCase()),o=s.get_url(r.race,n.slug);window.location.href=o});t.each(b,function(e){C.append("td").attr("class","eln-column-"+e.id)}),E.exit().remove(),E=C.merge(E).classed("show",ƒ("competitive")).classed("called",ƒ(S)).classed("not-yet-called",ƒ(S,ƒ.not)).classed("called-dem",function(e){return S(e)&&e.current.winner.party_id=="democrat"}).classed("called-rep",function(e){return S(e)&&e.current.winner.party_id=="republican"}).classed("called-ind",function(e){return S(e)&&e.current.winner.party_id!="democrat"&&e.current.winner.party_id!="republican"}).classed("lead-dem",function(e){return e.margin.party=="democrat"}).classed("lead-rep",function(e){return e.margin.party=="republican"}).classed("lead-ind",function(e){return e.margin.party=="independent"}).classed("lead-lib",function(e){return e.margin.party=="libertarian"}).classed("second-dem",function(e){return e.margin.party_2nd=="democrat"}).classed("second-rep",function(e){return e.margin.party_2nd=="republican"}).classed("second-ind",function(e){return e.margin.party_2nd=="independent"}).classed("second-lib",function(e){return e.margin.party_2nd=="libertarian"}).classed("last-of-party",ƒ("_last_of_party")).classed("first-of-party",ƒ("_first_of_party")).classed("lead-dem-reported",function(e){return e.current.vote_share_counted.democrat>e.current.vote_share_counted.republican}).classed("lead-rep-reported",function(e){return e.current.vote_share_counted.republican>e.current.vote_share_counted.democrat}),t.each(b,function(e,t){var r=E.selectAll("td:nth-child("+(t+1)+")").each(function(e){var t=n.select(this.parentNode).datum();delete e._old,t._old=e,n.select(this).datum(t)});setTimeout(function(){e.html&&r.html(e.html),e.each&&r.each(e.each)},400)});var k=p.select("th.eln-column-chart"),L=k.selectAll(".g-tick-group").data(m.ticks(k.node().clientWidth/70)),A=L.enter().append("div.g-tick-group");return A.append("div.g-long-axis-lines"),A.append("div.g-long-axis-labels").text(O),k.selectAll(".g-tick-group").each(function(e){n.select(this).select(".g-long-axis-labels").text(O)}).classed("g-baseline",function(e){return e===0}),L.exit().remove(),A.merge(L).style("left",function(e){return m(e)+"%"}),r.race=="president"&&(setTimeout(M,1e3),setTimeout(M,5e3)),T},reset:function(){f.html("")}};return T};return o.init=function(e){return r=e,o},o}}),define("forecast/widgets/time-series",["require","underscore/nyt","vendor/d3.v4+jetpack","moment/elections","forecast/utils","vendor/p5"],function(e){function l(e,t,n){return typeof e=="function"?e(t,n):e}var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("moment/elections"),i=e("forecast/utils"),s=e("vendor/p5"),o={pct:n.format(".0%"),pct2:n.format(".1%"),time:function(e){return r(e).format("h:mm A")},pct_rep:function(e){return e?o.pct(e):"-"},pct_abs:function(e){return e?"+"+(Math.abs(Math.round(e*100))>9?o.pct(Math.abs(e)):o.pct2(Math.abs(e))):"Even"}},u={e_votes:{range:[140,390],threshold:270,ticks:t.uniq(n.range(140,390,20).concat(270).sort()),fmt:n.format("d")},h_seats:{range:[175,255],threshold:217,ticks:t.uniq(n.range(180,255,10).concat(217).sort()),fmt:n.format("d")},s_seats:{range:[40,60],threshold:50,ticks:t.uniq(n.range(30,70,10).concat(50).sort()),fmt:n.format("d")},vote_margin:{range:[-0.1,.1],threshold:0,ticks:n.range(-0.1,.11,.02),fmt:o.pct_abs},win_prob:{range:[0,1],threshold:.5,ticks:[0,.25,.5,.75,1],fmt:i.fmt_prob,fmt2:n.format(".0%")},n_vote:{range:[0,.5],threshold:0,ticks:[0,.1,.2,.3,.4,.5],fmt:n.format(".0%")}},a={win_prob:"win_prob",n_vote:"vote_share_expected",vote_margin:"vote_share_expected",e_votes:"electoral_votes_expected",h_seats:"seats_expected",s_seats:"seats_expected"},f={clintonh:"democrat",trumpd:"republican",mcmulline:"independent"};return isMobile=innerWidth<400,function(){var e="",r={},i=function(){function k(){if(r.type=="vote_margin")return["reported","model"];if(r.race=="president"){var e=["clintonh","trumpd"];return r.state=="utah"&&e.push("mcmulline"),e}return["democrat","republican"]}function F(e,t,i){return e.map(function(e){var s={time:n.isoParse(e.timestamp),value:e[a[r.type]],src:e};return r.type=="vote_margin"&&(s.value2=e.vote_share_counted),r.race=="senate"&&r.state&&(s.value.democrat=s.value[t],s.value.republican=s.value[i],r.type=="vote_margin"&&(s.value2.democrat=s.value2[t],s.value2.republican=s.value2[i])),s})}function I(e){var n=t.chain(e).pairs().map(function(e){return{id:e[0],vote:t.isArray(e[1])?e[1][2]:e[1],vote_p5:t.isArray(e[1])?e[1][0]:e[1],vote_p95:t.isArray(e[1])?e[1][4]:e[1]}}).sortBy("vote").value().reverse(),r=t.findWhere(n,{id:"democrat"});return{id:n[0].id,margin:n[0].vote-n[1].vote,margin_p5:n[0].vote_p5-n[1].vote_p95,margin_p95:n[0].vote_p95-n[1].vote_p5,dem_margin:r.vote-(n[0]==r?n[1].vote:n[0].vote)}}function q(e,t){return function(r){var i=n.select(this);if(!r._old)i.html(t(e(r)));else var s=e(r._old),o=e(r),u=n.interpolate(s,o),a=500,f=n.timer(function(e){i.html(t(u(e/a))),e>a&&(i.html(t(o)),f.stop())})}}function R(e){var t=I(e);return isNaN(t.margin)?"-":W(t.id)+" +"+(100*t.margin).toFixed(1)}function U(e){var n=t.chain(e).pairs().map(function(e){return{id:e[0],value:t.isArray(e[1])?e[1][0]:e[1]}}).sortBy("value").value().reverse();return n[0]}function z(e){if(!e._old)return"";var t=e.margin.margin*(e.margin.id!="democrat"?-1:1),n=e._old.margin.margin*(e._old.margin.id!="democrat"?-1:1);return t==n?"":t>n?"⬆︎":"⬇︎"}function W(e){return e}function X(e){return e}var e={},i={democrat:r.race=="president"?"Clinton":"Dem.",clintonh:"Clinton",republican:r.race=="president"?"Trump":"Rep.",trumpd:"Trump",mcmulline:"McMullin",reported:"Reported",model:innerWidth<600?"NYT est.":"NYT estimate"},s=u[r.type],l=n.select(this).classed("eln-forecast-time-series",!0),c=l.node().clientWidth,h=400,p={t:20,l:45,b:20,r:20},d=l.append("svg").attr("width",c).attr("height",h).st({overflow:"visible"}).append("g").translate([p.l,p.t]);c-=p.l+p.r,h-=p.t+p.b;var v=72e5,m=18e5,g=n.scaleTime().range([0,c]);window.__x=g;var y=n.scaleLinear().domain(s.range).range([h-5,5]),b=n.line().curve({e_votes:1,s_seats:1,h_seats:1}[r.type]?n.curveStepBefore:n.curveLinear).x(ƒ("time",g)),w=n.area().x(ƒ("time",g)).curve(n.curveStepBefore),E=d.append("rect.passed").attr("height",h).attr("width",1),S=d.append("g"),x=d.append("g.g-called").st({opacity:0});r.type=="win_prob"&&(x.append("path").at({d:"M0,0v"+h,stroke:"#000"}),x.append("text.g-endpoint-label").at({y:h/3,x:10}).text("Race Called"));var T,N,C=k(),L=l.select("svg").insert("defs","g"),A="cp-"+Math.round(1e10*Math.random());L.append("clipPath#"+A).append("rect").attr("width",c).attr("height",h);if(r.type!="vote_margin"){if(r.type=="e_votes"||!0)N=d.appendMany(C,"g"),N.attr("class",function(e){return"eg eg-"+e}),N.append("path").attr("class",function(e){return"se1-area line-"+(f[e]||e)}),N.append("path").attr("class",function(e){return"se2-area line-"+(f[e]||e)});T=d.appendMany(C,"g"),T.attr("class",function(e){return"lg-"+e}),T.append("path.line.line-halo"),T.append("path").attr("class",function(e){return"line line-"+(f[e]||e)})}else{var O=L.append("pattern#ts_vote_margin_stroke").attr("patternUnits","userSpaceOnUse").attr("width",c).attr("height",h).attr("viewBox",[0,0,c,h].join(" ")),M=O.append("rect.dem").attr("width",c).attr("height",h*.5).attr("y",0),D=O.append("rect.rep").attr("width",c).attr("height",h*.5).attr("y",h*.5);N=d.appendMany(["model"],"g"),N.attr("class",function(e){return"eg eg-"+e}).style("fill","url(#ts_vote_margin_stroke)"),N.append("path").attr("class",function(e){return"se1-area line-"+e}),N.append("path").attr("class",function(e){return"se2-area line-"+e}),T=d.appendMany(C,"g"),T.append("path.line.line-halo"),T.append("path").attr("class",function(e){return"line line-"+e})}N.attr("clip-path","url(#"+A+")"),T.append("text").attr("class",function(e){return"g-endpoint-label lbl-"+(f[e]||e)});var P=d.selectAll("path.line"),H=d.selectAll("path.se1-area"),B=d.selectAll("path.se2-area"),j={updateData:function(e,u,f){function z(){U.forEach(function(e,t){var n=U[t+1];if(!n)return;var r=n.y+n.o-(e.y+e.o);r<20&&(e.o--,n.o++)}),U.forEach(function(e,t){e.o=Math.min(h-e.y-10,e.o),e.o=Math.max(-e.y+10,e.o)})}function J(e){return R[e]?a[r.type]==="win_prob"?R[e]:r.type=="vote_margin"?R[e]:R[e][2]:0}isMobile=innerWidth<600;var l=r.race+(r.state?"-"+r.state:"");if(!e[l]||!e[l].timeseries){console.log("no data",l,e);return}r.race=="senate"&&r.state&&(i.democrat=t.findWhere(e[l].regions.candidates,{candidate_key:u}).last_name,i.republican=t.findWhere(e[l].regions.candidates,{candidate_key:f}).last_name);var p=F(e[l].timeseries,u,f),N=[],k=p.map(ƒ("time")),L=t.last(k),A=t.last(p);r.type=="vote_margin"&&p.forEach(function(e,n){e.value.model=t.isArray(e.value[u])?e.value[u][2]-e.value[f][2]:NaN,e.value.model_area=[e.value[u][4]-e.value[f][0],e.value[u][3]-e.value[f][1],e.value[u][2]-e.value[f][2],e.value[u][1]-e.value[f][3],e.value[u][0]-e.value[f][4]],e.src.winner&&e.src.winner.winner&&(e.value.model_area=e.value.model_area.map(function(t){return e.src.winner.party_id=="republican"?Math.min(0,t):Math.max(0,t)})),e.value.reported=e.value2[u]-e.value2[f]}),p.forEach(function(e){C.forEach(function(n){r.type=="vote_margin"?N.push(e.value[n]):N=N.concat(t.isArray(e.value[n])?e.value[n]:[e.value[n]])})});var O=n.max(k).getTime(),I=new Date(n.max(k).getTime()+m);k.push(new Date(n.min(k).getTime()+v)),k.push(I),g.domain(n.extent(k)),y.domain(n.extent(N.concat(s.range))),r.type=="vote_margin"&&(M.attr("height",y(0)),D.attr("height",h-y(0)).attr("y",y(0)));var q=0;while(c-g(O)<(isMobile?75:120)&&q++<110)I=new Date(I.getTime()+m/10),g.domain(n.extent(k.concat(I)));P.transition().attr("d",function(e){var n=function(n){var r=n.value[e];return y(t.isArray(r)?r[2]:r)};return b.y(n).defined(function(e){return!isNaN(n(e))}),b(p)}),r.type!="win_prob"&&(H.attr("d",function(e){e=="model"&&(e="model_area");var t=function(t){var n=t.value[e];return!n||!n.length?console.log("missing ",e,t):Math.min(h,y(n[1]))},n=function(t){var n=t.value[e];return!n||!n.length?console.log("missing ",e,t):Math.max(0,y(n[3]))};return w.y0(t).y1(n).defined(function(e){return!isNaN(t(e))}),w(p)}),B.attr("d",function(e){e=="model"&&(e="model_area");var t=function(t){var n=t.value[e];return!n||!n.length?console.log("missing ",e,t):Math.min(h,y(n[0]))},n=function(t){var n=t.value[e];return!n||!n.length?console.log("missing ",e,t):Math.max(0,y(n[4]))};return w.y0(t).y1(n).defined(function(e){return!isNaN(t(e))}),w(p)}));var R=A.src[a[r.type]],U=[];T.select("text").translate(function(e){var n=A.src[a[r.type]],i=[0,0];return n[e]!==undefined&&(i=[g(A.time)+5,y(t.isArray(n[e])?n[e][2]:n[e])]),i[0]=i[0]||0,i[1]=i[1]||0,U.push({y:i[1],o:0,id:e}),i}).text(function(e){var n=A.src[a[r.type]];return t.isArray(n[e])||!isNaN(n[e])?s.fmt(t.isArray(n[e])?n[e][2]:n[e])+" "+(i[e]||e):""}),U=t.sortBy(U,ƒ("y")),n.range(20).forEach(z),T.select("text").attr("y",function(e){return t.findWhere(U,{id:e}).o}),r.type=="vote_margin"&&T.select("text").attr("class",function(e){var t=A.src[a[r.type]];return"g-endpoint-label lbl-"+(t[e]>0?"democrat":"republican")}),E.transition().attr("width",Math.max(10,g(L)));var W=S.selectAll("g.y-grid").data(t.uniq(y.ticks(5).concat([s.threshold])),ƒ());W.exit().remove();var X=W.enter().append("g.y-grid");X.append("text").translate([-5,0]).text(s.fmt2||s.fmt||t.identity),X.append("line.elapsed-line").attr("x2",1).classed("threshold",function(e){return e==s.threshold}),X.append("line.future-line").attr("x1",c-1).attr("x2",c).classed("threshold",function(e){return e==s.threshold}),W=X.merge(W),W.translate(function(e){return[0,y(e)]}),W.selectAll(".elapsed-line").transition().attr("x2",g(L)),W.selectAll(".future-line").transition().attr("x1",g(L));var V=d.selectAll("g.x-grid").data(g.ticks(isMobile?5:10),n.isoFormat);V.exit().remove();var $=V.enter().append("g.x-grid").attr("transform",function(e){return"translate("+[g(e),0]+")"});$.append("text").translate([0,h]).attr("dy",8).text(o.time),$.append("line").translate([0,h]).attr("y2",5),$.merge(V).transition().attr("transform",function(e){return"translate("+[g(e),0]+")"});if(r.type=="win_prob"){var K=e[l].timeseries.filter(function(e){return e.winner&&e.winner.winner})[0],Q=t.last(e[l].timeseries).winner&&t.last(e[l].timeseries).winner.winner;K&&Q?x.translate([g(n.isoParse(K.timestamp)),0]).st({opacity:1}):x.st({opacity:0})}return j},reset:function(){l.html("")}};return j};return i.init=function(e){return r=e,i},i}}),define("forecast/widgets/county-map",["require","underscore/nyt","vendor/d3.v4+jetpack","moment/elections","map2016/map","vendor/p5"],function(e){function o(e,t,n){return typeof e=="function"?e(t,n):e}var t=e("underscore/nyt"),n=e("vendor/d3.v4+jetpack"),r=e("moment/elections"),i=e("map2016/map"),s=e("vendor/p5");return function(){var e="",t={},r=function(e,r){var s={},o=n.select(this).classed("eln-widget-county-map",!0),u=i.create(o.node(),{padding:10}),a={updateData:function(e){var r;t.state?r=[e[t.race+"-"+t.state].regions]:r=e[t.race].map;var s=i.calcMaxCountyMargin(r),o=n.max(r,function(e){return n.max(e.counties,function(e){var t=n.values(e.remaining).sort(n.descending);return t[0]-t[1]})}),f=Math.max(s,o);return u.display({races:r,vote_type:t.type,max_county_margin:f,map_type:t.state?"leader-bubbles":"leader-margin-bubbles"}),a},reset:function(){o.html("")}};return a};return r.init=function(e){return t=e,r},r}}),define("forecast/widgets/state-bars-table",["require","underscore/nyt","jquery/nyt","vendor/d3.v4+jetpack","moment/elections","vendor/p5","lib/helpers"],function(e){function a(e,t,n){return typeof e=="function"?e(t,n):e}var t=e("underscore/nyt"),n=e("jquery/nyt"),r=e("vendor/d3.v4+jetpack"),i=e("moment/elections"),s=e("vendor/p5"),o=e("lib/helpers"),u={pct:r.format(".0%"),comma:r.format(",")};return function(){var e="",n={},i=r.format(".1%"),s=function(e){return r.format(".1f")(e)+"%"},u=90,a=function(e,u){var a=r.select(this),f=a.select("table tbody");a.classed("g-hidden",["localhost","www.stg.nytimes.com"].indexOf(window.location.hostname)===-1);var l={updateData:function(e,u,a){var c=e[n.race+"-"+n.state],h=c.regions.votesRemain+c.regions.votes,p=c.regions.candidates.filter(function(e){return e.name_display&&e.data.length>0}),d=r.sum(p.map(function(e){return e.data[0].votesRemain})),v=c.regions.candidates.filter(function(e){return e.name_display&&e.data.length>0}).map(function(e){var t=e.votes+e.data[0].votesRemain;return{name:e.name_display,id:e.candidate_key,slug:o.slugify(n.race+" "+e.last_name+" "+e.first_name),party:e.party_id,est_total_cand_votes:t,overallPct:t/h,vote_counted_pct:c.current.vote_share_counted[e.candidate_key],estTotPoints:c.current.vote_share_expected[e.candidate_key][2]*100,votesCounted:e.votes,votes_remain_pct:e.data[0].votesRemainPoints}}).sort(r.descendingKey(function(e){return e.est_total_cand_votes})),m={};v.forEach(function(e){m[e.id]=e,e.updated=!0});var g=f.selectAll(".g-devmode-row").data();g.forEach(function(e){e.updated=!1;var n=m[e.id];n&&(n.inOldData=!0),t.extend(e,m[e.id]||{})});var y=g.filter(ƒ("updated")).concat(v.filter(function(e){return!e.inOldData})),b=f.selectAll(".g-devmode-row").data(y,ƒ("id"));b.exit().remove();var w=b.enter().append("tr").attr("class",function(e){return"g-devmode-row g-"+e.party});w.append("td.g-devmode-name"),w.append("td.g-devmode-counted.g-devmode-num"),w.append("td.g-devmode-counted-pct.g-devmode-num"),w.append("td.g-devmode-remaining.g-devmode-num"),w.append("td.g-devmode-remaining-pct.g-devmode-num"),w.append("td.g-devmode-total-estimate-votes.g-devmode-num"),w.append("td.g-devmode-total-pct.g-devmode-num");var E=w.merge(b);return E.selectAll("td.g-devmode-name").text(ƒ("name")),E.selectAll(".g-devmode-counted").text(ƒ("votesCounted",r.format(","))),E.selectAll(".g-devmode-remaining-pct").text(ƒ("votes_remain_pct",s)),E.selectAll(".g-devmode-counted-pct").text(ƒ("vote_counted_pct",i)),E.selectAll("td.g-devmode-remaining").text(function(e){return r.format(",")(e.est_total_cand_votes-e.votesCounted)}),E.selectAll(".g-devmode-total-pct").text(ƒ("estTotPoints",s)),E.selectAll("td.g-devmode-total-estimate-votes").text(ƒ("est_total_cand_votes",r.format(","))),l},reset:function(){f.html("")}};return l};return a.init=function(e){return n=e,a},a}}),define("forecast/widgets",["require","./widgets/gauge","./widgets/number","./widgets/bars","./widgets/histogram","./widgets/figures","./widgets/outcomes","./widgets/turnout","./widgets/state-table","./widgets/time-series","./widgets/county-map","./widgets/state-bars-table"],function(e){return{gauge:e("./widgets/gauge"),number:e("./widgets/number"),bars:e("./widgets/bars"),histogram:e("./widgets/histogram"),figures:e("./widgets/figures"),outcomes:e("./widgets/outcomes"),turnout:e("./widgets/turnout"),"state-table":e("./widgets/state-table"),"time-series":e("./widgets/time-series"),"county-map":e("./widgets/county-map"),"state-bars-table":e("./widgets/state-bars-table")}}),define("forecast/main",["require","vendor/d3.v4+jetpack","jquery/nyt","underscore/nyt","moment/elections","lib/helpers","./widgets"],function(e){function v(){t.selectAll(".eln-forecast-widget").each(function(){var e=t.select(this),n=this.dataset,r=n.widget,i=o[r];n.state=="false"&&(n.state=!1);if(!i)return console.warn("unknown widget type:",r);try{var s=i().init(n).apply(this);s.id=r,s.config=n,a&&a.president&&a.president.current&&(s.candidates=m(n,a),s.updateData(a,s.candidates.dem,s.candidates.rep)),u.push(s)}catch(f){console.warn("widget error",r,n,f)}})}function m(e,t){var n={dem:"democrat",rep:"republican"};return e.race=="president"&&(n={dem:"clintonh",rep:"trumpd"}),e.race=="senate"&&e.state&&t["senate-"+e.state]&&t["senate-"+e.state].regions.candidates.forEach(function(e){e.party_id=="democrat"&&(n.dem=e.candidate_key),e.party_id=="republican"&&(n.rep=e.candidate_key)}),n}function g(){u.forEach(function(e){e.reset?e.reset():console.error("widget has no reset",e)}),u.length=0}function y(e,n,r){t.json(c+(window.FORECAST_VERSION?"?version="+window.FORECAST_VERSION:""),function(e,t){h&&setTimeout(y,15e3);if(!t)return console.error("new_data empty",e);var n=t.president.current.timestamp;if(n==p)return;p=t.president.current.timestamp,a=t,u.forEach(function(e){e.candidates=m(e.config,a);try{e.updateData(a,e.candidates.dem,e.candidates.rep)}catch(t){throw t}})})}if(!eln_forecast_feed)return!1;window.eln_forecast_flip=1;var t=e("vendor/d3.v4+jetpack"),n=e("jquery/nyt"),r=e("underscore/nyt"),i=e("moment/elections"),s=e("lib/helpers"),o=e("./widgets"),u=[],a=eln_forecast_data,f=t.select("#eln-election-page"),l=f.node().clientWidth,c=eln_forecast_feed,h=!0,p=null,d=t.select(".eln-forecast.eln-timestamp");localStorage.getItem("forecast_show")&&document.body.classList.contains("forecast-hide-numbers")&&(document.body.classList.remove("forecast-hide-numbers"),document.body.classList.add("forecast-hide-numbers-on")),t.select(".eln-forecast-state-nav-selector").on("change",function(){window.location.href="http://www.nytimes.com/elections/forecast/"+this.value}),v(),n(window).resize(r.debounce(function(){var e=f.node().clientWidth;e!=l&&(l=e,g(),v())},1e3)),setTimeout(y,5e3)}),define("vendor/newsletter-signup",["jquery/nyt","underscore/nyt","foundation/models/user-data","foundation/tracking/tracking-mixin","templates"],function(e,t,n,r,i){var s={productInfo:[morningBriefing={title:"Morning Briefing",description:"News to start your day",image:"https://a1.nyt.com/assets/newsletters/latest/images/newsletters/thumb_nails/the-nyt-now-morning-briefing.png",productCode:"NN",checked:!0},opinion={title:"Opinion Today",description:"Daily commentary",image:"https://a1.nyt.com/assets/newsletters/latest/images/newsletters/thumb_nails/opinion-today.jpg",productCode:"TY",checked:!1},cooking={title:"Cooking",description:"Delicious recipes",image:"https://a1.nyt.com/assets/newsletters/latest/images/newsletters/thumb_nails/cooking.jpg",productCode:"CK",checked:!1}],initialize:function(){this.$el=e("#newsletter-buffet-widget"),s.generateHtml(),e(document).on("click","#newsletter-buffet-widget .email .sign-up",function(e){e.preventDefault(),s.validateEmail()}),e(document).on("click","#newsletter-buffet-widget .email .inactive",function(e){e.preventDefault()}),e(document).on("click","#newsletter-buffet-widget .registered .inactive",function(e){e.preventDefault()}),e(document).on("click","#newsletter-buffet-widget .registered .sign-up",function(e){e.preventDefault(),s.gatherProductCodes()}),e("input:checkbox").change(function(){var e=0;s.$el.find("input:checkbox.newsletter-checkbox").each(function(){this.checked&&e++}),e<1?(s.$el.find(".email button").addClass("inactive"),s.$el.find(".email button").removeClass("sign-up"),s.$el.find(".registered button").removeClass("sign-up"),s.$el.find(".registered button").addClass("inactive")):(s.$el.find(".email button.inactive").removeClass("inactive").addClass("sign-up"),s.$el.find(".registered button.inactive").removeClass("inactive").addClass("sign-up"))})},debouncedScroll:function(){return t.debounce(s.trackElement())},generateHtml:function(){e(".newsletters").html(i.newsletter({productInfo:this.productInfo})),n.ready(function(){s.handleUserReady()})},trackImpression:function(){var e="impression";n&&n.isLoggedIn()&&this.subscribedNewsletters.length>0?e="impression-registered+"+this.subscribedNewsletters.join("+"):n&&n.isLoggedIn()?e="impression-registered;":e="impression",setTimeout(function(){s.tracking.trackingTriggerRaw("newsletter-buffet",{module:"results-buffet",action:e},"interaction")},1e3)},handleUserReady:function(){this.subscribedNewsletters=[],n.isLoggedIn()&&(this.$el.find(".email").addClass("hidden"),this.$el.find(".registered").removeClass("hidden"),this.$el.find(".newsletters").addClass("subscribed"),t.each(this.productInfo,function(t){e.inArray(t.productCode,n.getEmailSubscriptions())>-1&&(e(s.$el.find("#checkbox-"+t.productCode)[0]).prop("checked",!0).prop("disabled",!0),e(s.$el.find(".subscribed-"+t.productCode)[0]).removeClass("hidden"),e(s.$el.find(".description-"+t.productCode)[0]).addClass("hidden"),e(s.$el.find(".title-"+t.productCode)[0]).addClass("inactive"),e(s.$el.find(".newsletter-"+t.productCode)[0]).addClass("inactive"),e(s.$el.find(".custom-checked-"+t.productCode)[0]).attr("class","inactive custom-checked"),s.subscribedNewsletters.push(t.productCode))})),this.subscribedNewsletters.length!==this.productInfo.length&&(e(".nythp-newsletter-buffet-email-promo").removeClass("hidden"),this.trackImpression())},validateEmail:function(){var e=new RegExp(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,6})$/i),t=this.$el.find(".invalid-email-error"),e=new RegExp(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,6})$/i),t=this.$el.find(".invalid-email-error");this.emailAddress=this.$el.find(".email-input").val(),this.emailAddress.length===0||!e.test(this.emailAddress)?(this.$el.find(".email-input").addClass("email-error"),t.removeClass("hidden")):this.gatherProductCodes()},gatherProductCodes:function(){var t=[];e("#newsletter-buffet-widget .form-errors .error").each(function(){e(this).not("hidden")&&e(this).addClass("hidden")}),this.$el.find("input:checkbox.newsletter-checkbox").each(function(){this.checked&&(n.isLoggedIn()?e.inArray(e(this).val(),n.getEmailSubscriptions())===-1&&t.push(e(this).val()):t.push(e(this).val()))});if(t.length>0){var r=t.join("+");this.tracking.trackingTriggerRaw("newsletter-buffet",{module:"hp-buffet",action:"click",eventName:"sign-up-"+r},"interaction"),this.postForm(t).done(function(){n.isLoggedIn()?(s.$el.find(".registered").addClass("hidden"),s.$el.find(".success").removeClass("hidden").addClass("signed-in")):(s.$el.find(".email").addClass("hidden"),s.$el.find(".success").removeClass("hidden"))}).fail(function(){s.$el.find(".submit-error").removeClass("hidden")})}else this.$el.find(".buffet-error").removeClass("hidden")},postForm:function(t){var r={product_codes:t,auth_token:"ByWeE-R9MfPXEdeksakyylmrv0hG3AbMSPGCvIeNPn8_gRaAkb3WcegJ9CeeElbTvLrW3zzhL6bMBrNnEYuGDA"};if(!n||!n.isLoggedIn())r.email=this.emailAddress;return e.ajax("https://email-subscriber.pub.prd.newsdev.nytimes.com/email-subscriber/subscribe",{method:"POST",contentType:"application/json",data:JSON.stringify(r),xhrFields:{withCredentials:!0}})}};s.tracking=r,s.initialize()}),require(["jquery/nyt","shared/sharetools/views/share-tools-container","ads","masthead","general-state-results","general-branch-results","results-article-page","auth/mtr","foundation/main","forecast/main","vendor/newsletter-signup"],function(e,t){var n=e(".eln-nav-share");new t({el:e(".eln-nav-share")}),n.find(".facebook-sharetool .icon.sprite-icon").addClass("eln-sprite eln-icon-facebook").parent().append('<i class="eln-sprite eln-hover eln-icon-facebook-blue"></i>'),n.find(".twitter-sharetool .icon.sprite-icon").addClass("eln-sprite eln-icon-twitter").parent().append('<i class="eln-sprite eln-hover eln-icon-twitter-blue"></i>'),e(".eln-bar1-ad").click(function(){etagx.track("Navigation | Interactive","Click | Subscribe",e(this).text(),!1)})}),define("general-main",function(){});